var _p=f=>{throw TypeError(f)};var qu=(f,t,n)=>t.has(f)||_p("Cannot "+n);var Oi=(f,t,n)=>(qu(f,t,"read from private field"),n?n.call(f):t.get(f)),ha=(f,t,n)=>t.has(f)?_p("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(f):t.set(f,n),wr=(f,t,n,s)=>(qu(f,t,"write to private field"),s?s.call(f,n):t.set(f,n),n),eo=(f,t,n)=>(qu(f,t,"access private method"),n);var Ap=(f,t,n,s)=>({set _(r){wr(f,t,r,n)},get _(){return Oi(f,t,s)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();function Nm(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}function Mb(f){if(Object.prototype.hasOwnProperty.call(f,"__esModule"))return f;var t=f.default;if(typeof t=="function"){var n=function s(){var r=!1;try{r=this instanceof s}catch{}return r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(f).forEach(function(s){var r=Object.getOwnPropertyDescriptor(f,s);Object.defineProperty(n,s,r.get?r:{enumerable:!0,get:function(){return f[s]}})}),n}var Gu={exports:{}},Tr={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sp;function Db(){if(Sp)return Tr;Sp=1;var f=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(s,r,o){var c=null;if(o!==void 0&&(c=""+o),r.key!==void 0&&(c=""+r.key),"key"in r){o={};for(var u in r)u!=="key"&&(o[u]=r[u])}else o=r;return r=o.ref,{$$typeof:f,type:s,key:c,ref:r!==void 0?r:null,props:o}}return Tr.Fragment=t,Tr.jsx=n,Tr.jsxs=n,Tr}var Ep;function Ti(){return Ep||(Ep=1,Gu.exports=Db()),Gu.exports}var gt=Ti(),Vu={exports:{}},vt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wp;function Ob(){if(wp)return vt;wp=1;var f=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),y=Symbol.iterator;function v(x){return x===null||typeof x!="object"?null:(x=y&&x[y]||x["@@iterator"],typeof x=="function"?x:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,E={};function w(x,I,Q){this.props=x,this.context=I,this.refs=E,this.updater=Q||_}w.prototype.isReactComponent={},w.prototype.setState=function(x,I){if(typeof x!="object"&&typeof x!="function"&&x!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,x,I,"setState")},w.prototype.forceUpdate=function(x){this.updater.enqueueForceUpdate(this,x,"forceUpdate")};function T(){}T.prototype=w.prototype;function M(x,I,Q){this.props=x,this.context=I,this.refs=E,this.updater=Q||_}var C=M.prototype=new T;C.constructor=M,A(C,w.prototype),C.isPureReactComponent=!0;var O=Array.isArray,N={H:null,A:null,T:null,S:null,V:null},U=Object.prototype.hasOwnProperty;function q(x,I,Q,X,tt,ot){return Q=ot.ref,{$$typeof:f,type:x,key:I,ref:Q!==void 0?Q:null,props:ot}}function $(x,I){return q(x.type,I,void 0,void 0,void 0,x.props)}function B(x){return typeof x=="object"&&x!==null&&x.$$typeof===f}function Z(x){var I={"=":"=0",":":"=2"};return"$"+x.replace(/[=:]/g,function(Q){return I[Q]})}var W=/\/+/g;function J(x,I){return typeof x=="object"&&x!==null&&x.key!=null?Z(""+x.key):I.toString(36)}function it(){}function ht(x){switch(x.status){case"fulfilled":return x.value;case"rejected":throw x.reason;default:switch(typeof x.status=="string"?x.then(it,it):(x.status="pending",x.then(function(I){x.status==="pending"&&(x.status="fulfilled",x.value=I)},function(I){x.status==="pending"&&(x.status="rejected",x.reason=I)})),x.status){case"fulfilled":return x.value;case"rejected":throw x.reason}}throw x}function st(x,I,Q,X,tt){var ot=typeof x;(ot==="undefined"||ot==="boolean")&&(x=null);var et=!1;if(x===null)et=!0;else switch(ot){case"bigint":case"string":case"number":et=!0;break;case"object":switch(x.$$typeof){case f:case t:et=!0;break;case m:return et=x._init,st(et(x._payload),I,Q,X,tt)}}if(et)return tt=tt(x),et=X===""?"."+J(x,0):X,O(tt)?(Q="",et!=null&&(Q=et.replace(W,"$&/")+"/"),st(tt,I,Q,"",function(kt){return kt})):tt!=null&&(B(tt)&&(tt=$(tt,Q+(tt.key==null||x&&x.key===tt.key?"":(""+tt.key).replace(W,"$&/")+"/")+et)),I.push(tt)),1;et=0;var ct=X===""?".":X+":";if(O(x))for(var _t=0;_t<x.length;_t++)X=x[_t],ot=ct+J(X,_t),et+=st(X,I,Q,ot,tt);else if(_t=v(x),typeof _t=="function")for(x=_t.call(x),_t=0;!(X=x.next()).done;)X=X.value,ot=ct+J(X,_t++),et+=st(X,I,Q,ot,tt);else if(ot==="object"){if(typeof x.then=="function")return st(ht(x),I,Q,X,tt);throw I=String(x),Error("Objects are not valid as a React child (found: "+(I==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":I)+"). If you meant to render a collection of children, use an array instead.")}return et}function k(x,I,Q){if(x==null)return x;var X=[],tt=0;return st(x,X,"","",function(ot){return I.call(Q,ot,tt++)}),X}function P(x){if(x._status===-1){var I=x._result;I=I(),I.then(function(Q){(x._status===0||x._status===-1)&&(x._status=1,x._result=Q)},function(Q){(x._status===0||x._status===-1)&&(x._status=2,x._result=Q)}),x._status===-1&&(x._status=0,x._result=I)}if(x._status===1)return x._result.default;throw x._result}var Y=typeof reportError=="function"?reportError:function(x){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var I=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof x=="object"&&x!==null&&typeof x.message=="string"?String(x.message):String(x),error:x});if(!window.dispatchEvent(I))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",x);return}console.error(x)};function nt(){}return vt.Children={map:k,forEach:function(x,I,Q){k(x,function(){I.apply(this,arguments)},Q)},count:function(x){var I=0;return k(x,function(){I++}),I},toArray:function(x){return k(x,function(I){return I})||[]},only:function(x){if(!B(x))throw Error("React.Children.only expected to receive a single React element child.");return x}},vt.Component=w,vt.Fragment=n,vt.Profiler=r,vt.PureComponent=M,vt.StrictMode=s,vt.Suspense=d,vt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,vt.__COMPILER_RUNTIME={__proto__:null,c:function(x){return N.H.useMemoCache(x)}},vt.cache=function(x){return function(){return x.apply(null,arguments)}},vt.cloneElement=function(x,I,Q){if(x==null)throw Error("The argument must be a React element, but you passed "+x+".");var X=A({},x.props),tt=x.key,ot=void 0;if(I!=null)for(et in I.ref!==void 0&&(ot=void 0),I.key!==void 0&&(tt=""+I.key),I)!U.call(I,et)||et==="key"||et==="__self"||et==="__source"||et==="ref"&&I.ref===void 0||(X[et]=I[et]);var et=arguments.length-2;if(et===1)X.children=Q;else if(1<et){for(var ct=Array(et),_t=0;_t<et;_t++)ct[_t]=arguments[_t+2];X.children=ct}return q(x.type,tt,void 0,void 0,ot,X)},vt.createContext=function(x){return x={$$typeof:c,_currentValue:x,_currentValue2:x,_threadCount:0,Provider:null,Consumer:null},x.Provider=x,x.Consumer={$$typeof:o,_context:x},x},vt.createElement=function(x,I,Q){var X,tt={},ot=null;if(I!=null)for(X in I.key!==void 0&&(ot=""+I.key),I)U.call(I,X)&&X!=="key"&&X!=="__self"&&X!=="__source"&&(tt[X]=I[X]);var et=arguments.length-2;if(et===1)tt.children=Q;else if(1<et){for(var ct=Array(et),_t=0;_t<et;_t++)ct[_t]=arguments[_t+2];tt.children=ct}if(x&&x.defaultProps)for(X in et=x.defaultProps,et)tt[X]===void 0&&(tt[X]=et[X]);return q(x,ot,void 0,void 0,null,tt)},vt.createRef=function(){return{current:null}},vt.forwardRef=function(x){return{$$typeof:u,render:x}},vt.isValidElement=B,vt.lazy=function(x){return{$$typeof:m,_payload:{_status:-1,_result:x},_init:P}},vt.memo=function(x,I){return{$$typeof:g,type:x,compare:I===void 0?null:I}},vt.startTransition=function(x){var I=N.T,Q={};N.T=Q;try{var X=x(),tt=N.S;tt!==null&&tt(Q,X),typeof X=="object"&&X!==null&&typeof X.then=="function"&&X.then(nt,Y)}catch(ot){Y(ot)}finally{N.T=I}},vt.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},vt.use=function(x){return N.H.use(x)},vt.useActionState=function(x,I,Q){return N.H.useActionState(x,I,Q)},vt.useCallback=function(x,I){return N.H.useCallback(x,I)},vt.useContext=function(x){return N.H.useContext(x)},vt.useDebugValue=function(){},vt.useDeferredValue=function(x,I){return N.H.useDeferredValue(x,I)},vt.useEffect=function(x,I,Q){var X=N.H;if(typeof Q=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return X.useEffect(x,I)},vt.useId=function(){return N.H.useId()},vt.useImperativeHandle=function(x,I,Q){return N.H.useImperativeHandle(x,I,Q)},vt.useInsertionEffect=function(x,I){return N.H.useInsertionEffect(x,I)},vt.useLayoutEffect=function(x,I){return N.H.useLayoutEffect(x,I)},vt.useMemo=function(x,I){return N.H.useMemo(x,I)},vt.useOptimistic=function(x,I){return N.H.useOptimistic(x,I)},vt.useReducer=function(x,I,Q){return N.H.useReducer(x,I,Q)},vt.useRef=function(x){return N.H.useRef(x)},vt.useState=function(x){return N.H.useState(x)},vt.useSyncExternalStore=function(x,I,Q){return N.H.useSyncExternalStore(x,I,Q)},vt.useTransition=function(){return N.H.useTransition()},vt.version="19.1.1",vt}var Tp;function ce(){return Tp||(Tp=1,Vu.exports=Ob()),Vu.exports}var mh=ce();const io=Nm(mh);var Xu={exports:{}},xr={},Yu={exports:{}},Ku={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xp;function Lb(){return xp||(xp=1,function(f){function t(k,P){var Y=k.length;k.push(P);t:for(;0<Y;){var nt=Y-1>>>1,x=k[nt];if(0<r(x,P))k[nt]=P,k[Y]=x,Y=nt;else break t}}function n(k){return k.length===0?null:k[0]}function s(k){if(k.length===0)return null;var P=k[0],Y=k.pop();if(Y!==P){k[0]=Y;t:for(var nt=0,x=k.length,I=x>>>1;nt<I;){var Q=2*(nt+1)-1,X=k[Q],tt=Q+1,ot=k[tt];if(0>r(X,Y))tt<x&&0>r(ot,X)?(k[nt]=ot,k[tt]=Y,nt=tt):(k[nt]=X,k[Q]=Y,nt=Q);else if(tt<x&&0>r(ot,Y))k[nt]=ot,k[tt]=Y,nt=tt;else break t}}return P}function r(k,P){var Y=k.sortIndex-P.sortIndex;return Y!==0?Y:k.id-P.id}if(f.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;f.unstable_now=function(){return o.now()}}else{var c=Date,u=c.now();f.unstable_now=function(){return c.now()-u}}var d=[],g=[],m=1,y=null,v=3,_=!1,A=!1,E=!1,w=!1,T=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function O(k){for(var P=n(g);P!==null;){if(P.callback===null)s(g);else if(P.startTime<=k)s(g),P.sortIndex=P.expirationTime,t(d,P);else break;P=n(g)}}function N(k){if(E=!1,O(k),!A)if(n(d)!==null)A=!0,U||(U=!0,J());else{var P=n(g);P!==null&&st(N,P.startTime-k)}}var U=!1,q=-1,$=5,B=-1;function Z(){return w?!0:!(f.unstable_now()-B<$)}function W(){if(w=!1,U){var k=f.unstable_now();B=k;var P=!0;try{t:{A=!1,E&&(E=!1,M(q),q=-1),_=!0;var Y=v;try{e:{for(O(k),y=n(d);y!==null&&!(y.expirationTime>k&&Z());){var nt=y.callback;if(typeof nt=="function"){y.callback=null,v=y.priorityLevel;var x=nt(y.expirationTime<=k);if(k=f.unstable_now(),typeof x=="function"){y.callback=x,O(k),P=!0;break e}y===n(d)&&s(d),O(k)}else s(d);y=n(d)}if(y!==null)P=!0;else{var I=n(g);I!==null&&st(N,I.startTime-k),P=!1}}break t}finally{y=null,v=Y,_=!1}P=void 0}}finally{P?J():U=!1}}}var J;if(typeof C=="function")J=function(){C(W)};else if(typeof MessageChannel<"u"){var it=new MessageChannel,ht=it.port2;it.port1.onmessage=W,J=function(){ht.postMessage(null)}}else J=function(){T(W,0)};function st(k,P){q=T(function(){k(f.unstable_now())},P)}f.unstable_IdlePriority=5,f.unstable_ImmediatePriority=1,f.unstable_LowPriority=4,f.unstable_NormalPriority=3,f.unstable_Profiling=null,f.unstable_UserBlockingPriority=2,f.unstable_cancelCallback=function(k){k.callback=null},f.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<k?Math.floor(1e3/k):5},f.unstable_getCurrentPriorityLevel=function(){return v},f.unstable_next=function(k){switch(v){case 1:case 2:case 3:var P=3;break;default:P=v}var Y=v;v=P;try{return k()}finally{v=Y}},f.unstable_requestPaint=function(){w=!0},f.unstable_runWithPriority=function(k,P){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var Y=v;v=k;try{return P()}finally{v=Y}},f.unstable_scheduleCallback=function(k,P,Y){var nt=f.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?nt+Y:nt):Y=nt,k){case 1:var x=-1;break;case 2:x=250;break;case 5:x=1073741823;break;case 4:x=1e4;break;default:x=5e3}return x=Y+x,k={id:m++,callback:P,priorityLevel:k,startTime:Y,expirationTime:x,sortIndex:-1},Y>nt?(k.sortIndex=Y,t(g,k),n(d)===null&&k===n(g)&&(E?(M(q),q=-1):E=!0,st(N,Y-nt))):(k.sortIndex=x,t(d,k),A||_||(A=!0,U||(U=!0,J()))),k},f.unstable_shouldYield=Z,f.unstable_wrapCallback=function(k){var P=v;return function(){var Y=v;v=P;try{return k.apply(this,arguments)}finally{v=Y}}}}(Ku)),Ku}var Cp;function kb(){return Cp||(Cp=1,Yu.exports=Lb()),Yu.exports}var Wu={exports:{}},xe={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rp;function Nb(){if(Rp)return xe;Rp=1;var f=ce();function t(d){var g="https://react.dev/errors/"+d;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)g+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+d+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function o(d,g,m){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:y==null?null:""+y,children:d,containerInfo:g,implementation:m}}var c=f.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(d,g){if(d==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return xe.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,xe.createPortal=function(d,g){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(t(299));return o(d,g,null,m)},xe.flushSync=function(d){var g=c.T,m=s.p;try{if(c.T=null,s.p=2,d)return d()}finally{c.T=g,s.p=m,s.d.f()}},xe.preconnect=function(d,g){typeof d=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,s.d.C(d,g))},xe.prefetchDNS=function(d){typeof d=="string"&&s.d.D(d)},xe.preinit=function(d,g){if(typeof d=="string"&&g&&typeof g.as=="string"){var m=g.as,y=u(m,g.crossOrigin),v=typeof g.integrity=="string"?g.integrity:void 0,_=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;m==="style"?s.d.S(d,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:y,integrity:v,fetchPriority:_}):m==="script"&&s.d.X(d,{crossOrigin:y,integrity:v,fetchPriority:_,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},xe.preinitModule=function(d,g){if(typeof d=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var m=u(g.as,g.crossOrigin);s.d.M(d,{crossOrigin:m,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&s.d.M(d)},xe.preload=function(d,g){if(typeof d=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var m=g.as,y=u(m,g.crossOrigin);s.d.L(d,m,{crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},xe.preloadModule=function(d,g){if(typeof d=="string")if(g){var m=u(g.as,g.crossOrigin);s.d.m(d,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:m,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else s.d.m(d)},xe.requestFormReset=function(d){s.d.r(d)},xe.unstable_batchedUpdates=function(d,g){return d(g)},xe.useFormState=function(d,g,m){return c.H.useFormState(d,g,m)},xe.useFormStatus=function(){return c.H.useHostTransitionStatus()},xe.version="19.1.1",xe}var Mp;function Pb(){if(Mp)return Wu.exports;Mp=1;function f(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(f)}catch(t){console.error(t)}}return f(),Wu.exports=Nb(),Wu.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dp;function Fb(){if(Dp)return xr;Dp=1;var f=kb(),t=ce(),n=Pb();function s(e){var i="https://react.dev/errors/"+e;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function o(e){var i=e,a=e;if(e.alternate)for(;i.return;)i=i.return;else{e=i;do i=e,(i.flags&4098)!==0&&(a=i.return),e=i.return;while(e)}return i.tag===3?a:null}function c(e){if(e.tag===13){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function u(e){if(o(e)!==e)throw Error(s(188))}function d(e){var i=e.alternate;if(!i){if(i=o(e),i===null)throw Error(s(188));return i!==e?null:e}for(var a=e,l=i;;){var h=a.return;if(h===null)break;var p=h.alternate;if(p===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===p.child){for(p=h.child;p;){if(p===a)return u(h),e;if(p===l)return u(h),i;p=p.sibling}throw Error(s(188))}if(a.return!==l.return)a=h,l=p;else{for(var b=!1,S=h.child;S;){if(S===a){b=!0,a=h,l=p;break}if(S===l){b=!0,l=h,a=p;break}S=S.sibling}if(!b){for(S=p.child;S;){if(S===a){b=!0,a=p,l=h;break}if(S===l){b=!0,l=p,a=h;break}S=S.sibling}if(!b)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?e:i}function g(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e;for(e=e.child;e!==null;){if(i=g(e),i!==null)return i;e=e.sibling}return null}var m=Object.assign,y=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),M=Symbol.for("react.consumer"),C=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),U=Symbol.for("react.suspense_list"),q=Symbol.for("react.memo"),$=Symbol.for("react.lazy"),B=Symbol.for("react.activity"),Z=Symbol.for("react.memo_cache_sentinel"),W=Symbol.iterator;function J(e){return e===null||typeof e!="object"?null:(e=W&&e[W]||e["@@iterator"],typeof e=="function"?e:null)}var it=Symbol.for("react.client.reference");function ht(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===it?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case A:return"Fragment";case w:return"Profiler";case E:return"StrictMode";case N:return"Suspense";case U:return"SuspenseList";case B:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case _:return"Portal";case C:return(e.displayName||"Context")+".Provider";case M:return(e._context.displayName||"Context")+".Consumer";case O:var i=e.render;return e=e.displayName,e||(e=i.displayName||i.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case q:return i=e.displayName||null,i!==null?i:ht(e.type)||"Memo";case $:i=e._payload,e=e._init;try{return ht(e(i))}catch{}}return null}var st=Array.isArray,k=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,P=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y={pending:!1,data:null,method:null,action:null},nt=[],x=-1;function I(e){return{current:e}}function Q(e){0>x||(e.current=nt[x],nt[x]=null,x--)}function X(e,i){x++,nt[x]=e.current,e.current=i}var tt=I(null),ot=I(null),et=I(null),ct=I(null);function _t(e,i){switch(X(et,i),X(ot,e),X(tt,null),i.nodeType){case 9:case 11:e=(e=i.documentElement)&&(e=e.namespaceURI)?Kg(e):0;break;default:if(e=i.tagName,i=i.namespaceURI)i=Kg(i),e=Wg(i,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}Q(tt),X(tt,e)}function kt(){Q(tt),Q(ot),Q(et)}function Ye(e){e.memoizedState!==null&&X(ct,e);var i=tt.current,a=Wg(i,e.type);i!==a&&(X(ot,e),X(tt,a))}function Ke(e){ot.current===e&&(Q(tt),Q(ot)),ct.current===e&&(Q(ct),br._currentValue=Y)}var He=Object.prototype.hasOwnProperty,Ni=f.unstable_scheduleCallback,Le=f.unstable_cancelCallback,ue=f.unstable_shouldYield,xi=f.unstable_requestPaint,Kt=f.unstable_now,Pi=f.unstable_getCurrentPriorityLevel,ie=f.unstable_ImmediatePriority,Ki=f.unstable_UserBlockingPriority,We=f.unstable_NormalPriority,Ci=f.unstable_LowPriority,Fi=f.unstable_IdlePriority,ji=f.log,vn=f.unstable_setDisableYieldValue,ai=null,he=null;function ri(e){if(typeof ji=="function"&&vn(e),he&&typeof he.setStrictMode=="function")try{he.setStrictMode(ai,e)}catch{}}var Vt=Math.clz32?Math.clz32:bn,Ut=Math.log,$n=Math.LN2;function bn(e){return e>>>=0,e===0?32:31-(Ut(e)/$n|0)|0}var de=256,ke=4194304;function Se(e){var i=e&42;if(i!==0)return i;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function fe(e,i,a){var l=e.pendingLanes;if(l===0)return 0;var h=0,p=e.suspendedLanes,b=e.pingedLanes;e=e.warmLanes;var S=l&134217727;return S!==0?(l=S&~p,l!==0?h=Se(l):(b&=S,b!==0?h=Se(b):a||(a=S&~e,a!==0&&(h=Se(a))))):(S=l&~p,S!==0?h=Se(S):b!==0?h=Se(b):a||(a=l&~e,a!==0&&(h=Se(a)))),h===0?0:i!==0&&i!==h&&(i&p)===0&&(p=h&-h,a=i&-i,p>=a||p===32&&(a&4194048)!==0)?i:h}function Wi(e,i){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&i)===0}function ne(e,i){switch(e){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ee(){var e=de;return de<<=1,(de&4194048)===0&&(de=256),e}function ze(){var e=ke;return ke<<=1,(ke&62914560)===0&&(ke=4194304),e}function Ne(e){for(var i=[],a=0;31>a;a++)i.push(e);return i}function li(e,i){e.pendingLanes|=i,i!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Qn(e,i,a,l,h,p){var b=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var S=e.entanglements,R=e.expirationTimes,j=e.hiddenUpdates;for(a=b&~a;0<a;){var G=31-Vt(a),K=1<<G;S[G]=0,R[G]=-1;var H=j[G];if(H!==null)for(j[G]=null,G=0;G<H.length;G++){var z=H[G];z!==null&&(z.lane&=-536870913)}a&=~K}l!==0&&qr(e,l,0),p!==0&&h===0&&e.tag!==0&&(e.suspendedLanes|=p&~(b&~i))}function qr(e,i,a){e.pendingLanes|=i,e.suspendedLanes&=~i;var l=31-Vt(i);e.entangledLanes|=i,e.entanglements[l]=e.entanglements[l]|1073741824|a&4194090}function Gr(e,i){var a=e.entangledLanes|=i;for(e=e.entanglements;a;){var l=31-Vt(a),h=1<<l;h&i|e[l]&i&&(e[l]|=i),a&=~h}}function Ma(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Hi(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Zn(){var e=P.p;return e!==0?e:(e=window.event,e===void 0?32:gp(e.type))}function Ts(e,i){var a=P.p;try{return P.p=e,i()}finally{P.p=a}}var oi=Math.random().toString(36).slice(2),we="__reactFiber$"+oi,Ue="__reactProps$"+oi,xs="__reactContainer$"+oi,Po="__reactEvents$"+oi,by="__reactListeners$"+oi,_y="__reactHandles$"+oi,Ph="__reactResources$"+oi,Da="__reactMarker$"+oi;function Fo(e){delete e[we],delete e[Ue],delete e[Po],delete e[by],delete e[_y]}function Cs(e){var i=e[we];if(i)return i;for(var a=e.parentNode;a;){if(i=a[xs]||a[we]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(e=Jg(e);e!==null;){if(a=e[we])return a;e=Jg(e)}return i}e=a,a=e.parentNode}return null}function Rs(e){if(e=e[we]||e[xs]){var i=e.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return e}return null}function Oa(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e.stateNode;throw Error(s(33))}function Ms(e){var i=e[Ph];return i||(i=e[Ph]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function ge(e){e[Da]=!0}var Fh=new Set,jh={};function Jn(e,i){Ds(e,i),Ds(e+"Capture",i)}function Ds(e,i){for(jh[e]=i,e=0;e<i.length;e++)Fh.add(i[e])}var Ay=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Hh={},zh={};function Sy(e){return He.call(zh,e)?!0:He.call(Hh,e)?!1:Ay.test(e)?zh[e]=!0:(Hh[e]=!0,!1)}function Vr(e,i,a){if(Sy(i))if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(i);return}}e.setAttribute(i,""+a)}}function Xr(e,i,a){if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttribute(i,""+a)}}function $i(e,i,a,l){if(l===null)e.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(i,a,""+l)}}var jo,Uh;function Os(e){if(jo===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);jo=i&&i[1]||"",Uh=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+jo+e+Uh}var Ho=!1;function zo(e,i){if(!e||Ho)return"";Ho=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var K=function(){throw Error()};if(Object.defineProperty(K.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(K,[])}catch(z){var H=z}Reflect.construct(e,[],K)}else{try{K.call()}catch(z){H=z}e.call(K.prototype)}}else{try{throw Error()}catch(z){H=z}(K=e())&&typeof K.catch=="function"&&K.catch(function(){})}}catch(z){if(z&&H&&typeof z.stack=="string")return[z.stack,H.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=l.DetermineComponentFrameRoot(),b=p[0],S=p[1];if(b&&S){var R=b.split(`
`),j=S.split(`
`);for(h=l=0;l<R.length&&!R[l].includes("DetermineComponentFrameRoot");)l++;for(;h<j.length&&!j[h].includes("DetermineComponentFrameRoot");)h++;if(l===R.length||h===j.length)for(l=R.length-1,h=j.length-1;1<=l&&0<=h&&R[l]!==j[h];)h--;for(;1<=l&&0<=h;l--,h--)if(R[l]!==j[h]){if(l!==1||h!==1)do if(l--,h--,0>h||R[l]!==j[h]){var G=`
`+R[l].replace(" at new "," at ");return e.displayName&&G.includes("<anonymous>")&&(G=G.replace("<anonymous>",e.displayName)),G}while(1<=l&&0<=h);break}}}finally{Ho=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Os(a):""}function Ey(e){switch(e.tag){case 26:case 27:case 5:return Os(e.type);case 16:return Os("Lazy");case 13:return Os("Suspense");case 19:return Os("SuspenseList");case 0:case 15:return zo(e.type,!1);case 11:return zo(e.type.render,!1);case 1:return zo(e.type,!0);case 31:return Os("Activity");default:return""}}function Bh(e){try{var i="";do i+=Ey(e),e=e.return;while(e);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function ci(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ih(e){var i=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function wy(e){var i=Ih(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,i),l=""+e[i];if(!e.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,p=a.set;return Object.defineProperty(e,i,{configurable:!0,get:function(){return h.call(this)},set:function(b){l=""+b,p.call(this,b)}}),Object.defineProperty(e,i,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(b){l=""+b},stopTracking:function(){e._valueTracker=null,delete e[i]}}}}function Yr(e){e._valueTracker||(e._valueTracker=wy(e))}function qh(e){if(!e)return!1;var i=e._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return e&&(l=Ih(e)?e.checked?"true":"false":e.value),e=l,e!==a?(i.setValue(e),!0):!1}function Kr(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Ty=/[\n"\\]/g;function ui(e){return e.replace(Ty,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Uo(e,i,a,l,h,p,b,S){e.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?e.type=b:e.removeAttribute("type"),i!=null?b==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+ci(i)):e.value!==""+ci(i)&&(e.value=""+ci(i)):b!=="submit"&&b!=="reset"||e.removeAttribute("value"),i!=null?Bo(e,b,ci(i)):a!=null?Bo(e,b,ci(a)):l!=null&&e.removeAttribute("value"),h==null&&p!=null&&(e.defaultChecked=!!p),h!=null&&(e.checked=h&&typeof h!="function"&&typeof h!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?e.name=""+ci(S):e.removeAttribute("name")}function Gh(e,i,a,l,h,p,b,S){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(e.type=p),i!=null||a!=null){if(!(p!=="submit"&&p!=="reset"||i!=null))return;a=a!=null?""+ci(a):"",i=i!=null?""+ci(i):a,S||i===e.value||(e.value=i),e.defaultValue=i}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=S?e.checked:!!l,e.defaultChecked=!!l,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(e.name=b)}function Bo(e,i,a){i==="number"&&Kr(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Ls(e,i,a,l){if(e=e.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<e.length;a++)h=i.hasOwnProperty("$"+e[a].value),e[a].selected!==h&&(e[a].selected=h),h&&l&&(e[a].defaultSelected=!0)}else{for(a=""+ci(a),i=null,h=0;h<e.length;h++){if(e[h].value===a){e[h].selected=!0,l&&(e[h].defaultSelected=!0);return}i!==null||e[h].disabled||(i=e[h])}i!==null&&(i.selected=!0)}}function Vh(e,i,a){if(i!=null&&(i=""+ci(i),i!==e.value&&(e.value=i),a==null)){e.defaultValue!==i&&(e.defaultValue=i);return}e.defaultValue=a!=null?""+ci(a):""}function Xh(e,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(s(92));if(st(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=ci(i),e.defaultValue=a,l=e.textContent,l===a&&l!==""&&l!==null&&(e.value=l)}function ks(e,i){if(i){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=i;return}}e.textContent=i}var xy=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Yh(e,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="":l?e.setProperty(i,a):typeof a!="number"||a===0||xy.has(i)?i==="float"?e.cssFloat=a:e[i]=(""+a).trim():e[i]=a+"px"}function Kh(e,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(e=e.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var h in i)l=i[h],i.hasOwnProperty(h)&&a[h]!==l&&Yh(e,h,l)}else for(var p in i)i.hasOwnProperty(p)&&Yh(e,p,i[p])}function Io(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Cy=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ry=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Wr(e){return Ry.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var qo=null;function Go(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ns=null,Ps=null;function Wh(e){var i=Rs(e);if(i&&(e=i.stateNode)){var a=e[Ue]||null;t:switch(e=i.stateNode,i.type){case"input":if(Uo(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+ui(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==e&&l.form===e.form){var h=l[Ue]||null;if(!h)throw Error(s(90));Uo(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===e.form&&qh(l)}break t;case"textarea":Vh(e,a.value,a.defaultValue);break t;case"select":i=a.value,i!=null&&Ls(e,!!a.multiple,i,!1)}}}var Vo=!1;function $h(e,i,a){if(Vo)return e(i,a);Vo=!0;try{var l=e(i);return l}finally{if(Vo=!1,(Ns!==null||Ps!==null)&&(Nl(),Ns&&(i=Ns,e=Ps,Ps=Ns=null,Wh(i),e)))for(i=0;i<e.length;i++)Wh(e[i])}}function La(e,i){var a=e.stateNode;if(a===null)return null;var l=a[Ue]||null;if(l===null)return null;a=l[i];t:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break t;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var Qi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xo=!1;if(Qi)try{var ka={};Object.defineProperty(ka,"passive",{get:function(){Xo=!0}}),window.addEventListener("test",ka,ka),window.removeEventListener("test",ka,ka)}catch{Xo=!1}var _n=null,Yo=null,$r=null;function Qh(){if($r)return $r;var e,i=Yo,a=i.length,l,h="value"in _n?_n.value:_n.textContent,p=h.length;for(e=0;e<a&&i[e]===h[e];e++);var b=a-e;for(l=1;l<=b&&i[a-l]===h[p-l];l++);return $r=h.slice(e,1<l?1-l:void 0)}function Qr(e){var i=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&i===13&&(e=13)):e=i,e===10&&(e=13),32<=e||e===13?e:0}function Zr(){return!0}function Zh(){return!1}function Be(e){function i(a,l,h,p,b){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=p,this.target=b,this.currentTarget=null;for(var S in e)e.hasOwnProperty(S)&&(a=e[S],this[S]=a?a(p):p[S]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Zr:Zh,this.isPropagationStopped=Zh,this}return m(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Zr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Zr)},persist:function(){},isPersistent:Zr}),i}var ts={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Jr=Be(ts),Na=m({},ts,{view:0,detail:0}),My=Be(Na),Ko,Wo,Pa,tl=m({},Na,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qo,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Pa&&(Pa&&e.type==="mousemove"?(Ko=e.screenX-Pa.screenX,Wo=e.screenY-Pa.screenY):Wo=Ko=0,Pa=e),Ko)},movementY:function(e){return"movementY"in e?e.movementY:Wo}}),Jh=Be(tl),Dy=m({},tl,{dataTransfer:0}),Oy=Be(Dy),Ly=m({},Na,{relatedTarget:0}),$o=Be(Ly),ky=m({},ts,{animationName:0,elapsedTime:0,pseudoElement:0}),Ny=Be(ky),Py=m({},ts,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Fy=Be(Py),jy=m({},ts,{data:0}),td=Be(jy),Hy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Uy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function By(e){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(e):(e=Uy[e])?!!i[e]:!1}function Qo(){return By}var Iy=m({},Na,{key:function(e){if(e.key){var i=Hy[e.key]||e.key;if(i!=="Unidentified")return i}return e.type==="keypress"?(e=Qr(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?zy[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qo,charCode:function(e){return e.type==="keypress"?Qr(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Qr(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),qy=Be(Iy),Gy=m({},tl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ed=Be(Gy),Vy=m({},Na,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qo}),Xy=Be(Vy),Yy=m({},ts,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ky=Be(Yy),Wy=m({},tl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),$y=Be(Wy),Qy=m({},ts,{newState:0,oldState:0}),Zy=Be(Qy),Jy=[9,13,27,32],Zo=Qi&&"CompositionEvent"in window,Fa=null;Qi&&"documentMode"in document&&(Fa=document.documentMode);var tv=Qi&&"TextEvent"in window&&!Fa,id=Qi&&(!Zo||Fa&&8<Fa&&11>=Fa),nd=" ",sd=!1;function ad(e,i){switch(e){case"keyup":return Jy.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Fs=!1;function ev(e,i){switch(e){case"compositionend":return rd(i);case"keypress":return i.which!==32?null:(sd=!0,nd);case"textInput":return e=i.data,e===nd&&sd?null:e;default:return null}}function iv(e,i){if(Fs)return e==="compositionend"||!Zo&&ad(e,i)?(e=Qh(),$r=Yo=_n=null,Fs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return id&&i.locale!=="ko"?null:i.data;default:return null}}var nv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ld(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i==="input"?!!nv[e.type]:i==="textarea"}function od(e,i,a,l){Ns?Ps?Ps.push(l):Ps=[l]:Ns=l,i=Ul(i,"onChange"),0<i.length&&(a=new Jr("onChange","change",null,a,l),e.push({event:a,listeners:i}))}var ja=null,Ha=null;function sv(e){qg(e,0)}function el(e){var i=Oa(e);if(qh(i))return e}function cd(e,i){if(e==="change")return i}var ud=!1;if(Qi){var Jo;if(Qi){var tc="oninput"in document;if(!tc){var hd=document.createElement("div");hd.setAttribute("oninput","return;"),tc=typeof hd.oninput=="function"}Jo=tc}else Jo=!1;ud=Jo&&(!document.documentMode||9<document.documentMode)}function dd(){ja&&(ja.detachEvent("onpropertychange",fd),Ha=ja=null)}function fd(e){if(e.propertyName==="value"&&el(Ha)){var i=[];od(i,Ha,e,Go(e)),$h(sv,i)}}function av(e,i,a){e==="focusin"?(dd(),ja=i,Ha=a,ja.attachEvent("onpropertychange",fd)):e==="focusout"&&dd()}function rv(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return el(Ha)}function lv(e,i){if(e==="click")return el(i)}function ov(e,i){if(e==="input"||e==="change")return el(i)}function cv(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}var $e=typeof Object.is=="function"?Object.is:cv;function za(e,i){if($e(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;var a=Object.keys(e),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!He.call(i,h)||!$e(e[h],i[h]))return!1}return!0}function gd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function pd(e,i){var a=gd(e);e=0;for(var l;a;){if(a.nodeType===3){if(l=e+a.textContent.length,e<=i&&l>=i)return{node:a,offset:i-e};e=l}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=gd(a)}}function md(e,i){return e&&i?e===i?!0:e&&e.nodeType===3?!1:i&&i.nodeType===3?md(e,i.parentNode):"contains"in e?e.contains(i):e.compareDocumentPosition?!!(e.compareDocumentPosition(i)&16):!1:!1}function yd(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var i=Kr(e.document);i instanceof e.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)e=i.contentWindow;else break;i=Kr(e.document)}return i}function ec(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i&&(i==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||i==="textarea"||e.contentEditable==="true")}var uv=Qi&&"documentMode"in document&&11>=document.documentMode,js=null,ic=null,Ua=null,nc=!1;function vd(e,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;nc||js==null||js!==Kr(l)||(l=js,"selectionStart"in l&&ec(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Ua&&za(Ua,l)||(Ua=l,l=Ul(ic,"onSelect"),0<l.length&&(i=new Jr("onSelect","select",null,i,a),e.push({event:i,listeners:l}),i.target=js)))}function es(e,i){var a={};return a[e.toLowerCase()]=i.toLowerCase(),a["Webkit"+e]="webkit"+i,a["Moz"+e]="moz"+i,a}var Hs={animationend:es("Animation","AnimationEnd"),animationiteration:es("Animation","AnimationIteration"),animationstart:es("Animation","AnimationStart"),transitionrun:es("Transition","TransitionRun"),transitionstart:es("Transition","TransitionStart"),transitioncancel:es("Transition","TransitionCancel"),transitionend:es("Transition","TransitionEnd")},sc={},bd={};Qi&&(bd=document.createElement("div").style,"AnimationEvent"in window||(delete Hs.animationend.animation,delete Hs.animationiteration.animation,delete Hs.animationstart.animation),"TransitionEvent"in window||delete Hs.transitionend.transition);function is(e){if(sc[e])return sc[e];if(!Hs[e])return e;var i=Hs[e],a;for(a in i)if(i.hasOwnProperty(a)&&a in bd)return sc[e]=i[a];return e}var _d=is("animationend"),Ad=is("animationiteration"),Sd=is("animationstart"),hv=is("transitionrun"),dv=is("transitionstart"),fv=is("transitioncancel"),Ed=is("transitionend"),wd=new Map,ac="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ac.push("scrollEnd");function Ri(e,i){wd.set(e,i),Jn(i,[e])}var Td=new WeakMap;function hi(e,i){if(typeof e=="object"&&e!==null){var a=Td.get(e);return a!==void 0?a:(i={value:e,source:i,stack:Bh(i)},Td.set(e,i),i)}return{value:e,source:i,stack:Bh(i)}}var di=[],zs=0,rc=0;function il(){for(var e=zs,i=rc=zs=0;i<e;){var a=di[i];di[i++]=null;var l=di[i];di[i++]=null;var h=di[i];di[i++]=null;var p=di[i];if(di[i++]=null,l!==null&&h!==null){var b=l.pending;b===null?h.next=h:(h.next=b.next,b.next=h),l.pending=h}p!==0&&xd(a,h,p)}}function nl(e,i,a,l){di[zs++]=e,di[zs++]=i,di[zs++]=a,di[zs++]=l,rc|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function lc(e,i,a,l){return nl(e,i,a,l),sl(e)}function Us(e,i){return nl(e,null,null,i),sl(e)}function xd(e,i,a){e.lanes|=a;var l=e.alternate;l!==null&&(l.lanes|=a);for(var h=!1,p=e.return;p!==null;)p.childLanes|=a,l=p.alternate,l!==null&&(l.childLanes|=a),p.tag===22&&(e=p.stateNode,e===null||e._visibility&1||(h=!0)),e=p,p=p.return;return e.tag===3?(p=e.stateNode,h&&i!==null&&(h=31-Vt(a),e=p.hiddenUpdates,l=e[h],l===null?e[h]=[i]:l.push(i),i.lane=a|536870912),p):null}function sl(e){if(50<hr)throw hr=0,fu=null,Error(s(185));for(var i=e.return;i!==null;)e=i,i=e.return;return e.tag===3?e.stateNode:null}var Bs={};function gv(e,i,a,l){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qe(e,i,a,l){return new gv(e,i,a,l)}function oc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Zi(e,i){var a=e.alternate;return a===null?(a=Qe(e.tag,i,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=i,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,i=e.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Cd(e,i){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=i,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,i=a.dependencies,e.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),e}function al(e,i,a,l,h,p){var b=0;if(l=e,typeof e=="function")oc(e)&&(b=1);else if(typeof e=="string")b=mb(e,a,tt.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case B:return e=Qe(31,a,i,h),e.elementType=B,e.lanes=p,e;case A:return ns(a.children,h,p,i);case E:b=8,h|=24;break;case w:return e=Qe(12,a,i,h|2),e.elementType=w,e.lanes=p,e;case N:return e=Qe(13,a,i,h),e.elementType=N,e.lanes=p,e;case U:return e=Qe(19,a,i,h),e.elementType=U,e.lanes=p,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case T:case C:b=10;break t;case M:b=9;break t;case O:b=11;break t;case q:b=14;break t;case $:b=16,l=null;break t}b=29,a=Error(s(130,e===null?"null":typeof e,"")),l=null}return i=Qe(b,a,i,h),i.elementType=e,i.type=l,i.lanes=p,i}function ns(e,i,a,l){return e=Qe(7,e,l,i),e.lanes=a,e}function cc(e,i,a){return e=Qe(6,e,null,i),e.lanes=a,e}function uc(e,i,a){return i=Qe(4,e.children!==null?e.children:[],e.key,i),i.lanes=a,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}var Is=[],qs=0,rl=null,ll=0,fi=[],gi=0,ss=null,Ji=1,tn="";function as(e,i){Is[qs++]=ll,Is[qs++]=rl,rl=e,ll=i}function Rd(e,i,a){fi[gi++]=Ji,fi[gi++]=tn,fi[gi++]=ss,ss=e;var l=Ji;e=tn;var h=32-Vt(l)-1;l&=~(1<<h),a+=1;var p=32-Vt(i)+h;if(30<p){var b=h-h%5;p=(l&(1<<b)-1).toString(32),l>>=b,h-=b,Ji=1<<32-Vt(i)+h|a<<h|l,tn=p+e}else Ji=1<<p|a<<h|l,tn=e}function hc(e){e.return!==null&&(as(e,1),Rd(e,1,0))}function dc(e){for(;e===rl;)rl=Is[--qs],Is[qs]=null,ll=Is[--qs],Is[qs]=null;for(;e===ss;)ss=fi[--gi],fi[gi]=null,tn=fi[--gi],fi[gi]=null,Ji=fi[--gi],fi[gi]=null}var Pe=null,Xt=null,Mt=!1,rs=null,zi=!1,fc=Error(s(519));function ls(e){var i=Error(s(418,""));throw qa(hi(i,e)),fc}function Md(e){var i=e.stateNode,a=e.type,l=e.memoizedProps;switch(i[we]=e,i[Ue]=l,a){case"dialog":Tt("cancel",i),Tt("close",i);break;case"iframe":case"object":case"embed":Tt("load",i);break;case"video":case"audio":for(a=0;a<fr.length;a++)Tt(fr[a],i);break;case"source":Tt("error",i);break;case"img":case"image":case"link":Tt("error",i),Tt("load",i);break;case"details":Tt("toggle",i);break;case"input":Tt("invalid",i),Gh(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),Yr(i);break;case"select":Tt("invalid",i);break;case"textarea":Tt("invalid",i),Xh(i,l.value,l.defaultValue,l.children),Yr(i)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||Yg(i.textContent,a)?(l.popover!=null&&(Tt("beforetoggle",i),Tt("toggle",i)),l.onScroll!=null&&Tt("scroll",i),l.onScrollEnd!=null&&Tt("scrollend",i),l.onClick!=null&&(i.onclick=Bl),i=!0):i=!1,i||ls(e)}function Dd(e){for(Pe=e.return;Pe;)switch(Pe.tag){case 5:case 13:zi=!1;return;case 27:case 3:zi=!0;return;default:Pe=Pe.return}}function Ba(e){if(e!==Pe)return!1;if(!Mt)return Dd(e),Mt=!0,!1;var i=e.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Mu(e.type,e.memoizedProps)),a=!a),a&&Xt&&ls(e),Dd(e),i===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));t:{for(e=e.nextSibling,i=0;e;){if(e.nodeType===8)if(a=e.data,a==="/$"){if(i===0){Xt=Di(e.nextSibling);break t}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++;e=e.nextSibling}Xt=null}}else i===27?(i=Xt,Fn(e.type)?(e=ku,ku=null,Xt=e):Xt=i):Xt=Pe?Di(e.stateNode.nextSibling):null;return!0}function Ia(){Xt=Pe=null,Mt=!1}function Od(){var e=rs;return e!==null&&(Ge===null?Ge=e:Ge.push.apply(Ge,e),rs=null),e}function qa(e){rs===null?rs=[e]:rs.push(e)}var gc=I(null),os=null,en=null;function An(e,i,a){X(gc,i._currentValue),i._currentValue=a}function nn(e){e._currentValue=gc.current,Q(gc)}function pc(e,i,a){for(;e!==null;){var l=e.alternate;if((e.childLanes&i)!==i?(e.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),e===a)break;e=e.return}}function mc(e,i,a,l){var h=e.child;for(h!==null&&(h.return=e);h!==null;){var p=h.dependencies;if(p!==null){var b=h.child;p=p.firstContext;t:for(;p!==null;){var S=p;p=h;for(var R=0;R<i.length;R++)if(S.context===i[R]){p.lanes|=a,S=p.alternate,S!==null&&(S.lanes|=a),pc(p.return,a,e),l||(b=null);break t}p=S.next}}else if(h.tag===18){if(b=h.return,b===null)throw Error(s(341));b.lanes|=a,p=b.alternate,p!==null&&(p.lanes|=a),pc(b,a,e),b=null}else b=h.child;if(b!==null)b.return=h;else for(b=h;b!==null;){if(b===e){b=null;break}if(h=b.sibling,h!==null){h.return=b.return,b=h;break}b=b.return}h=b}}function Ga(e,i,a,l){e=null;for(var h=i,p=!1;h!==null;){if(!p){if((h.flags&524288)!==0)p=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var b=h.alternate;if(b===null)throw Error(s(387));if(b=b.memoizedProps,b!==null){var S=h.type;$e(h.pendingProps.value,b.value)||(e!==null?e.push(S):e=[S])}}else if(h===ct.current){if(b=h.alternate,b===null)throw Error(s(387));b.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(e!==null?e.push(br):e=[br])}h=h.return}e!==null&&mc(i,e,a,l),i.flags|=262144}function ol(e){for(e=e.firstContext;e!==null;){if(!$e(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function cs(e){os=e,en=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Te(e){return Ld(os,e)}function cl(e,i){return os===null&&cs(e),Ld(e,i)}function Ld(e,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},en===null){if(e===null)throw Error(s(308));en=i,e.dependencies={lanes:0,firstContext:i},e.flags|=524288}else en=en.next=i;return a}var pv=typeof AbortController<"u"?AbortController:function(){var e=[],i=this.signal={aborted:!1,addEventListener:function(a,l){e.push(l)}};this.abort=function(){i.aborted=!0,e.forEach(function(a){return a()})}},mv=f.unstable_scheduleCallback,yv=f.unstable_NormalPriority,se={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function yc(){return{controller:new pv,data:new Map,refCount:0}}function Va(e){e.refCount--,e.refCount===0&&mv(yv,function(){e.controller.abort()})}var Xa=null,vc=0,Gs=0,Vs=null;function vv(e,i){if(Xa===null){var a=Xa=[];vc=0,Gs=_u(),Vs={status:"pending",value:void 0,then:function(l){a.push(l)}}}return vc++,i.then(kd,kd),i}function kd(){if(--vc===0&&Xa!==null){Vs!==null&&(Vs.status="fulfilled");var e=Xa;Xa=null,Gs=0,Vs=null;for(var i=0;i<e.length;i++)(0,e[i])()}}function bv(e,i){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return e.then(function(){l.status="fulfilled",l.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var Nd=k.S;k.S=function(e,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&vv(e,i),Nd!==null&&Nd(e,i)};var us=I(null);function bc(){var e=us.current;return e!==null?e:Ht.pooledCache}function ul(e,i){i===null?X(us,us.current):X(us,i.pool)}function Pd(){var e=bc();return e===null?null:{parent:se._currentValue,pool:e}}var Ya=Error(s(460)),Fd=Error(s(474)),hl=Error(s(542)),_c={then:function(){}};function jd(e){return e=e.status,e==="fulfilled"||e==="rejected"}function dl(){}function Hd(e,i,a){switch(a=e[a],a===void 0?e.push(i):a!==i&&(i.then(dl,dl),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,Ud(e),e;default:if(typeof i.status=="string")i.then(dl,dl);else{if(e=Ht,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=i,e.status="pending",e.then(function(l){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=l}},function(l){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,Ud(e),e}throw Ka=i,Ya}}var Ka=null;function zd(){if(Ka===null)throw Error(s(459));var e=Ka;return Ka=null,e}function Ud(e){if(e===Ya||e===hl)throw Error(s(483))}var Sn=!1;function Ac(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Sc(e,i){e=e.updateQueue,i.updateQueue===e&&(i.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function En(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function wn(e,i,a){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(Dt&2)!==0){var h=l.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),l.pending=i,i=sl(e),xd(e,null,a),i}return nl(e,l,i,a),sl(e)}function Wa(e,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=e.pendingLanes,a|=l,i.lanes=a,Gr(e,a)}}function Ec(e,i){var a=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,p=null;if(a=a.firstBaseUpdate,a!==null){do{var b={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};p===null?h=p=b:p=p.next=b,a=a.next}while(a!==null);p===null?h=p=i:p=p.next=i}else h=p=i;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:p,shared:l.shared,callbacks:l.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=i:e.next=i,a.lastBaseUpdate=i}var wc=!1;function $a(){if(wc){var e=Vs;if(e!==null)throw e}}function Qa(e,i,a,l){wc=!1;var h=e.updateQueue;Sn=!1;var p=h.firstBaseUpdate,b=h.lastBaseUpdate,S=h.shared.pending;if(S!==null){h.shared.pending=null;var R=S,j=R.next;R.next=null,b===null?p=j:b.next=j,b=R;var G=e.alternate;G!==null&&(G=G.updateQueue,S=G.lastBaseUpdate,S!==b&&(S===null?G.firstBaseUpdate=j:S.next=j,G.lastBaseUpdate=R))}if(p!==null){var K=h.baseState;b=0,G=j=R=null,S=p;do{var H=S.lane&-536870913,z=H!==S.lane;if(z?(Ct&H)===H:(l&H)===H){H!==0&&H===Gs&&(wc=!0),G!==null&&(G=G.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});t:{var ft=e,ut=S;H=i;var Ft=a;switch(ut.tag){case 1:if(ft=ut.payload,typeof ft=="function"){K=ft.call(Ft,K,H);break t}K=ft;break t;case 3:ft.flags=ft.flags&-65537|128;case 0:if(ft=ut.payload,H=typeof ft=="function"?ft.call(Ft,K,H):ft,H==null)break t;K=m({},K,H);break t;case 2:Sn=!0}}H=S.callback,H!==null&&(e.flags|=64,z&&(e.flags|=8192),z=h.callbacks,z===null?h.callbacks=[H]:z.push(H))}else z={lane:H,tag:S.tag,payload:S.payload,callback:S.callback,next:null},G===null?(j=G=z,R=K):G=G.next=z,b|=H;if(S=S.next,S===null){if(S=h.shared.pending,S===null)break;z=S,S=z.next,z.next=null,h.lastBaseUpdate=z,h.shared.pending=null}}while(!0);G===null&&(R=K),h.baseState=R,h.firstBaseUpdate=j,h.lastBaseUpdate=G,p===null&&(h.shared.lanes=0),Ln|=b,e.lanes=b,e.memoizedState=K}}function Bd(e,i){if(typeof e!="function")throw Error(s(191,e));e.call(i)}function Id(e,i){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Bd(a[e],i)}var Xs=I(null),fl=I(0);function qd(e,i){e=un,X(fl,e),X(Xs,i),un=e|i.baseLanes}function Tc(){X(fl,un),X(Xs,Xs.current)}function xc(){un=fl.current,Q(Xs),Q(fl)}var Tn=0,At=null,Nt=null,Jt=null,gl=!1,Ys=!1,hs=!1,pl=0,Za=0,Ks=null,_v=0;function Wt(){throw Error(s(321))}function Cc(e,i){if(i===null)return!1;for(var a=0;a<i.length&&a<e.length;a++)if(!$e(e[a],i[a]))return!1;return!0}function Rc(e,i,a,l,h,p){return Tn=p,At=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,k.H=e===null||e.memoizedState===null?Cf:Rf,hs=!1,p=a(l,h),hs=!1,Ys&&(p=Vd(i,a,l,h)),Gd(e),p}function Gd(e){k.H=Al;var i=Nt!==null&&Nt.next!==null;if(Tn=0,Jt=Nt=At=null,gl=!1,Za=0,Ks=null,i)throw Error(s(300));e===null||pe||(e=e.dependencies,e!==null&&ol(e)&&(pe=!0))}function Vd(e,i,a,l){At=e;var h=0;do{if(Ys&&(Ks=null),Za=0,Ys=!1,25<=h)throw Error(s(301));if(h+=1,Jt=Nt=null,e.updateQueue!=null){var p=e.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}k.H=Cv,p=i(a,l)}while(Ys);return p}function Av(){var e=k.H,i=e.useState()[0];return i=typeof i.then=="function"?Ja(i):i,e=e.useState()[0],(Nt!==null?Nt.memoizedState:null)!==e&&(At.flags|=1024),i}function Mc(){var e=pl!==0;return pl=0,e}function Dc(e,i,a){i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~a}function Oc(e){if(gl){for(e=e.memoizedState;e!==null;){var i=e.queue;i!==null&&(i.pending=null),e=e.next}gl=!1}Tn=0,Jt=Nt=At=null,Ys=!1,Za=pl=0,Ks=null}function Ie(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Jt===null?At.memoizedState=Jt=e:Jt=Jt.next=e,Jt}function te(){if(Nt===null){var e=At.alternate;e=e!==null?e.memoizedState:null}else e=Nt.next;var i=Jt===null?At.memoizedState:Jt.next;if(i!==null)Jt=i,Nt=e;else{if(e===null)throw At.alternate===null?Error(s(467)):Error(s(310));Nt=e,e={memoizedState:Nt.memoizedState,baseState:Nt.baseState,baseQueue:Nt.baseQueue,queue:Nt.queue,next:null},Jt===null?At.memoizedState=Jt=e:Jt=Jt.next=e}return Jt}function Lc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ja(e){var i=Za;return Za+=1,Ks===null&&(Ks=[]),e=Hd(Ks,e,i),i=At,(Jt===null?i.memoizedState:Jt.next)===null&&(i=i.alternate,k.H=i===null||i.memoizedState===null?Cf:Rf),e}function ml(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Ja(e);if(e.$$typeof===C)return Te(e)}throw Error(s(438,String(e)))}function kc(e){var i=null,a=At.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=At.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=Lc(),At.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(e),l=0;l<e;l++)a[l]=Z;return i.index++,a}function sn(e,i){return typeof i=="function"?i(e):i}function yl(e){var i=te();return Nc(i,Nt,e)}function Nc(e,i,a){var l=e.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var h=e.baseQueue,p=l.pending;if(p!==null){if(h!==null){var b=h.next;h.next=p.next,p.next=b}i.baseQueue=h=p,l.pending=null}if(p=e.baseState,h===null)e.memoizedState=p;else{i=h.next;var S=b=null,R=null,j=i,G=!1;do{var K=j.lane&-536870913;if(K!==j.lane?(Ct&K)===K:(Tn&K)===K){var H=j.revertLane;if(H===0)R!==null&&(R=R.next={lane:0,revertLane:0,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null}),K===Gs&&(G=!0);else if((Tn&H)===H){j=j.next,H===Gs&&(G=!0);continue}else K={lane:0,revertLane:j.revertLane,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},R===null?(S=R=K,b=p):R=R.next=K,At.lanes|=H,Ln|=H;K=j.action,hs&&a(p,K),p=j.hasEagerState?j.eagerState:a(p,K)}else H={lane:K,revertLane:j.revertLane,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},R===null?(S=R=H,b=p):R=R.next=H,At.lanes|=K,Ln|=K;j=j.next}while(j!==null&&j!==i);if(R===null?b=p:R.next=S,!$e(p,e.memoizedState)&&(pe=!0,G&&(a=Vs,a!==null)))throw a;e.memoizedState=p,e.baseState=b,e.baseQueue=R,l.lastRenderedState=p}return h===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function Pc(e){var i=te(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=e;var l=a.dispatch,h=a.pending,p=i.memoizedState;if(h!==null){a.pending=null;var b=h=h.next;do p=e(p,b.action),b=b.next;while(b!==h);$e(p,i.memoizedState)||(pe=!0),i.memoizedState=p,i.baseQueue===null&&(i.baseState=p),a.lastRenderedState=p}return[p,l]}function Xd(e,i,a){var l=At,h=te(),p=Mt;if(p){if(a===void 0)throw Error(s(407));a=a()}else a=i();var b=!$e((Nt||h).memoizedState,a);b&&(h.memoizedState=a,pe=!0),h=h.queue;var S=Wd.bind(null,l,h,e);if(tr(2048,8,S,[e]),h.getSnapshot!==i||b||Jt!==null&&Jt.memoizedState.tag&1){if(l.flags|=2048,Ws(9,vl(),Kd.bind(null,l,h,a,i),null),Ht===null)throw Error(s(349));p||(Tn&124)!==0||Yd(l,i,a)}return a}function Yd(e,i,a){e.flags|=16384,e={getSnapshot:i,value:a},i=At.updateQueue,i===null?(i=Lc(),At.updateQueue=i,i.stores=[e]):(a=i.stores,a===null?i.stores=[e]:a.push(e))}function Kd(e,i,a,l){i.value=a,i.getSnapshot=l,$d(i)&&Qd(e)}function Wd(e,i,a){return a(function(){$d(i)&&Qd(e)})}function $d(e){var i=e.getSnapshot;e=e.value;try{var a=i();return!$e(e,a)}catch{return!0}}function Qd(e){var i=Us(e,2);i!==null&&ii(i,e,2)}function Fc(e){var i=Ie();if(typeof e=="function"){var a=e;if(e=a(),hs){ri(!0);try{a()}finally{ri(!1)}}}return i.memoizedState=i.baseState=e,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:sn,lastRenderedState:e},i}function Zd(e,i,a,l){return e.baseState=a,Nc(e,Nt,typeof l=="function"?l:sn)}function Sv(e,i,a,l,h){if(_l(e))throw Error(s(485));if(e=i.action,e!==null){var p={payload:h,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){p.listeners.push(b)}};k.T!==null?a(!0):p.isTransition=!1,l(p),a=i.pending,a===null?(p.next=i.pending=p,Jd(i,p)):(p.next=a.next,i.pending=a.next=p)}}function Jd(e,i){var a=i.action,l=i.payload,h=e.state;if(i.isTransition){var p=k.T,b={};k.T=b;try{var S=a(h,l),R=k.S;R!==null&&R(b,S),tf(e,i,S)}catch(j){jc(e,i,j)}finally{k.T=p}}else try{p=a(h,l),tf(e,i,p)}catch(j){jc(e,i,j)}}function tf(e,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){ef(e,i,l)},function(l){return jc(e,i,l)}):ef(e,i,a)}function ef(e,i,a){i.status="fulfilled",i.value=a,nf(i),e.state=a,i=e.pending,i!==null&&(a=i.next,a===i?e.pending=null:(a=a.next,i.next=a,Jd(e,a)))}function jc(e,i,a){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,nf(i),i=i.next;while(i!==l)}e.action=null}function nf(e){e=e.listeners;for(var i=0;i<e.length;i++)(0,e[i])()}function sf(e,i){return i}function af(e,i){if(Mt){var a=Ht.formState;if(a!==null){t:{var l=At;if(Mt){if(Xt){e:{for(var h=Xt,p=zi;h.nodeType!==8;){if(!p){h=null;break e}if(h=Di(h.nextSibling),h===null){h=null;break e}}p=h.data,h=p==="F!"||p==="F"?h:null}if(h){Xt=Di(h.nextSibling),l=h.data==="F!";break t}}ls(l)}l=!1}l&&(i=a[0])}}return a=Ie(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:sf,lastRenderedState:i},a.queue=l,a=wf.bind(null,At,l),l.dispatch=a,l=Fc(!1),p=Ic.bind(null,At,!1,l.queue),l=Ie(),h={state:i,dispatch:null,action:e,pending:null},l.queue=h,a=Sv.bind(null,At,h,p,a),h.dispatch=a,l.memoizedState=e,[i,a,!1]}function rf(e){var i=te();return lf(i,Nt,e)}function lf(e,i,a){if(i=Nc(e,i,sf)[0],e=yl(sn)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=Ja(i)}catch(b){throw b===Ya?hl:b}else l=i;i=te();var h=i.queue,p=h.dispatch;return a!==i.memoizedState&&(At.flags|=2048,Ws(9,vl(),Ev.bind(null,h,a),null)),[l,p,e]}function Ev(e,i){e.action=i}function of(e){var i=te(),a=Nt;if(a!==null)return lf(i,a,e);te(),i=i.memoizedState,a=te();var l=a.queue.dispatch;return a.memoizedState=e,[i,l,!1]}function Ws(e,i,a,l){return e={tag:e,create:a,deps:l,inst:i,next:null},i=At.updateQueue,i===null&&(i=Lc(),At.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=e.next=e:(l=a.next,a.next=e,e.next=l,i.lastEffect=e),e}function vl(){return{destroy:void 0,resource:void 0}}function cf(){return te().memoizedState}function bl(e,i,a,l){var h=Ie();l=l===void 0?null:l,At.flags|=e,h.memoizedState=Ws(1|i,vl(),a,l)}function tr(e,i,a,l){var h=te();l=l===void 0?null:l;var p=h.memoizedState.inst;Nt!==null&&l!==null&&Cc(l,Nt.memoizedState.deps)?h.memoizedState=Ws(i,p,a,l):(At.flags|=e,h.memoizedState=Ws(1|i,p,a,l))}function uf(e,i){bl(8390656,8,e,i)}function hf(e,i){tr(2048,8,e,i)}function df(e,i){return tr(4,2,e,i)}function ff(e,i){return tr(4,4,e,i)}function gf(e,i){if(typeof i=="function"){e=e();var a=i(e);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return e=e(),i.current=e,function(){i.current=null}}function pf(e,i,a){a=a!=null?a.concat([e]):null,tr(4,4,gf.bind(null,i,e),a)}function Hc(){}function mf(e,i){var a=te();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&Cc(i,l[1])?l[0]:(a.memoizedState=[e,i],e)}function yf(e,i){var a=te();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&Cc(i,l[1]))return l[0];if(l=e(),hs){ri(!0);try{e()}finally{ri(!1)}}return a.memoizedState=[l,i],l}function zc(e,i,a){return a===void 0||(Tn&1073741824)!==0?e.memoizedState=i:(e.memoizedState=a,e=_g(),At.lanes|=e,Ln|=e,a)}function vf(e,i,a,l){return $e(a,i)?a:Xs.current!==null?(e=zc(e,a,l),$e(e,i)||(pe=!0),e):(Tn&42)===0?(pe=!0,e.memoizedState=a):(e=_g(),At.lanes|=e,Ln|=e,i)}function bf(e,i,a,l,h){var p=P.p;P.p=p!==0&&8>p?p:8;var b=k.T,S={};k.T=S,Ic(e,!1,i,a);try{var R=h(),j=k.S;if(j!==null&&j(S,R),R!==null&&typeof R=="object"&&typeof R.then=="function"){var G=bv(R,l);er(e,i,G,ei(e))}else er(e,i,l,ei(e))}catch(K){er(e,i,{then:function(){},status:"rejected",reason:K},ei())}finally{P.p=p,k.T=b}}function wv(){}function Uc(e,i,a,l){if(e.tag!==5)throw Error(s(476));var h=_f(e).queue;bf(e,h,i,Y,a===null?wv:function(){return Af(e),a(l)})}function _f(e){var i=e.memoizedState;if(i!==null)return i;i={memoizedState:Y,baseState:Y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:sn,lastRenderedState:Y},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:sn,lastRenderedState:a},next:null},e.memoizedState=i,e=e.alternate,e!==null&&(e.memoizedState=i),i}function Af(e){var i=_f(e).next.queue;er(e,i,{},ei())}function Bc(){return Te(br)}function Sf(){return te().memoizedState}function Ef(){return te().memoizedState}function Tv(e){for(var i=e.return;i!==null;){switch(i.tag){case 24:case 3:var a=ei();e=En(a);var l=wn(i,e,a);l!==null&&(ii(l,i,a),Wa(l,i,a)),i={cache:yc()},e.payload=i;return}i=i.return}}function xv(e,i,a){var l=ei();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},_l(e)?Tf(i,a):(a=lc(e,i,a,l),a!==null&&(ii(a,e,l),xf(a,i,l)))}function wf(e,i,a){var l=ei();er(e,i,a,l)}function er(e,i,a,l){var h={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(_l(e))Tf(i,h);else{var p=e.alternate;if(e.lanes===0&&(p===null||p.lanes===0)&&(p=i.lastRenderedReducer,p!==null))try{var b=i.lastRenderedState,S=p(b,a);if(h.hasEagerState=!0,h.eagerState=S,$e(S,b))return nl(e,i,h,0),Ht===null&&il(),!1}catch{}finally{}if(a=lc(e,i,h,l),a!==null)return ii(a,e,l),xf(a,i,l),!0}return!1}function Ic(e,i,a,l){if(l={lane:2,revertLane:_u(),action:l,hasEagerState:!1,eagerState:null,next:null},_l(e)){if(i)throw Error(s(479))}else i=lc(e,a,l,2),i!==null&&ii(i,e,2)}function _l(e){var i=e.alternate;return e===At||i!==null&&i===At}function Tf(e,i){Ys=gl=!0;var a=e.pending;a===null?i.next=i:(i.next=a.next,a.next=i),e.pending=i}function xf(e,i,a){if((a&4194048)!==0){var l=i.lanes;l&=e.pendingLanes,a|=l,i.lanes=a,Gr(e,a)}}var Al={readContext:Te,use:ml,useCallback:Wt,useContext:Wt,useEffect:Wt,useImperativeHandle:Wt,useLayoutEffect:Wt,useInsertionEffect:Wt,useMemo:Wt,useReducer:Wt,useRef:Wt,useState:Wt,useDebugValue:Wt,useDeferredValue:Wt,useTransition:Wt,useSyncExternalStore:Wt,useId:Wt,useHostTransitionStatus:Wt,useFormState:Wt,useActionState:Wt,useOptimistic:Wt,useMemoCache:Wt,useCacheRefresh:Wt},Cf={readContext:Te,use:ml,useCallback:function(e,i){return Ie().memoizedState=[e,i===void 0?null:i],e},useContext:Te,useEffect:uf,useImperativeHandle:function(e,i,a){a=a!=null?a.concat([e]):null,bl(4194308,4,gf.bind(null,i,e),a)},useLayoutEffect:function(e,i){return bl(4194308,4,e,i)},useInsertionEffect:function(e,i){bl(4,2,e,i)},useMemo:function(e,i){var a=Ie();i=i===void 0?null:i;var l=e();if(hs){ri(!0);try{e()}finally{ri(!1)}}return a.memoizedState=[l,i],l},useReducer:function(e,i,a){var l=Ie();if(a!==void 0){var h=a(i);if(hs){ri(!0);try{a(i)}finally{ri(!1)}}}else h=i;return l.memoizedState=l.baseState=h,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:h},l.queue=e,e=e.dispatch=xv.bind(null,At,e),[l.memoizedState,e]},useRef:function(e){var i=Ie();return e={current:e},i.memoizedState=e},useState:function(e){e=Fc(e);var i=e.queue,a=wf.bind(null,At,i);return i.dispatch=a,[e.memoizedState,a]},useDebugValue:Hc,useDeferredValue:function(e,i){var a=Ie();return zc(a,e,i)},useTransition:function(){var e=Fc(!1);return e=bf.bind(null,At,e.queue,!0,!1),Ie().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,i,a){var l=At,h=Ie();if(Mt){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),Ht===null)throw Error(s(349));(Ct&124)!==0||Yd(l,i,a)}h.memoizedState=a;var p={value:a,getSnapshot:i};return h.queue=p,uf(Wd.bind(null,l,p,e),[e]),l.flags|=2048,Ws(9,vl(),Kd.bind(null,l,p,a,i),null),a},useId:function(){var e=Ie(),i=Ht.identifierPrefix;if(Mt){var a=tn,l=Ji;a=(l&~(1<<32-Vt(l)-1)).toString(32)+a,i=""+i+"R"+a,a=pl++,0<a&&(i+="H"+a.toString(32)),i+=""}else a=_v++,i=""+i+"r"+a.toString(32)+"";return e.memoizedState=i},useHostTransitionStatus:Bc,useFormState:af,useActionState:af,useOptimistic:function(e){var i=Ie();i.memoizedState=i.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=Ic.bind(null,At,!0,a),a.dispatch=i,[e,i]},useMemoCache:kc,useCacheRefresh:function(){return Ie().memoizedState=Tv.bind(null,At)}},Rf={readContext:Te,use:ml,useCallback:mf,useContext:Te,useEffect:hf,useImperativeHandle:pf,useInsertionEffect:df,useLayoutEffect:ff,useMemo:yf,useReducer:yl,useRef:cf,useState:function(){return yl(sn)},useDebugValue:Hc,useDeferredValue:function(e,i){var a=te();return vf(a,Nt.memoizedState,e,i)},useTransition:function(){var e=yl(sn)[0],i=te().memoizedState;return[typeof e=="boolean"?e:Ja(e),i]},useSyncExternalStore:Xd,useId:Sf,useHostTransitionStatus:Bc,useFormState:rf,useActionState:rf,useOptimistic:function(e,i){var a=te();return Zd(a,Nt,e,i)},useMemoCache:kc,useCacheRefresh:Ef},Cv={readContext:Te,use:ml,useCallback:mf,useContext:Te,useEffect:hf,useImperativeHandle:pf,useInsertionEffect:df,useLayoutEffect:ff,useMemo:yf,useReducer:Pc,useRef:cf,useState:function(){return Pc(sn)},useDebugValue:Hc,useDeferredValue:function(e,i){var a=te();return Nt===null?zc(a,e,i):vf(a,Nt.memoizedState,e,i)},useTransition:function(){var e=Pc(sn)[0],i=te().memoizedState;return[typeof e=="boolean"?e:Ja(e),i]},useSyncExternalStore:Xd,useId:Sf,useHostTransitionStatus:Bc,useFormState:of,useActionState:of,useOptimistic:function(e,i){var a=te();return Nt!==null?Zd(a,Nt,e,i):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:kc,useCacheRefresh:Ef},$s=null,ir=0;function Sl(e){var i=ir;return ir+=1,$s===null&&($s=[]),Hd($s,e,i)}function nr(e,i){i=i.props.ref,e.ref=i!==void 0?i:null}function El(e,i){throw i.$$typeof===y?Error(s(525)):(e=Object.prototype.toString.call(i),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)))}function Mf(e){var i=e._init;return i(e._payload)}function Df(e){function i(L,D){if(e){var F=L.deletions;F===null?(L.deletions=[D],L.flags|=16):F.push(D)}}function a(L,D){if(!e)return null;for(;D!==null;)i(L,D),D=D.sibling;return null}function l(L){for(var D=new Map;L!==null;)L.key!==null?D.set(L.key,L):D.set(L.index,L),L=L.sibling;return D}function h(L,D){return L=Zi(L,D),L.index=0,L.sibling=null,L}function p(L,D,F){return L.index=F,e?(F=L.alternate,F!==null?(F=F.index,F<D?(L.flags|=67108866,D):F):(L.flags|=67108866,D)):(L.flags|=1048576,D)}function b(L){return e&&L.alternate===null&&(L.flags|=67108866),L}function S(L,D,F,V){return D===null||D.tag!==6?(D=cc(F,L.mode,V),D.return=L,D):(D=h(D,F),D.return=L,D)}function R(L,D,F,V){var at=F.type;return at===A?G(L,D,F.props.children,V,F.key):D!==null&&(D.elementType===at||typeof at=="object"&&at!==null&&at.$$typeof===$&&Mf(at)===D.type)?(D=h(D,F.props),nr(D,F),D.return=L,D):(D=al(F.type,F.key,F.props,null,L.mode,V),nr(D,F),D.return=L,D)}function j(L,D,F,V){return D===null||D.tag!==4||D.stateNode.containerInfo!==F.containerInfo||D.stateNode.implementation!==F.implementation?(D=uc(F,L.mode,V),D.return=L,D):(D=h(D,F.children||[]),D.return=L,D)}function G(L,D,F,V,at){return D===null||D.tag!==7?(D=ns(F,L.mode,V,at),D.return=L,D):(D=h(D,F),D.return=L,D)}function K(L,D,F){if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return D=cc(""+D,L.mode,F),D.return=L,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case v:return F=al(D.type,D.key,D.props,null,L.mode,F),nr(F,D),F.return=L,F;case _:return D=uc(D,L.mode,F),D.return=L,D;case $:var V=D._init;return D=V(D._payload),K(L,D,F)}if(st(D)||J(D))return D=ns(D,L.mode,F,null),D.return=L,D;if(typeof D.then=="function")return K(L,Sl(D),F);if(D.$$typeof===C)return K(L,cl(L,D),F);El(L,D)}return null}function H(L,D,F,V){var at=D!==null?D.key:null;if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return at!==null?null:S(L,D,""+F,V);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case v:return F.key===at?R(L,D,F,V):null;case _:return F.key===at?j(L,D,F,V):null;case $:return at=F._init,F=at(F._payload),H(L,D,F,V)}if(st(F)||J(F))return at!==null?null:G(L,D,F,V,null);if(typeof F.then=="function")return H(L,D,Sl(F),V);if(F.$$typeof===C)return H(L,D,cl(L,F),V);El(L,F)}return null}function z(L,D,F,V,at){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return L=L.get(F)||null,S(D,L,""+V,at);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case v:return L=L.get(V.key===null?F:V.key)||null,R(D,L,V,at);case _:return L=L.get(V.key===null?F:V.key)||null,j(D,L,V,at);case $:var Et=V._init;return V=Et(V._payload),z(L,D,F,V,at)}if(st(V)||J(V))return L=L.get(F)||null,G(D,L,V,at,null);if(typeof V.then=="function")return z(L,D,F,Sl(V),at);if(V.$$typeof===C)return z(L,D,F,cl(D,V),at);El(D,V)}return null}function ft(L,D,F,V){for(var at=null,Et=null,rt=D,dt=D=0,ye=null;rt!==null&&dt<F.length;dt++){rt.index>dt?(ye=rt,rt=null):ye=rt.sibling;var Rt=H(L,rt,F[dt],V);if(Rt===null){rt===null&&(rt=ye);break}e&&rt&&Rt.alternate===null&&i(L,rt),D=p(Rt,D,dt),Et===null?at=Rt:Et.sibling=Rt,Et=Rt,rt=ye}if(dt===F.length)return a(L,rt),Mt&&as(L,dt),at;if(rt===null){for(;dt<F.length;dt++)rt=K(L,F[dt],V),rt!==null&&(D=p(rt,D,dt),Et===null?at=rt:Et.sibling=rt,Et=rt);return Mt&&as(L,dt),at}for(rt=l(rt);dt<F.length;dt++)ye=z(rt,L,dt,F[dt],V),ye!==null&&(e&&ye.alternate!==null&&rt.delete(ye.key===null?dt:ye.key),D=p(ye,D,dt),Et===null?at=ye:Et.sibling=ye,Et=ye);return e&&rt.forEach(function(Bn){return i(L,Bn)}),Mt&&as(L,dt),at}function ut(L,D,F,V){if(F==null)throw Error(s(151));for(var at=null,Et=null,rt=D,dt=D=0,ye=null,Rt=F.next();rt!==null&&!Rt.done;dt++,Rt=F.next()){rt.index>dt?(ye=rt,rt=null):ye=rt.sibling;var Bn=H(L,rt,Rt.value,V);if(Bn===null){rt===null&&(rt=ye);break}e&&rt&&Bn.alternate===null&&i(L,rt),D=p(Bn,D,dt),Et===null?at=Bn:Et.sibling=Bn,Et=Bn,rt=ye}if(Rt.done)return a(L,rt),Mt&&as(L,dt),at;if(rt===null){for(;!Rt.done;dt++,Rt=F.next())Rt=K(L,Rt.value,V),Rt!==null&&(D=p(Rt,D,dt),Et===null?at=Rt:Et.sibling=Rt,Et=Rt);return Mt&&as(L,dt),at}for(rt=l(rt);!Rt.done;dt++,Rt=F.next())Rt=z(rt,L,dt,Rt.value,V),Rt!==null&&(e&&Rt.alternate!==null&&rt.delete(Rt.key===null?dt:Rt.key),D=p(Rt,D,dt),Et===null?at=Rt:Et.sibling=Rt,Et=Rt);return e&&rt.forEach(function(Rb){return i(L,Rb)}),Mt&&as(L,dt),at}function Ft(L,D,F,V){if(typeof F=="object"&&F!==null&&F.type===A&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case v:t:{for(var at=F.key;D!==null;){if(D.key===at){if(at=F.type,at===A){if(D.tag===7){a(L,D.sibling),V=h(D,F.props.children),V.return=L,L=V;break t}}else if(D.elementType===at||typeof at=="object"&&at!==null&&at.$$typeof===$&&Mf(at)===D.type){a(L,D.sibling),V=h(D,F.props),nr(V,F),V.return=L,L=V;break t}a(L,D);break}else i(L,D);D=D.sibling}F.type===A?(V=ns(F.props.children,L.mode,V,F.key),V.return=L,L=V):(V=al(F.type,F.key,F.props,null,L.mode,V),nr(V,F),V.return=L,L=V)}return b(L);case _:t:{for(at=F.key;D!==null;){if(D.key===at)if(D.tag===4&&D.stateNode.containerInfo===F.containerInfo&&D.stateNode.implementation===F.implementation){a(L,D.sibling),V=h(D,F.children||[]),V.return=L,L=V;break t}else{a(L,D);break}else i(L,D);D=D.sibling}V=uc(F,L.mode,V),V.return=L,L=V}return b(L);case $:return at=F._init,F=at(F._payload),Ft(L,D,F,V)}if(st(F))return ft(L,D,F,V);if(J(F)){if(at=J(F),typeof at!="function")throw Error(s(150));return F=at.call(F),ut(L,D,F,V)}if(typeof F.then=="function")return Ft(L,D,Sl(F),V);if(F.$$typeof===C)return Ft(L,D,cl(L,F),V);El(L,F)}return typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint"?(F=""+F,D!==null&&D.tag===6?(a(L,D.sibling),V=h(D,F),V.return=L,L=V):(a(L,D),V=cc(F,L.mode,V),V.return=L,L=V),b(L)):a(L,D)}return function(L,D,F,V){try{ir=0;var at=Ft(L,D,F,V);return $s=null,at}catch(rt){if(rt===Ya||rt===hl)throw rt;var Et=Qe(29,rt,null,L.mode);return Et.lanes=V,Et.return=L,Et}finally{}}}var Qs=Df(!0),Of=Df(!1),pi=I(null),Ui=null;function xn(e){var i=e.alternate;X(ae,ae.current&1),X(pi,e),Ui===null&&(i===null||Xs.current!==null||i.memoizedState!==null)&&(Ui=e)}function Lf(e){if(e.tag===22){if(X(ae,ae.current),X(pi,e),Ui===null){var i=e.alternate;i!==null&&i.memoizedState!==null&&(Ui=e)}}else Cn()}function Cn(){X(ae,ae.current),X(pi,pi.current)}function an(e){Q(pi),Ui===e&&(Ui=null),Q(ae)}var ae=I(0);function wl(e){for(var i=e;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Lu(a)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function qc(e,i,a,l){i=e.memoizedState,a=a(l,i),a=a==null?i:m({},i,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Gc={enqueueSetState:function(e,i,a){e=e._reactInternals;var l=ei(),h=En(l);h.payload=i,a!=null&&(h.callback=a),i=wn(e,h,l),i!==null&&(ii(i,e,l),Wa(i,e,l))},enqueueReplaceState:function(e,i,a){e=e._reactInternals;var l=ei(),h=En(l);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=wn(e,h,l),i!==null&&(ii(i,e,l),Wa(i,e,l))},enqueueForceUpdate:function(e,i){e=e._reactInternals;var a=ei(),l=En(a);l.tag=2,i!=null&&(l.callback=i),i=wn(e,l,a),i!==null&&(ii(i,e,a),Wa(i,e,a))}};function kf(e,i,a,l,h,p,b){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,p,b):i.prototype&&i.prototype.isPureReactComponent?!za(a,l)||!za(h,p):!0}function Nf(e,i,a,l){e=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==e&&Gc.enqueueReplaceState(i,i.state,null)}function ds(e,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(e=e.defaultProps){a===i&&(a=m({},a));for(var h in e)a[h]===void 0&&(a[h]=e[h])}return a}var Tl=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Pf(e){Tl(e)}function Ff(e){console.error(e)}function jf(e){Tl(e)}function xl(e,i){try{var a=e.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function Hf(e,i,a){try{var l=e.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Vc(e,i,a){return a=En(a),a.tag=3,a.payload={element:null},a.callback=function(){xl(e,i)},a}function zf(e){return e=En(e),e.tag=3,e}function Uf(e,i,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var p=l.value;e.payload=function(){return h(p)},e.callback=function(){Hf(i,a,l)}}var b=a.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(e.callback=function(){Hf(i,a,l),typeof h!="function"&&(kn===null?kn=new Set([this]):kn.add(this));var S=l.stack;this.componentDidCatch(l.value,{componentStack:S!==null?S:""})})}function Rv(e,i,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&Ga(i,a,h,!0),a=pi.current,a!==null){switch(a.tag){case 13:return Ui===null?pu():a.alternate===null&&Yt===0&&(Yt=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===_c?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),yu(e,l,h)),!1;case 22:return a.flags|=65536,l===_c?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),yu(e,l,h)),!1}throw Error(s(435,a.tag))}return yu(e,l,h),pu(),!1}if(Mt)return i=pi.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,l!==fc&&(e=Error(s(422),{cause:l}),qa(hi(e,a)))):(l!==fc&&(i=Error(s(423),{cause:l}),qa(hi(i,a))),e=e.current.alternate,e.flags|=65536,h&=-h,e.lanes|=h,l=hi(l,a),h=Vc(e.stateNode,l,h),Ec(e,h),Yt!==4&&(Yt=2)),!1;var p=Error(s(520),{cause:l});if(p=hi(p,a),ur===null?ur=[p]:ur.push(p),Yt!==4&&(Yt=2),i===null)return!0;l=hi(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,e=h&-h,a.lanes|=e,e=Vc(a.stateNode,l,e),Ec(a,e),!1;case 1:if(i=a.type,p=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(kn===null||!kn.has(p))))return a.flags|=65536,h&=-h,a.lanes|=h,h=zf(h),Uf(h,e,a,l),Ec(a,h),!1}a=a.return}while(a!==null);return!1}var Bf=Error(s(461)),pe=!1;function ve(e,i,a,l){i.child=e===null?Of(i,null,a,l):Qs(i,e.child,a,l)}function If(e,i,a,l,h){a=a.render;var p=i.ref;if("ref"in l){var b={};for(var S in l)S!=="ref"&&(b[S]=l[S])}else b=l;return cs(i),l=Rc(e,i,a,b,p,h),S=Mc(),e!==null&&!pe?(Dc(e,i,h),rn(e,i,h)):(Mt&&S&&hc(i),i.flags|=1,ve(e,i,l,h),i.child)}function qf(e,i,a,l,h){if(e===null){var p=a.type;return typeof p=="function"&&!oc(p)&&p.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=p,Gf(e,i,p,l,h)):(e=al(a.type,null,l,i,i.mode,h),e.ref=i.ref,e.return=i,i.child=e)}if(p=e.child,!Jc(e,h)){var b=p.memoizedProps;if(a=a.compare,a=a!==null?a:za,a(b,l)&&e.ref===i.ref)return rn(e,i,h)}return i.flags|=1,e=Zi(p,l),e.ref=i.ref,e.return=i,i.child=e}function Gf(e,i,a,l,h){if(e!==null){var p=e.memoizedProps;if(za(p,l)&&e.ref===i.ref)if(pe=!1,i.pendingProps=l=p,Jc(e,h))(e.flags&131072)!==0&&(pe=!0);else return i.lanes=e.lanes,rn(e,i,h)}return Xc(e,i,a,l,h)}function Vf(e,i,a){var l=i.pendingProps,h=l.children,p=e!==null?e.memoizedState:null;if(l.mode==="hidden"){if((i.flags&128)!==0){if(l=p!==null?p.baseLanes|a:a,e!==null){for(h=i.child=e.child,p=0;h!==null;)p=p|h.lanes|h.childLanes,h=h.sibling;i.childLanes=p&~l}else i.childLanes=0,i.child=null;return Xf(e,i,l,a)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},e!==null&&ul(i,p!==null?p.cachePool:null),p!==null?qd(i,p):Tc(),Lf(i);else return i.lanes=i.childLanes=536870912,Xf(e,i,p!==null?p.baseLanes|a:a,a)}else p!==null?(ul(i,p.cachePool),qd(i,p),Cn(),i.memoizedState=null):(e!==null&&ul(i,null),Tc(),Cn());return ve(e,i,h,a),i.child}function Xf(e,i,a,l){var h=bc();return h=h===null?null:{parent:se._currentValue,pool:h},i.memoizedState={baseLanes:a,cachePool:h},e!==null&&ul(i,null),Tc(),Lf(i),e!==null&&Ga(e,i,l,!0),null}function Cl(e,i){var a=i.ref;if(a===null)e!==null&&e.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(e===null||e.ref!==a)&&(i.flags|=4194816)}}function Xc(e,i,a,l,h){return cs(i),a=Rc(e,i,a,l,void 0,h),l=Mc(),e!==null&&!pe?(Dc(e,i,h),rn(e,i,h)):(Mt&&l&&hc(i),i.flags|=1,ve(e,i,a,h),i.child)}function Yf(e,i,a,l,h,p){return cs(i),i.updateQueue=null,a=Vd(i,l,a,h),Gd(e),l=Mc(),e!==null&&!pe?(Dc(e,i,p),rn(e,i,p)):(Mt&&l&&hc(i),i.flags|=1,ve(e,i,a,p),i.child)}function Kf(e,i,a,l,h){if(cs(i),i.stateNode===null){var p=Bs,b=a.contextType;typeof b=="object"&&b!==null&&(p=Te(b)),p=new a(l,p),i.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=Gc,i.stateNode=p,p._reactInternals=i,p=i.stateNode,p.props=l,p.state=i.memoizedState,p.refs={},Ac(i),b=a.contextType,p.context=typeof b=="object"&&b!==null?Te(b):Bs,p.state=i.memoizedState,b=a.getDerivedStateFromProps,typeof b=="function"&&(qc(i,a,b,l),p.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(b=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),b!==p.state&&Gc.enqueueReplaceState(p,p.state,null),Qa(i,l,p,h),$a(),p.state=i.memoizedState),typeof p.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(e===null){p=i.stateNode;var S=i.memoizedProps,R=ds(a,S);p.props=R;var j=p.context,G=a.contextType;b=Bs,typeof G=="object"&&G!==null&&(b=Te(G));var K=a.getDerivedStateFromProps;G=typeof K=="function"||typeof p.getSnapshotBeforeUpdate=="function",S=i.pendingProps!==S,G||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(S||j!==b)&&Nf(i,p,l,b),Sn=!1;var H=i.memoizedState;p.state=H,Qa(i,l,p,h),$a(),j=i.memoizedState,S||H!==j||Sn?(typeof K=="function"&&(qc(i,a,K,l),j=i.memoizedState),(R=Sn||kf(i,a,R,l,H,j,b))?(G||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(i.flags|=4194308)):(typeof p.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=j),p.props=l,p.state=j,p.context=b,l=R):(typeof p.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{p=i.stateNode,Sc(e,i),b=i.memoizedProps,G=ds(a,b),p.props=G,K=i.pendingProps,H=p.context,j=a.contextType,R=Bs,typeof j=="object"&&j!==null&&(R=Te(j)),S=a.getDerivedStateFromProps,(j=typeof S=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(b!==K||H!==R)&&Nf(i,p,l,R),Sn=!1,H=i.memoizedState,p.state=H,Qa(i,l,p,h),$a();var z=i.memoizedState;b!==K||H!==z||Sn||e!==null&&e.dependencies!==null&&ol(e.dependencies)?(typeof S=="function"&&(qc(i,a,S,l),z=i.memoizedState),(G=Sn||kf(i,a,G,l,H,z,R)||e!==null&&e.dependencies!==null&&ol(e.dependencies))?(j||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(l,z,R),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(l,z,R)),typeof p.componentDidUpdate=="function"&&(i.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof p.componentDidUpdate!="function"||b===e.memoizedProps&&H===e.memoizedState||(i.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&H===e.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=z),p.props=l,p.state=z,p.context=R,l=G):(typeof p.componentDidUpdate!="function"||b===e.memoizedProps&&H===e.memoizedState||(i.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&H===e.memoizedState||(i.flags|=1024),l=!1)}return p=l,Cl(e,i),l=(i.flags&128)!==0,p||l?(p=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:p.render(),i.flags|=1,e!==null&&l?(i.child=Qs(i,e.child,null,h),i.child=Qs(i,null,a,h)):ve(e,i,a,h),i.memoizedState=p.state,e=i.child):e=rn(e,i,h),e}function Wf(e,i,a,l){return Ia(),i.flags|=256,ve(e,i,a,l),i.child}var Yc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Kc(e){return{baseLanes:e,cachePool:Pd()}}function Wc(e,i,a){return e=e!==null?e.childLanes&~a:0,i&&(e|=mi),e}function $f(e,i,a){var l=i.pendingProps,h=!1,p=(i.flags&128)!==0,b;if((b=p)||(b=e!==null&&e.memoizedState===null?!1:(ae.current&2)!==0),b&&(h=!0,i.flags&=-129),b=(i.flags&32)!==0,i.flags&=-33,e===null){if(Mt){if(h?xn(i):Cn(),Mt){var S=Xt,R;if(R=S){t:{for(R=S,S=zi;R.nodeType!==8;){if(!S){S=null;break t}if(R=Di(R.nextSibling),R===null){S=null;break t}}S=R}S!==null?(i.memoizedState={dehydrated:S,treeContext:ss!==null?{id:Ji,overflow:tn}:null,retryLane:536870912,hydrationErrors:null},R=Qe(18,null,null,0),R.stateNode=S,R.return=i,i.child=R,Pe=i,Xt=null,R=!0):R=!1}R||ls(i)}if(S=i.memoizedState,S!==null&&(S=S.dehydrated,S!==null))return Lu(S)?i.lanes=32:i.lanes=536870912,null;an(i)}return S=l.children,l=l.fallback,h?(Cn(),h=i.mode,S=Rl({mode:"hidden",children:S},h),l=ns(l,h,a,null),S.return=i,l.return=i,S.sibling=l,i.child=S,h=i.child,h.memoizedState=Kc(a),h.childLanes=Wc(e,b,a),i.memoizedState=Yc,l):(xn(i),$c(i,S))}if(R=e.memoizedState,R!==null&&(S=R.dehydrated,S!==null)){if(p)i.flags&256?(xn(i),i.flags&=-257,i=Qc(e,i,a)):i.memoizedState!==null?(Cn(),i.child=e.child,i.flags|=128,i=null):(Cn(),h=l.fallback,S=i.mode,l=Rl({mode:"visible",children:l.children},S),h=ns(h,S,a,null),h.flags|=2,l.return=i,h.return=i,l.sibling=h,i.child=l,Qs(i,e.child,null,a),l=i.child,l.memoizedState=Kc(a),l.childLanes=Wc(e,b,a),i.memoizedState=Yc,i=h);else if(xn(i),Lu(S)){if(b=S.nextSibling&&S.nextSibling.dataset,b)var j=b.dgst;b=j,l=Error(s(419)),l.stack="",l.digest=b,qa({value:l,source:null,stack:null}),i=Qc(e,i,a)}else if(pe||Ga(e,i,a,!1),b=(a&e.childLanes)!==0,pe||b){if(b=Ht,b!==null&&(l=a&-a,l=(l&42)!==0?1:Ma(l),l=(l&(b.suspendedLanes|a))!==0?0:l,l!==0&&l!==R.retryLane))throw R.retryLane=l,Us(e,l),ii(b,e,l),Bf;S.data==="$?"||pu(),i=Qc(e,i,a)}else S.data==="$?"?(i.flags|=192,i.child=e.child,i=null):(e=R.treeContext,Xt=Di(S.nextSibling),Pe=i,Mt=!0,rs=null,zi=!1,e!==null&&(fi[gi++]=Ji,fi[gi++]=tn,fi[gi++]=ss,Ji=e.id,tn=e.overflow,ss=i),i=$c(i,l.children),i.flags|=4096);return i}return h?(Cn(),h=l.fallback,S=i.mode,R=e.child,j=R.sibling,l=Zi(R,{mode:"hidden",children:l.children}),l.subtreeFlags=R.subtreeFlags&65011712,j!==null?h=Zi(j,h):(h=ns(h,S,a,null),h.flags|=2),h.return=i,l.return=i,l.sibling=h,i.child=l,l=h,h=i.child,S=e.child.memoizedState,S===null?S=Kc(a):(R=S.cachePool,R!==null?(j=se._currentValue,R=R.parent!==j?{parent:j,pool:j}:R):R=Pd(),S={baseLanes:S.baseLanes|a,cachePool:R}),h.memoizedState=S,h.childLanes=Wc(e,b,a),i.memoizedState=Yc,l):(xn(i),a=e.child,e=a.sibling,a=Zi(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,e!==null&&(b=i.deletions,b===null?(i.deletions=[e],i.flags|=16):b.push(e)),i.child=a,i.memoizedState=null,a)}function $c(e,i){return i=Rl({mode:"visible",children:i},e.mode),i.return=e,e.child=i}function Rl(e,i){return e=Qe(22,e,null,i),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Qc(e,i,a){return Qs(i,e.child,null,a),e=$c(i,i.pendingProps.children),e.flags|=2,i.memoizedState=null,e}function Qf(e,i,a){e.lanes|=i;var l=e.alternate;l!==null&&(l.lanes|=i),pc(e.return,i,a)}function Zc(e,i,a,l,h){var p=e.memoizedState;p===null?e.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h}:(p.isBackwards=i,p.rendering=null,p.renderingStartTime=0,p.last=l,p.tail=a,p.tailMode=h)}function Zf(e,i,a){var l=i.pendingProps,h=l.revealOrder,p=l.tail;if(ve(e,i,l.children,a),l=ae.current,(l&2)!==0)l=l&1|2,i.flags|=128;else{if(e!==null&&(e.flags&128)!==0)t:for(e=i.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Qf(e,a,i);else if(e.tag===19)Qf(e,a,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break t;for(;e.sibling===null;){if(e.return===null||e.return===i)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}l&=1}switch(X(ae,l),h){case"forwards":for(a=i.child,h=null;a!==null;)e=a.alternate,e!==null&&wl(e)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),Zc(i,!1,h,a,p);break;case"backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(e=h.alternate,e!==null&&wl(e)===null){i.child=h;break}e=h.sibling,h.sibling=a,a=h,h=e}Zc(i,!0,a,null,p);break;case"together":Zc(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function rn(e,i,a){if(e!==null&&(i.dependencies=e.dependencies),Ln|=i.lanes,(a&i.childLanes)===0)if(e!==null){if(Ga(e,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(e!==null&&i.child!==e.child)throw Error(s(153));if(i.child!==null){for(e=i.child,a=Zi(e,e.pendingProps),i.child=a,a.return=i;e.sibling!==null;)e=e.sibling,a=a.sibling=Zi(e,e.pendingProps),a.return=i;a.sibling=null}return i.child}function Jc(e,i){return(e.lanes&i)!==0?!0:(e=e.dependencies,!!(e!==null&&ol(e)))}function Mv(e,i,a){switch(i.tag){case 3:_t(i,i.stateNode.containerInfo),An(i,se,e.memoizedState.cache),Ia();break;case 27:case 5:Ye(i);break;case 4:_t(i,i.stateNode.containerInfo);break;case 10:An(i,i.type,i.memoizedProps.value);break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(xn(i),i.flags|=128,null):(a&i.child.childLanes)!==0?$f(e,i,a):(xn(i),e=rn(e,i,a),e!==null?e.sibling:null);xn(i);break;case 19:var h=(e.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(Ga(e,i,a,!1),l=(a&i.childLanes)!==0),h){if(l)return Zf(e,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),X(ae,ae.current),l)break;return null;case 22:case 23:return i.lanes=0,Vf(e,i,a);case 24:An(i,se,e.memoizedState.cache)}return rn(e,i,a)}function Jf(e,i,a){if(e!==null)if(e.memoizedProps!==i.pendingProps)pe=!0;else{if(!Jc(e,a)&&(i.flags&128)===0)return pe=!1,Mv(e,i,a);pe=(e.flags&131072)!==0}else pe=!1,Mt&&(i.flags&1048576)!==0&&Rd(i,ll,i.index);switch(i.lanes=0,i.tag){case 16:t:{e=i.pendingProps;var l=i.elementType,h=l._init;if(l=h(l._payload),i.type=l,typeof l=="function")oc(l)?(e=ds(l,e),i.tag=1,i=Kf(null,i,l,e,a)):(i.tag=0,i=Xc(null,i,l,e,a));else{if(l!=null){if(h=l.$$typeof,h===O){i.tag=11,i=If(null,i,l,e,a);break t}else if(h===q){i.tag=14,i=qf(null,i,l,e,a);break t}}throw i=ht(l)||l,Error(s(306,i,""))}}return i;case 0:return Xc(e,i,i.type,i.pendingProps,a);case 1:return l=i.type,h=ds(l,i.pendingProps),Kf(e,i,l,h,a);case 3:t:{if(_t(i,i.stateNode.containerInfo),e===null)throw Error(s(387));l=i.pendingProps;var p=i.memoizedState;h=p.element,Sc(e,i),Qa(i,l,null,a);var b=i.memoizedState;if(l=b.cache,An(i,se,l),l!==p.cache&&mc(i,[se],a,!0),$a(),l=b.element,p.isDehydrated)if(p={element:l,isDehydrated:!1,cache:b.cache},i.updateQueue.baseState=p,i.memoizedState=p,i.flags&256){i=Wf(e,i,l,a);break t}else if(l!==h){h=hi(Error(s(424)),i),qa(h),i=Wf(e,i,l,a);break t}else{switch(e=i.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Xt=Di(e.firstChild),Pe=i,Mt=!0,rs=null,zi=!0,a=Of(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Ia(),l===h){i=rn(e,i,a);break t}ve(e,i,l,a)}i=i.child}return i;case 26:return Cl(e,i),e===null?(a=np(i.type,null,i.pendingProps,null))?i.memoizedState=a:Mt||(a=i.type,e=i.pendingProps,l=Il(et.current).createElement(a),l[we]=i,l[Ue]=e,_e(l,a,e),ge(l),i.stateNode=l):i.memoizedState=np(i.type,e.memoizedProps,i.pendingProps,e.memoizedState),null;case 27:return Ye(i),e===null&&Mt&&(l=i.stateNode=tp(i.type,i.pendingProps,et.current),Pe=i,zi=!0,h=Xt,Fn(i.type)?(ku=h,Xt=Di(l.firstChild)):Xt=h),ve(e,i,i.pendingProps.children,a),Cl(e,i),e===null&&(i.flags|=4194304),i.child;case 5:return e===null&&Mt&&((h=l=Xt)&&(l=nb(l,i.type,i.pendingProps,zi),l!==null?(i.stateNode=l,Pe=i,Xt=Di(l.firstChild),zi=!1,h=!0):h=!1),h||ls(i)),Ye(i),h=i.type,p=i.pendingProps,b=e!==null?e.memoizedProps:null,l=p.children,Mu(h,p)?l=null:b!==null&&Mu(h,b)&&(i.flags|=32),i.memoizedState!==null&&(h=Rc(e,i,Av,null,null,a),br._currentValue=h),Cl(e,i),ve(e,i,l,a),i.child;case 6:return e===null&&Mt&&((e=a=Xt)&&(a=sb(a,i.pendingProps,zi),a!==null?(i.stateNode=a,Pe=i,Xt=null,e=!0):e=!1),e||ls(i)),null;case 13:return $f(e,i,a);case 4:return _t(i,i.stateNode.containerInfo),l=i.pendingProps,e===null?i.child=Qs(i,null,l,a):ve(e,i,l,a),i.child;case 11:return If(e,i,i.type,i.pendingProps,a);case 7:return ve(e,i,i.pendingProps,a),i.child;case 8:return ve(e,i,i.pendingProps.children,a),i.child;case 12:return ve(e,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,An(i,i.type,l.value),ve(e,i,l.children,a),i.child;case 9:return h=i.type._context,l=i.pendingProps.children,cs(i),h=Te(h),l=l(h),i.flags|=1,ve(e,i,l,a),i.child;case 14:return qf(e,i,i.type,i.pendingProps,a);case 15:return Gf(e,i,i.type,i.pendingProps,a);case 19:return Zf(e,i,a);case 31:return l=i.pendingProps,a=i.mode,l={mode:l.mode,children:l.children},e===null?(a=Rl(l,a),a.ref=i.ref,i.child=a,a.return=i,i=a):(a=Zi(e.child,l),a.ref=i.ref,i.child=a,a.return=i,i=a),i;case 22:return Vf(e,i,a);case 24:return cs(i),l=Te(se),e===null?(h=bc(),h===null&&(h=Ht,p=yc(),h.pooledCache=p,p.refCount++,p!==null&&(h.pooledCacheLanes|=a),h=p),i.memoizedState={parent:l,cache:h},Ac(i),An(i,se,h)):((e.lanes&a)!==0&&(Sc(e,i),Qa(i,null,null,a),$a()),h=e.memoizedState,p=i.memoizedState,h.parent!==l?(h={parent:l,cache:l},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),An(i,se,l)):(l=p.cache,An(i,se,l),l!==h.cache&&mc(i,[se],a,!0))),ve(e,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function ln(e){e.flags|=4}function tg(e,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!op(i)){if(i=pi.current,i!==null&&((Ct&4194048)===Ct?Ui!==null:(Ct&62914560)!==Ct&&(Ct&536870912)===0||i!==Ui))throw Ka=_c,Fd;e.flags|=8192}}function Ml(e,i){i!==null&&(e.flags|=4),e.flags&16384&&(i=e.tag!==22?ze():536870912,e.lanes|=i,ea|=i)}function sr(e,i){if(!Mt)switch(e.tailMode){case"hidden":i=e.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function qt(e){var i=e.alternate!==null&&e.alternate.child===e.child,a=0,l=0;if(i)for(var h=e.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=e,h=h.sibling;else for(h=e.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=e,h=h.sibling;return e.subtreeFlags|=l,e.childLanes=a,i}function Dv(e,i,a){var l=i.pendingProps;switch(dc(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qt(i),null;case 1:return qt(i),null;case 3:return a=i.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),nn(se),kt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Ba(i)?ln(i):e===null||e.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Od())),qt(i),null;case 26:return a=i.memoizedState,e===null?(ln(i),a!==null?(qt(i),tg(i,a)):(qt(i),i.flags&=-16777217)):a?a!==e.memoizedState?(ln(i),qt(i),tg(i,a)):(qt(i),i.flags&=-16777217):(e.memoizedProps!==l&&ln(i),qt(i),i.flags&=-16777217),null;case 27:Ke(i),a=et.current;var h=i.type;if(e!==null&&i.stateNode!=null)e.memoizedProps!==l&&ln(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return qt(i),null}e=tt.current,Ba(i)?Md(i):(e=tp(h,l,a),i.stateNode=e,ln(i))}return qt(i),null;case 5:if(Ke(i),a=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==l&&ln(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return qt(i),null}if(e=tt.current,Ba(i))Md(i);else{switch(h=Il(et.current),e){case 1:e=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:e=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":e=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":e=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":e=h.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof l.is=="string"?h.createElement("select",{is:l.is}):h.createElement("select"),l.multiple?e.multiple=!0:l.size&&(e.size=l.size);break;default:e=typeof l.is=="string"?h.createElement(a,{is:l.is}):h.createElement(a)}}e[we]=i,e[Ue]=l;t:for(h=i.child;h!==null;){if(h.tag===5||h.tag===6)e.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===i)break t;for(;h.sibling===null;){if(h.return===null||h.return===i)break t;h=h.return}h.sibling.return=h.return,h=h.sibling}i.stateNode=e;t:switch(_e(e,a,l),a){case"button":case"input":case"select":case"textarea":e=!!l.autoFocus;break t;case"img":e=!0;break t;default:e=!1}e&&ln(i)}}return qt(i),i.flags&=-16777217,null;case 6:if(e&&i.stateNode!=null)e.memoizedProps!==l&&ln(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(s(166));if(e=et.current,Ba(i)){if(e=i.stateNode,a=i.memoizedProps,l=null,h=Pe,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}e[we]=i,e=!!(e.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Yg(e.nodeValue,a)),e||ls(i)}else e=Il(e).createTextNode(l),e[we]=i,i.stateNode=e}return qt(i),null;case 13:if(l=i.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(h=Ba(i),l!==null&&l.dehydrated!==null){if(e===null){if(!h)throw Error(s(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[we]=i}else Ia(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;qt(i),h=!1}else h=Od(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(an(i),i):(an(i),null)}if(an(i),(i.flags&128)!==0)return i.lanes=a,i;if(a=l!==null,e=e!==null&&e.memoizedState!==null,a){l=i.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool);var p=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),p!==h&&(l.flags|=2048)}return a!==e&&a&&(i.child.flags|=8192),Ml(i,i.updateQueue),qt(i),null;case 4:return kt(),e===null&&wu(i.stateNode.containerInfo),qt(i),null;case 10:return nn(i.type),qt(i),null;case 19:if(Q(ae),h=i.memoizedState,h===null)return qt(i),null;if(l=(i.flags&128)!==0,p=h.rendering,p===null)if(l)sr(h,!1);else{if(Yt!==0||e!==null&&(e.flags&128)!==0)for(e=i.child;e!==null;){if(p=wl(e),p!==null){for(i.flags|=128,sr(h,!1),e=p.updateQueue,i.updateQueue=e,Ml(i,e),i.subtreeFlags=0,e=a,a=i.child;a!==null;)Cd(a,e),a=a.sibling;return X(ae,ae.current&1|2),i.child}e=e.sibling}h.tail!==null&&Kt()>Ll&&(i.flags|=128,l=!0,sr(h,!1),i.lanes=4194304)}else{if(!l)if(e=wl(p),e!==null){if(i.flags|=128,l=!0,e=e.updateQueue,i.updateQueue=e,Ml(i,e),sr(h,!0),h.tail===null&&h.tailMode==="hidden"&&!p.alternate&&!Mt)return qt(i),null}else 2*Kt()-h.renderingStartTime>Ll&&a!==536870912&&(i.flags|=128,l=!0,sr(h,!1),i.lanes=4194304);h.isBackwards?(p.sibling=i.child,i.child=p):(e=h.last,e!==null?e.sibling=p:i.child=p,h.last=p)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=Kt(),i.sibling=null,e=ae.current,X(ae,l?e&1|2:e&1),i):(qt(i),null);case 22:case 23:return an(i),xc(),l=i.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(qt(i),i.subtreeFlags&6&&(i.flags|=8192)):qt(i),a=i.updateQueue,a!==null&&Ml(i,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),e!==null&&Q(us),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),nn(se),qt(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function Ov(e,i){switch(dc(i),i.tag){case 1:return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 3:return nn(se),kt(),e=i.flags,(e&65536)!==0&&(e&128)===0?(i.flags=e&-65537|128,i):null;case 26:case 27:case 5:return Ke(i),null;case 13:if(an(i),e=i.memoizedState,e!==null&&e.dehydrated!==null){if(i.alternate===null)throw Error(s(340));Ia()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 19:return Q(ae),null;case 4:return kt(),null;case 10:return nn(i.type),null;case 22:case 23:return an(i),xc(),e!==null&&Q(us),e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 24:return nn(se),null;case 25:return null;default:return null}}function eg(e,i){switch(dc(i),i.tag){case 3:nn(se),kt();break;case 26:case 27:case 5:Ke(i);break;case 4:kt();break;case 13:an(i);break;case 19:Q(ae);break;case 10:nn(i.type);break;case 22:case 23:an(i),xc(),e!==null&&Q(us);break;case 24:nn(se)}}function ar(e,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&e)===e){l=void 0;var p=a.create,b=a.inst;l=p(),b.destroy=l}a=a.next}while(a!==h)}}catch(S){jt(i,i.return,S)}}function Rn(e,i,a){try{var l=i.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var p=h.next;l=p;do{if((l.tag&e)===e){var b=l.inst,S=b.destroy;if(S!==void 0){b.destroy=void 0,h=i;var R=a,j=S;try{j()}catch(G){jt(h,R,G)}}}l=l.next}while(l!==p)}}catch(G){jt(i,i.return,G)}}function ig(e){var i=e.updateQueue;if(i!==null){var a=e.stateNode;try{Id(i,a)}catch(l){jt(e,e.return,l)}}}function ng(e,i,a){a.props=ds(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(l){jt(e,i,l)}}function rr(e,i){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof a=="function"?e.refCleanup=a(l):a.current=l}}catch(h){jt(e,i,h)}}function Bi(e,i){var a=e.ref,l=e.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){jt(e,i,h)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){jt(e,i,h)}else a.current=null}function sg(e){var i=e.type,a=e.memoizedProps,l=e.stateNode;try{t:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break t;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){jt(e,e.return,h)}}function tu(e,i,a){try{var l=e.stateNode;Zv(l,e.type,a,i),l[Ue]=i}catch(h){jt(e,e.return,h)}}function ag(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Fn(e.type)||e.tag===4}function eu(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||ag(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Fn(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function iu(e,i,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(e),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Bl));else if(l!==4&&(l===27&&Fn(e.type)&&(a=e.stateNode,i=null),e=e.child,e!==null))for(iu(e,i,a),e=e.sibling;e!==null;)iu(e,i,a),e=e.sibling}function Dl(e,i,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,i?a.insertBefore(e,i):a.appendChild(e);else if(l!==4&&(l===27&&Fn(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Dl(e,i,a),e=e.sibling;e!==null;)Dl(e,i,a),e=e.sibling}function rg(e){var i=e.stateNode,a=e.memoizedProps;try{for(var l=e.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);_e(i,l,a),i[we]=e,i[Ue]=a}catch(p){jt(e,e.return,p)}}var on=!1,$t=!1,nu=!1,lg=typeof WeakSet=="function"?WeakSet:Set,me=null;function Lv(e,i){if(e=e.containerInfo,Cu=Kl,e=yd(e),ec(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else t:{a=(a=e.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,p=l.focusNode;l=l.focusOffset;try{a.nodeType,p.nodeType}catch{a=null;break t}var b=0,S=-1,R=-1,j=0,G=0,K=e,H=null;e:for(;;){for(var z;K!==a||h!==0&&K.nodeType!==3||(S=b+h),K!==p||l!==0&&K.nodeType!==3||(R=b+l),K.nodeType===3&&(b+=K.nodeValue.length),(z=K.firstChild)!==null;)H=K,K=z;for(;;){if(K===e)break e;if(H===a&&++j===h&&(S=b),H===p&&++G===l&&(R=b),(z=K.nextSibling)!==null)break;K=H,H=K.parentNode}K=z}a=S===-1||R===-1?null:{start:S,end:R}}else a=null}a=a||{start:0,end:0}}else a=null;for(Ru={focusedElem:e,selectionRange:a},Kl=!1,me=i;me!==null;)if(i=me,e=i.child,(i.subtreeFlags&1024)!==0&&e!==null)e.return=i,me=e;else for(;me!==null;){switch(i=me,p=i.alternate,e=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&p!==null){e=void 0,a=i,h=p.memoizedProps,p=p.memoizedState,l=a.stateNode;try{var ft=ds(a.type,h,a.elementType===a.type);e=l.getSnapshotBeforeUpdate(ft,p),l.__reactInternalSnapshotBeforeUpdate=e}catch(ut){jt(a,a.return,ut)}}break;case 3:if((e&1024)!==0){if(e=i.stateNode.containerInfo,a=e.nodeType,a===9)Ou(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Ou(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=i.sibling,e!==null){e.return=i.return,me=e;break}me=i.return}}function og(e,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Mn(e,a),l&4&&ar(5,a);break;case 1:if(Mn(e,a),l&4)if(e=a.stateNode,i===null)try{e.componentDidMount()}catch(b){jt(a,a.return,b)}else{var h=ds(a.type,i.memoizedProps);i=i.memoizedState;try{e.componentDidUpdate(h,i,e.__reactInternalSnapshotBeforeUpdate)}catch(b){jt(a,a.return,b)}}l&64&&ig(a),l&512&&rr(a,a.return);break;case 3:if(Mn(e,a),l&64&&(e=a.updateQueue,e!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{Id(e,i)}catch(b){jt(a,a.return,b)}}break;case 27:i===null&&l&4&&rg(a);case 26:case 5:Mn(e,a),i===null&&l&4&&sg(a),l&512&&rr(a,a.return);break;case 12:Mn(e,a);break;case 13:Mn(e,a),l&4&&hg(e,a),l&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=Bv.bind(null,a),ab(e,a))));break;case 22:if(l=a.memoizedState!==null||on,!l){i=i!==null&&i.memoizedState!==null||$t,h=on;var p=$t;on=l,($t=i)&&!p?Dn(e,a,(a.subtreeFlags&8772)!==0):Mn(e,a),on=h,$t=p}break;case 30:break;default:Mn(e,a)}}function cg(e){var i=e.alternate;i!==null&&(e.alternate=null,cg(i)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(i=e.stateNode,i!==null&&Fo(i)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Bt=null,qe=!1;function cn(e,i,a){for(a=a.child;a!==null;)ug(e,i,a),a=a.sibling}function ug(e,i,a){if(he&&typeof he.onCommitFiberUnmount=="function")try{he.onCommitFiberUnmount(ai,a)}catch{}switch(a.tag){case 26:$t||Bi(a,i),cn(e,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:$t||Bi(a,i);var l=Bt,h=qe;Fn(a.type)&&(Bt=a.stateNode,qe=!1),cn(e,i,a),pr(a.stateNode),Bt=l,qe=h;break;case 5:$t||Bi(a,i);case 6:if(l=Bt,h=qe,Bt=null,cn(e,i,a),Bt=l,qe=h,Bt!==null)if(qe)try{(Bt.nodeType===9?Bt.body:Bt.nodeName==="HTML"?Bt.ownerDocument.body:Bt).removeChild(a.stateNode)}catch(p){jt(a,i,p)}else try{Bt.removeChild(a.stateNode)}catch(p){jt(a,i,p)}break;case 18:Bt!==null&&(qe?(e=Bt,Zg(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),Er(e)):Zg(Bt,a.stateNode));break;case 4:l=Bt,h=qe,Bt=a.stateNode.containerInfo,qe=!0,cn(e,i,a),Bt=l,qe=h;break;case 0:case 11:case 14:case 15:$t||Rn(2,a,i),$t||Rn(4,a,i),cn(e,i,a);break;case 1:$t||(Bi(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&ng(a,i,l)),cn(e,i,a);break;case 21:cn(e,i,a);break;case 22:$t=(l=$t)||a.memoizedState!==null,cn(e,i,a),$t=l;break;default:cn(e,i,a)}}function hg(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Er(e)}catch(a){jt(i,i.return,a)}}function kv(e){switch(e.tag){case 13:case 19:var i=e.stateNode;return i===null&&(i=e.stateNode=new lg),i;case 22:return e=e.stateNode,i=e._retryCache,i===null&&(i=e._retryCache=new lg),i;default:throw Error(s(435,e.tag))}}function su(e,i){var a=kv(e);i.forEach(function(l){var h=Iv.bind(null,e,l);a.has(l)||(a.add(l),l.then(h,h))})}function Ze(e,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],p=e,b=i,S=b;t:for(;S!==null;){switch(S.tag){case 27:if(Fn(S.type)){Bt=S.stateNode,qe=!1;break t}break;case 5:Bt=S.stateNode,qe=!1;break t;case 3:case 4:Bt=S.stateNode.containerInfo,qe=!0;break t}S=S.return}if(Bt===null)throw Error(s(160));ug(p,b,h),Bt=null,qe=!1,p=h.alternate,p!==null&&(p.return=null),h.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)dg(i,e),i=i.sibling}var Mi=null;function dg(e,i){var a=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Ze(i,e),Je(e),l&4&&(Rn(3,e,e.return),ar(3,e),Rn(5,e,e.return));break;case 1:Ze(i,e),Je(e),l&512&&($t||a===null||Bi(a,a.return)),l&64&&on&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=Mi;if(Ze(i,e),Je(e),l&512&&($t||a===null||Bi(a,a.return)),l&4){var p=a!==null?a.memoizedState:null;if(l=e.memoizedState,a===null)if(l===null)if(e.stateNode===null){t:{l=e.type,a=e.memoizedProps,h=h.ownerDocument||h;e:switch(l){case"title":p=h.getElementsByTagName("title")[0],(!p||p[Da]||p[we]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=h.createElement(l),h.head.insertBefore(p,h.querySelector("head > title"))),_e(p,l,a),p[we]=e,ge(p),l=p;break t;case"link":var b=rp("link","href",h).get(l+(a.href||""));if(b){for(var S=0;S<b.length;S++)if(p=b[S],p.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&p.getAttribute("rel")===(a.rel==null?null:a.rel)&&p.getAttribute("title")===(a.title==null?null:a.title)&&p.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){b.splice(S,1);break e}}p=h.createElement(l),_e(p,l,a),h.head.appendChild(p);break;case"meta":if(b=rp("meta","content",h).get(l+(a.content||""))){for(S=0;S<b.length;S++)if(p=b[S],p.getAttribute("content")===(a.content==null?null:""+a.content)&&p.getAttribute("name")===(a.name==null?null:a.name)&&p.getAttribute("property")===(a.property==null?null:a.property)&&p.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&p.getAttribute("charset")===(a.charSet==null?null:a.charSet)){b.splice(S,1);break e}}p=h.createElement(l),_e(p,l,a),h.head.appendChild(p);break;default:throw Error(s(468,l))}p[we]=e,ge(p),l=p}e.stateNode=l}else lp(h,e.type,e.stateNode);else e.stateNode=ap(h,l,e.memoizedProps);else p!==l?(p===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):p.count--,l===null?lp(h,e.type,e.stateNode):ap(h,l,e.memoizedProps)):l===null&&e.stateNode!==null&&tu(e,e.memoizedProps,a.memoizedProps)}break;case 27:Ze(i,e),Je(e),l&512&&($t||a===null||Bi(a,a.return)),a!==null&&l&4&&tu(e,e.memoizedProps,a.memoizedProps);break;case 5:if(Ze(i,e),Je(e),l&512&&($t||a===null||Bi(a,a.return)),e.flags&32){h=e.stateNode;try{ks(h,"")}catch(z){jt(e,e.return,z)}}l&4&&e.stateNode!=null&&(h=e.memoizedProps,tu(e,h,a!==null?a.memoizedProps:h)),l&1024&&(nu=!0);break;case 6:if(Ze(i,e),Je(e),l&4){if(e.stateNode===null)throw Error(s(162));l=e.memoizedProps,a=e.stateNode;try{a.nodeValue=l}catch(z){jt(e,e.return,z)}}break;case 3:if(Vl=null,h=Mi,Mi=ql(i.containerInfo),Ze(i,e),Mi=h,Je(e),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Er(i.containerInfo)}catch(z){jt(e,e.return,z)}nu&&(nu=!1,fg(e));break;case 4:l=Mi,Mi=ql(e.stateNode.containerInfo),Ze(i,e),Je(e),Mi=l;break;case 12:Ze(i,e),Je(e);break;case 13:Ze(i,e),Je(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(uu=Kt()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,su(e,l)));break;case 22:h=e.memoizedState!==null;var R=a!==null&&a.memoizedState!==null,j=on,G=$t;if(on=j||h,$t=G||R,Ze(i,e),$t=G,on=j,Je(e),l&8192)t:for(i=e.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(a===null||R||on||$t||fs(e)),a=null,i=e;;){if(i.tag===5||i.tag===26){if(a===null){R=a=i;try{if(p=R.stateNode,h)b=p.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{S=R.stateNode;var K=R.memoizedProps.style,H=K!=null&&K.hasOwnProperty("display")?K.display:null;S.style.display=H==null||typeof H=="boolean"?"":(""+H).trim()}}catch(z){jt(R,R.return,z)}}}else if(i.tag===6){if(a===null){R=i;try{R.stateNode.nodeValue=h?"":R.memoizedProps}catch(z){jt(R,R.return,z)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===e)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break t;for(;i.sibling===null;){if(i.return===null||i.return===e)break t;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=e.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,su(e,a))));break;case 19:Ze(i,e),Je(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,su(e,l)));break;case 30:break;case 21:break;default:Ze(i,e),Je(e)}}function Je(e){var i=e.flags;if(i&2){try{for(var a,l=e.return;l!==null;){if(ag(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,p=eu(e);Dl(e,p,h);break;case 5:var b=a.stateNode;a.flags&32&&(ks(b,""),a.flags&=-33);var S=eu(e);Dl(e,S,b);break;case 3:case 4:var R=a.stateNode.containerInfo,j=eu(e);iu(e,j,R);break;default:throw Error(s(161))}}catch(G){jt(e,e.return,G)}e.flags&=-3}i&4096&&(e.flags&=-4097)}function fg(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var i=e;fg(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),e=e.sibling}}function Mn(e,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)og(e,i.alternate,i),i=i.sibling}function fs(e){for(e=e.child;e!==null;){var i=e;switch(i.tag){case 0:case 11:case 14:case 15:Rn(4,i,i.return),fs(i);break;case 1:Bi(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&ng(i,i.return,a),fs(i);break;case 27:pr(i.stateNode);case 26:case 5:Bi(i,i.return),fs(i);break;case 22:i.memoizedState===null&&fs(i);break;case 30:fs(i);break;default:fs(i)}e=e.sibling}}function Dn(e,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,h=e,p=i,b=p.flags;switch(p.tag){case 0:case 11:case 15:Dn(h,p,a),ar(4,p);break;case 1:if(Dn(h,p,a),l=p,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(j){jt(l,l.return,j)}if(l=p,h=l.updateQueue,h!==null){var S=l.stateNode;try{var R=h.shared.hiddenCallbacks;if(R!==null)for(h.shared.hiddenCallbacks=null,h=0;h<R.length;h++)Bd(R[h],S)}catch(j){jt(l,l.return,j)}}a&&b&64&&ig(p),rr(p,p.return);break;case 27:rg(p);case 26:case 5:Dn(h,p,a),a&&l===null&&b&4&&sg(p),rr(p,p.return);break;case 12:Dn(h,p,a);break;case 13:Dn(h,p,a),a&&b&4&&hg(h,p);break;case 22:p.memoizedState===null&&Dn(h,p,a),rr(p,p.return);break;case 30:break;default:Dn(h,p,a)}i=i.sibling}}function au(e,i){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(e=i.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&Va(a))}function ru(e,i){e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&Va(e))}function Ii(e,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)gg(e,i,a,l),i=i.sibling}function gg(e,i,a,l){var h=i.flags;switch(i.tag){case 0:case 11:case 15:Ii(e,i,a,l),h&2048&&ar(9,i);break;case 1:Ii(e,i,a,l);break;case 3:Ii(e,i,a,l),h&2048&&(e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&Va(e)));break;case 12:if(h&2048){Ii(e,i,a,l),e=i.stateNode;try{var p=i.memoizedProps,b=p.id,S=p.onPostCommit;typeof S=="function"&&S(b,i.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(R){jt(i,i.return,R)}}else Ii(e,i,a,l);break;case 13:Ii(e,i,a,l);break;case 23:break;case 22:p=i.stateNode,b=i.alternate,i.memoizedState!==null?p._visibility&2?Ii(e,i,a,l):lr(e,i):p._visibility&2?Ii(e,i,a,l):(p._visibility|=2,Zs(e,i,a,l,(i.subtreeFlags&10256)!==0)),h&2048&&au(b,i);break;case 24:Ii(e,i,a,l),h&2048&&ru(i.alternate,i);break;default:Ii(e,i,a,l)}}function Zs(e,i,a,l,h){for(h=h&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var p=e,b=i,S=a,R=l,j=b.flags;switch(b.tag){case 0:case 11:case 15:Zs(p,b,S,R,h),ar(8,b);break;case 23:break;case 22:var G=b.stateNode;b.memoizedState!==null?G._visibility&2?Zs(p,b,S,R,h):lr(p,b):(G._visibility|=2,Zs(p,b,S,R,h)),h&&j&2048&&au(b.alternate,b);break;case 24:Zs(p,b,S,R,h),h&&j&2048&&ru(b.alternate,b);break;default:Zs(p,b,S,R,h)}i=i.sibling}}function lr(e,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=e,l=i,h=l.flags;switch(l.tag){case 22:lr(a,l),h&2048&&au(l.alternate,l);break;case 24:lr(a,l),h&2048&&ru(l.alternate,l);break;default:lr(a,l)}i=i.sibling}}var or=8192;function Js(e){if(e.subtreeFlags&or)for(e=e.child;e!==null;)pg(e),e=e.sibling}function pg(e){switch(e.tag){case 26:Js(e),e.flags&or&&e.memoizedState!==null&&vb(Mi,e.memoizedState,e.memoizedProps);break;case 5:Js(e);break;case 3:case 4:var i=Mi;Mi=ql(e.stateNode.containerInfo),Js(e),Mi=i;break;case 22:e.memoizedState===null&&(i=e.alternate,i!==null&&i.memoizedState!==null?(i=or,or=16777216,Js(e),or=i):Js(e));break;default:Js(e)}}function mg(e){var i=e.alternate;if(i!==null&&(e=i.child,e!==null)){i.child=null;do i=e.sibling,e.sibling=null,e=i;while(e!==null)}}function cr(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];me=l,vg(l,e)}mg(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)yg(e),e=e.sibling}function yg(e){switch(e.tag){case 0:case 11:case 15:cr(e),e.flags&2048&&Rn(9,e,e.return);break;case 3:cr(e);break;case 12:cr(e);break;case 22:var i=e.stateNode;e.memoizedState!==null&&i._visibility&2&&(e.return===null||e.return.tag!==13)?(i._visibility&=-3,Ol(e)):cr(e);break;default:cr(e)}}function Ol(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];me=l,vg(l,e)}mg(e)}for(e=e.child;e!==null;){switch(i=e,i.tag){case 0:case 11:case 15:Rn(8,i,i.return),Ol(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,Ol(i));break;default:Ol(i)}e=e.sibling}}function vg(e,i){for(;me!==null;){var a=me;switch(a.tag){case 0:case 11:case 15:Rn(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Va(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,me=l;else t:for(a=e;me!==null;){l=me;var h=l.sibling,p=l.return;if(cg(l),l===a){me=null;break t}if(h!==null){h.return=p,me=h;break t}me=p}}}var Nv={getCacheForType:function(e){var i=Te(se),a=i.data.get(e);return a===void 0&&(a=e(),i.data.set(e,a)),a}},Pv=typeof WeakMap=="function"?WeakMap:Map,Dt=0,Ht=null,wt=null,Ct=0,Ot=0,ti=null,On=!1,ta=!1,lu=!1,un=0,Yt=0,Ln=0,gs=0,ou=0,mi=0,ea=0,ur=null,Ge=null,cu=!1,uu=0,Ll=1/0,kl=null,kn=null,be=0,Nn=null,ia=null,na=0,hu=0,du=null,bg=null,hr=0,fu=null;function ei(){if((Dt&2)!==0&&Ct!==0)return Ct&-Ct;if(k.T!==null){var e=Gs;return e!==0?e:_u()}return Zn()}function _g(){mi===0&&(mi=(Ct&536870912)===0||Mt?Ee():536870912);var e=pi.current;return e!==null&&(e.flags|=32),mi}function ii(e,i,a){(e===Ht&&(Ot===2||Ot===9)||e.cancelPendingCommit!==null)&&(sa(e,0),Pn(e,Ct,mi,!1)),li(e,a),((Dt&2)===0||e!==Ht)&&(e===Ht&&((Dt&2)===0&&(gs|=a),Yt===4&&Pn(e,Ct,mi,!1)),qi(e))}function Ag(e,i,a){if((Dt&6)!==0)throw Error(s(327));var l=!a&&(i&124)===0&&(i&e.expiredLanes)===0||Wi(e,i),h=l?Hv(e,i):mu(e,i,!0),p=l;do{if(h===0){ta&&!l&&Pn(e,i,0,!1);break}else{if(a=e.current.alternate,p&&!Fv(a)){h=mu(e,i,!1),p=!1;continue}if(h===2){if(p=i,e.errorRecoveryDisabledLanes&p)var b=0;else b=e.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){i=b;t:{var S=e;h=ur;var R=S.current.memoizedState.isDehydrated;if(R&&(sa(S,b).flags|=256),b=mu(S,b,!1),b!==2){if(lu&&!R){S.errorRecoveryDisabledLanes|=p,gs|=p,h=4;break t}p=Ge,Ge=h,p!==null&&(Ge===null?Ge=p:Ge.push.apply(Ge,p))}h=b}if(p=!1,h!==2)continue}}if(h===1){sa(e,0),Pn(e,i,0,!0);break}t:{switch(l=e,p=h,p){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Pn(l,i,mi,!On);break t;case 2:Ge=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(h=uu+300-Kt(),10<h)){if(Pn(l,i,mi,!On),fe(l,0,!0)!==0)break t;l.timeoutHandle=$g(Sg.bind(null,l,a,Ge,kl,cu,i,mi,gs,ea,On,p,2,-0,0),h);break t}Sg(l,a,Ge,kl,cu,i,mi,gs,ea,On,p,0,-0,0)}}break}while(!0);qi(e)}function Sg(e,i,a,l,h,p,b,S,R,j,G,K,H,z){if(e.timeoutHandle=-1,K=i.subtreeFlags,(K&8192||(K&16785408)===16785408)&&(vr={stylesheets:null,count:0,unsuspend:yb},pg(i),K=bb(),K!==null)){e.cancelPendingCommit=K(Mg.bind(null,e,i,p,a,l,h,b,S,R,G,1,H,z)),Pn(e,p,b,!j);return}Mg(e,i,p,a,l,h,b,S,R)}function Fv(e){for(var i=e;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],p=h.getSnapshot;h=h.value;try{if(!$e(p(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Pn(e,i,a,l){i&=~ou,i&=~gs,e.suspendedLanes|=i,e.pingedLanes&=~i,l&&(e.warmLanes|=i),l=e.expirationTimes;for(var h=i;0<h;){var p=31-Vt(h),b=1<<p;l[p]=-1,h&=~b}a!==0&&qr(e,a,i)}function Nl(){return(Dt&6)===0?(dr(0),!1):!0}function gu(){if(wt!==null){if(Ot===0)var e=wt.return;else e=wt,en=os=null,Oc(e),$s=null,ir=0,e=wt;for(;e!==null;)eg(e.alternate,e),e=e.return;wt=null}}function sa(e,i){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,tb(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),gu(),Ht=e,wt=a=Zi(e.current,null),Ct=i,Ot=0,ti=null,On=!1,ta=Wi(e,i),lu=!1,ea=mi=ou=gs=Ln=Yt=0,Ge=ur=null,cu=!1,(i&8)!==0&&(i|=i&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=i;0<l;){var h=31-Vt(l),p=1<<h;i|=e[h],l&=~p}return un=i,il(),a}function Eg(e,i){At=null,k.H=Al,i===Ya||i===hl?(i=zd(),Ot=3):i===Fd?(i=zd(),Ot=4):Ot=i===Bf?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,ti=i,wt===null&&(Yt=1,xl(e,hi(i,e.current)))}function wg(){var e=k.H;return k.H=Al,e===null?Al:e}function Tg(){var e=k.A;return k.A=Nv,e}function pu(){Yt=4,On||(Ct&4194048)!==Ct&&pi.current!==null||(ta=!0),(Ln&134217727)===0&&(gs&134217727)===0||Ht===null||Pn(Ht,Ct,mi,!1)}function mu(e,i,a){var l=Dt;Dt|=2;var h=wg(),p=Tg();(Ht!==e||Ct!==i)&&(kl=null,sa(e,i)),i=!1;var b=Yt;t:do try{if(Ot!==0&&wt!==null){var S=wt,R=ti;switch(Ot){case 8:gu(),b=6;break t;case 3:case 2:case 9:case 6:pi.current===null&&(i=!0);var j=Ot;if(Ot=0,ti=null,aa(e,S,R,j),a&&ta){b=0;break t}break;default:j=Ot,Ot=0,ti=null,aa(e,S,R,j)}}jv(),b=Yt;break}catch(G){Eg(e,G)}while(!0);return i&&e.shellSuspendCounter++,en=os=null,Dt=l,k.H=h,k.A=p,wt===null&&(Ht=null,Ct=0,il()),b}function jv(){for(;wt!==null;)xg(wt)}function Hv(e,i){var a=Dt;Dt|=2;var l=wg(),h=Tg();Ht!==e||Ct!==i?(kl=null,Ll=Kt()+500,sa(e,i)):ta=Wi(e,i);t:do try{if(Ot!==0&&wt!==null){i=wt;var p=ti;e:switch(Ot){case 1:Ot=0,ti=null,aa(e,i,p,1);break;case 2:case 9:if(jd(p)){Ot=0,ti=null,Cg(i);break}i=function(){Ot!==2&&Ot!==9||Ht!==e||(Ot=7),qi(e)},p.then(i,i);break t;case 3:Ot=7;break t;case 4:Ot=5;break t;case 7:jd(p)?(Ot=0,ti=null,Cg(i)):(Ot=0,ti=null,aa(e,i,p,7));break;case 5:var b=null;switch(wt.tag){case 26:b=wt.memoizedState;case 5:case 27:var S=wt;if(!b||op(b)){Ot=0,ti=null;var R=S.sibling;if(R!==null)wt=R;else{var j=S.return;j!==null?(wt=j,Pl(j)):wt=null}break e}}Ot=0,ti=null,aa(e,i,p,5);break;case 6:Ot=0,ti=null,aa(e,i,p,6);break;case 8:gu(),Yt=6;break t;default:throw Error(s(462))}}zv();break}catch(G){Eg(e,G)}while(!0);return en=os=null,k.H=l,k.A=h,Dt=a,wt!==null?0:(Ht=null,Ct=0,il(),Yt)}function zv(){for(;wt!==null&&!ue();)xg(wt)}function xg(e){var i=Jf(e.alternate,e,un);e.memoizedProps=e.pendingProps,i===null?Pl(e):wt=i}function Cg(e){var i=e,a=i.alternate;switch(i.tag){case 15:case 0:i=Yf(a,i,i.pendingProps,i.type,void 0,Ct);break;case 11:i=Yf(a,i,i.pendingProps,i.type.render,i.ref,Ct);break;case 5:Oc(i);default:eg(a,i),i=wt=Cd(i,un),i=Jf(a,i,un)}e.memoizedProps=e.pendingProps,i===null?Pl(e):wt=i}function aa(e,i,a,l){en=os=null,Oc(i),$s=null,ir=0;var h=i.return;try{if(Rv(e,h,i,a,Ct)){Yt=1,xl(e,hi(a,e.current)),wt=null;return}}catch(p){if(h!==null)throw wt=h,p;Yt=1,xl(e,hi(a,e.current)),wt=null;return}i.flags&32768?(Mt||l===1?e=!0:ta||(Ct&536870912)!==0?e=!1:(On=e=!0,(l===2||l===9||l===3||l===6)&&(l=pi.current,l!==null&&l.tag===13&&(l.flags|=16384))),Rg(i,e)):Pl(i)}function Pl(e){var i=e;do{if((i.flags&32768)!==0){Rg(i,On);return}e=i.return;var a=Dv(i.alternate,i,un);if(a!==null){wt=a;return}if(i=i.sibling,i!==null){wt=i;return}wt=i=e}while(i!==null);Yt===0&&(Yt=5)}function Rg(e,i){do{var a=Ov(e.alternate,e);if(a!==null){a.flags&=32767,wt=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(e=e.sibling,e!==null)){wt=e;return}wt=e=a}while(e!==null);Yt=6,wt=null}function Mg(e,i,a,l,h,p,b,S,R){e.cancelPendingCommit=null;do Fl();while(be!==0);if((Dt&6)!==0)throw Error(s(327));if(i!==null){if(i===e.current)throw Error(s(177));if(p=i.lanes|i.childLanes,p|=rc,Qn(e,a,p,b,S,R),e===Ht&&(wt=Ht=null,Ct=0),ia=i,Nn=e,na=a,hu=p,du=h,bg=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,qv(We,function(){return Ng(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=k.T,k.T=null,h=P.p,P.p=2,b=Dt,Dt|=4;try{Lv(e,i,a)}finally{Dt=b,P.p=h,k.T=l}}be=1,Dg(),Og(),Lg()}}function Dg(){if(be===1){be=0;var e=Nn,i=ia,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=k.T,k.T=null;var l=P.p;P.p=2;var h=Dt;Dt|=4;try{dg(i,e);var p=Ru,b=yd(e.containerInfo),S=p.focusedElem,R=p.selectionRange;if(b!==S&&S&&S.ownerDocument&&md(S.ownerDocument.documentElement,S)){if(R!==null&&ec(S)){var j=R.start,G=R.end;if(G===void 0&&(G=j),"selectionStart"in S)S.selectionStart=j,S.selectionEnd=Math.min(G,S.value.length);else{var K=S.ownerDocument||document,H=K&&K.defaultView||window;if(H.getSelection){var z=H.getSelection(),ft=S.textContent.length,ut=Math.min(R.start,ft),Ft=R.end===void 0?ut:Math.min(R.end,ft);!z.extend&&ut>Ft&&(b=Ft,Ft=ut,ut=b);var L=pd(S,ut),D=pd(S,Ft);if(L&&D&&(z.rangeCount!==1||z.anchorNode!==L.node||z.anchorOffset!==L.offset||z.focusNode!==D.node||z.focusOffset!==D.offset)){var F=K.createRange();F.setStart(L.node,L.offset),z.removeAllRanges(),ut>Ft?(z.addRange(F),z.extend(D.node,D.offset)):(F.setEnd(D.node,D.offset),z.addRange(F))}}}}for(K=[],z=S;z=z.parentNode;)z.nodeType===1&&K.push({element:z,left:z.scrollLeft,top:z.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<K.length;S++){var V=K[S];V.element.scrollLeft=V.left,V.element.scrollTop=V.top}}Kl=!!Cu,Ru=Cu=null}finally{Dt=h,P.p=l,k.T=a}}e.current=i,be=2}}function Og(){if(be===2){be=0;var e=Nn,i=ia,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=k.T,k.T=null;var l=P.p;P.p=2;var h=Dt;Dt|=4;try{og(e,i.alternate,i)}finally{Dt=h,P.p=l,k.T=a}}be=3}}function Lg(){if(be===4||be===3){be=0,xi();var e=Nn,i=ia,a=na,l=bg;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?be=5:(be=0,ia=Nn=null,kg(e,e.pendingLanes));var h=e.pendingLanes;if(h===0&&(kn=null),Hi(a),i=i.stateNode,he&&typeof he.onCommitFiberRoot=="function")try{he.onCommitFiberRoot(ai,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=k.T,h=P.p,P.p=2,k.T=null;try{for(var p=e.onRecoverableError,b=0;b<l.length;b++){var S=l[b];p(S.value,{componentStack:S.stack})}}finally{k.T=i,P.p=h}}(na&3)!==0&&Fl(),qi(e),h=e.pendingLanes,(a&4194090)!==0&&(h&42)!==0?e===fu?hr++:(hr=0,fu=e):hr=0,dr(0)}}function kg(e,i){(e.pooledCacheLanes&=i)===0&&(i=e.pooledCache,i!=null&&(e.pooledCache=null,Va(i)))}function Fl(e){return Dg(),Og(),Lg(),Ng()}function Ng(){if(be!==5)return!1;var e=Nn,i=hu;hu=0;var a=Hi(na),l=k.T,h=P.p;try{P.p=32>a?32:a,k.T=null,a=du,du=null;var p=Nn,b=na;if(be=0,ia=Nn=null,na=0,(Dt&6)!==0)throw Error(s(331));var S=Dt;if(Dt|=4,yg(p.current),gg(p,p.current,b,a),Dt=S,dr(0,!1),he&&typeof he.onPostCommitFiberRoot=="function")try{he.onPostCommitFiberRoot(ai,p)}catch{}return!0}finally{P.p=h,k.T=l,kg(e,i)}}function Pg(e,i,a){i=hi(a,i),i=Vc(e.stateNode,i,2),e=wn(e,i,2),e!==null&&(li(e,2),qi(e))}function jt(e,i,a){if(e.tag===3)Pg(e,e,a);else for(;i!==null;){if(i.tag===3){Pg(i,e,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(kn===null||!kn.has(l))){e=hi(a,e),a=zf(2),l=wn(i,a,2),l!==null&&(Uf(a,l,i,e),li(l,2),qi(l));break}}i=i.return}}function yu(e,i,a){var l=e.pingCache;if(l===null){l=e.pingCache=new Pv;var h=new Set;l.set(i,h)}else h=l.get(i),h===void 0&&(h=new Set,l.set(i,h));h.has(a)||(lu=!0,h.add(a),e=Uv.bind(null,e,i,a),i.then(e,e))}function Uv(e,i,a){var l=e.pingCache;l!==null&&l.delete(i),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,Ht===e&&(Ct&a)===a&&(Yt===4||Yt===3&&(Ct&62914560)===Ct&&300>Kt()-uu?(Dt&2)===0&&sa(e,0):ou|=a,ea===Ct&&(ea=0)),qi(e)}function Fg(e,i){i===0&&(i=ze()),e=Us(e,i),e!==null&&(li(e,i),qi(e))}function Bv(e){var i=e.memoizedState,a=0;i!==null&&(a=i.retryLane),Fg(e,a)}function Iv(e,i){var a=0;switch(e.tag){case 13:var l=e.stateNode,h=e.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(i),Fg(e,a)}function qv(e,i){return Ni(e,i)}var jl=null,ra=null,vu=!1,Hl=!1,bu=!1,ps=0;function qi(e){e!==ra&&e.next===null&&(ra===null?jl=ra=e:ra=ra.next=e),Hl=!0,vu||(vu=!0,Vv())}function dr(e,i){if(!bu&&Hl){bu=!0;do for(var a=!1,l=jl;l!==null;){if(e!==0){var h=l.pendingLanes;if(h===0)var p=0;else{var b=l.suspendedLanes,S=l.pingedLanes;p=(1<<31-Vt(42|e)+1)-1,p&=h&~(b&~S),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(a=!0,Ug(l,p))}else p=Ct,p=fe(l,l===Ht?p:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(p&3)===0||Wi(l,p)||(a=!0,Ug(l,p));l=l.next}while(a);bu=!1}}function Gv(){jg()}function jg(){Hl=vu=!1;var e=0;ps!==0&&(Jv()&&(e=ps),ps=0);for(var i=Kt(),a=null,l=jl;l!==null;){var h=l.next,p=Hg(l,i);p===0?(l.next=null,a===null?jl=h:a.next=h,h===null&&(ra=a)):(a=l,(e!==0||(p&3)!==0)&&(Hl=!0)),l=h}dr(e)}function Hg(e,i){for(var a=e.suspendedLanes,l=e.pingedLanes,h=e.expirationTimes,p=e.pendingLanes&-62914561;0<p;){var b=31-Vt(p),S=1<<b,R=h[b];R===-1?((S&a)===0||(S&l)!==0)&&(h[b]=ne(S,i)):R<=i&&(e.expiredLanes|=S),p&=~S}if(i=Ht,a=Ct,a=fe(e,e===i?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,a===0||e===i&&(Ot===2||Ot===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&Le(l),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||Wi(e,a)){if(i=a&-a,i===e.callbackPriority)return i;switch(l!==null&&Le(l),Hi(a)){case 2:case 8:a=Ki;break;case 32:a=We;break;case 268435456:a=Fi;break;default:a=We}return l=zg.bind(null,e),a=Ni(a,l),e.callbackPriority=i,e.callbackNode=a,i}return l!==null&&l!==null&&Le(l),e.callbackPriority=2,e.callbackNode=null,2}function zg(e,i){if(be!==0&&be!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Fl()&&e.callbackNode!==a)return null;var l=Ct;return l=fe(e,e===Ht?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(Ag(e,l,i),Hg(e,Kt()),e.callbackNode!=null&&e.callbackNode===a?zg.bind(null,e):null)}function Ug(e,i){if(Fl())return null;Ag(e,i,!0)}function Vv(){eb(function(){(Dt&6)!==0?Ni(ie,Gv):jg()})}function _u(){return ps===0&&(ps=Ee()),ps}function Bg(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Wr(""+e)}function Ig(e,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,e.id&&a.setAttribute("form",e.id),i.parentNode.insertBefore(a,i),e=new FormData(e),a.parentNode.removeChild(a),e}function Xv(e,i,a,l,h){if(i==="submit"&&a&&a.stateNode===h){var p=Bg((h[Ue]||null).action),b=l.submitter;b&&(i=(i=b[Ue]||null)?Bg(i.formAction):b.getAttribute("formAction"),i!==null&&(p=i,b=null));var S=new Jr("action","action",null,l,h);e.push({event:S,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(ps!==0){var R=b?Ig(h,b):new FormData(h);Uc(a,{pending:!0,data:R,method:h.method,action:p},null,R)}}else typeof p=="function"&&(S.preventDefault(),R=b?Ig(h,b):new FormData(h),Uc(a,{pending:!0,data:R,method:h.method,action:p},p,R))},currentTarget:h}]})}}for(var Au=0;Au<ac.length;Au++){var Su=ac[Au],Yv=Su.toLowerCase(),Kv=Su[0].toUpperCase()+Su.slice(1);Ri(Yv,"on"+Kv)}Ri(_d,"onAnimationEnd"),Ri(Ad,"onAnimationIteration"),Ri(Sd,"onAnimationStart"),Ri("dblclick","onDoubleClick"),Ri("focusin","onFocus"),Ri("focusout","onBlur"),Ri(hv,"onTransitionRun"),Ri(dv,"onTransitionStart"),Ri(fv,"onTransitionCancel"),Ri(Ed,"onTransitionEnd"),Ds("onMouseEnter",["mouseout","mouseover"]),Ds("onMouseLeave",["mouseout","mouseover"]),Ds("onPointerEnter",["pointerout","pointerover"]),Ds("onPointerLeave",["pointerout","pointerover"]),Jn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Jn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Jn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Jn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Jn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Jn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Wv=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(fr));function qg(e,i){i=(i&4)!==0;for(var a=0;a<e.length;a++){var l=e[a],h=l.event;l=l.listeners;t:{var p=void 0;if(i)for(var b=l.length-1;0<=b;b--){var S=l[b],R=S.instance,j=S.currentTarget;if(S=S.listener,R!==p&&h.isPropagationStopped())break t;p=S,h.currentTarget=j;try{p(h)}catch(G){Tl(G)}h.currentTarget=null,p=R}else for(b=0;b<l.length;b++){if(S=l[b],R=S.instance,j=S.currentTarget,S=S.listener,R!==p&&h.isPropagationStopped())break t;p=S,h.currentTarget=j;try{p(h)}catch(G){Tl(G)}h.currentTarget=null,p=R}}}}function Tt(e,i){var a=i[Po];a===void 0&&(a=i[Po]=new Set);var l=e+"__bubble";a.has(l)||(Gg(i,e,2,!1),a.add(l))}function Eu(e,i,a){var l=0;i&&(l|=4),Gg(a,e,l,i)}var zl="_reactListening"+Math.random().toString(36).slice(2);function wu(e){if(!e[zl]){e[zl]=!0,Fh.forEach(function(a){a!=="selectionchange"&&(Wv.has(a)||Eu(a,!1,e),Eu(a,!0,e))});var i=e.nodeType===9?e:e.ownerDocument;i===null||i[zl]||(i[zl]=!0,Eu("selectionchange",!1,i))}}function Gg(e,i,a,l){switch(gp(i)){case 2:var h=Sb;break;case 8:h=Eb;break;default:h=Hu}a=h.bind(null,i,a,e),h=void 0,!Xo||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),l?h!==void 0?e.addEventListener(i,a,{capture:!0,passive:h}):e.addEventListener(i,a,!0):h!==void 0?e.addEventListener(i,a,{passive:h}):e.addEventListener(i,a,!1)}function Tu(e,i,a,l,h){var p=l;if((i&1)===0&&(i&2)===0&&l!==null)t:for(;;){if(l===null)return;var b=l.tag;if(b===3||b===4){var S=l.stateNode.containerInfo;if(S===h)break;if(b===4)for(b=l.return;b!==null;){var R=b.tag;if((R===3||R===4)&&b.stateNode.containerInfo===h)return;b=b.return}for(;S!==null;){if(b=Cs(S),b===null)return;if(R=b.tag,R===5||R===6||R===26||R===27){l=p=b;continue t}S=S.parentNode}}l=l.return}$h(function(){var j=p,G=Go(a),K=[];t:{var H=wd.get(e);if(H!==void 0){var z=Jr,ft=e;switch(e){case"keypress":if(Qr(a)===0)break t;case"keydown":case"keyup":z=qy;break;case"focusin":ft="focus",z=$o;break;case"focusout":ft="blur",z=$o;break;case"beforeblur":case"afterblur":z=$o;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":z=Jh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":z=Oy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":z=Xy;break;case _d:case Ad:case Sd:z=Ny;break;case Ed:z=Ky;break;case"scroll":case"scrollend":z=My;break;case"wheel":z=$y;break;case"copy":case"cut":case"paste":z=Fy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":z=ed;break;case"toggle":case"beforetoggle":z=Zy}var ut=(i&4)!==0,Ft=!ut&&(e==="scroll"||e==="scrollend"),L=ut?H!==null?H+"Capture":null:H;ut=[];for(var D=j,F;D!==null;){var V=D;if(F=V.stateNode,V=V.tag,V!==5&&V!==26&&V!==27||F===null||L===null||(V=La(D,L),V!=null&&ut.push(gr(D,V,F))),Ft)break;D=D.return}0<ut.length&&(H=new z(H,ft,null,a,G),K.push({event:H,listeners:ut}))}}if((i&7)===0){t:{if(H=e==="mouseover"||e==="pointerover",z=e==="mouseout"||e==="pointerout",H&&a!==qo&&(ft=a.relatedTarget||a.fromElement)&&(Cs(ft)||ft[xs]))break t;if((z||H)&&(H=G.window===G?G:(H=G.ownerDocument)?H.defaultView||H.parentWindow:window,z?(ft=a.relatedTarget||a.toElement,z=j,ft=ft?Cs(ft):null,ft!==null&&(Ft=o(ft),ut=ft.tag,ft!==Ft||ut!==5&&ut!==27&&ut!==6)&&(ft=null)):(z=null,ft=j),z!==ft)){if(ut=Jh,V="onMouseLeave",L="onMouseEnter",D="mouse",(e==="pointerout"||e==="pointerover")&&(ut=ed,V="onPointerLeave",L="onPointerEnter",D="pointer"),Ft=z==null?H:Oa(z),F=ft==null?H:Oa(ft),H=new ut(V,D+"leave",z,a,G),H.target=Ft,H.relatedTarget=F,V=null,Cs(G)===j&&(ut=new ut(L,D+"enter",ft,a,G),ut.target=F,ut.relatedTarget=Ft,V=ut),Ft=V,z&&ft)e:{for(ut=z,L=ft,D=0,F=ut;F;F=la(F))D++;for(F=0,V=L;V;V=la(V))F++;for(;0<D-F;)ut=la(ut),D--;for(;0<F-D;)L=la(L),F--;for(;D--;){if(ut===L||L!==null&&ut===L.alternate)break e;ut=la(ut),L=la(L)}ut=null}else ut=null;z!==null&&Vg(K,H,z,ut,!1),ft!==null&&Ft!==null&&Vg(K,Ft,ft,ut,!0)}}t:{if(H=j?Oa(j):window,z=H.nodeName&&H.nodeName.toLowerCase(),z==="select"||z==="input"&&H.type==="file")var at=cd;else if(ld(H))if(ud)at=ov;else{at=rv;var Et=av}else z=H.nodeName,!z||z.toLowerCase()!=="input"||H.type!=="checkbox"&&H.type!=="radio"?j&&Io(j.elementType)&&(at=cd):at=lv;if(at&&(at=at(e,j))){od(K,at,a,G);break t}Et&&Et(e,H,j),e==="focusout"&&j&&H.type==="number"&&j.memoizedProps.value!=null&&Bo(H,"number",H.value)}switch(Et=j?Oa(j):window,e){case"focusin":(ld(Et)||Et.contentEditable==="true")&&(js=Et,ic=j,Ua=null);break;case"focusout":Ua=ic=js=null;break;case"mousedown":nc=!0;break;case"contextmenu":case"mouseup":case"dragend":nc=!1,vd(K,a,G);break;case"selectionchange":if(uv)break;case"keydown":case"keyup":vd(K,a,G)}var rt;if(Zo)t:{switch(e){case"compositionstart":var dt="onCompositionStart";break t;case"compositionend":dt="onCompositionEnd";break t;case"compositionupdate":dt="onCompositionUpdate";break t}dt=void 0}else Fs?ad(e,a)&&(dt="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(dt="onCompositionStart");dt&&(id&&a.locale!=="ko"&&(Fs||dt!=="onCompositionStart"?dt==="onCompositionEnd"&&Fs&&(rt=Qh()):(_n=G,Yo="value"in _n?_n.value:_n.textContent,Fs=!0)),Et=Ul(j,dt),0<Et.length&&(dt=new td(dt,e,null,a,G),K.push({event:dt,listeners:Et}),rt?dt.data=rt:(rt=rd(a),rt!==null&&(dt.data=rt)))),(rt=tv?ev(e,a):iv(e,a))&&(dt=Ul(j,"onBeforeInput"),0<dt.length&&(Et=new td("onBeforeInput","beforeinput",null,a,G),K.push({event:Et,listeners:dt}),Et.data=rt)),Xv(K,e,j,a,G)}qg(K,i)})}function gr(e,i,a){return{instance:e,listener:i,currentTarget:a}}function Ul(e,i){for(var a=i+"Capture",l=[];e!==null;){var h=e,p=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||p===null||(h=La(e,a),h!=null&&l.unshift(gr(e,h,p)),h=La(e,i),h!=null&&l.push(gr(e,h,p))),e.tag===3)return l;e=e.return}return[]}function la(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Vg(e,i,a,l,h){for(var p=i._reactName,b=[];a!==null&&a!==l;){var S=a,R=S.alternate,j=S.stateNode;if(S=S.tag,R!==null&&R===l)break;S!==5&&S!==26&&S!==27||j===null||(R=j,h?(j=La(a,p),j!=null&&b.unshift(gr(a,j,R))):h||(j=La(a,p),j!=null&&b.push(gr(a,j,R)))),a=a.return}b.length!==0&&e.push({event:i,listeners:b})}var $v=/\r\n?/g,Qv=/\u0000|\uFFFD/g;function Xg(e){return(typeof e=="string"?e:""+e).replace($v,`
`).replace(Qv,"")}function Yg(e,i){return i=Xg(i),Xg(e)===i}function Bl(){}function Pt(e,i,a,l,h,p){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||ks(e,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&ks(e,""+l);break;case"className":Xr(e,"class",l);break;case"tabIndex":Xr(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Xr(e,a,l);break;case"style":Kh(e,l,p);break;case"data":if(i!=="object"){Xr(e,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){e.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=Wr(""+l),e.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(a==="formAction"?(i!=="input"&&Pt(e,i,"name",h.name,h,null),Pt(e,i,"formEncType",h.formEncType,h,null),Pt(e,i,"formMethod",h.formMethod,h,null),Pt(e,i,"formTarget",h.formTarget,h,null)):(Pt(e,i,"encType",h.encType,h,null),Pt(e,i,"method",h.method,h,null),Pt(e,i,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=Wr(""+l),e.setAttribute(a,l);break;case"onClick":l!=null&&(e.onclick=Bl);break;case"onScroll":l!=null&&Tt("scroll",e);break;case"onScrollEnd":l!=null&&Tt("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}a=Wr(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""+l):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":l===!0?e.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,l):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(a,l):e.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(a):e.setAttribute(a,l);break;case"popover":Tt("beforetoggle",e),Tt("toggle",e),Vr(e,"popover",l);break;case"xlinkActuate":$i(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":$i(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":$i(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":$i(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":$i(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":$i(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":$i(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":$i(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":$i(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Vr(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Cy.get(a)||a,Vr(e,a,l))}}function xu(e,i,a,l,h,p){switch(a){case"style":Kh(e,l,p);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"children":typeof l=="string"?ks(e,l):(typeof l=="number"||typeof l=="bigint")&&ks(e,""+l);break;case"onScroll":l!=null&&Tt("scroll",e);break;case"onScrollEnd":l!=null&&Tt("scrollend",e);break;case"onClick":l!=null&&(e.onclick=Bl);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!jh.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),p=e[Ue]||null,p=p!=null?p[a]:null,typeof p=="function"&&e.removeEventListener(i,p,h),typeof l=="function")){typeof p!="function"&&p!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(i,l,h);break t}a in e?e[a]=l:l===!0?e.setAttribute(a,""):Vr(e,a,l)}}}function _e(e,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Tt("error",e),Tt("load",e);var l=!1,h=!1,p;for(p in a)if(a.hasOwnProperty(p)){var b=a[p];if(b!=null)switch(p){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Pt(e,i,p,b,a,null)}}h&&Pt(e,i,"srcSet",a.srcSet,a,null),l&&Pt(e,i,"src",a.src,a,null);return;case"input":Tt("invalid",e);var S=p=b=h=null,R=null,j=null;for(l in a)if(a.hasOwnProperty(l)){var G=a[l];if(G!=null)switch(l){case"name":h=G;break;case"type":b=G;break;case"checked":R=G;break;case"defaultChecked":j=G;break;case"value":p=G;break;case"defaultValue":S=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(s(137,i));break;default:Pt(e,i,l,G,a,null)}}Gh(e,p,S,R,j,b,h,!1),Yr(e);return;case"select":Tt("invalid",e),l=b=p=null;for(h in a)if(a.hasOwnProperty(h)&&(S=a[h],S!=null))switch(h){case"value":p=S;break;case"defaultValue":b=S;break;case"multiple":l=S;default:Pt(e,i,h,S,a,null)}i=p,a=b,e.multiple=!!l,i!=null?Ls(e,!!l,i,!1):a!=null&&Ls(e,!!l,a,!0);return;case"textarea":Tt("invalid",e),p=h=l=null;for(b in a)if(a.hasOwnProperty(b)&&(S=a[b],S!=null))switch(b){case"value":l=S;break;case"defaultValue":h=S;break;case"children":p=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(s(91));break;default:Pt(e,i,b,S,a,null)}Xh(e,l,h,p),Yr(e);return;case"option":for(R in a)if(a.hasOwnProperty(R)&&(l=a[R],l!=null))switch(R){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Pt(e,i,R,l,a,null)}return;case"dialog":Tt("beforetoggle",e),Tt("toggle",e),Tt("cancel",e),Tt("close",e);break;case"iframe":case"object":Tt("load",e);break;case"video":case"audio":for(l=0;l<fr.length;l++)Tt(fr[l],e);break;case"image":Tt("error",e),Tt("load",e);break;case"details":Tt("toggle",e);break;case"embed":case"source":case"link":Tt("error",e),Tt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(j in a)if(a.hasOwnProperty(j)&&(l=a[j],l!=null))switch(j){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Pt(e,i,j,l,a,null)}return;default:if(Io(i)){for(G in a)a.hasOwnProperty(G)&&(l=a[G],l!==void 0&&xu(e,i,G,l,a,void 0));return}}for(S in a)a.hasOwnProperty(S)&&(l=a[S],l!=null&&Pt(e,i,S,l,a,null))}function Zv(e,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,p=null,b=null,S=null,R=null,j=null,G=null;for(z in a){var K=a[z];if(a.hasOwnProperty(z)&&K!=null)switch(z){case"checked":break;case"value":break;case"defaultValue":R=K;default:l.hasOwnProperty(z)||Pt(e,i,z,null,l,K)}}for(var H in l){var z=l[H];if(K=a[H],l.hasOwnProperty(H)&&(z!=null||K!=null))switch(H){case"type":p=z;break;case"name":h=z;break;case"checked":j=z;break;case"defaultChecked":G=z;break;case"value":b=z;break;case"defaultValue":S=z;break;case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(s(137,i));break;default:z!==K&&Pt(e,i,H,z,l,K)}}Uo(e,b,S,R,j,G,p,h);return;case"select":z=b=S=H=null;for(p in a)if(R=a[p],a.hasOwnProperty(p)&&R!=null)switch(p){case"value":break;case"multiple":z=R;default:l.hasOwnProperty(p)||Pt(e,i,p,null,l,R)}for(h in l)if(p=l[h],R=a[h],l.hasOwnProperty(h)&&(p!=null||R!=null))switch(h){case"value":H=p;break;case"defaultValue":S=p;break;case"multiple":b=p;default:p!==R&&Pt(e,i,h,p,l,R)}i=S,a=b,l=z,H!=null?Ls(e,!!a,H,!1):!!l!=!!a&&(i!=null?Ls(e,!!a,i,!0):Ls(e,!!a,a?[]:"",!1));return;case"textarea":z=H=null;for(S in a)if(h=a[S],a.hasOwnProperty(S)&&h!=null&&!l.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:Pt(e,i,S,null,l,h)}for(b in l)if(h=l[b],p=a[b],l.hasOwnProperty(b)&&(h!=null||p!=null))switch(b){case"value":H=h;break;case"defaultValue":z=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==p&&Pt(e,i,b,h,l,p)}Vh(e,H,z);return;case"option":for(var ft in a)if(H=a[ft],a.hasOwnProperty(ft)&&H!=null&&!l.hasOwnProperty(ft))switch(ft){case"selected":e.selected=!1;break;default:Pt(e,i,ft,null,l,H)}for(R in l)if(H=l[R],z=a[R],l.hasOwnProperty(R)&&H!==z&&(H!=null||z!=null))switch(R){case"selected":e.selected=H&&typeof H!="function"&&typeof H!="symbol";break;default:Pt(e,i,R,H,l,z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ut in a)H=a[ut],a.hasOwnProperty(ut)&&H!=null&&!l.hasOwnProperty(ut)&&Pt(e,i,ut,null,l,H);for(j in l)if(H=l[j],z=a[j],l.hasOwnProperty(j)&&H!==z&&(H!=null||z!=null))switch(j){case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(s(137,i));break;default:Pt(e,i,j,H,l,z)}return;default:if(Io(i)){for(var Ft in a)H=a[Ft],a.hasOwnProperty(Ft)&&H!==void 0&&!l.hasOwnProperty(Ft)&&xu(e,i,Ft,void 0,l,H);for(G in l)H=l[G],z=a[G],!l.hasOwnProperty(G)||H===z||H===void 0&&z===void 0||xu(e,i,G,H,l,z);return}}for(var L in a)H=a[L],a.hasOwnProperty(L)&&H!=null&&!l.hasOwnProperty(L)&&Pt(e,i,L,null,l,H);for(K in l)H=l[K],z=a[K],!l.hasOwnProperty(K)||H===z||H==null&&z==null||Pt(e,i,K,H,l,z)}var Cu=null,Ru=null;function Il(e){return e.nodeType===9?e:e.ownerDocument}function Kg(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Wg(e,i){if(e===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&i==="foreignObject"?0:e}function Mu(e,i){return e==="textarea"||e==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Du=null;function Jv(){var e=window.event;return e&&e.type==="popstate"?e===Du?!1:(Du=e,!0):(Du=null,!1)}var $g=typeof setTimeout=="function"?setTimeout:void 0,tb=typeof clearTimeout=="function"?clearTimeout:void 0,Qg=typeof Promise=="function"?Promise:void 0,eb=typeof queueMicrotask=="function"?queueMicrotask:typeof Qg<"u"?function(e){return Qg.resolve(null).then(e).catch(ib)}:$g;function ib(e){setTimeout(function(){throw e})}function Fn(e){return e==="head"}function Zg(e,i){var a=i,l=0,h=0;do{var p=a.nextSibling;if(e.removeChild(a),p&&p.nodeType===8)if(a=p.data,a==="/$"){if(0<l&&8>l){a=l;var b=e.ownerDocument;if(a&1&&pr(b.documentElement),a&2&&pr(b.body),a&4)for(a=b.head,pr(a),b=a.firstChild;b;){var S=b.nextSibling,R=b.nodeName;b[Da]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&b.rel.toLowerCase()==="stylesheet"||a.removeChild(b),b=S}}if(h===0){e.removeChild(p),Er(i);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:l=a.charCodeAt(0)-48;else l=0;a=p}while(a);Er(i)}function Ou(e){var i=e.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Ou(a),Fo(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function nb(e,i,a,l){for(;e.nodeType===1;){var h=a;if(e.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[Da])switch(i){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(p=e.getAttribute("rel"),p==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(p!==h.rel||e.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||e.getAttribute("title")!==(h.title==null?null:h.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(p=e.getAttribute("src"),(p!==(h.src==null?null:h.src)||e.getAttribute("type")!==(h.type==null?null:h.type)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&p&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(i==="input"&&e.type==="hidden"){var p=h.name==null?null:""+h.name;if(h.type==="hidden"&&e.getAttribute("name")===p)return e}else return e;if(e=Di(e.nextSibling),e===null)break}return null}function sb(e,i,a){if(i==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Di(e.nextSibling),e===null))return null;return e}function Lu(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function ab(e,i){var a=e.ownerDocument;if(e.data!=="$?"||a.readyState==="complete")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function Di(e){for(;e!=null;e=e.nextSibling){var i=e.nodeType;if(i===1||i===3)break;if(i===8){if(i=e.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return e}var ku=null;function Jg(e){e=e.previousSibling;for(var i=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return e;i--}else a==="/$"&&i++}e=e.previousSibling}return null}function tp(e,i,a){switch(i=Il(a),e){case"html":if(e=i.documentElement,!e)throw Error(s(452));return e;case"head":if(e=i.head,!e)throw Error(s(453));return e;case"body":if(e=i.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function pr(e){for(var i=e.attributes;i.length;)e.removeAttributeNode(i[0]);Fo(e)}var yi=new Map,ep=new Set;function ql(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var hn=P.d;P.d={f:rb,r:lb,D:ob,C:cb,L:ub,m:hb,X:fb,S:db,M:gb};function rb(){var e=hn.f(),i=Nl();return e||i}function lb(e){var i=Rs(e);i!==null&&i.tag===5&&i.type==="form"?Af(i):hn.r(e)}var oa=typeof document>"u"?null:document;function ip(e,i,a){var l=oa;if(l&&typeof i=="string"&&i){var h=ui(i);h='link[rel="'+e+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),ep.has(h)||(ep.add(h),e={rel:e,crossOrigin:a,href:i},l.querySelector(h)===null&&(i=l.createElement("link"),_e(i,"link",e),ge(i),l.head.appendChild(i)))}}function ob(e){hn.D(e),ip("dns-prefetch",e,null)}function cb(e,i){hn.C(e,i),ip("preconnect",e,i)}function ub(e,i,a){hn.L(e,i,a);var l=oa;if(l&&e&&i){var h='link[rel="preload"][as="'+ui(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+ui(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+ui(a.imageSizes)+'"]')):h+='[href="'+ui(e)+'"]';var p=h;switch(i){case"style":p=ca(e);break;case"script":p=ua(e)}yi.has(p)||(e=m({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:e,as:i},a),yi.set(p,e),l.querySelector(h)!==null||i==="style"&&l.querySelector(mr(p))||i==="script"&&l.querySelector(yr(p))||(i=l.createElement("link"),_e(i,"link",e),ge(i),l.head.appendChild(i)))}}function hb(e,i){hn.m(e,i);var a=oa;if(a&&e){var l=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+ui(l)+'"][href="'+ui(e)+'"]',p=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=ua(e)}if(!yi.has(p)&&(e=m({rel:"modulepreload",href:e},i),yi.set(p,e),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(yr(p)))return}l=a.createElement("link"),_e(l,"link",e),ge(l),a.head.appendChild(l)}}}function db(e,i,a){hn.S(e,i,a);var l=oa;if(l&&e){var h=Ms(l).hoistableStyles,p=ca(e);i=i||"default";var b=h.get(p);if(!b){var S={loading:0,preload:null};if(b=l.querySelector(mr(p)))S.loading=5;else{e=m({rel:"stylesheet",href:e,"data-precedence":i},a),(a=yi.get(p))&&Nu(e,a);var R=b=l.createElement("link");ge(R),_e(R,"link",e),R._p=new Promise(function(j,G){R.onload=j,R.onerror=G}),R.addEventListener("load",function(){S.loading|=1}),R.addEventListener("error",function(){S.loading|=2}),S.loading|=4,Gl(b,i,l)}b={type:"stylesheet",instance:b,count:1,state:S},h.set(p,b)}}}function fb(e,i){hn.X(e,i);var a=oa;if(a&&e){var l=Ms(a).hoistableScripts,h=ua(e),p=l.get(h);p||(p=a.querySelector(yr(h)),p||(e=m({src:e,async:!0},i),(i=yi.get(h))&&Pu(e,i),p=a.createElement("script"),ge(p),_e(p,"link",e),a.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},l.set(h,p))}}function gb(e,i){hn.M(e,i);var a=oa;if(a&&e){var l=Ms(a).hoistableScripts,h=ua(e),p=l.get(h);p||(p=a.querySelector(yr(h)),p||(e=m({src:e,async:!0,type:"module"},i),(i=yi.get(h))&&Pu(e,i),p=a.createElement("script"),ge(p),_e(p,"link",e),a.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},l.set(h,p))}}function np(e,i,a,l){var h=(h=et.current)?ql(h):null;if(!h)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=ca(a.href),a=Ms(h).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=ca(a.href);var p=Ms(h).hoistableStyles,b=p.get(e);if(b||(h=h.ownerDocument||h,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(e,b),(p=h.querySelector(mr(e)))&&!p._p&&(b.instance=p,b.state.loading=5),yi.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},yi.set(e,a),p||pb(h,e,a,b.state))),i&&l===null)throw Error(s(528,""));return b}if(i&&l!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=ua(a),a=Ms(h).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function ca(e){return'href="'+ui(e)+'"'}function mr(e){return'link[rel="stylesheet"]['+e+"]"}function sp(e){return m({},e,{"data-precedence":e.precedence,precedence:null})}function pb(e,i,a,l){e.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=e.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),_e(i,"link",a),ge(i),e.head.appendChild(i))}function ua(e){return'[src="'+ui(e)+'"]'}function yr(e){return"script[async]"+e}function ap(e,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=e.querySelector('style[data-href~="'+ui(a.href)+'"]');if(l)return i.instance=l,ge(l),l;var h=m({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),ge(l),_e(l,"style",h),Gl(l,a.precedence,e),i.instance=l;case"stylesheet":h=ca(a.href);var p=e.querySelector(mr(h));if(p)return i.state.loading|=4,i.instance=p,ge(p),p;l=sp(a),(h=yi.get(h))&&Nu(l,h),p=(e.ownerDocument||e).createElement("link"),ge(p);var b=p;return b._p=new Promise(function(S,R){b.onload=S,b.onerror=R}),_e(p,"link",l),i.state.loading|=4,Gl(p,a.precedence,e),i.instance=p;case"script":return p=ua(a.src),(h=e.querySelector(yr(p)))?(i.instance=h,ge(h),h):(l=a,(h=yi.get(p))&&(l=m({},a),Pu(l,h)),e=e.ownerDocument||e,h=e.createElement("script"),ge(h),_e(h,"link",l),e.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,Gl(l,a.precedence,e));return i.instance}function Gl(e,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,p=h,b=0;b<l.length;b++){var S=l[b];if(S.dataset.precedence===i)p=S;else if(p!==h)break}p?p.parentNode.insertBefore(e,p.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(e,i.firstChild))}function Nu(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.title==null&&(e.title=i.title)}function Pu(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.integrity==null&&(e.integrity=i.integrity)}var Vl=null;function rp(e,i,a){if(Vl===null){var l=new Map,h=Vl=new Map;h.set(a,l)}else h=Vl,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(e))return l;for(l.set(e,null),a=a.getElementsByTagName(e),h=0;h<a.length;h++){var p=a[h];if(!(p[Da]||p[we]||e==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var b=p.getAttribute(i)||"";b=e+b;var S=l.get(b);S?S.push(p):l.set(b,[p])}}return l}function lp(e,i,a){e=e.ownerDocument||e,e.head.insertBefore(a,i==="title"?e.querySelector("head > title"):null)}function mb(e,i,a){if(a===1||i.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return e=i.disabled,typeof i.precedence=="string"&&e==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function op(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var vr=null;function yb(){}function vb(e,i,a){if(vr===null)throw Error(s(475));var l=vr;if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var h=ca(a.href),p=e.querySelector(mr(h));if(p){e=p._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(l.count++,l=Xl.bind(l),e.then(l,l)),i.state.loading|=4,i.instance=p,ge(p);return}p=e.ownerDocument||e,a=sp(a),(h=yi.get(h))&&Nu(a,h),p=p.createElement("link"),ge(p);var b=p;b._p=new Promise(function(S,R){b.onload=S,b.onerror=R}),_e(p,"link",a),i.instance=p}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(i,e),(e=i.state.preload)&&(i.state.loading&3)===0&&(l.count++,i=Xl.bind(l),e.addEventListener("load",i),e.addEventListener("error",i))}}function bb(){if(vr===null)throw Error(s(475));var e=vr;return e.stylesheets&&e.count===0&&Fu(e,e.stylesheets),0<e.count?function(i){var a=setTimeout(function(){if(e.stylesheets&&Fu(e,e.stylesheets),e.unsuspend){var l=e.unsuspend;e.unsuspend=null,l()}},6e4);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(a)}}:null}function Xl(){if(this.count--,this.count===0){if(this.stylesheets)Fu(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Yl=null;function Fu(e,i){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Yl=new Map,i.forEach(_b,e),Yl=null,Xl.call(e))}function _b(e,i){if(!(i.state.loading&4)){var a=Yl.get(e);if(a)var l=a.get(null);else{a=new Map,Yl.set(e,a);for(var h=e.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<h.length;p++){var b=h[p];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(a.set(b.dataset.precedence,b),l=b)}l&&a.set(null,l)}h=i.instance,b=h.getAttribute("data-precedence"),p=a.get(b)||l,p===l&&a.set(null,h),a.set(b,h),this.count++,l=Xl.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),p?p.parentNode.insertBefore(h,p.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(h,e.firstChild)),i.state.loading|=4}}var br={$$typeof:C,Provider:null,Consumer:null,_currentValue:Y,_currentValue2:Y,_threadCount:0};function Ab(e,i,a,l,h,p,b,S){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ne(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ne(0),this.hiddenUpdates=Ne(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=p,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=S,this.incompleteTransitions=new Map}function cp(e,i,a,l,h,p,b,S,R,j,G,K){return e=new Ab(e,i,a,b,S,R,j,K),i=1,p===!0&&(i|=24),p=Qe(3,null,null,i),e.current=p,p.stateNode=e,i=yc(),i.refCount++,e.pooledCache=i,i.refCount++,p.memoizedState={element:l,isDehydrated:a,cache:i},Ac(p),e}function up(e){return e?(e=Bs,e):Bs}function hp(e,i,a,l,h,p){h=up(h),l.context===null?l.context=h:l.pendingContext=h,l=En(i),l.payload={element:a},p=p===void 0?null:p,p!==null&&(l.callback=p),a=wn(e,l,i),a!==null&&(ii(a,e,i),Wa(a,e,i))}function dp(e,i){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<i?a:i}}function ju(e,i){dp(e,i),(e=e.alternate)&&dp(e,i)}function fp(e){if(e.tag===13){var i=Us(e,67108864);i!==null&&ii(i,e,67108864),ju(e,67108864)}}var Kl=!0;function Sb(e,i,a,l){var h=k.T;k.T=null;var p=P.p;try{P.p=2,Hu(e,i,a,l)}finally{P.p=p,k.T=h}}function Eb(e,i,a,l){var h=k.T;k.T=null;var p=P.p;try{P.p=8,Hu(e,i,a,l)}finally{P.p=p,k.T=h}}function Hu(e,i,a,l){if(Kl){var h=zu(l);if(h===null)Tu(e,i,l,Wl,a),pp(e,l);else if(Tb(h,e,i,a,l))l.stopPropagation();else if(pp(e,l),i&4&&-1<wb.indexOf(e)){for(;h!==null;){var p=Rs(h);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var b=Se(p.pendingLanes);if(b!==0){var S=p;for(S.pendingLanes|=2,S.entangledLanes|=2;b;){var R=1<<31-Vt(b);S.entanglements[1]|=R,b&=~R}qi(p),(Dt&6)===0&&(Ll=Kt()+500,dr(0))}}break;case 13:S=Us(p,2),S!==null&&ii(S,p,2),Nl(),ju(p,2)}if(p=zu(l),p===null&&Tu(e,i,l,Wl,a),p===h)break;h=p}h!==null&&l.stopPropagation()}else Tu(e,i,l,null,a)}}function zu(e){return e=Go(e),Uu(e)}var Wl=null;function Uu(e){if(Wl=null,e=Cs(e),e!==null){var i=o(e);if(i===null)e=null;else{var a=i.tag;if(a===13){if(e=c(i),e!==null)return e;e=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;e=null}else i!==e&&(e=null)}}return Wl=e,null}function gp(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Pi()){case ie:return 2;case Ki:return 8;case We:case Ci:return 32;case Fi:return 268435456;default:return 32}default:return 32}}var Bu=!1,jn=null,Hn=null,zn=null,_r=new Map,Ar=new Map,Un=[],wb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function pp(e,i){switch(e){case"focusin":case"focusout":jn=null;break;case"dragenter":case"dragleave":Hn=null;break;case"mouseover":case"mouseout":zn=null;break;case"pointerover":case"pointerout":_r.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ar.delete(i.pointerId)}}function Sr(e,i,a,l,h,p){return e===null||e.nativeEvent!==p?(e={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:p,targetContainers:[h]},i!==null&&(i=Rs(i),i!==null&&fp(i)),e):(e.eventSystemFlags|=l,i=e.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),e)}function Tb(e,i,a,l,h){switch(i){case"focusin":return jn=Sr(jn,e,i,a,l,h),!0;case"dragenter":return Hn=Sr(Hn,e,i,a,l,h),!0;case"mouseover":return zn=Sr(zn,e,i,a,l,h),!0;case"pointerover":var p=h.pointerId;return _r.set(p,Sr(_r.get(p)||null,e,i,a,l,h)),!0;case"gotpointercapture":return p=h.pointerId,Ar.set(p,Sr(Ar.get(p)||null,e,i,a,l,h)),!0}return!1}function mp(e){var i=Cs(e.target);if(i!==null){var a=o(i);if(a!==null){if(i=a.tag,i===13){if(i=c(a),i!==null){e.blockedOn=i,Ts(e.priority,function(){if(a.tag===13){var l=ei();l=Ma(l);var h=Us(a,l);h!==null&&ii(h,a,l),ju(a,l)}});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function $l(e){if(e.blockedOn!==null)return!1;for(var i=e.targetContainers;0<i.length;){var a=zu(e.nativeEvent);if(a===null){a=e.nativeEvent;var l=new a.constructor(a.type,a);qo=l,a.target.dispatchEvent(l),qo=null}else return i=Rs(a),i!==null&&fp(i),e.blockedOn=a,!1;i.shift()}return!0}function yp(e,i,a){$l(e)&&a.delete(i)}function xb(){Bu=!1,jn!==null&&$l(jn)&&(jn=null),Hn!==null&&$l(Hn)&&(Hn=null),zn!==null&&$l(zn)&&(zn=null),_r.forEach(yp),Ar.forEach(yp)}function Ql(e,i){e.blockedOn===i&&(e.blockedOn=null,Bu||(Bu=!0,f.unstable_scheduleCallback(f.unstable_NormalPriority,xb)))}var Zl=null;function vp(e){Zl!==e&&(Zl=e,f.unstable_scheduleCallback(f.unstable_NormalPriority,function(){Zl===e&&(Zl=null);for(var i=0;i<e.length;i+=3){var a=e[i],l=e[i+1],h=e[i+2];if(typeof l!="function"){if(Uu(l||a)===null)continue;break}var p=Rs(a);p!==null&&(e.splice(i,3),i-=3,Uc(p,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function Er(e){function i(R){return Ql(R,e)}jn!==null&&Ql(jn,e),Hn!==null&&Ql(Hn,e),zn!==null&&Ql(zn,e),_r.forEach(i),Ar.forEach(i);for(var a=0;a<Un.length;a++){var l=Un[a];l.blockedOn===e&&(l.blockedOn=null)}for(;0<Un.length&&(a=Un[0],a.blockedOn===null);)mp(a),a.blockedOn===null&&Un.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],p=a[l+1],b=h[Ue]||null;if(typeof p=="function")b||vp(a);else if(b){var S=null;if(p&&p.hasAttribute("formAction")){if(h=p,b=p[Ue]||null)S=b.formAction;else if(Uu(h)!==null)continue}else S=b.action;typeof S=="function"?a[l+1]=S:(a.splice(l,3),l-=3),vp(a)}}}function Iu(e){this._internalRoot=e}Jl.prototype.render=Iu.prototype.render=function(e){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,l=ei();hp(a,l,e,i,null,null)},Jl.prototype.unmount=Iu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var i=e.containerInfo;hp(e.current,2,null,e,null,null),Nl(),i[xs]=null}};function Jl(e){this._internalRoot=e}Jl.prototype.unstable_scheduleHydration=function(e){if(e){var i=Zn();e={blockedOn:null,target:e,priority:i};for(var a=0;a<Un.length&&i!==0&&i<Un[a].priority;a++);Un.splice(a,0,e),a===0&&mp(e)}};var bp=t.version;if(bp!=="19.1.1")throw Error(s(527,bp,"19.1.1"));P.findDOMNode=function(e){var i=e._reactInternals;if(i===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=d(i),e=e!==null?g(e):null,e=e===null?null:e.stateNode,e};var Cb={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:k,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var to=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!to.isDisabled&&to.supportsFiber)try{ai=to.inject(Cb),he=to}catch{}}return xr.createRoot=function(e,i){if(!r(e))throw Error(s(299));var a=!1,l="",h=Pf,p=Ff,b=jf,S=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(p=i.onCaughtError),i.onRecoverableError!==void 0&&(b=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(S=i.unstable_transitionCallbacks)),i=cp(e,1,!1,null,null,a,l,h,p,b,S,null),e[xs]=i.current,wu(e),new Iu(i)},xr.hydrateRoot=function(e,i,a){if(!r(e))throw Error(s(299));var l=!1,h="",p=Pf,b=Ff,S=jf,R=null,j=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(p=a.onUncaughtError),a.onCaughtError!==void 0&&(b=a.onCaughtError),a.onRecoverableError!==void 0&&(S=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(R=a.unstable_transitionCallbacks),a.formState!==void 0&&(j=a.formState)),i=cp(e,1,!0,i,a??null,l,h,p,b,S,R,j),i.context=up(null),a=i.current,l=ei(),l=Ma(l),h=En(l),h.callback=null,wn(a,h,l),a=l,i.current.lanes=a,li(i,a),qi(i),e[xs]=i.current,wu(e),new Jl(i)},xr.version="19.1.1",xr}var Op;function jb(){if(Op)return Xu.exports;Op=1;function f(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(f)}catch(t){console.error(t)}}return f(),Xu.exports=Fb(),Xu.exports}var Hb=jb();const Lp=f=>{let t;const n=new Set,s=(g,m)=>{const y=typeof g=="function"?g(t):g;if(!Object.is(y,t)){const v=t;t=m??(typeof y!="object"||y===null)?y:Object.assign({},t,y),n.forEach(_=>_(t,v))}},r=()=>t,u={setState:s,getState:r,getInitialState:()=>d,subscribe:g=>(n.add(g),()=>n.delete(g))},d=t=f(s,r,u);return u},zb=f=>f?Lp(f):Lp,Ub=f=>f;function Bb(f,t=Ub){const n=io.useSyncExternalStore(f.subscribe,io.useCallback(()=>t(f.getState()),[f,t]),io.useCallback(()=>t(f.getInitialState()),[f,t]));return io.useDebugValue(n),n}const kp=f=>{const t=zb(f),n=s=>Bb(t,s);return Object.assign(n,t),n},Ib=f=>f?kp(f):kp;var da={},Lt={};const qb="modulepreload",Gb=function(f){return"/pdf-analyzer/"+f},Np={},no=function(t,n,s){let r=Promise.resolve();if(n&&n.length>0){let g=function(m){return Promise.all(m.map(y=>Promise.resolve(y).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};var c=g;document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),d=u?.nonce||u?.getAttribute("nonce");r=g(n.map(m=>{if(m=Gb(m),m in Np)return;Np[m]=!0;const y=m.endsWith(".css"),v=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${v}`))return;const _=document.createElement("link");if(_.rel=y?"stylesheet":qb,y||(_.as="script"),_.crossOrigin="",_.href=m,d&&_.setAttribute("nonce",d),document.head.appendChild(_),y)return new Promise((A,E)=>{_.addEventListener("load",A),_.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${m}`)))})}))}function o(u){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=u,window.dispatchEvent(d),!d.defaultPrevented)throw u}return r.then(u=>{for(const d of u||[])d.status==="rejected"&&o(d.reason);return t().catch(o)})};var Nr={};Nr.d=(f,t)=>{for(var n in t)Nr.o(t,n)&&!Nr.o(f,n)&&Object.defineProperty(f,n,{enumerable:!0,get:t[n]})};Nr.o=(f,t)=>Object.prototype.hasOwnProperty.call(f,t);var yt=globalThis.pdfjsLib={};Nr.d(yt,{AbortException:()=>Es,AnnotationEditorLayer:()=>mn,AnnotationEditorParamsType:()=>mt,AnnotationEditorType:()=>bt,AnnotationEditorUIManager:()=>Xn,AnnotationLayer:()=>I_,AnnotationMode:()=>Vn,ColorPicker:()=>Ei,DOMSVGFactory:()=>Oh,DrawLayer:()=>Me,FeatureTest:()=>je,GlobalWorkerOptions:()=>Fr,ImageKind:()=>So,InvalidPDFException:()=>Fm,MissingPDFException:()=>Ss,OPS:()=>Li,OutputScale:()=>oh,PDFDataRangeTransport:()=>ty,PDFDateString:()=>Hm,PDFWorker:()=>Aa,PasswordResponses:()=>Kb,PermissionFlag:()=>Yb,PixelsPerInch:()=>wa,RenderingCancelledException:()=>bh,TextLayer:()=>fh,UnexpectedResponseException:()=>Do,Util:()=>lt,VerbosityLevel:()=>Co,XfaLayer:()=>iy,build:()=>S_,createValidAbsoluteUrl:()=>Zb,fetchData:()=>Lo,getDocument:()=>f_,getFilenameFromUrl:()=>l0,getPdfFilenameFromUrl:()=>o0,getXfaPageViewport:()=>c0,isDataScheme:()=>ko,isPdfFile:()=>_h,noContextMenu:()=>wi,normalizeUnicode:()=>s0,setLayerDimensions:()=>_s,shadow:()=>xt,version:()=>A_});const De=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),Pm=[1,0,0,1,0,0],ah=[.001,0,0,.001,0,0],Vb=1e7,$u=1.35,si={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Vn={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Xb="pdfjs_internal_editor_",bt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},mt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},Yb={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Re={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},So={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},re={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,WIDGET:20},Cr={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Co={ERRORS:0,WARNINGS:1,INFOS:5},Li={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},Kb={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Ro=Co.WARNINGS;function Wb(f){Number.isInteger(f)&&(Ro=f)}function $b(){return Ro}function Mo(f){Ro>=Co.INFOS&&console.log(`Info: ${f}`)}function St(f){Ro>=Co.WARNINGS&&console.log(`Warning: ${f}`)}function zt(f){throw new Error(f)}function oe(f,t){f||zt(t)}function Qb(f){switch(f?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Zb(f,t=null,n=null){if(!f)return null;try{if(n&&typeof f=="string"&&(n.addDefaultProtocol&&f.startsWith("www.")&&f.match(/\./g)?.length>=2&&(f=`http://${f}`),n.tryConvertEncoding))try{f=n0(f)}catch{}const s=t?new URL(f,t):new URL(f);if(Qb(s))return s}catch{}return null}function xt(f,t,n,s=!1){return Object.defineProperty(f,t,{value:n,enumerable:!s,configurable:!0,writable:!1}),n}const Kn=function(){function t(n,s){this.message=n,this.name=s}return t.prototype=new Error,t.constructor=t,t}();class rh extends Kn{constructor(t,n){super(t,"PasswordException"),this.code=n}}class lh extends Kn{constructor(t,n){super(t,"UnknownErrorException"),this.details=n}}class Fm extends Kn{constructor(t){super(t,"InvalidPDFException")}}class Ss extends Kn{constructor(t){super(t,"MissingPDFException")}}class Do extends Kn{constructor(t,n){super(t,"UnexpectedResponseException"),this.status=n}}class Jb extends Kn{constructor(t){super(t,"FormatError")}}class Es extends Kn{constructor(t){super(t,"AbortException")}}function jm(f){(typeof f!="object"||f?.length===void 0)&&zt("Invalid argument for bytesToString");const t=f.length,n=8192;if(t<n)return String.fromCharCode.apply(null,f);const s=[];for(let r=0;r<t;r+=n){const o=Math.min(r+n,t),c=f.subarray(r,o);s.push(String.fromCharCode.apply(null,c))}return s.join("")}function Oo(f){typeof f!="string"&&zt("Invalid argument for stringToBytes");const t=f.length,n=new Uint8Array(t);for(let s=0;s<t;++s)n[s]=f.charCodeAt(s)&255;return n}function t0(f){return String.fromCharCode(f>>24&255,f>>16&255,f>>8&255,f&255)}function yh(f){const t=Object.create(null);for(const[n,s]of f)t[n]=s;return t}function e0(){const f=new Uint8Array(4);return f[0]=1,new Uint32Array(f.buffer,0,1)[0]===1}function i0(){try{return new Function(""),!0}catch{return!1}}class je{static get isLittleEndian(){return xt(this,"isLittleEndian",e0())}static get isEvalSupported(){return xt(this,"isEvalSupported",i0())}static get isOffscreenCanvasSupported(){return xt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof navigator?.platform=="string"?xt(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof navigator?.userAgent=="string"&&navigator.userAgent.includes("Firefox")}):xt(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){return xt(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const Qu=Array.from(Array(256).keys(),f=>f.toString(16).padStart(2,"0"));class lt{static makeHexColor(t,n,s){return`#${Qu[t]}${Qu[n]}${Qu[s]}`}static scaleMinMax(t,n){let s;t[0]?(t[0]<0&&(s=n[0],n[0]=n[2],n[2]=s),n[0]*=t[0],n[2]*=t[0],t[3]<0&&(s=n[1],n[1]=n[3],n[3]=s),n[1]*=t[3],n[3]*=t[3]):(s=n[0],n[0]=n[1],n[1]=s,s=n[2],n[2]=n[3],n[3]=s,t[1]<0&&(s=n[1],n[1]=n[3],n[3]=s),n[1]*=t[1],n[3]*=t[1],t[2]<0&&(s=n[0],n[0]=n[2],n[2]=s),n[0]*=t[2],n[2]*=t[2]),n[0]+=t[4],n[1]+=t[5],n[2]+=t[4],n[3]+=t[5]}static transform(t,n){return[t[0]*n[0]+t[2]*n[1],t[1]*n[0]+t[3]*n[1],t[0]*n[2]+t[2]*n[3],t[1]*n[2]+t[3]*n[3],t[0]*n[4]+t[2]*n[5]+t[4],t[1]*n[4]+t[3]*n[5]+t[5]]}static applyTransform(t,n){const s=t[0]*n[0]+t[1]*n[2]+n[4],r=t[0]*n[1]+t[1]*n[3]+n[5];return[s,r]}static applyInverseTransform(t,n){const s=n[0]*n[3]-n[1]*n[2],r=(t[0]*n[3]-t[1]*n[2]+n[2]*n[5]-n[4]*n[3])/s,o=(-t[0]*n[1]+t[1]*n[0]+n[4]*n[1]-n[5]*n[0])/s;return[r,o]}static getAxialAlignedBoundingBox(t,n){const s=this.applyTransform(t,n),r=this.applyTransform(t.slice(2,4),n),o=this.applyTransform([t[0],t[3]],n),c=this.applyTransform([t[2],t[1]],n);return[Math.min(s[0],r[0],o[0],c[0]),Math.min(s[1],r[1],o[1],c[1]),Math.max(s[0],r[0],o[0],c[0]),Math.max(s[1],r[1],o[1],c[1])]}static inverseTransform(t){const n=t[0]*t[3]-t[1]*t[2];return[t[3]/n,-t[1]/n,-t[2]/n,t[0]/n,(t[2]*t[5]-t[4]*t[3])/n,(t[4]*t[1]-t[5]*t[0])/n]}static singularValueDecompose2dScale(t){const n=[t[0],t[2],t[1],t[3]],s=t[0]*n[0]+t[1]*n[2],r=t[0]*n[1]+t[1]*n[3],o=t[2]*n[0]+t[3]*n[2],c=t[2]*n[1]+t[3]*n[3],u=(s+c)/2,d=Math.sqrt((s+c)**2-4*(s*c-o*r))/2,g=u+d||1,m=u-d||1;return[Math.sqrt(g),Math.sqrt(m)]}static normalizeRect(t){const n=t.slice(0);return t[0]>t[2]&&(n[0]=t[2],n[2]=t[0]),t[1]>t[3]&&(n[1]=t[3],n[3]=t[1]),n}static intersect(t,n){const s=Math.max(Math.min(t[0],t[2]),Math.min(n[0],n[2])),r=Math.min(Math.max(t[0],t[2]),Math.max(n[0],n[2]));if(s>r)return null;const o=Math.max(Math.min(t[1],t[3]),Math.min(n[1],n[3])),c=Math.min(Math.max(t[1],t[3]),Math.max(n[1],n[3]));return o>c?null:[s,o,r,c]}static#t(t,n,s,r,o,c,u,d,g,m){if(g<=0||g>=1)return;const y=1-g,v=g*g,_=v*g,A=y*(y*(y*t+3*g*n)+3*v*s)+_*r,E=y*(y*(y*o+3*g*c)+3*v*u)+_*d;m[0]=Math.min(m[0],A),m[1]=Math.min(m[1],E),m[2]=Math.max(m[2],A),m[3]=Math.max(m[3],E)}static#e(t,n,s,r,o,c,u,d,g,m,y,v){if(Math.abs(g)<1e-12){Math.abs(m)>=1e-12&&this.#t(t,n,s,r,o,c,u,d,-y/m,v);return}const _=m**2-4*y*g;if(_<0)return;const A=Math.sqrt(_),E=2*g;this.#t(t,n,s,r,o,c,u,d,(-m+A)/E,v),this.#t(t,n,s,r,o,c,u,d,(-m-A)/E,v)}static bezierBoundingBox(t,n,s,r,o,c,u,d,g){return g?(g[0]=Math.min(g[0],t,u),g[1]=Math.min(g[1],n,d),g[2]=Math.max(g[2],t,u),g[3]=Math.max(g[3],n,d)):g=[Math.min(t,u),Math.min(n,d),Math.max(t,u),Math.max(n,d)],this.#e(t,s,o,u,n,r,c,d,3*(-t+3*(s-o)+u),6*(t-2*s+o),3*(s-t),g),this.#e(t,s,o,u,n,r,c,d,3*(-n+3*(r-c)+d),6*(n-2*r+c),3*(r-n),g),g}}function n0(f){return decodeURIComponent(escape(f))}let Zu=null,Pp=null;function s0(f){return Zu||(Zu=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Pp=new Map([["","t"]])),f.replaceAll(Zu,(t,n,s)=>n?n.normalize("NFKC"):Pp.get(s))}function a0(){if(typeof crypto<"u"&&typeof crypto?.randomUUID=="function")return crypto.randomUUID();const f=new Uint8Array(32);if(typeof crypto<"u"&&typeof crypto?.getRandomValues=="function")crypto.getRandomValues(f);else for(let t=0;t<32;t++)f[t]=Math.floor(Math.random()*255);return jm(f)}const vh="pdfjs_internal_id_",dn={BEZIER_CURVE_TO:0,MOVE_TO:1,LINE_TO:2,QUADRATIC_CURVE_TO:3,RESTORE:4,SAVE:5,SCALE:6,TRANSFORM:7,TRANSLATE:8};function r0(f){return Uint8Array.prototype.toBase64?f.toBase64():btoa(jm(f))}const pn="http://www.w3.org/2000/svg";class wa{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function Lo(f,t="text"){if(Lr(f,document.baseURI)){const n=await fetch(f);if(!n.ok)throw new Error(n.statusText);switch(t){case"arraybuffer":return n.arrayBuffer();case"blob":return n.blob();case"json":return n.json()}return n.text()}return new Promise((n,s)=>{const r=new XMLHttpRequest;r.open("GET",f,!0),r.responseType=t,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(t){case"arraybuffer":case"blob":case"json":n(r.response);return}n(r.responseText);return}s(new Error(r.statusText))}},r.send(null)})}class Hr{constructor({viewBox:t,scale:n,rotation:s,offsetX:r=0,offsetY:o=0,dontFlip:c=!1}){this.viewBox=t,this.scale=n,this.rotation=s,this.offsetX=r,this.offsetY=o;const u=(t[2]+t[0])/2,d=(t[3]+t[1])/2;let g,m,y,v;switch(s%=360,s<0&&(s+=360),s){case 180:g=-1,m=0,y=0,v=1;break;case 90:g=0,m=1,y=1,v=0;break;case 270:g=0,m=-1,y=-1,v=0;break;case 0:g=1,m=0,y=0,v=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}c&&(y=-y,v=-v);let _,A,E,w;g===0?(_=Math.abs(d-t[1])*n+r,A=Math.abs(u-t[0])*n+o,E=(t[3]-t[1])*n,w=(t[2]-t[0])*n):(_=Math.abs(u-t[0])*n+r,A=Math.abs(d-t[1])*n+o,E=(t[2]-t[0])*n,w=(t[3]-t[1])*n),this.transform=[g*n,m*n,y*n,v*n,_-g*n*u-y*n*d,A-m*n*u-v*n*d],this.width=E,this.height=w}get rawDims(){const{viewBox:t}=this;return xt(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:n=this.rotation,offsetX:s=this.offsetX,offsetY:r=this.offsetY,dontFlip:o=!1}={}){return new Hr({viewBox:this.viewBox.slice(),scale:t,rotation:n,offsetX:s,offsetY:r,dontFlip:o})}convertToViewportPoint(t,n){return lt.applyTransform([t,n],this.transform)}convertToViewportRectangle(t){const n=lt.applyTransform([t[0],t[1]],this.transform),s=lt.applyTransform([t[2],t[3]],this.transform);return[n[0],n[1],s[0],s[1]]}convertToPdfPoint(t,n){return lt.applyInverseTransform([t,n],this.transform)}}class bh extends Kn{constructor(t,n=0){super(t,"RenderingCancelledException"),this.extraDelay=n}}function ko(f){const t=f.length;let n=0;for(;n<t&&f[n].trim()==="";)n++;return f.substring(n,n+5).toLowerCase()==="data:"}function _h(f){return typeof f=="string"&&/\.pdf$/i.test(f)}function l0(f){return[f]=f.split(/[#?]/,1),f.substring(f.lastIndexOf("/")+1)}function o0(f,t="document.pdf"){if(typeof f!="string")return t;if(ko(f))return St('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const n=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,s=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,r=n.exec(f);let o=s.exec(r[1])||s.exec(r[2])||s.exec(r[3]);if(o&&(o=o[0],o.includes("%")))try{o=s.exec(decodeURIComponent(o))[0]}catch{}return o||t}class Fp{started=Object.create(null);times=[];time(t){t in this.started&&St(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||St(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let n=0;for(const{name:s}of this.times)n=Math.max(s.length,n);for(const{name:s,start:r,end:o}of this.times)t.push(`${s.padEnd(n)} ${o-r}ms
`);return t.join("")}}function Lr(f,t){try{const{protocol:n}=t?new URL(f,t):new URL(f);return n==="http:"||n==="https:"}catch{return!1}}function wi(f){f.preventDefault()}function jp(f){console.log("Deprecated API usage: "+f)}class Hm{static#t;static toDateObject(t){if(!t||typeof t!="string")return null;this.#t||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const n=this.#t.exec(t);if(!n)return null;const s=parseInt(n[1],10);let r=parseInt(n[2],10);r=r>=1&&r<=12?r-1:0;let o=parseInt(n[3],10);o=o>=1&&o<=31?o:1;let c=parseInt(n[4],10);c=c>=0&&c<=23?c:0;let u=parseInt(n[5],10);u=u>=0&&u<=59?u:0;let d=parseInt(n[6],10);d=d>=0&&d<=59?d:0;const g=n[7]||"Z";let m=parseInt(n[8],10);m=m>=0&&m<=23?m:0;let y=parseInt(n[9],10)||0;return y=y>=0&&y<=59?y:0,g==="-"?(c+=m,u+=y):g==="+"&&(c-=m,u-=y),new Date(Date.UTC(s,r,o,c,u,d))}}function c0(f,{scale:t=1,rotation:n=0}){const{width:s,height:r}=f.attributes.style,o=[0,0,parseInt(s),parseInt(r)];return new Hr({viewBox:o,scale:t,rotation:n})}function Ah(f){if(f.startsWith("#")){const t=parseInt(f.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return f.startsWith("rgb(")?f.slice(4,-1).split(",").map(t=>parseInt(t)):f.startsWith("rgba(")?f.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(St(`Not a valid color format: "${f}"`),[0,0,0])}function u0(f){const t=document.createElement("span");t.style.visibility="hidden",document.body.append(t);for(const n of f.keys()){t.style.color=n;const s=window.getComputedStyle(t).color;f.set(n,Ah(s))}t.remove()}function Gt(f){const{a:t,b:n,c:s,d:r,e:o,f:c}=f.getTransform();return[t,n,s,r,o,c]}function fn(f){const{a:t,b:n,c:s,d:r,e:o,f:c}=f.getTransform().invertSelf();return[t,n,s,r,o,c]}function _s(f,t,n=!1,s=!0){if(t instanceof Hr){const{pageWidth:r,pageHeight:o}=t.rawDims,{style:c}=f,u=je.isCSSRoundSupported,d=`var(--scale-factor) * ${r}px`,g=`var(--scale-factor) * ${o}px`,m=u?`round(down, ${d}, var(--scale-round-x, 1px))`:`calc(${d})`,y=u?`round(down, ${g}, var(--scale-round-y, 1px))`:`calc(${g})`;!n||t.rotation%180===0?(c.width=m,c.height=y):(c.width=y,c.height=m)}s&&f.setAttribute("data-main-rotation",t.rotation)}class oh{constructor(){const t=window.devicePixelRatio||1;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}class Pr{#t=null;#e=null;#i;#s=null;#a=null;static#n=null;constructor(t){this.#i=t,Pr.#n||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"})}render(){const t=this.#t=document.createElement("div");t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const n=this.#i._uiManager._signal;t.addEventListener("contextmenu",wi,{signal:n}),t.addEventListener("pointerdown",Pr.#o,{signal:n});const s=this.#s=document.createElement("div");s.className="buttons",t.append(s);const r=this.#i.toolbarPosition;if(r){const{style:o}=t,c=this.#i._uiManager.direction==="ltr"?1-r[0]:r[0];o.insetInlineEnd=`${100*c}%`,o.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return this.#h(),t}get div(){return this.#t}static#o(t){t.stopPropagation()}#c(t){this.#i._focusEventsAllowed=!1,t.preventDefault(),t.stopPropagation()}#u(t){this.#i._focusEventsAllowed=!0,t.preventDefault(),t.stopPropagation()}#l(t){const n=this.#i._uiManager._signal;t.addEventListener("focusin",this.#c.bind(this),{capture:!0,signal:n}),t.addEventListener("focusout",this.#u.bind(this),{capture:!0,signal:n}),t.addEventListener("contextmenu",wi,{signal:n})}hide(){this.#t.classList.add("hidden"),this.#e?.hideDropdown()}show(){this.#t.classList.remove("hidden"),this.#a?.shown()}#h(){const{editorType:t,_uiManager:n}=this.#i,s=document.createElement("button");s.className="delete",s.tabIndex=0,s.setAttribute("data-l10n-id",Pr.#n[t]),this.#l(s),s.addEventListener("click",r=>{n.delete()},{signal:n._signal}),this.#s.append(s)}get#r(){const t=document.createElement("div");return t.className="divider",t}async addAltText(t){const n=await t.render();this.#l(n),this.#s.prepend(n,this.#r),this.#a=t}addColorPicker(t){this.#e=t;const n=t.renderButton();this.#l(n),this.#s.prepend(n,this.#r)}remove(){this.#t.remove(),this.#e?.destroy(),this.#e=null}}class h0{#t=null;#e=null;#i;constructor(t){this.#i=t}#s(){const t=this.#e=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",wi,{signal:this.#i._signal});const n=this.#t=document.createElement("div");return n.className="buttons",t.append(n),this.#n(),t}#a(t,n){let s=0,r=0;for(const o of t){const c=o.y+o.height;if(c<s)continue;const u=o.x+(n?o.width:0);if(c>s){r=u,s=c;continue}n?u>r&&(r=u):u<r&&(r=u)}return[n?1-r:r,s]}show(t,n,s){const[r,o]=this.#a(n,s),{style:c}=this.#e||=this.#s();t.append(this.#e),c.insetInlineEnd=`${100*r}%`,c.top=`calc(${100*o}% + var(--editor-toolbar-vert-offset))`}hide(){this.#e.remove()}#n(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const n=document.createElement("span");t.append(n),n.className="visuallyHidden",n.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const s=this.#i._signal;t.addEventListener("contextmenu",wi,{signal:s}),t.addEventListener("click",()=>{this.#i.highlightSelection("floating_button")},{signal:s}),this.#t.append(t)}}function To(f,t,n){for(const s of n)t.addEventListener(s,f[s].bind(f))}function d0(f){return Math.round(Math.min(255,Math.max(1,255*f))).toString(16).padStart(2,"0")}class f0{#t=0;get id(){return`${Xb}${this.#t++}`}}class Sh{#t=a0();#e=0;#i=null;static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',s=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=t;const o=r.decode().then(()=>(s.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(s.getImageData(0,0,1,1).data.buffer)[0]===0));return xt(this,"_isSVGFittingCanvas",o)}async#s(t,n){this.#i||=new Map;let s=this.#i.get(t);if(s===null)return null;if(s?.bitmap)return s.refCounter+=1,s;try{s||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let r;if(typeof n=="string"?(s.url=n,r=await Lo(n,"blob")):n instanceof File?r=s.file=n:n instanceof Blob&&(r=n),r.type==="image/svg+xml"){const o=Sh._isSVGFittingCanvas,c=new FileReader,u=new Image,d=new Promise((g,m)=>{u.onload=()=>{s.bitmap=u,s.isSvg=!0,g()},c.onload=async()=>{const y=s.svgUrl=c.result;u.src=await o?`${y}#svgView(preserveAspectRatio(none))`:y},u.onerror=c.onerror=m});c.readAsDataURL(r),await d}else s.bitmap=await createImageBitmap(r);s.refCounter=1}catch(r){console.error(r),s=null}return this.#i.set(t,s),s&&this.#i.set(s.id,s),s}async getFromFile(t){const{lastModified:n,name:s,size:r,type:o}=t;return this.#s(`${n}_${s}_${r}_${o}`,t)}async getFromUrl(t){return this.#s(t,t)}async getFromBlob(t,n){const s=await n;return this.#s(t,s)}async getFromId(t){this.#i||=new Map;const n=this.#i.get(t);if(!n)return null;if(n.bitmap)return n.refCounter+=1,n;if(n.file)return this.getFromFile(n.file);if(n.blobPromise){const{blobPromise:s}=n;return delete n.blobPromise,this.getFromBlob(n.id,s)}return this.getFromUrl(n.url)}getFromCanvas(t,n){this.#i||=new Map;let s=this.#i.get(t);if(s?.bitmap)return s.refCounter+=1,s;const r=new OffscreenCanvas(n.width,n.height);return r.getContext("2d").drawImage(n,0,0),s={bitmap:r.transferToImageBitmap(),id:`image_${this.#t}_${this.#e++}`,refCounter:1,isSvg:!1},this.#i.set(t,s),this.#i.set(s.id,s),s}getSvgUrl(t){const n=this.#i.get(t);return n?.isSvg?n.svgUrl:null}deleteId(t){this.#i||=new Map;const n=this.#i.get(t);if(!n||(n.refCounter-=1,n.refCounter!==0))return;const{bitmap:s}=n;if(!n.url&&!n.file){const r=new OffscreenCanvas(s.width,s.height);r.getContext("bitmaprenderer").transferFromImageBitmap(s),n.blobPromise=r.convertToBlob()}s.close?.(),n.bitmap=null}isValidId(t){return t.startsWith(`image_${this.#t}_`)}}class g0{#t=[];#e=!1;#i;#s=-1;constructor(t=128){this.#i=t}add({cmd:t,undo:n,post:s,mustExec:r,type:o=NaN,overwriteIfSameType:c=!1,keepUndo:u=!1}){if(r&&t(),this.#e)return;const d={cmd:t,undo:n,post:s,type:o};if(this.#s===-1){this.#t.length>0&&(this.#t.length=0),this.#s=0,this.#t.push(d);return}if(c&&this.#t[this.#s].type===o){u&&(d.undo=this.#t[this.#s].undo),this.#t[this.#s]=d;return}const g=this.#s+1;g===this.#i?this.#t.splice(0,1):(this.#s=g,g<this.#t.length&&this.#t.splice(g)),this.#t.push(d)}undo(){if(this.#s===-1)return;this.#e=!0;const{undo:t,post:n}=this.#t[this.#s];t(),n?.(),this.#e=!1,this.#s-=1}redo(){if(this.#s<this.#t.length-1){this.#s+=1,this.#e=!0;const{cmd:t,post:n}=this.#t[this.#s];t(),n?.(),this.#e=!1}}hasSomethingToUndo(){return this.#s!==-1}hasSomethingToRedo(){return this.#s<this.#t.length-1}destroy(){this.#t=null}}class zr{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:n}=je.platform;for(const[s,r,o={}]of t)for(const c of s){const u=c.startsWith("mac+");n&&u?(this.callbacks.set(c.slice(4),{callback:r,options:o}),this.allKeys.add(c.split("+").at(-1))):!n&&!u&&(this.callbacks.set(c,{callback:r,options:o}),this.allKeys.add(c.split("+").at(-1)))}}#t(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const n=this.buffer.join("+");return this.buffer.length=0,n}exec(t,n){if(!this.allKeys.has(n.key))return;const s=this.callbacks.get(this.#t(n));if(!s)return;const{callback:r,options:{bubbles:o=!1,args:c=[],checker:u=null}}=s;u&&!u(t,n)||(r.bind(t,...c,n)(),o||(n.stopPropagation(),n.preventDefault()))}}class Eh{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return u0(t),xt(this,"_colors",t)}convert(t){const n=Ah(t);if(!window.matchMedia("(forced-colors: active)").matches)return n;for(const[s,r]of this._colors)if(r.every((o,c)=>o===n[c]))return Eh._colorsMapping.get(s);return n}getHexCode(t){const n=this._colors.get(t);return n?lt.makeHexColor(...n):t}}class Xn{#t=new AbortController;#e=null;#i=new Map;#s=new Map;#a=null;#n=null;#o=null;#c=new g0;#u=null;#l=0;#h=new Set;#r=null;#d=null;#g=new Set;#f=!1;#y=!1;#m=!1;#p=null;#v=null;#_=null;#x=null;#E=!1;#w=null;#P=new f0;#C=!1;#A=!1;#T=null;#R=null;#M=null;#L=null;#S=bt.NONE;#b=new Set;#k=null;#N=null;#F=null;#I={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#z=[0,0];#j=null;#H=null;#B=null;#D=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const t=Xn.prototype,n=c=>c.#H.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&c.hasSomethingToControl(),s=(c,{target:u})=>{if(u instanceof HTMLInputElement){const{type:d}=u;return d!=="text"&&d!=="number"}return!0},r=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return xt(this,"_keyboardManager",new zr([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],t.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:s}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(c,{target:u})=>!(u instanceof HTMLButtonElement)&&c.#H.contains(u)&&!c.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(c,{target:u})=>!(u instanceof HTMLButtonElement)&&c.#H.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-o,0],checker:n}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[o,0],checker:n}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-o],checker:n}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,o],checker:n}]]))}constructor(t,n,s,r,o,c,u,d,g,m,y){const v=this._signal=this.#t.signal;this.#H=t,this.#B=n,this.#a=s,this._eventBus=r,r._on("editingaction",this.onEditingAction.bind(this),{signal:v}),r._on("pagechanging",this.onPageChanging.bind(this),{signal:v}),r._on("scalechanging",this.onScaleChanging.bind(this),{signal:v}),r._on("rotationchanging",this.onRotationChanging.bind(this),{signal:v}),r._on("setpreference",this.onSetPreference.bind(this),{signal:v}),r._on("switchannotationeditorparams",_=>this.updateParams(_.type,_.value),{signal:v}),this.#tt(),this.#st(),this.#Y(),this.#n=o.annotationStorage,this.#p=o.filterFactory,this.#N=c,this.#x=u||null,this.#f=d,this.#y=g,this.#m=m,this.#L=y||null,this.viewParameters={realScale:wa.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}destroy(){this.#D?.resolve(),this.#D=null,this.#t?.abort(),this.#t=null,this._signal=null;for(const t of this.#s.values())t.destroy();this.#s.clear(),this.#i.clear(),this.#g.clear(),this.#e=null,this.#b.clear(),this.#c.destroy(),this.#a?.destroy(),this.#w?.hide(),this.#w=null,this.#v&&(clearTimeout(this.#v),this.#v=null),this.#j&&(clearTimeout(this.#j),this.#j=null)}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return this.#L}get useNewAltTextFlow(){return this.#y}get useNewAltTextWhenAddingImage(){return this.#m}get hcmFilter(){return xt(this,"hcmFilter",this.#N?this.#p.addHCMFilter(this.#N.foreground,this.#N.background):"none")}get direction(){return xt(this,"direction",getComputedStyle(this.#H).direction)}get highlightColors(){return xt(this,"highlightColors",this.#x?new Map(this.#x.split(",").map(t=>t.split("=").map(n=>n.trim()))):null)}get highlightColorNames(){return xt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setMainHighlightColorPicker(t){this.#M=t}editAltText(t,n=!1){this.#a?.editAltText(this,t,n)}switchToMode(t,n){this._eventBus.on("annotationeditormodechanged",n,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,n){this._eventBus.dispatch("setpreference",{source:this,name:t,value:n})}onSetPreference({name:t,value:n}){switch(t){case"enableNewAltTextWhenAddingImage":this.#m=n;break}}onPageChanging({pageNumber:t}){this.#l=t-1}focusMainContainer(){this.#H.focus()}findParent(t,n){for(const s of this.#s.values()){const{x:r,y:o,width:c,height:u}=s.div.getBoundingClientRect();if(t>=r&&t<=r+c&&n>=o&&n<=o+u)return s}return null}disableUserSelect(t=!1){this.#B.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#g.add(t)}removeShouldRescale(t){this.#g.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*wa.PDF_TO_CSS_UNITS;for(const n of this.#g)n.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#G({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}#X(t){const{currentLayer:n}=this;if(n.hasTextLayer(t))return n;for(const s of this.#s.values())if(s.hasTextLayer(t))return s;return null}highlightSelection(t=""){const n=document.getSelection();if(!n||n.isCollapsed)return;const{anchorNode:s,anchorOffset:r,focusNode:o,focusOffset:c}=n,u=n.toString(),g=this.#G(n).closest(".textLayer"),m=this.getSelectionBoxes(g);if(!m)return;n.empty();const y=this.#X(g),v=this.#S===bt.NONE,_=()=>{y?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:m,anchorNode:s,anchorOffset:r,focusNode:o,focusOffset:c,text:u}),v&&this.showAllEditors("highlight",!0,!0)};if(v){this.switchToMode(bt.HIGHLIGHT,_);return}_()}#Z(){const t=document.getSelection();if(!t||t.isCollapsed)return;const s=this.#G(t).closest(".textLayer"),r=this.getSelectionBoxes(s);r&&(this.#w||=new h0(this),this.#w.show(s,r,this.direction==="ltr"))}addToAnnotationStorage(t){!t.isEmpty()&&this.#n&&!this.#n.has(t.id)&&this.#n.setValue(t.id,t)}#J(){const t=document.getSelection();if(!t||t.isCollapsed){this.#k&&(this.#w?.hide(),this.#k=null,this.#O({hasSelectedText:!1}));return}const{anchorNode:n}=t;if(n===this.#k)return;const r=this.#G(t).closest(".textLayer");if(!r){this.#k&&(this.#w?.hide(),this.#k=null,this.#O({hasSelectedText:!1}));return}if(this.#w?.hide(),this.#k=n,this.#O({hasSelectedText:!0}),!(this.#S!==bt.HIGHLIGHT&&this.#S!==bt.NONE)&&(this.#S===bt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#E=this.isShiftKeyDown,!this.isShiftKeyDown)){const o=this.#S===bt.HIGHLIGHT?this.#X(r):null;o?.toggleDrawing();const c=new AbortController,u=this.combinedSignal(c),d=g=>{g.type==="pointerup"&&g.button!==0||(c.abort(),o?.toggleDrawing(!0),g.type==="pointerup"&&this.#V("main_toolbar"))};window.addEventListener("pointerup",d,{signal:u}),window.addEventListener("blur",d,{signal:u})}}#V(t=""){this.#S===bt.HIGHLIGHT?this.highlightSelection(t):this.#f&&this.#Z()}#tt(){document.addEventListener("selectionchange",this.#J.bind(this),{signal:this._signal})}#et(){if(this.#_)return;this.#_=new AbortController;const t=this.combinedSignal(this.#_);window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}#it(){this.#_?.abort(),this.#_=null}blur(){if(this.isShiftKeyDown=!1,this.#E&&(this.#E=!1,this.#V("main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const n of this.#b)if(n.div.contains(t)){this.#R=[n,t],n._focusEventsAllowed=!1;break}}focus(){if(!this.#R)return;const[t,n]=this.#R;this.#R=null,n.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),n.focus()}#Y(){if(this.#T)return;this.#T=new AbortController;const t=this.combinedSignal(this.#T);window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}#nt(){this.#T?.abort(),this.#T=null}#K(){if(this.#u)return;this.#u=new AbortController;const t=this.combinedSignal(this.#u);document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}#W(){this.#u?.abort(),this.#u=null}#st(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#Y(),this.#K()}removeEditListeners(){this.#nt(),this.#W()}dragOver(t){for(const{type:n}of t.dataTransfer.items)for(const s of this.#d)if(s.isHandlingMimeForPasting(n)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const n of t.dataTransfer.items)for(const s of this.#d)if(s.isHandlingMimeForPasting(n.type)){s.paste(n,this.currentLayer),t.preventDefault();return}}copy(t){if(t.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;const n=[];for(const s of this.#b){const r=s.serialize(!0);r&&n.push(r)}n.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(n))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:n}=t;for(const o of n.items)for(const c of this.#d)if(c.isHandlingMimeForPasting(o.type)){c.paste(o,this.currentLayer);return}let s=n.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(o){St(`paste: "${o.message}".`);return}if(!Array.isArray(s))return;this.unselectAll();const r=this.currentLayer;try{const o=[];for(const d of s){const g=await r.deserialize(d);if(!g)return;o.push(g)}const c=()=>{for(const d of o)this.#$(d);this.#Q(o)},u=()=>{for(const d of o)d.remove()};this.addCommands({cmd:c,undo:u,mustExec:!0})}catch(o){St(`paste: "${o.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),this.#S!==bt.NONE&&!this.isEditorHandlingKeyboard&&Xn._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,this.#E&&(this.#E=!1,this.#V("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}#O(t){Object.entries(t).some(([s,r])=>this.#I[s]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#I,t)}),this.#S===bt.HIGHLIGHT&&t.hasSelectedEditor===!1&&this.#U([[mt.HIGHLIGHT_FREE,!0]]))}#U(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#et(),this.#K(),this.#O({isEditing:this.#S!==bt.NONE,isEmpty:this.#q(),hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:this.#c.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#it(),this.#W(),this.#O({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#d){this.#d=t;for(const n of this.#d)this.#U(n.defaultPropertiesToUpdate)}}getId(){return this.#P.id}get currentLayer(){return this.#s.get(this.#l)}getLayer(t){return this.#s.get(t)}get currentPageIndex(){return this.#l}addLayer(t){this.#s.set(t.pageIndex,t),this.#C?t.enable():t.disable()}removeLayer(t){this.#s.delete(t.pageIndex)}async updateMode(t,n=null,s=!1){if(this.#S!==t&&!(this.#D&&(await this.#D.promise,!this.#D))){if(this.#D=Promise.withResolvers(),this.#S=t,t===bt.NONE){this.setEditingState(!1),this.#rt(),this.#D.resolve();return}this.setEditingState(!0),await this.#at(),this.unselectAll();for(const r of this.#s.values())r.updateMode(t);if(!n){s&&this.addNewEditorFromKeyboard(),this.#D.resolve();return}for(const r of this.#i.values())r.annotationElementId===n?(this.setSelected(r),r.enterInEditMode()):r.unselect();this.#D.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t!==this.#S&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:t})}updateParams(t,n){if(this.#d){switch(t){case mt.CREATE:this.currentLayer.addNewEditor();return;case mt.HIGHLIGHT_DEFAULT_COLOR:this.#M?.updateColor(n);break;case mt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#F||=new Map).set(t,n),this.showAllEditors("highlight",n);break}for(const s of this.#b)s.updateParams(t,n);for(const s of this.#d)s.updateDefaultParams(t,n)}}showAllEditors(t,n,s=!1){for(const o of this.#i.values())o.editorType===t&&o.show(n);(this.#F?.get(mt.HIGHLIGHT_SHOW_ALL)??!0)!==n&&this.#U([[mt.HIGHLIGHT_SHOW_ALL,n]])}enableWaiting(t=!1){if(this.#A!==t){this.#A=t;for(const n of this.#s.values())t?n.disableClick():n.enableClick(),n.div.classList.toggle("waiting",t)}}async#at(){if(!this.#C){this.#C=!0;const t=[];for(const n of this.#s.values())t.push(n.enable());await Promise.all(t);for(const n of this.#i.values())n.enable()}}#rt(){if(this.unselectAll(),this.#C){this.#C=!1;for(const t of this.#s.values())t.disable();for(const t of this.#i.values())t.disable()}}getEditors(t){const n=[];for(const s of this.#i.values())s.pageIndex===t&&n.push(s);return n}getEditor(t){return this.#i.get(t)}addEditor(t){this.#i.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#v&&clearTimeout(this.#v),this.#v=setTimeout(()=>{this.focusMainContainer(),this.#v=null},0)),this.#i.delete(t.id),this.unselect(t),(!t.annotationElementId||!this.#h.has(t.annotationElementId))&&this.#n?.remove(t.id)}addDeletedAnnotationElement(t){this.#h.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#h.has(t)}removeDeletedAnnotationElement(t){this.#h.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#$(t){const n=this.#s.get(t.pageIndex);n?n.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#e!==t&&(this.#e=t,t&&this.#U(t.propertiesToUpdate))}get#lt(){let t=null;for(t of this.#b);return t}updateUI(t){this.#lt===t&&this.#U(t.propertiesToUpdate)}toggleSelected(t){if(this.#b.has(t)){this.#b.delete(t),t.unselect(),this.#O({hasSelectedEditor:this.hasSelection});return}this.#b.add(t),t.select(),this.#U(t.propertiesToUpdate),this.#O({hasSelectedEditor:!0})}setSelected(t){for(const n of this.#b)n!==t&&n.unselect();this.#b.clear(),this.#b.add(t),t.select(),this.#U(t.propertiesToUpdate),this.#O({hasSelectedEditor:!0})}isSelected(t){return this.#b.has(t)}get firstSelectedEditor(){return this.#b.values().next().value}unselect(t){t.unselect(),this.#b.delete(t),this.#O({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#b.size!==0}get isEnterHandled(){return this.#b.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#c.undo(),this.#O({hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#q()})}redo(){this.#c.redo(),this.#O({hasSomethingToUndo:!0,hasSomethingToRedo:this.#c.hasSomethingToRedo(),isEmpty:this.#q()})}addCommands(t){this.#c.add(t),this.#O({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#q()})}#q(){if(this.#i.size===0)return!0;if(this.#i.size===1)for(const t of this.#i.values())return t.isEmpty();return!1}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const t=[...this.#b],n=()=>{for(const r of t)r.remove()},s=()=>{for(const r of t)this.#$(r)};this.addCommands({cmd:n,undo:s,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#Q(t){for(const n of this.#b)n.unselect();this.#b.clear();for(const n of t)n.isEmpty()||(this.#b.add(n),n.select());this.#O({hasSelectedEditor:this.hasSelection})}selectAll(){for(const t of this.#b)t.commit();this.#Q(this.#i.values())}unselectAll(){if(!(this.#e&&(this.#e.commitOrRemove(),this.#S!==bt.NONE))&&this.hasSelection){for(const t of this.#b)t.unselect();this.#b.clear(),this.#O({hasSelectedEditor:!1})}}translateSelectedEditors(t,n,s=!1){if(s||this.commitOrRemove(),!this.hasSelection)return;this.#z[0]+=t,this.#z[1]+=n;const[r,o]=this.#z,c=[...this.#b],u=1e3;this.#j&&clearTimeout(this.#j),this.#j=setTimeout(()=>{this.#j=null,this.#z[0]=this.#z[1]=0,this.addCommands({cmd:()=>{for(const d of c)this.#i.has(d.id)&&d.translateInPage(r,o)},undo:()=>{for(const d of c)this.#i.has(d.id)&&d.translateInPage(-r,-o)},mustExec:!1})},u);for(const d of c)d.translateInPage(t,n)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#r=new Map;for(const t of this.#b)this.#r.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#r)return!1;this.disableUserSelect(!1);const t=this.#r;this.#r=null;let n=!1;for(const[{x:r,y:o,pageIndex:c},u]of t)u.newX=r,u.newY=o,u.newPageIndex=c,n||=r!==u.savedX||o!==u.savedY||c!==u.savedPageIndex;if(!n)return!1;const s=(r,o,c,u)=>{if(this.#i.has(r.id)){const d=this.#s.get(u);d?r._setParentAndPosition(d,o,c):(r.pageIndex=u,r.x=o,r.y=c)}};return this.addCommands({cmd:()=>{for(const[r,{newX:o,newY:c,newPageIndex:u}]of t)s(r,o,c,u)},undo:()=>{for(const[r,{savedX:o,savedY:c,savedPageIndex:u}]of t)s(r,o,c,u)},mustExec:!0}),!0}dragSelectedEditors(t,n){if(this.#r)for(const s of this.#r.keys())s.drag(t,n)}rebuild(t){if(t.parent===null){const n=this.getLayer(t.pageIndex);n?(n.changeParent(t),n.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#b.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#e===t}getActive(){return this.#e}getMode(){return this.#S}get imageManager(){return xt(this,"imageManager",new Sh)}getSelectionBoxes(t){if(!t)return null;const n=document.getSelection();for(let g=0,m=n.rangeCount;g<m;g++)if(!t.contains(n.getRangeAt(g).commonAncestorContainer))return null;const{x:s,y:r,width:o,height:c}=t.getBoundingClientRect();let u;switch(t.getAttribute("data-main-rotation")){case"90":u=(g,m,y,v)=>({x:(m-r)/c,y:1-(g+y-s)/o,width:v/c,height:y/o});break;case"180":u=(g,m,y,v)=>({x:1-(g+y-s)/o,y:1-(m+v-r)/c,width:y/o,height:v/c});break;case"270":u=(g,m,y,v)=>({x:1-(m+v-r)/c,y:(g-s)/o,width:v/c,height:y/o});break;default:u=(g,m,y,v)=>({x:(g-s)/o,y:(m-r)/c,width:y/o,height:v/c});break}const d=[];for(let g=0,m=n.rangeCount;g<m;g++){const y=n.getRangeAt(g);if(!y.collapsed)for(const{x:v,y:_,width:A,height:E}of y.getClientRects())A===0||E===0||d.push(u(v,_,A,E))}return d.length===0?null:d}addChangedExistingAnnotation({annotationElementId:t,id:n}){(this.#o||=new Map).set(t,n)}removeChangedExistingAnnotation({annotationElementId:t}){this.#o?.delete(t)}renderAnnotationElement(t){const n=this.#o?.get(t.data.id);if(!n)return;const s=this.#n.getRawValue(n);s&&(this.#S===bt.NONE&&!s.hasBeenModified||s.renderAnnotationElement(t))}}class Xi{#t=null;#e=!1;#i=null;#s=null;#a=null;#n=null;#o=!1;#c=null;#u=null;#l=null;#h=null;#r=!1;static#d=null;static _l10n=null;constructor(t){this.#u=t,this.#r=t._uiManager.useNewAltTextFlow,Xi.#d||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(t){Xi._l10n??=t}async render(){const t=this.#i=document.createElement("button");t.className="altText",t.tabIndex="0";const n=this.#s=document.createElement("span");t.append(n),this.#r?(t.classList.add("new"),t.setAttribute("data-l10n-id",Xi.#d.missing),n.setAttribute("data-l10n-id",Xi.#d["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),n.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const s=this.#u._uiManager._signal;t.addEventListener("contextmenu",wi,{signal:s}),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:s});const r=o=>{o.preventDefault(),this.#u._uiManager.editAltText(this.#u),this.#r&&this.#u._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#g}})};return t.addEventListener("click",r,{capture:!0,signal:s}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(this.#o=!0,r(o))},{signal:s}),await this.#f(),t}get#g(){return this.#t&&"added"||this.#t===null&&this.guessedText&&"review"||"missing"}finish(){this.#i&&(this.#i.focus({focusVisible:this.#o}),this.#o=!1)}isEmpty(){return this.#r?this.#t===null:!this.#t&&!this.#e}hasData(){return this.#r?this.#t!==null||!!this.#l:this.isEmpty()}get guessedText(){return this.#l}async setGuessedText(t){this.#t===null&&(this.#l=t,this.#h=await Xi._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t}),this.#f())}toggleAltTextBadge(t=!1){if(!this.#r||this.#t){this.#c?.remove(),this.#c=null;return}if(!this.#c){const n=this.#c=document.createElement("div");n.className="noAltTextBadge",this.#u.div.append(n)}this.#c.classList.toggle("hidden",!t)}serialize(t){let n=this.#t;return!t&&this.#l===n&&(n=this.#h),{altText:n,decorative:this.#e,guessedText:this.#l,textWithDisclaimer:this.#h}}get data(){return{altText:this.#t,decorative:this.#e}}set data({altText:t,decorative:n,guessedText:s,textWithDisclaimer:r,cancel:o=!1}){s&&(this.#l=s,this.#h=r),!(this.#t===t&&this.#e===n)&&(o||(this.#t=t,this.#e=n),this.#f())}toggle(t=!1){this.#i&&(!t&&this.#n&&(clearTimeout(this.#n),this.#n=null),this.#i.disabled=!t)}shown(){this.#u._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#g}})}destroy(){this.#i?.remove(),this.#i=null,this.#s=null,this.#a=null,this.#c?.remove(),this.#c=null}async#f(){const t=this.#i;if(!t)return;if(this.#r){if(t.classList.toggle("done",!!this.#t),t.setAttribute("data-l10n-id",Xi.#d[this.#g]),this.#s?.setAttribute("data-l10n-id",Xi.#d[`${this.#g}-label`]),!this.#t){this.#a?.remove();return}}else{if(!this.#t&&!this.#e){t.classList.remove("done"),this.#a?.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let n=this.#a;if(!n){this.#a=n=document.createElement("span"),n.className="tooltip",n.setAttribute("role","tooltip"),n.id=`alt-text-tooltip-${this.#u.id}`;const r=100,o=this.#u._uiManager._signal;o.addEventListener("abort",()=>{clearTimeout(this.#n),this.#n=null},{once:!0}),t.addEventListener("mouseenter",()=>{this.#n=setTimeout(()=>{this.#n=null,this.#a.classList.add("show"),this.#u._reportTelemetry({action:"alt_text_tooltip"})},r)},{signal:o}),t.addEventListener("mouseleave",()=>{this.#n&&(clearTimeout(this.#n),this.#n=null),this.#a?.classList.remove("show")},{signal:o})}this.#e?n.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(n.removeAttribute("data-l10n-id"),n.textContent=this.#t),n.parentNode||t.append(n),this.#u.getImageForAltText()?.setAttribute("aria-describedby",n.id)}}class pt{#t=null;#e=null;#i=null;#s=!1;#a=!1;#n=null;#o=null;#c=null;#u="";#l=!1;#h=null;#r=!1;#d=!1;#g=!1;#f=null;#y=0;#m=0;#p=null;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#v=!1;#_=pt._zIndex++;static _borderLineWidth=-1;static _colorManager=new Eh;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const t=pt.prototype._resizeWithKeyboard,n=Xn.TRANSLATE_SMALL,s=Xn.TRANSLATE_BIG;return xt(this,"_resizerKeyboardManager",new zr([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-n,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[n,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-n]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,n]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,s]}],[["Escape","mac+Escape"],pt.prototype._stopResizingWithKeyboard]]))}constructor(t){this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null;const{rotation:n,rawDims:{pageWidth:s,pageHeight:r,pageX:o,pageY:c}}=this.parent.viewport;this.rotation=n,this.pageRotation=(360+n-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,r],this.pageTranslation=[o,c];const[u,d]=this.parentDimensions;this.x=t.x/u,this.y=t.y/d,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return xt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const n=new p0({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});n.annotationElementId=t.annotationElementId,n.deleted=!0,n._uiManager.addToAnnotationStorage(n)}static initialize(t,n){if(pt._l10n??=t,pt._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),pt._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);pt._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,n){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,n){zt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#v}set _isDraggable(t){this.#v=t,this.div?.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,n]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*n/(t*2),this.y+=this.width*t/(n*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*n/(t*2),this.y-=this.width*t/(n*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#_}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):this.#F(),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#l?this.#l=!1:this.parent.setSelected(this))}focusout(t){!this._focusEventsAllowed||!this.isAttachedToDOM||t.relatedTarget?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,n,s,r){const[o,c]=this.parentDimensions;[s,r]=this.screenToPageTranslation(s,r),this.x=(t+s)/o,this.y=(n+r)/c,this.fixAndSetPosition()}#x([t,n],s,r){[s,r]=this.screenToPageTranslation(s,r),this.x+=s/t,this.y+=r/n,this.fixAndSetPosition()}translate(t,n){this.#x(this.parentDimensions,t,n)}translateInPage(t,n){this.#h||=[this.x,this.y],this.#x(this.pageDimensions,t,n),this.div.scrollIntoView({block:"nearest"})}drag(t,n){this.#h||=[this.x,this.y];const[s,r]=this.parentDimensions;if(this.x+=t/s,this.y+=n/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:g,y:m}=this.div.getBoundingClientRect();this.parent.findNewParent(this,g,m)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:c}=this;const[u,d]=this.getBaseTranslation();o+=u,c+=d,this.div.style.left=`${(100*o).toFixed(2)}%`,this.div.style.top=`${(100*c).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!this.#h&&(this.#h[0]!==this.x||this.#h[1]!==this.y)}getBaseTranslation(){const[t,n]=this.parentDimensions,{_borderLineWidth:s}=pt,r=s/t,o=s/n;switch(this.rotation){case 90:return[-r,o];case 180:return[r,o];case 270:return[r,-o];default:return[-r,-o]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const[n,s]=this.pageDimensions;let{x:r,y:o,width:c,height:u}=this;if(c*=n,u*=s,r*=n,o*=s,this._mustFixPosition)switch(t){case 0:r=Math.max(0,Math.min(n-c,r)),o=Math.max(0,Math.min(s-u,o));break;case 90:r=Math.max(0,Math.min(n-u,r)),o=Math.min(s,Math.max(c,o));break;case 180:r=Math.min(n,Math.max(c,r)),o=Math.min(s,Math.max(u,o));break;case 270:r=Math.min(n,Math.max(u,r)),o=Math.max(0,Math.min(s-c,o));break}this.x=r/=n,this.y=o/=s;const[d,g]=this.getBaseTranslation();r+=d,o+=g;const{style:m}=this.div;m.left=`${(100*r).toFixed(2)}%`,m.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}static#E(t,n,s){switch(s){case 90:return[n,-t];case 180:return[-t,-n];case 270:return[-n,t];default:return[t,n]}}screenToPageTranslation(t,n){return pt.#E(t,n,this.parentRotation)}pageTranslationToScreen(t,n){return pt.#E(t,n,360-this.parentRotation)}#w(t){switch(t){case 90:{const[n,s]=this.pageDimensions;return[0,-n/s,s/n,0]}case 180:return[-1,0,0,-1];case 270:{const[n,s]=this.pageDimensions;return[0,n/s,-s/n,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[n,s]}=this;return[n*t,s*t]}setDims(t,n){const[s,r]=this.parentDimensions;this.div.style.width=`${(100*t/s).toFixed(2)}%`,this.#a||(this.div.style.height=`${(100*n/r).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:n,width:s}=t,r=s.endsWith("%"),o=!this.#a&&n.endsWith("%");if(r&&o)return;const[c,u]=this.parentDimensions;r||(t.width=`${(100*parseFloat(s)/c).toFixed(2)}%`),!this.#a&&!o&&(t.height=`${(100*parseFloat(n)/u).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#P(){if(this.#n)return;this.#n=document.createElement("div"),this.#n.classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],n=this._uiManager._signal;for(const s of t){const r=document.createElement("div");this.#n.append(r),r.classList.add("resizer",s),r.setAttribute("data-resizer-name",s),r.addEventListener("pointerdown",this.#C.bind(this,s),{signal:n}),r.addEventListener("contextmenu",wi,{signal:n}),r.tabIndex=-1}this.div.prepend(this.#n)}#C(t,n){n.preventDefault();const{isMac:s}=je.platform;if(n.button!==0||n.ctrlKey&&s)return;this.#i?.toggle(!1);const r=this._isDraggable;this._isDraggable=!1;const o=new AbortController,c=this._uiManager.combinedSignal(o);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#T.bind(this,t),{passive:!0,capture:!0,signal:c}),window.addEventListener("contextmenu",wi,{signal:c});const u=this.x,d=this.y,g=this.width,m=this.height,y=this.parent.div.style.cursor,v=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(n.target).cursor;const _=()=>{o.abort(),this.parent.togglePointerEvents(!0),this.#i?.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=y,this.div.style.cursor=v,this.#A(u,d,g,m)};window.addEventListener("pointerup",_,{signal:c}),window.addEventListener("blur",_,{signal:c})}#A(t,n,s,r){const o=this.x,c=this.y,u=this.width,d=this.height;o===t&&c===n&&u===s&&d===r||this.addCommands({cmd:()=>{this.width=u,this.height=d,this.x=o,this.y=c;const[g,m]=this.parentDimensions;this.setDims(g*u,m*d),this.fixAndSetPosition()},undo:()=>{this.width=s,this.height=r,this.x=t,this.y=n;const[g,m]=this.parentDimensions;this.setDims(g*s,m*r),this.fixAndSetPosition()},mustExec:!0})}#T(t,n){const[s,r]=this.parentDimensions,o=this.x,c=this.y,u=this.width,d=this.height,g=pt.MIN_SIZE/s,m=pt.MIN_SIZE/r,y=P=>Math.round(P*1e4)/1e4,v=this.#w(this.rotation),_=(P,Y)=>[v[0]*P+v[2]*Y,v[1]*P+v[3]*Y],A=this.#w(360-this.rotation),E=(P,Y)=>[A[0]*P+A[2]*Y,A[1]*P+A[3]*Y];let w,T,M=!1,C=!1;switch(t){case"topLeft":M=!0,w=(P,Y)=>[0,0],T=(P,Y)=>[P,Y];break;case"topMiddle":w=(P,Y)=>[P/2,0],T=(P,Y)=>[P/2,Y];break;case"topRight":M=!0,w=(P,Y)=>[P,0],T=(P,Y)=>[0,Y];break;case"middleRight":C=!0,w=(P,Y)=>[P,Y/2],T=(P,Y)=>[0,Y/2];break;case"bottomRight":M=!0,w=(P,Y)=>[P,Y],T=(P,Y)=>[0,0];break;case"bottomMiddle":w=(P,Y)=>[P/2,Y],T=(P,Y)=>[P/2,0];break;case"bottomLeft":M=!0,w=(P,Y)=>[0,Y],T=(P,Y)=>[P,0];break;case"middleLeft":C=!0,w=(P,Y)=>[0,Y/2],T=(P,Y)=>[P,Y/2];break}const O=w(u,d),N=T(u,d);let U=_(...N);const q=y(o+U[0]),$=y(c+U[1]);let B=1,Z=1,[W,J]=this.screenToPageTranslation(n.movementX,n.movementY);if([W,J]=E(W/s,J/r),M){const P=Math.hypot(u,d);B=Z=Math.max(Math.min(Math.hypot(N[0]-O[0]-W,N[1]-O[1]-J)/P,1/u,1/d),g/u,m/d)}else C?B=Math.max(g,Math.min(1,Math.abs(N[0]-O[0]-W)))/u:Z=Math.max(m,Math.min(1,Math.abs(N[1]-O[1]-J)))/d;const it=y(u*B),ht=y(d*Z);U=_(...T(it,ht));const st=q-U[0],k=$-U[1];this.width=it,this.height=ht,this.x=st,this.y=k,this.setDims(s*it,r*ht),this.fixAndSetPosition()}altTextFinish(){this.#i?.finish()}async addEditToolbar(){return this._editToolbar||this.#d?this._editToolbar:(this._editToolbar=new Pr(this),this.div.append(this._editToolbar.render()),this.#i&&await this._editToolbar.addAltText(this.#i),this._editToolbar)}removeEditToolbar(){this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,this.#i?.destroy())}addContainer(t){const n=this._editToolbar?.div;n?n.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){this.#i||(Xi.initialize(pt._l10n),this.#i=new Xi(this),this.#t&&(this.#i.data=this.#t,this.#t=null),await this.addEditToolbar())}get altTextData(){return this.#i?.data}set altTextData(t){this.#i&&(this.#i.data=t)}get guessedAltText(){return this.#i?.guessedText}async setGuessedAltText(t){await this.#i?.setGuessedText(t)}serializeAltText(t){return this.#i?.serialize(t)}hasAltText(){return!!this.#i&&!this.#i.isEmpty()}hasAltTextData(){return this.#i?.hasData()??!1}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=this.#s?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),this.#L();const[t,n]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*n/t).toFixed(2)}%`,this.div.style.maxHeight=`${(100*t/n).toFixed(2)}%`);const[s,r]=this.getInitialTranslation();return this.translate(s,r),To(this,this.div,["pointerdown"]),this.div}pointerdown(t){const{isMac:n}=je.platform;if(t.button!==0||t.ctrlKey&&n){t.preventDefault();return}if(this.#l=!0,this._isDraggable){this.#M(t);return}this.#R(t)}get isSelected(){return this._uiManager.isSelected(this)}#R(t){const{isMac:n}=je.platform;t.ctrlKey&&!n||t.shiftKey||t.metaKey&&n?this.parent.toggleSelected(this):this.parent.setSelected(this)}#M(t){const{isSelected:n}=this;this._uiManager.setUpDragSession();const s=new AbortController,r=this._uiManager.combinedSignal(s);if(n){this.div.classList.add("moving"),this.#y=t.clientX,this.#m=t.clientY;const c=u=>{const{clientX:d,clientY:g}=u,[m,y]=this.screenToPageTranslation(d-this.#y,g-this.#m);this.#y=d,this.#m=g,this._uiManager.dragSelectedEditors(m,y)};window.addEventListener("pointermove",c,{passive:!0,capture:!0,signal:r})}const o=()=>{s.abort(),n&&this.div.classList.remove("moving"),this.#l=!1,this._uiManager.endDragSession()||this.#R(t)};window.addEventListener("pointerup",o,{signal:r}),window.addEventListener("blur",o,{signal:r})}moveInDOM(){this.#f&&clearTimeout(this.#f),this.#f=setTimeout(()=>{this.#f=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(t,n,s){t.changeParent(this),this.x=n,this.y=s,this.fixAndSetPosition()}getRect(t,n,s=this.rotation){const r=this.parentScale,[o,c]=this.pageDimensions,[u,d]=this.pageTranslation,g=t/r,m=n/r,y=this.x*o,v=this.y*c,_=this.width*o,A=this.height*c;switch(s){case 0:return[y+g+u,c-v-m-A+d,y+g+_+u,c-v-m+d];case 90:return[y+m+u,c-v+g+d,y+m+A+u,c-v+g+_+d];case 180:return[y-g-_+u,c-v+m+d,y-g+u,c-v+m+A+d];case 270:return[y-m-A+u,c-v-g-_+d,y-m+u,c-v-g+d];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,n){const[s,r,o,c]=t,u=o-s,d=c-r;switch(this.rotation){case 0:return[s,n-c,u,d];case 90:return[s,n-r,d,u];case 180:return[o,n-r,u,d];case 270:return[o,n-c,d,u];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){this.#d=!0}disableEditMode(){this.#d=!1}isInEditMode(){return this.#d}shouldGetKeyboardEvents(){return this.#g}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}#L(){if(this.#c||!this.div)return;this.#c=new AbortController;const t=this._uiManager.combinedSignal(this.#c);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})}rebuild(){this.#L()}rotate(t){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(t=!1,n=null){zt("An editor must be serializable")}static async deserialize(t,n,s){const r=new this.prototype.constructor({parent:n,id:n.getNextId(),uiManager:s});r.rotation=t.rotation,r.#t=t.accessibilityData;const[o,c]=r.pageDimensions,[u,d,g,m]=r.getRectInCurrentCoords(t.rect,c);return r.x=u/o,r.y=d/c,r.width=g/o,r.height=m/c,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#c?.abort(),this.#c=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#f&&(clearTimeout(this.#f),this.#f=null),this.#F(),this.removeEditToolbar(),this.#p){for(const t of this.#p.values())clearTimeout(t);this.#p=null}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#P(),this.#n.classList.remove("hidden"),To(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),this.#o={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const n=this.#n.children;if(!this.#e){this.#e=Array.from(n);const c=this.#S.bind(this),u=this.#b.bind(this),d=this._uiManager._signal;for(const g of this.#e){const m=g.getAttribute("data-resizer-name");g.setAttribute("role","spinbutton"),g.addEventListener("keydown",c,{signal:d}),g.addEventListener("blur",u,{signal:d}),g.addEventListener("focus",this.#k.bind(this,m),{signal:d}),g.setAttribute("data-l10n-id",pt._l10nResizer[m])}}const s=this.#e[0];let r=0;for(const c of n){if(c===s)break;r++}const o=(360-this.rotation+this.parentRotation)%360/90*(this.#e.length/4);if(o!==r){if(o<r)for(let u=0;u<r-o;u++)this.#n.append(this.#n.firstChild);else if(o>r)for(let u=0;u<o-r;u++)this.#n.firstChild.before(this.#n.lastChild);let c=0;for(const u of n){const g=this.#e[c++].getAttribute("data-resizer-name");u.setAttribute("data-l10n-id",pt._l10nResizer[g])}}this.#N(0),this.#g=!0,this.#n.firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}#S(t){pt._resizerKeyboardManager.exec(this,t)}#b(t){this.#g&&t.relatedTarget?.parentNode!==this.#n&&this.#F()}#k(t){this.#u=this.#g?t:""}#N(t){if(this.#e)for(const n of this.#e)n.tabIndex=t}_resizeWithKeyboard(t,n){this.#g&&this.#T(this.#u,{movementX:t,movementY:n})}#F(){if(this.#g=!1,this.#N(-1),this.#o){const{savedX:t,savedY:n,savedWidth:s,savedHeight:r}=this.#o;this.#A(t,n,s,r),this.#o=null}}_stopResizingWithKeyboard(){this.#F(),this.div.focus()}select(){if(this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#i?.toggleAltTextBadge(!1)}unselect(){this.#n?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#i?.toggleAltTextBadge(!0)}updateParams(t,n){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return this.#r}set isEditing(t){this.#r=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,n){this.#a=!0;const s=t/n,{style:r}=this.div;r.aspectRatio=s,r.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,n=!1){if(n){this.#p||=new Map;const{action:s}=t;let r=this.#p.get(s);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(t),this.#p.delete(s),this.#p.size===0&&(this.#p=null)},pt._telemetryTimeout),this.#p.set(s,r);return}t.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),this.#s=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#s=!0}renderAnnotationElement(t){let n=t.container.querySelector(".annotationContent");if(!n)n=document.createElement("div"),n.classList.add("annotationContent",this.editorType),t.container.prepend(n);else if(n.nodeName==="CANVAS"){const s=n;n=document.createElement("div"),n.classList.add("annotationContent",this.editorType),s.before(n)}return n}resetAnnotationElement(t){const{firstChild:n}=t.container;n?.nodeName==="DIV"&&n.classList.contains("annotationContent")&&n.remove()}}class p0 extends pt{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const Hp=3285377520,vi=4294901760,Gi=65535;class zm{constructor(t){this.h1=t?t&4294967295:Hp,this.h2=t?t&4294967295:Hp}update(t){let n,s;if(typeof t=="string"){n=new Uint8Array(t.length*2),s=0;for(let E=0,w=t.length;E<w;E++){const T=t.charCodeAt(E);T<=255?n[s++]=T:(n[s++]=T>>>8,n[s++]=T&255)}}else if(ArrayBuffer.isView(t))n=t.slice(),s=n.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=s>>2,o=s-r*4,c=new Uint32Array(n.buffer,0,r);let u=0,d=0,g=this.h1,m=this.h2;const y=3432918353,v=461845907,_=y&Gi,A=v&Gi;for(let E=0;E<r;E++)E&1?(u=c[E],u=u*y&vi|u*_&Gi,u=u<<15|u>>>17,u=u*v&vi|u*A&Gi,g^=u,g=g<<13|g>>>19,g=g*5+3864292196):(d=c[E],d=d*y&vi|d*_&Gi,d=d<<15|d>>>17,d=d*v&vi|d*A&Gi,m^=d,m=m<<13|m>>>19,m=m*5+3864292196);switch(u=0,o){case 3:u^=n[r*4+2]<<16;case 2:u^=n[r*4+1]<<8;case 1:u^=n[r*4],u=u*y&vi|u*_&Gi,u=u<<15|u>>>17,u=u*v&vi|u*A&Gi,r&1?g^=u:m^=u}this.h1=g,this.h2=m}hexdigest(){let t=this.h1,n=this.h2;return t^=n>>>1,t=t*3981806797&vi|t*36045&Gi,n=n*4283543511&vi|((n<<16|t>>>16)*2950163797&vi)>>>16,t^=n>>>1,t=t*444984403&vi|t*60499&Gi,n=n*3301882366&vi|((n<<16|t>>>16)*3120437893&vi)>>>16,t^=n>>>1,(t>>>0).toString(16).padStart(8,"0")+(n>>>0).toString(16).padStart(8,"0")}}const ch=Object.freeze({map:null,hash:"",transfer:void 0});class wh{#t=!1;#e=null;#i=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,n){const s=this.#i.get(t);return s===void 0?n:Object.assign(n,s)}getRawValue(t){return this.#i.get(t)}remove(t){if(this.#i.delete(t),this.#i.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const n of this.#i.values())if(n instanceof pt)return;this.onAnnotationEditor(null)}}setValue(t,n){const s=this.#i.get(t);let r=!1;if(s!==void 0)for(const[o,c]of Object.entries(n))s[o]!==c&&(r=!0,s[o]=c);else r=!0,this.#i.set(t,n);r&&this.#s(),n instanceof pt&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(n.constructor._type)}has(t){return this.#i.has(t)}getAll(){return this.#i.size>0?yh(this.#i):null}setAll(t){for(const[n,s]of Object.entries(t))this.setValue(n,s)}get size(){return this.#i.size}#s(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new Um(this)}get serializable(){if(this.#i.size===0)return ch;const t=new Map,n=new zm,s=[],r=Object.create(null);let o=!1;for(const[c,u]of this.#i){const d=u instanceof pt?u.serialize(!1,r):u;d&&(t.set(c,d),n.update(`${c}:${JSON.stringify(d)}`),o||=!!d.bitmap)}if(o)for(const c of t.values())c.bitmap&&s.push(c.bitmap);return t.size>0?{map:t,hash:n.hexdigest(),transfer:s}:ch}get editorStats(){let t=null;const n=new Map;for(const s of this.#i.values()){if(!(s instanceof pt))continue;const r=s.telemetryFinalData;if(!r)continue;const{type:o}=r;n.has(o)||n.set(o,Object.getPrototypeOf(s).constructor),t||=Object.create(null);const c=t[o]||=new Map;for(const[u,d]of Object.entries(r)){if(u==="type")continue;let g=c.get(u);g||(g=new Map,c.set(u,g));const m=g.get(d)??0;g.set(d,m+1)}}for(const[s,r]of n)t[s]=r.computeTelemetryFinalData(t[s]);return t}resetModifiedIds(){this.#e=null}get modifiedIds(){if(this.#e)return this.#e;const t=[];for(const n of this.#i.values())!(n instanceof pt)||!n.annotationElementId||!n.serialize()||t.push(n.annotationElementId);return this.#e={ids:new Set(t),hash:t.join(",")}}}class Um extends wh{#t;constructor(t){super();const{map:n,hash:s,transfer:r}=t.serializable,o=structuredClone(n,r?{transfer:r}:null);this.#t={map:o,hash:s,transfer:r}}get print(){zt("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}get modifiedIds(){return xt(this,"modifiedIds",{ids:new Set,hash:""})}}class m0{#t=new Set;constructor({ownerDocument:t=globalThis.document,styleElement:n=null}){this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const n=this.styleElement.sheet;n.insertRule(t,n.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,_inspectFont:n}){if(!(!t||this.#t.has(t.loadedName))){if(oe(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:s,src:r,style:o}=t,c=new FontFace(s,r,o);this.addNativeFontFace(c);try{await c.load(),this.#t.add(s),n?.(t)}catch{St(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(c)}return}zt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const s=t.createNativeFontFace();if(s){this.addNativeFontFace(s);try{await s.loaded}catch(r){throw St(`Failed to load font '${s.family}': '${r}'.`),t.disableFontFace=!0,r}}return}const n=t.createFontFaceRule();if(n){if(this.insertRule(n),this.isSyncFontLoadingSupported)return;await new Promise(s=>{const r=this._queueLoadingCallback(s);this._prepareFontLoadEvent(t,r)})}}get isFontLoadingAPISupported(){const t=!!this._document?.fonts;return xt(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){let t=!1;return(De||typeof navigator<"u"&&typeof navigator?.userAgent=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(t=!0),xt(this,"isSyncFontLoadingSupported",t)}_queueLoadingCallback(t){function n(){for(oe(!r.done,"completeRequest() cannot be called twice."),r.done=!0;s.length>0&&s[0].done;){const o=s.shift();setTimeout(o.callback,0)}}const{loadingRequests:s}=this,r={done:!1,complete:n,callback:t};return s.push(r),r}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return xt(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,n){function s(O,N){return O.charCodeAt(N)<<24|O.charCodeAt(N+1)<<16|O.charCodeAt(N+2)<<8|O.charCodeAt(N+3)&255}function r(O,N,U,q){const $=O.substring(0,N),B=O.substring(N+U);return $+q+B}let o,c;const u=this._document.createElement("canvas");u.width=1,u.height=1;const d=u.getContext("2d");let g=0;function m(O,N){if(++g>30){St("Load test font never loaded."),N();return}if(d.font="30px "+O,d.fillText(".",0,20),d.getImageData(0,0,1,1).data[3]>0){N();return}setTimeout(m.bind(null,O,N))}const y=`lt${Date.now()}${this.loadTestFontId++}`;let v=this._loadTestFont;v=r(v,976,y.length,y);const A=16,E=1482184792;let w=s(v,A);for(o=0,c=y.length-3;o<c;o+=4)w=w-E+s(y,o)|0;o<y.length&&(w=w-E+s(y+"XXX",o)|0),v=r(v,A,4,t0(w));const T=`url(data:font/opentype;base64,${btoa(v)});`,M=`@font-face {font-family:"${y}";src:${T}}`;this.insertRule(M);const C=this._document.createElement("div");C.style.visibility="hidden",C.style.width=C.style.height="10px",C.style.position="absolute",C.style.top=C.style.left="0px";for(const O of[t.loadedName,y]){const N=this._document.createElement("span");N.textContent="Hi",N.style.fontFamily=O,C.append(N)}this._document.body.append(C),m(y,()=>{C.remove(),n.complete()})}}class y0{constructor(t,{disableFontFace:n=!1,inspectFont:s=null}){this.compiledGlyphs=Object.create(null);for(const r in t)this[r]=t[r];this.disableFontFace=n===!0,this._inspectFont=s}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${r0(this.data)});`;let n;if(!this.cssFontInfo)n=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),n=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${t}}`}return this._inspectFont?.(this,t),n}getPathGenerator(t,n){if(this.compiledGlyphs[n]!==void 0)return this.compiledGlyphs[n];let s;try{s=t.get(this.loadedName+"_path_"+n)}catch(o){St(`getPathGenerator - ignoring character: "${o}".`)}if(!Array.isArray(s)||s.length===0)return this.compiledGlyphs[n]=function(o,c){};const r=[];for(let o=0,c=s.length;o<c;)switch(s[o++]){case dn.BEZIER_CURVE_TO:{const[u,d,g,m,y,v]=s.slice(o,o+6);r.push(_=>_.bezierCurveTo(u,d,g,m,y,v)),o+=6}break;case dn.MOVE_TO:{const[u,d]=s.slice(o,o+2);r.push(g=>g.moveTo(u,d)),o+=2}break;case dn.LINE_TO:{const[u,d]=s.slice(o,o+2);r.push(g=>g.lineTo(u,d)),o+=2}break;case dn.QUADRATIC_CURVE_TO:{const[u,d,g,m]=s.slice(o,o+4);r.push(y=>y.quadraticCurveTo(u,d,g,m)),o+=4}break;case dn.RESTORE:r.push(u=>u.restore());break;case dn.SAVE:r.push(u=>u.save());break;case dn.SCALE:oe(r.length===2,"Scale command is only valid at the third position.");break;case dn.TRANSFORM:{const[u,d,g,m,y,v]=s.slice(o,o+6);r.push(_=>_.transform(u,d,g,m,y,v)),o+=6}break;case dn.TRANSLATE:{const[u,d]=s.slice(o,o+2);r.push(g=>g.translate(u,d)),o+=2}break}return this.compiledGlyphs[n]=function(c,u){r[0](c),r[1](c),c.scale(u,-u);for(let d=2,g=r.length;d<g;d++)r[d](c)}}}class Bm{#t=!1;constructor({enableHWA:t=!1}){this.#t=t}create(t,n){if(t<=0||n<=0)throw new Error("Invalid canvas size");const s=this._createCanvas(t,n);return{canvas:s,context:s.getContext("2d",{willReadFrequently:!this.#t})}}reset(t,n,s){if(!t.canvas)throw new Error("Canvas is not specified");if(n<=0||s<=0)throw new Error("Invalid canvas size");t.canvas.width=n,t.canvas.height=s}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,n){zt("Abstract method `_createCanvas` called.")}}class v0 extends Bm{constructor({ownerDocument:t=globalThis.document,enableHWA:n=!1}){super({enableHWA:n}),this._document=t}_createCanvas(t,n){const s=this._document.createElement("canvas");return s.width=t,s.height=n,s}}class Im{constructor({baseUrl:t=null,isCompressed:n=!0}){this.baseUrl=t,this.isCompressed=n}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const n=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(n).then(s=>({cMapData:s,isCompressed:this.isCompressed})).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${n}`)})}async _fetch(t){zt("Abstract method `_fetch` called.")}}class qm extends Im{async _fetch(t){const n=await Lo(t,this.isCompressed?"arraybuffer":"text");return n instanceof ArrayBuffer?new Uint8Array(n):Oo(n)}}class Gm{addFilter(t){return"none"}addHCMFilter(t,n){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,n,s,r,o){return"none"}destroy(t=!1){}}class b0 extends Gm{#t;#e;#i;#s;#a;#n;#o=0;constructor({docId:t,ownerDocument:n=globalThis.document}){super(),this.#s=t,this.#a=n}get#c(){return this.#e||=new Map}get#u(){return this.#n||=new Map}get#l(){if(!this.#i){const t=this.#a.createElement("div"),{style:n}=t;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const s=this.#a.createElementNS(pn,"svg");s.setAttribute("width",0),s.setAttribute("height",0),this.#i=this.#a.createElementNS(pn,"defs"),t.append(s),s.append(this.#i),this.#a.body.append(t)}return this.#i}#h(t){if(t.length===1){const d=t[0],g=new Array(256);for(let y=0;y<256;y++)g[y]=d[y]/255;const m=g.join(",");return[m,m,m]}const[n,s,r]=t,o=new Array(256),c=new Array(256),u=new Array(256);for(let d=0;d<256;d++)o[d]=n[d]/255,c[d]=s[d]/255,u[d]=r[d]/255;return[o.join(","),c.join(","),u.join(",")]}#r(t){if(this.#t===void 0){this.#t="";const n=this.#a.URL;n!==this.#a.baseURI&&(ko(n)?St('#createUrl: ignore "data:"-URL for performance reasons.'):this.#t=n.split("#",1)[0])}return`url(${this.#t}#${t})`}addFilter(t){if(!t)return"none";let n=this.#c.get(t);if(n)return n;const[s,r,o]=this.#h(t),c=t.length===1?s:`${s}${r}${o}`;if(n=this.#c.get(c),n)return this.#c.set(t,n),n;const u=`g_${this.#s}_transfer_map_${this.#o++}`,d=this.#r(u);this.#c.set(t,d),this.#c.set(c,d);const g=this.#f(u);return this.#m(s,r,o,g),d}addHCMFilter(t,n){const s=`${t}-${n}`,r="base";let o=this.#u.get(r);if(o?.key===s||(o?(o.filter?.remove(),o.key=s,o.url="none",o.filter=null):(o={key:s,url:"none",filter:null},this.#u.set(r,o)),!t||!n))return o.url;const c=this.#v(t);t=lt.makeHexColor(...c);const u=this.#v(n);if(n=lt.makeHexColor(...u),this.#l.style.color="",t==="#000000"&&n==="#ffffff"||t===n)return o.url;const d=new Array(256);for(let _=0;_<=255;_++){const A=_/255;d[_]=A<=.03928?A/12.92:((A+.055)/1.055)**2.4}const g=d.join(","),m=`g_${this.#s}_hcm_filter`,y=o.filter=this.#f(m);this.#m(g,g,g,y),this.#g(y);const v=(_,A)=>{const E=c[_]/255,w=u[_]/255,T=new Array(A+1);for(let M=0;M<=A;M++)T[M]=E+M/A*(w-E);return T.join(",")};return this.#m(v(0,5),v(1,5),v(2,5),y),o.url=this.#r(m),o.url}addAlphaFilter(t){let n=this.#c.get(t);if(n)return n;const[s]=this.#h([t]),r=`alpha_${s}`;if(n=this.#c.get(r),n)return this.#c.set(t,n),n;const o=`g_${this.#s}_alpha_map_${this.#o++}`,c=this.#r(o);this.#c.set(t,c),this.#c.set(r,c);const u=this.#f(o);return this.#p(s,u),c}addLuminosityFilter(t){let n=this.#c.get(t||"luminosity");if(n)return n;let s,r;if(t?([s]=this.#h([t]),r=`luminosity_${s}`):r="luminosity",n=this.#c.get(r),n)return this.#c.set(t,n),n;const o=`g_${this.#s}_luminosity_map_${this.#o++}`,c=this.#r(o);this.#c.set(t,c),this.#c.set(r,c);const u=this.#f(o);return this.#d(u),t&&this.#p(s,u),c}addHighlightHCMFilter(t,n,s,r,o){const c=`${n}-${s}-${r}-${o}`;let u=this.#u.get(t);if(u?.key===c||(u?(u.filter?.remove(),u.key=c,u.url="none",u.filter=null):(u={key:c,url:"none",filter:null},this.#u.set(t,u)),!n||!s))return u.url;const[d,g]=[n,s].map(this.#v.bind(this));let m=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),y=Math.round(.2126*g[0]+.7152*g[1]+.0722*g[2]),[v,_]=[r,o].map(this.#v.bind(this));y<m&&([m,y,v,_]=[y,m,_,v]),this.#l.style.color="";const A=(T,M,C)=>{const O=new Array(256),N=(y-m)/C,U=T/255,q=(M-T)/(255*C);let $=0;for(let B=0;B<=C;B++){const Z=Math.round(m+B*N),W=U+B*q;for(let J=$;J<=Z;J++)O[J]=W;$=Z+1}for(let B=$;B<256;B++)O[B]=O[$-1];return O.join(",")},E=`g_${this.#s}_hcm_${t}_filter`,w=u.filter=this.#f(E);return this.#g(w),this.#m(A(v[0],_[0],5),A(v[1],_[1],5),A(v[2],_[2],5),w),u.url=this.#r(E),u.url}destroy(t=!1){t&&this.#u.size!==0||(this.#i&&(this.#i.parentNode.parentNode.remove(),this.#i=null),this.#e&&(this.#e.clear(),this.#e=null),this.#o=0)}#d(t){const n=this.#a.createElementNS(pn,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(n)}#g(t){const n=this.#a.createElementNS(pn,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(n)}#f(t){const n=this.#a.createElementNS(pn,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",t),this.#l.append(n),n}#y(t,n,s){const r=this.#a.createElementNS(pn,n);r.setAttribute("type","discrete"),r.setAttribute("tableValues",s),t.append(r)}#m(t,n,s,r){const o=this.#a.createElementNS(pn,"feComponentTransfer");r.append(o),this.#y(o,"feFuncR",t),this.#y(o,"feFuncG",n),this.#y(o,"feFuncB",s)}#p(t,n){const s=this.#a.createElementNS(pn,"feComponentTransfer");n.append(s),this.#y(s,"feFuncA",t)}#v(t){return this.#l.style.color=t,Ah(getComputedStyle(this.#l).getPropertyValue("color"))}}class Vm{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const n=`${this.baseUrl}${t}`;return this._fetch(n).catch(s=>{throw new Error(`Unable to load font data at: ${n}`)})}async _fetch(t){zt("Abstract method `_fetch` called.")}}class Xm extends Vm{async _fetch(t){const n=await Lo(t,"arraybuffer");return new Uint8Array(n)}}if(De){var uh=Promise.withResolvers(),hh=null;(async()=>{const t=await no(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),n=await no(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),s=await no(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),r=await no(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]);let o,c;return new Map(Object.entries({fs:t,http:n,https:s,url:r,canvas:o,path2d:c}))})().then(t=>{hh=t,uh.resolve()},t=>{St(`loadPackages: ${t}`),hh=new Map,uh.resolve()})}class Yn{static get promise(){return uh.promise}static get(t){return hh?.get(t)}}async function Ym(f){const n=await Yn.get("fs").promises.readFile(f);return new Uint8Array(n)}class _0 extends Gm{}class A0 extends Bm{_createCanvas(t,n){return Yn.get("canvas").createCanvas(t,n)}}class S0 extends Im{async _fetch(t){return Ym(t)}}class E0 extends Vm{async _fetch(t){return Ym(t)}}const Fe={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function dh(f,t){if(!t)return;const n=t[2]-t[0],s=t[3]-t[1],r=new Path2D;r.rect(t[0],t[1],n,s),f.clip(r)}class Th{getPattern(){zt("Abstract method `getPattern` called.")}}class w0 extends Th{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let n;this._type==="axial"?n=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(n=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const s of this._colorStops)n.addColorStop(s[0],s[1]);return n}getPattern(t,n,s,r){let o;if(r===Fe.STROKE||r===Fe.FILL){const c=n.current.getClippedPathBoundingBox(r,Gt(t))||[0,0,0,0],u=Math.ceil(c[2]-c[0])||1,d=Math.ceil(c[3]-c[1])||1,g=n.cachedCanvases.getCanvas("pattern",u,d),m=g.context;m.clearRect(0,0,m.canvas.width,m.canvas.height),m.beginPath(),m.rect(0,0,m.canvas.width,m.canvas.height),m.translate(-c[0],-c[1]),s=lt.transform(s,[1,0,0,1,c[0],c[1]]),m.transform(...n.baseTransform),this.matrix&&m.transform(...this.matrix),dh(m,this._bbox),m.fillStyle=this._createGradient(m),m.fill(),o=t.createPattern(g.canvas,"no-repeat");const y=new DOMMatrix(s);o.setTransform(y)}else dh(t,this._bbox),o=this._createGradient(t);return o}}function Ju(f,t,n,s,r,o,c,u){const d=t.coords,g=t.colors,m=f.data,y=f.width*4;let v;d[n+1]>d[s+1]&&(v=n,n=s,s=v,v=o,o=c,c=v),d[s+1]>d[r+1]&&(v=s,s=r,r=v,v=c,c=u,u=v),d[n+1]>d[s+1]&&(v=n,n=s,s=v,v=o,o=c,c=v);const _=(d[n]+t.offsetX)*t.scaleX,A=(d[n+1]+t.offsetY)*t.scaleY,E=(d[s]+t.offsetX)*t.scaleX,w=(d[s+1]+t.offsetY)*t.scaleY,T=(d[r]+t.offsetX)*t.scaleX,M=(d[r+1]+t.offsetY)*t.scaleY;if(A>=M)return;const C=g[o],O=g[o+1],N=g[o+2],U=g[c],q=g[c+1],$=g[c+2],B=g[u],Z=g[u+1],W=g[u+2],J=Math.round(A),it=Math.round(M);let ht,st,k,P,Y,nt,x,I;for(let Q=J;Q<=it;Q++){if(Q<w){const ct=Q<A?0:(A-Q)/(A-w);ht=_-(_-E)*ct,st=C-(C-U)*ct,k=O-(O-q)*ct,P=N-(N-$)*ct}else{let ct;Q>M?ct=1:w===M?ct=0:ct=(w-Q)/(w-M),ht=E-(E-T)*ct,st=U-(U-B)*ct,k=q-(q-Z)*ct,P=$-($-W)*ct}let X;Q<A?X=0:Q>M?X=1:X=(A-Q)/(A-M),Y=_-(_-T)*X,nt=C-(C-B)*X,x=O-(O-Z)*X,I=N-(N-W)*X;const tt=Math.round(Math.min(ht,Y)),ot=Math.round(Math.max(ht,Y));let et=y*Q+tt*4;for(let ct=tt;ct<=ot;ct++)X=(ht-ct)/(ht-Y),X<0?X=0:X>1&&(X=1),m[et++]=st-(st-nt)*X|0,m[et++]=k-(k-x)*X|0,m[et++]=P-(P-I)*X|0,m[et++]=255}}function T0(f,t,n){const s=t.coords,r=t.colors;let o,c;switch(t.type){case"lattice":const u=t.verticesPerRow,d=Math.floor(s.length/u)-1,g=u-1;for(o=0;o<d;o++){let m=o*u;for(let y=0;y<g;y++,m++)Ju(f,n,s[m],s[m+1],s[m+u],r[m],r[m+1],r[m+u]),Ju(f,n,s[m+u+1],s[m+1],s[m+u],r[m+u+1],r[m+1],r[m+u])}break;case"triangles":for(o=0,c=s.length;o<c;o+=3)Ju(f,n,s[o],s[o+1],s[o+2],r[o],r[o+1],r[o+2]);break;default:throw new Error("illegal figure")}}class x0 extends Th{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[7],this._background=t[8],this.matrix=null}_createMeshCanvas(t,n,s){const u=Math.floor(this._bounds[0]),d=Math.floor(this._bounds[1]),g=Math.ceil(this._bounds[2])-u,m=Math.ceil(this._bounds[3])-d,y=Math.min(Math.ceil(Math.abs(g*t[0]*1.1)),3e3),v=Math.min(Math.ceil(Math.abs(m*t[1]*1.1)),3e3),_=g/y,A=m/v,E={coords:this._coords,colors:this._colors,offsetX:-u,offsetY:-d,scaleX:1/_,scaleY:1/A},w=y+4,T=v+4,M=s.getCanvas("mesh",w,T),C=M.context,O=C.createImageData(y,v);if(n){const U=O.data;for(let q=0,$=U.length;q<$;q+=4)U[q]=n[0],U[q+1]=n[1],U[q+2]=n[2],U[q+3]=255}for(const U of this._figures)T0(O,U,E);return C.putImageData(O,2,2),{canvas:M.canvas,offsetX:u-2*_,offsetY:d-2*A,scaleX:_,scaleY:A}}getPattern(t,n,s,r){dh(t,this._bbox);let o;if(r===Fe.SHADING)o=lt.singularValueDecompose2dScale(Gt(t));else if(o=lt.singularValueDecompose2dScale(n.baseTransform),this.matrix){const u=lt.singularValueDecompose2dScale(this.matrix);o=[o[0]*u[0],o[1]*u[1]]}const c=this._createMeshCanvas(o,r===Fe.SHADING?null:this._background,n.cachedCanvases);return r!==Fe.SHADING&&(t.setTransform(...n.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(c.offsetX,c.offsetY),t.scale(c.scaleX,c.scaleY),t.createPattern(c.canvas,"no-repeat")}}class C0 extends Th{getPattern(){return"hotpink"}}function R0(f){switch(f[0]){case"RadialAxial":return new w0(f);case"Mesh":return new x0(f);case"Dummy":return new C0}throw new Error(`Unknown IR type: ${f[0]}`)}const zp={COLORED:1,UNCOLORED:2};class xh{static MAX_PATTERN_SIZE=3e3;constructor(t,n,s,r,o){this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.color=n,this.ctx=s,this.canvasGraphicsFactory=r,this.baseTransform=o}createPatternCanvas(t){const{bbox:n,operatorList:s,paintType:r,tilingType:o,color:c,canvasGraphicsFactory:u}=this;let{xstep:d,ystep:g}=this;d=Math.abs(d),g=Math.abs(g),Mo("TilingType: "+o);const m=n[0],y=n[1],v=n[2],_=n[3],A=v-m,E=_-y,w=lt.singularValueDecompose2dScale(this.matrix),T=lt.singularValueDecompose2dScale(this.baseTransform),M=w[0]*T[0],C=w[1]*T[1];let O=A,N=E,U=!1,q=!1;const $=Math.ceil(d*M),B=Math.ceil(g*C),Z=Math.ceil(A*M),W=Math.ceil(E*C);$>=Z?O=d:U=!0,B>=W?N=g:q=!0;const J=this.getSizeAndScale(O,this.ctx.canvas.width,M),it=this.getSizeAndScale(N,this.ctx.canvas.height,C),ht=t.cachedCanvases.getCanvas("pattern",J.size,it.size),st=ht.context,k=u.createCanvasGraphics(st);if(k.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(k,r,c),st.translate(-J.scale*m,-it.scale*y),k.transform(J.scale,0,0,it.scale,0,0),st.save(),this.clipBbox(k,m,y,v,_),k.baseTransform=Gt(k.ctx),k.executeOperatorList(s),k.endDrawing(),st.restore(),U||q){const P=ht.canvas;U&&(O=d),q&&(N=g);const Y=this.getSizeAndScale(O,this.ctx.canvas.width,M),nt=this.getSizeAndScale(N,this.ctx.canvas.height,C),x=Y.size,I=nt.size,Q=t.cachedCanvases.getCanvas("pattern-workaround",x,I),X=Q.context,tt=U?Math.floor(A/d):0,ot=q?Math.floor(E/g):0;for(let et=0;et<=tt;et++)for(let ct=0;ct<=ot;ct++)X.drawImage(P,x*et,I*ct,x,I,0,0,x,I);return{canvas:Q.canvas,scaleX:Y.scale,scaleY:nt.scale,offsetX:m,offsetY:y}}return{canvas:ht.canvas,scaleX:J.scale,scaleY:it.scale,offsetX:m,offsetY:y}}getSizeAndScale(t,n,s){const r=Math.max(xh.MAX_PATTERN_SIZE,n);let o=Math.ceil(t*s);return o>=r?o=r:s=o/t,{scale:s,size:o}}clipBbox(t,n,s,r,o){const c=r-n,u=o-s;t.ctx.rect(n,s,c,u),t.current.updateRectMinMax(Gt(t.ctx),[n,s,r,o]),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,n,s){const r=t.ctx,o=t.current;switch(n){case zp.COLORED:const c=this.ctx;r.fillStyle=c.fillStyle,r.strokeStyle=c.strokeStyle,o.fillColor=c.fillStyle,o.strokeColor=c.strokeStyle;break;case zp.UNCOLORED:const u=lt.makeHexColor(s[0],s[1],s[2]);r.fillStyle=u,r.strokeStyle=u,o.fillColor=u,o.strokeColor=u;break;default:throw new Jb(`Unsupported paint type: ${n}`)}}getPattern(t,n,s,r){let o=s;r!==Fe.SHADING&&(o=lt.transform(o,n.baseTransform),this.matrix&&(o=lt.transform(o,this.matrix)));const c=this.createPatternCanvas(n);let u=new DOMMatrix(o);u=u.translate(c.offsetX,c.offsetY),u=u.scale(1/c.scaleX,1/c.scaleY);const d=t.createPattern(c.canvas,"repeat");return d.setTransform(u),d}}function M0({src:f,srcPos:t=0,dest:n,width:s,height:r,nonBlackColor:o=4294967295,inverseDecode:c=!1}){const u=je.isLittleEndian?4278190080:255,[d,g]=c?[o,u]:[u,o],m=s>>3,y=s&7,v=f.length;n=new Uint32Array(n.buffer);let _=0;for(let A=0;A<r;A++){for(const w=t+m;t<w;t++){const T=t<v?f[t]:255;n[_++]=T&128?g:d,n[_++]=T&64?g:d,n[_++]=T&32?g:d,n[_++]=T&16?g:d,n[_++]=T&8?g:d,n[_++]=T&4?g:d,n[_++]=T&2?g:d,n[_++]=T&1?g:d}if(y===0)continue;const E=t<v?f[t++]:255;for(let w=0;w<y;w++)n[_++]=E&1<<7-w?g:d}return{srcPos:t,destPos:_}}const Up=16,Bp=100,D0=15,Ip=10,qp=1e3,Xe=16;function O0(f,t){if(f._removeMirroring)throw new Error("Context is already forwarding operations.");f.__originalSave=f.save,f.__originalRestore=f.restore,f.__originalRotate=f.rotate,f.__originalScale=f.scale,f.__originalTranslate=f.translate,f.__originalTransform=f.transform,f.__originalSetTransform=f.setTransform,f.__originalResetTransform=f.resetTransform,f.__originalClip=f.clip,f.__originalMoveTo=f.moveTo,f.__originalLineTo=f.lineTo,f.__originalBezierCurveTo=f.bezierCurveTo,f.__originalRect=f.rect,f.__originalClosePath=f.closePath,f.__originalBeginPath=f.beginPath,f._removeMirroring=()=>{f.save=f.__originalSave,f.restore=f.__originalRestore,f.rotate=f.__originalRotate,f.scale=f.__originalScale,f.translate=f.__originalTranslate,f.transform=f.__originalTransform,f.setTransform=f.__originalSetTransform,f.resetTransform=f.__originalResetTransform,f.clip=f.__originalClip,f.moveTo=f.__originalMoveTo,f.lineTo=f.__originalLineTo,f.bezierCurveTo=f.__originalBezierCurveTo,f.rect=f.__originalRect,f.closePath=f.__originalClosePath,f.beginPath=f.__originalBeginPath,delete f._removeMirroring},f.save=function(){t.save(),this.__originalSave()},f.restore=function(){t.restore(),this.__originalRestore()},f.translate=function(s,r){t.translate(s,r),this.__originalTranslate(s,r)},f.scale=function(s,r){t.scale(s,r),this.__originalScale(s,r)},f.transform=function(s,r,o,c,u,d){t.transform(s,r,o,c,u,d),this.__originalTransform(s,r,o,c,u,d)},f.setTransform=function(s,r,o,c,u,d){t.setTransform(s,r,o,c,u,d),this.__originalSetTransform(s,r,o,c,u,d)},f.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},f.rotate=function(s){t.rotate(s),this.__originalRotate(s)},f.clip=function(s){t.clip(s),this.__originalClip(s)},f.moveTo=function(n,s){t.moveTo(n,s),this.__originalMoveTo(n,s)},f.lineTo=function(n,s){t.lineTo(n,s),this.__originalLineTo(n,s)},f.bezierCurveTo=function(n,s,r,o,c,u){t.bezierCurveTo(n,s,r,o,c,u),this.__originalBezierCurveTo(n,s,r,o,c,u)},f.rect=function(n,s,r,o){t.rect(n,s,r,o),this.__originalRect(n,s,r,o)},f.closePath=function(){t.closePath(),this.__originalClosePath()},f.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class L0{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,n,s){let r;return this.cache[t]!==void 0?(r=this.cache[t],this.canvasFactory.reset(r,n,s)):(r=this.canvasFactory.create(n,s),this.cache[t]=r),r}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const n=this.cache[t];this.canvasFactory.destroy(n),delete this.cache[t]}}}function so(f,t,n,s,r,o,c,u,d,g){const[m,y,v,_,A,E]=Gt(f);if(y===0&&v===0){const M=c*m+A,C=Math.round(M),O=u*_+E,N=Math.round(O),U=(c+d)*m+A,q=Math.abs(Math.round(U)-C)||1,$=(u+g)*_+E,B=Math.abs(Math.round($)-N)||1;return f.setTransform(Math.sign(m),0,0,Math.sign(_),C,N),f.drawImage(t,n,s,r,o,0,0,q,B),f.setTransform(m,y,v,_,A,E),[q,B]}if(m===0&&_===0){const M=u*v+A,C=Math.round(M),O=c*y+E,N=Math.round(O),U=(u+g)*v+A,q=Math.abs(Math.round(U)-C)||1,$=(c+d)*y+E,B=Math.abs(Math.round($)-N)||1;return f.setTransform(0,Math.sign(y),Math.sign(v),0,C,N),f.drawImage(t,n,s,r,o,0,0,B,q),f.setTransform(m,y,v,_,A,E),[B,q]}f.drawImage(t,n,s,r,o,c,u,d,g);const w=Math.hypot(m,y),T=Math.hypot(v,_);return[w*d,T*g]}function k0(f){const{width:t,height:n}=f;if(t>qp||n>qp)return null;const s=1e3,r=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),o=t+1;let c=new Uint8Array(o*(n+1)),u,d,g;const m=t+7&-8;let y=new Uint8Array(m*n),v=0;for(const T of f.data){let M=128;for(;M>0;)y[v++]=T&M?0:255,M>>=1}let _=0;for(v=0,y[v]!==0&&(c[0]=1,++_),d=1;d<t;d++)y[v]!==y[v+1]&&(c[d]=y[v]?2:1,++_),v++;for(y[v]!==0&&(c[d]=2,++_),u=1;u<n;u++){v=u*m,g=u*o,y[v-m]!==y[v]&&(c[g]=y[v]?1:8,++_);let T=(y[v]?4:0)+(y[v-m]?8:0);for(d=1;d<t;d++)T=(T>>2)+(y[v+1]?4:0)+(y[v-m+1]?8:0),r[T]&&(c[g+d]=r[T],++_),v++;if(y[v-m]!==y[v]&&(c[g+d]=y[v]?2:4,++_),_>s)return null}for(v=m*(n-1),g=u*o,y[v]!==0&&(c[g]=8,++_),d=1;d<t;d++)y[v]!==y[v+1]&&(c[g+d]=y[v]?4:8,++_),v++;if(y[v]!==0&&(c[g+d]=4,++_),_>s)return null;const A=new Int32Array([0,o,-1,0,-o,0,0,0,1]),E=new Path2D;for(u=0;_&&u<=n;u++){let T=u*o;const M=T+t;for(;T<M&&!c[T];)T++;if(T===M)continue;E.moveTo(T%o,u);const C=T;let O=c[T];do{const N=A[O];do T+=N;while(!c[T]);const U=c[T];U!==5&&U!==10?(O=U,c[T]=0):(O=U&51*O>>4,c[T]&=O>>2|O<<2),E.lineTo(T%o,T/o|0),c[T]||--_}while(C!==T);--u}return y=null,c=null,function(T){T.save(),T.scale(1/t,-1/n),T.translate(0,-n),T.fill(E),T.beginPath(),T.restore()}}class Gp{constructor(t,n){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=Pm,this.textMatrixScale=1,this.fontMatrix=ah,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=Re.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,t,n])}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t}setCurrentPoint(t,n){this.x=t,this.y=n}updatePathMinMax(t,n,s){[n,s]=lt.applyTransform([n,s],t),this.minX=Math.min(this.minX,n),this.minY=Math.min(this.minY,s),this.maxX=Math.max(this.maxX,n),this.maxY=Math.max(this.maxY,s)}updateRectMinMax(t,n){const s=lt.applyTransform(n,t),r=lt.applyTransform(n.slice(2),t),o=lt.applyTransform([n[0],n[3]],t),c=lt.applyTransform([n[2],n[1]],t);this.minX=Math.min(this.minX,s[0],r[0],o[0],c[0]),this.minY=Math.min(this.minY,s[1],r[1],o[1],c[1]),this.maxX=Math.max(this.maxX,s[0],r[0],o[0],c[0]),this.maxY=Math.max(this.maxY,s[1],r[1],o[1],c[1])}updateScalingPathMinMax(t,n){lt.scaleMinMax(t,n),this.minX=Math.min(this.minX,n[0]),this.minY=Math.min(this.minY,n[1]),this.maxX=Math.max(this.maxX,n[2]),this.maxY=Math.max(this.maxY,n[3])}updateCurvePathMinMax(t,n,s,r,o,c,u,d,g,m){const y=lt.bezierBoundingBox(n,s,r,o,c,u,d,g,m);m||this.updateRectMinMax(t,y)}getPathBoundingBox(t=Fe.FILL,n=null){const s=[this.minX,this.minY,this.maxX,this.maxY];if(t===Fe.STROKE){n||zt("Stroke bounding box must include transform.");const r=lt.singularValueDecompose2dScale(n),o=r[0]*this.lineWidth/2,c=r[1]*this.lineWidth/2;s[0]-=o,s[1]-=c,s[2]+=o,s[3]+=c}return s}updateClipFromPath(){const t=lt.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(t){this.clipBox=t,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(t=Fe.FILL,n=null){return lt.intersect(this.clipBox,this.getPathBoundingBox(t,n))}}function Vp(f,t){if(typeof ImageData<"u"&&t instanceof ImageData){f.putImageData(t,0,0);return}const n=t.height,s=t.width,r=n%Xe,o=(n-r)/Xe,c=r===0?o:o+1,u=f.createImageData(s,Xe);let d=0,g;const m=t.data,y=u.data;let v,_,A,E;if(t.kind===So.GRAYSCALE_1BPP){const w=m.byteLength,T=new Uint32Array(y.buffer,0,y.byteLength>>2),M=T.length,C=s+7>>3,O=4294967295,N=je.isLittleEndian?4278190080:255;for(v=0;v<c;v++){for(A=v<o?Xe:r,g=0,_=0;_<A;_++){const U=w-d;let q=0;const $=U>C?s:U*8-7,B=$&-8;let Z=0,W=0;for(;q<B;q+=8)W=m[d++],T[g++]=W&128?O:N,T[g++]=W&64?O:N,T[g++]=W&32?O:N,T[g++]=W&16?O:N,T[g++]=W&8?O:N,T[g++]=W&4?O:N,T[g++]=W&2?O:N,T[g++]=W&1?O:N;for(;q<$;q++)Z===0&&(W=m[d++],Z=128),T[g++]=W&Z?O:N,Z>>=1}for(;g<M;)T[g++]=0;f.putImageData(u,0,v*Xe)}}else if(t.kind===So.RGBA_32BPP){for(_=0,E=s*Xe*4,v=0;v<o;v++)y.set(m.subarray(d,d+E)),d+=E,f.putImageData(u,0,_),_+=Xe;v<c&&(E=s*r*4,y.set(m.subarray(d,d+E)),f.putImageData(u,0,_))}else if(t.kind===So.RGB_24BPP)for(A=Xe,E=s*A,v=0;v<c;v++){for(v>=o&&(A=r,E=s*A),g=0,_=E;_--;)y[g++]=m[d++],y[g++]=m[d++],y[g++]=m[d++],y[g++]=255;f.putImageData(u,0,v*Xe)}else throw new Error(`bad image kind: ${t.kind}`)}function Xp(f,t){if(t.bitmap){f.drawImage(t.bitmap,0,0);return}const n=t.height,s=t.width,r=n%Xe,o=(n-r)/Xe,c=r===0?o:o+1,u=f.createImageData(s,Xe);let d=0;const g=t.data,m=u.data;for(let y=0;y<c;y++){const v=y<o?Xe:r;({srcPos:d}=M0({src:g,srcPos:d,dest:m,width:s,height:v,nonBlackColor:0})),f.putImageData(u,0,y*Xe)}}function Rr(f,t){const n=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of n)f[s]!==void 0&&(t[s]=f[s]);f.setLineDash!==void 0&&(t.setLineDash(f.getLineDash()),t.lineDashOffset=f.lineDashOffset)}function ao(f){if(f.strokeStyle=f.fillStyle="#000000",f.fillRule="nonzero",f.globalAlpha=1,f.lineWidth=1,f.lineCap="butt",f.lineJoin="miter",f.miterLimit=10,f.globalCompositeOperation="source-over",f.font="10px sans-serif",f.setLineDash!==void 0&&(f.setLineDash([]),f.lineDashOffset=0),!De){const{filter:t}=f;t!=="none"&&t!==""&&(f.filter="none")}}function Yp(f,t){if(t)return!0;const n=lt.singularValueDecompose2dScale(f);n[0]=Math.fround(n[0]),n[1]=Math.fround(n[1]);const s=Math.fround((globalThis.devicePixelRatio||1)*wa.PDF_TO_CSS_UNITS);return n[0]<=s&&n[1]<=s}const N0=["butt","round","square"],P0=["miter","round","bevel"],F0={},Kp={};class _a{constructor(t,n,s,r,o,{optionalContentConfig:c,markedContentStack:u=null},d,g){this.ctx=t,this.current=new Gp(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=n,this.objs=s,this.canvasFactory=r,this.filterFactory=o,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=u||[],this.optionalContentConfig=c,this.cachedCanvases=new L0(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=d,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=g,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,n=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):n}beginDrawing({transform:t,viewport:n,transparency:s=!1,background:r=null}){const o=this.ctx.canvas.width,c=this.ctx.canvas.height,u=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,o,c),this.ctx.fillStyle=u,s){const d=this.cachedCanvases.getCanvas("transparent",o,c);this.compositeCtx=this.ctx,this.transparentCanvas=d.canvas,this.ctx=d.context,this.ctx.save(),this.ctx.transform(...Gt(this.compositeCtx))}this.ctx.save(),ao(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...n.transform),this.viewportScale=n.scale,this.baseTransform=Gt(this.ctx)}executeOperatorList(t,n,s,r){const o=t.argsArray,c=t.fnArray;let u=n||0;const d=o.length;if(d===u)return u;const g=d-u>Ip&&typeof s=="function",m=g?Date.now()+D0:0;let y=0;const v=this.commonObjs,_=this.objs;let A;for(;;){if(r!==void 0&&u===r.nextBreakPoint)return r.breakIt(u,s),u;if(A=c[u],A!==Li.dependency)this[A].apply(this,o[u]);else for(const E of o[u]){const w=E.startsWith("g_")?v:_;if(!w.has(E))return w.get(E,s),u}if(u++,u===d)return u;if(g&&++y>Ip){if(Date.now()>m)return s(),u;y=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const n of t.values())typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&(n.width=n.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const n=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=n}}}_scaleImage(t,n){const s=t.width??t.displayWidth,r=t.height??t.displayHeight;let o=Math.max(Math.hypot(n[0],n[1]),1),c=Math.max(Math.hypot(n[2],n[3]),1),u=s,d=r,g="prescale1",m,y;for(;o>2&&u>1||c>2&&d>1;){let v=u,_=d;o>2&&u>1&&(v=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u/2),o/=u/v),c>2&&d>1&&(_=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d)/2,c/=d/_),m=this.cachedCanvases.getCanvas(g,v,_),y=m.context,y.clearRect(0,0,v,_),y.drawImage(t,0,0,u,d,0,0,v,_),t=m.canvas,u=v,d=_,g=g==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:u,paintHeight:d}}_createMaskCanvas(t){const n=this.ctx,{width:s,height:r}=t,o=this.current.fillColor,c=this.current.patternFill,u=Gt(n);let d,g,m,y;if((t.bitmap||t.data)&&t.count>1){const $=t.bitmap||t.data.buffer;g=JSON.stringify(c?u:[u.slice(0,4),o]),d=this._cachedBitmapsMap.get($),d||(d=new Map,this._cachedBitmapsMap.set($,d));const B=d.get(g);if(B&&!c){const Z=Math.round(Math.min(u[0],u[2])+u[4]),W=Math.round(Math.min(u[1],u[3])+u[5]);return{canvas:B,offsetX:Z,offsetY:W}}m=B}m||(y=this.cachedCanvases.getCanvas("maskCanvas",s,r),Xp(y.context,t));let v=lt.transform(u,[1/s,0,0,-1/r,0,0]);v=lt.transform(v,[1,0,0,1,0,-r]);const[_,A,E,w]=lt.getAxialAlignedBoundingBox([0,0,s,r],v),T=Math.round(E-_)||1,M=Math.round(w-A)||1,C=this.cachedCanvases.getCanvas("fillCanvas",T,M),O=C.context,N=_,U=A;O.translate(-N,-U),O.transform(...v),m||(m=this._scaleImage(y.canvas,fn(O)),m=m.img,d&&c&&d.set(g,m)),O.imageSmoothingEnabled=Yp(Gt(O),t.interpolate),so(O,m,0,0,m.width,m.height,0,0,s,r),O.globalCompositeOperation="source-in";const q=lt.transform(fn(O),[1,0,0,1,-N,-U]);return O.fillStyle=c?o.getPattern(n,this,q,Fe.FILL):o,O.fillRect(0,0,s,r),d&&!c&&(this.cachedCanvases.delete("fillCanvas"),d.set(g,C.canvas)),{canvas:C.canvas,offsetX:Math.round(N),offsetY:Math.round(U)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=N0[t]}setLineJoin(t){this.ctx.lineJoin=P0[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,n){const s=this.ctx;s.setLineDash!==void 0&&(s.setLineDash(t),s.lineDashOffset=n)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[n,s]of t)switch(n){case"LW":this.setLineWidth(s);break;case"LC":this.setLineCap(s);break;case"LJ":this.setLineJoin(s);break;case"ML":this.setMiterLimit(s);break;case"D":this.setDash(s[0],s[1]);break;case"RI":this.setRenderingIntent(s);break;case"FL":this.setFlatness(s);break;case"Font":this.setFont(s[0],s[1]);break;case"CA":this.current.strokeAlpha=s;break;case"ca":this.current.fillAlpha=s,this.ctx.globalAlpha=s;break;case"BM":this.ctx.globalCompositeOperation=s;break;case"SMask":this.current.activeSMask=s?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(s);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,n=this.ctx.canvas.height,s="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(s,t,n);this.suspendedCtx=this.ctx,this.ctx=r.context;const o=this.ctx;o.setTransform(...Gt(this.suspendedCtx)),Rr(this.suspendedCtx,o),O0(o,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Rr(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const n=this.current.activeSMask,s=this.suspendedCtx;this.composeSMask(s,n,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,n,s,r){const o=r[0],c=r[1],u=r[2]-o,d=r[3]-c;u===0||d===0||(this.genericComposeSMask(n.context,s,u,d,n.subtype,n.backdrop,n.transferMap,o,c,n.offsetX,n.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(s.canvas,0,0),t.restore())}genericComposeSMask(t,n,s,r,o,c,u,d,g,m,y){let v=t.canvas,_=d-m,A=g-y;if(c){const w=lt.makeHexColor(...c);if(_<0||A<0||_+s>v.width||A+r>v.height){const T=this.cachedCanvases.getCanvas("maskExtension",s,r),M=T.context;M.drawImage(v,-_,-A),M.globalCompositeOperation="destination-atop",M.fillStyle=w,M.fillRect(0,0,s,r),M.globalCompositeOperation="source-over",v=T.canvas,_=A=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const T=new Path2D;T.rect(_,A,s,r),t.clip(T),t.globalCompositeOperation="destination-atop",t.fillStyle=w,t.fillRect(_,A,s,r),t.restore()}}n.save(),n.globalAlpha=1,n.setTransform(1,0,0,1,0,0),o==="Alpha"&&u?n.filter=this.filterFactory.addAlphaFilter(u):o==="Luminosity"&&(n.filter=this.filterFactory.addLuminosityFilter(u));const E=new Path2D;E.rect(d,g,s,r),n.clip(E),n.globalCompositeOperation="destination-in",n.drawImage(v,_,A,s,r,d,g,s,r),n.restore()}save(){this.inSMaskMode?(Rr(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),Rr(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(t,n,s,r,o,c){this.ctx.transform(t,n,s,r,o,c),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,n,s){const r=this.ctx,o=this.current;let c=o.x,u=o.y,d,g;const m=Gt(r),y=m[0]===0&&m[3]===0||m[1]===0&&m[2]===0,v=y?s.slice(0):null;for(let _=0,A=0,E=t.length;_<E;_++)switch(t[_]|0){case Li.rectangle:c=n[A++],u=n[A++];const w=n[A++],T=n[A++],M=c+w,C=u+T;r.moveTo(c,u),w===0||T===0?r.lineTo(M,C):(r.lineTo(M,u),r.lineTo(M,C),r.lineTo(c,C)),y||o.updateRectMinMax(m,[c,u,M,C]),r.closePath();break;case Li.moveTo:c=n[A++],u=n[A++],r.moveTo(c,u),y||o.updatePathMinMax(m,c,u);break;case Li.lineTo:c=n[A++],u=n[A++],r.lineTo(c,u),y||o.updatePathMinMax(m,c,u);break;case Li.curveTo:d=c,g=u,c=n[A+4],u=n[A+5],r.bezierCurveTo(n[A],n[A+1],n[A+2],n[A+3],c,u),o.updateCurvePathMinMax(m,d,g,n[A],n[A+1],n[A+2],n[A+3],c,u,v),A+=6;break;case Li.curveTo2:d=c,g=u,r.bezierCurveTo(c,u,n[A],n[A+1],n[A+2],n[A+3]),o.updateCurvePathMinMax(m,d,g,c,u,n[A],n[A+1],n[A+2],n[A+3],v),c=n[A+2],u=n[A+3],A+=4;break;case Li.curveTo3:d=c,g=u,c=n[A+2],u=n[A+3],r.bezierCurveTo(n[A],n[A+1],c,u,c,u),o.updateCurvePathMinMax(m,d,g,n[A],n[A+1],c,u,c,u,v),A+=4;break;case Li.closePath:r.closePath();break}y&&o.updateScalingPathMinMax(m,v),o.setCurrentPoint(c,u)}closePath(){this.ctx.closePath()}stroke(t=!0){const n=this.ctx,s=this.current.strokeColor;n.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof s=="object"&&s?.getPattern?(n.save(),n.strokeStyle=s.getPattern(n,this,fn(n),Fe.STROKE),this.rescaleAndStroke(!1),n.restore()):this.rescaleAndStroke(!0)),t&&this.consumePath(this.current.getClippedPathBoundingBox()),n.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(t=!0){const n=this.ctx,s=this.current.fillColor,r=this.current.patternFill;let o=!1;r&&(n.save(),n.fillStyle=s.getPattern(n,this,fn(n),Fe.FILL),o=!0);const c=this.current.getClippedPathBoundingBox();this.contentVisible&&c!==null&&(this.pendingEOFill?(n.fill("evenodd"),this.pendingEOFill=!1):n.fill()),o&&n.restore(),t&&this.consumePath(c)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=F0}eoClip(){this.pendingClip=Kp}beginText(){this.current.textMatrix=Pm,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,n=this.ctx;if(t===void 0){n.beginPath();return}n.save(),n.beginPath();for(const s of t)n.setTransform(...s.transform),n.translate(s.x,s.y),s.addToPath(n,s.fontSize);n.restore(),n.clip(),n.beginPath(),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,n){const s=this.commonObjs.get(t),r=this.current;if(!s)throw new Error(`Can't find font for ${t}`);if(r.fontMatrix=s.fontMatrix||ah,(r.fontMatrix[0]===0||r.fontMatrix[3]===0)&&St("Invalid font matrix for font "+t),n<0?(n=-n,r.fontDirection=-1):r.fontDirection=1,this.current.font=s,this.current.fontSize=n,s.isType3Font)return;const o=s.loadedName||"sans-serif",c=s.systemFontInfo?.css||`"${o}", ${s.fallbackName}`;let u="normal";s.black?u="900":s.bold&&(u="bold");const d=s.italic?"italic":"normal";let g=n;n<Up?g=Up:n>Bp&&(g=Bp),this.current.fontSizeScale=n/g,this.ctx.font=`${d} ${u} ${g}px ${c}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,n){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=n}setLeadingMoveText(t,n){this.setLeading(-n),this.moveText(t,n)}setTextMatrix(t,n,s,r,o,c){this.current.textMatrix=[t,n,s,r,o,c],this.current.textMatrixScale=Math.hypot(t,n),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,n,s,r){const o=this.ctx,c=this.current,u=c.font,d=c.textRenderingMode,g=c.fontSize/c.fontSizeScale,m=d&Re.FILL_STROKE_MASK,y=!!(d&Re.ADD_TO_PATH_FLAG),v=c.patternFill&&!u.missingFile;let _;(u.disableFontFace||y||v)&&(_=u.getPathGenerator(this.commonObjs,t)),u.disableFontFace||v?(o.save(),o.translate(n,s),o.beginPath(),_(o,g),r&&o.setTransform(...r),(m===Re.FILL||m===Re.FILL_STROKE)&&o.fill(),(m===Re.STROKE||m===Re.FILL_STROKE)&&o.stroke(),o.restore()):((m===Re.FILL||m===Re.FILL_STROKE)&&o.fillText(t,n,s),(m===Re.STROKE||m===Re.FILL_STROKE)&&o.strokeText(t,n,s)),y&&(this.pendingTextPaths||=[]).push({transform:Gt(o),x:n,y:s,fontSize:g,addToPath:_})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const n=t.getImageData(0,0,10,10).data;let s=!1;for(let r=3;r<n.length;r+=4)if(n[r]>0&&n[r]<255){s=!0;break}return xt(this,"isFontSubpixelAAEnabled",s)}showText(t){const n=this.current,s=n.font;if(s.isType3Font)return this.showType3Text(t);const r=n.fontSize;if(r===0)return;const o=this.ctx,c=n.fontSizeScale,u=n.charSpacing,d=n.wordSpacing,g=n.fontDirection,m=n.textHScale*g,y=t.length,v=s.vertical,_=v?1:-1,A=s.defaultVMetrics,E=r*n.fontMatrix[0],w=n.textRenderingMode===Re.FILL&&!s.disableFontFace&&!n.patternFill;o.save(),o.transform(...n.textMatrix),o.translate(n.x,n.y+n.textRise),g>0?o.scale(m,-1):o.scale(m,1);let T;if(n.patternFill){o.save();const U=n.fillColor.getPattern(o,this,fn(o),Fe.FILL);T=Gt(o),o.restore(),o.fillStyle=U}let M=n.lineWidth;const C=n.textMatrixScale;if(C===0||M===0){const U=n.textRenderingMode&Re.FILL_STROKE_MASK;(U===Re.STROKE||U===Re.FILL_STROKE)&&(M=this.getSinglePixelWidth())}else M/=C;if(c!==1&&(o.scale(c,c),M/=c),o.lineWidth=M,s.isInvalidPDFjsFont){const U=[];let q=0;for(const $ of t)U.push($.unicode),q+=$.width;o.fillText(U.join(""),0,0),n.x+=q*E*m,o.restore(),this.compose();return}let O=0,N;for(N=0;N<y;++N){const U=t[N];if(typeof U=="number"){O+=_*U*r/1e3;continue}let q=!1;const $=(U.isSpace?d:0)+u,B=U.fontChar,Z=U.accent;let W,J,it=U.width;if(v){const st=U.vmetric||A,k=-(U.vmetric?st[1]:it*.5)*E,P=st[2]*E;it=st?-st[0]:it,W=k/c,J=(O+P)/c}else W=O/c,J=0;if(s.remeasure&&it>0){const st=o.measureText(B).width*1e3/r*c;if(it<st&&this.isFontSubpixelAAEnabled){const k=it/st;q=!0,o.save(),o.scale(k,1),W/=k}else it!==st&&(W+=(it-st)/2e3*r/c)}if(this.contentVisible&&(U.isInFont||s.missingFile)){if(w&&!Z)o.fillText(B,W,J);else if(this.paintChar(B,W,J,T),Z){const st=W+r*Z.offset.x/c,k=J-r*Z.offset.y/c;this.paintChar(Z.fontChar,st,k,T)}}const ht=v?it*E-$*g:it*E+$*g;O+=ht,q&&o.restore()}v?n.y-=O:n.x+=O*m,o.restore(),this.compose()}showType3Text(t){const n=this.ctx,s=this.current,r=s.font,o=s.fontSize,c=s.fontDirection,u=r.vertical?1:-1,d=s.charSpacing,g=s.wordSpacing,m=s.textHScale*c,y=s.fontMatrix||ah,v=t.length,_=s.textRenderingMode===Re.INVISIBLE;let A,E,w,T;if(!(_||o===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,n.save(),n.transform(...s.textMatrix),n.translate(s.x,s.y),n.scale(m,c),A=0;A<v;++A){if(E=t[A],typeof E=="number"){T=u*E*o/1e3,this.ctx.translate(T,0),s.x+=T*m;continue}const M=(E.isSpace?g:0)+d,C=r.charProcOperatorList[E.operatorListId];if(!C){St(`Type3 character "${E.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=E,this.save(),n.scale(o,o),n.transform(...y),this.executeOperatorList(C),this.restore()),w=lt.applyTransform([E.width,0],y)[0]*o+M,n.translate(w,0),s.x+=w*m}n.restore(),this.processingType3=null}}setCharWidth(t,n){}setCharWidthAndBounds(t,n,s,r,o,c){this.ctx.rect(s,r,o-s,c-r),this.ctx.clip(),this.endPath()}getColorN_Pattern(t){let n;if(t[0]==="TilingPattern"){const s=t[1],r=this.baseTransform||Gt(this.ctx),o={createCanvasGraphics:c=>new _a(c,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};n=new xh(t,s,this.ctx,o,r)}else n=this._getPattern(t[1],t[2]);return n}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t,n,s){this.ctx.strokeStyle=this.current.strokeColor=lt.makeHexColor(t,n,s)}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent"}setFillRGBColor(t,n,s){this.ctx.fillStyle=this.current.fillColor=lt.makeHexColor(t,n,s),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,n=null){let s;return this.cachedPatterns.has(t)?s=this.cachedPatterns.get(t):(s=R0(this.getObject(t)),this.cachedPatterns.set(t,s)),n&&(s.matrix=n),s}shadingFill(t){if(!this.contentVisible)return;const n=this.ctx;this.save();const s=this._getPattern(t);n.fillStyle=s.getPattern(n,this,fn(n),Fe.SHADING);const r=fn(n);if(r){const{width:o,height:c}=n.canvas,[u,d,g,m]=lt.getAxialAlignedBoundingBox([0,0,o,c],r);this.ctx.fillRect(u,d,g-u,m-d)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){zt("Should not call beginInlineImage")}beginImageData(){zt("Should not call beginImageData")}paintFormXObjectBegin(t,n){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=Gt(this.ctx),n)){const s=n[2]-n[0],r=n[3]-n[1];this.ctx.rect(n[0],n[1],s,r),this.current.updateRectMinMax(Gt(this.ctx),n),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const n=this.ctx;t.isolated||Mo("TODO: Support non-isolated groups."),t.knockout&&St("Knockout groups not supported.");const s=Gt(n);if(t.matrix&&n.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let r=lt.getAxialAlignedBoundingBox(t.bbox,Gt(n));const o=[0,0,n.canvas.width,n.canvas.height];r=lt.intersect(r,o)||[0,0,0,0];const c=Math.floor(r[0]),u=Math.floor(r[1]),d=Math.max(Math.ceil(r[2])-c,1),g=Math.max(Math.ceil(r[3])-u,1);this.current.startNewPathAndClipBox([0,0,d,g]);let m="groupAt"+this.groupLevel;t.smask&&(m+="_smask_"+this.smaskCounter++%2);const y=this.cachedCanvases.getCanvas(m,d,g),v=y.context;v.translate(-c,-u),v.transform(...s),t.smask?this.smaskStack.push({canvas:y.canvas,context:v,offsetX:c,offsetY:u,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(n.setTransform(1,0,0,1,0,0),n.translate(c,u),n.save()),Rr(n,v),this.ctx=v,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(n),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const n=this.ctx,s=this.groupStack.pop();if(this.ctx=s,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const r=Gt(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...r);const o=lt.getAxialAlignedBoundingBox([0,0,n.canvas.width,n.canvas.height],r);this.ctx.drawImage(n.canvas,0,0),this.ctx.restore(),this.compose(o)}}beginAnnotation(t,n,s,r,o){if(this.#t(),ao(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),n){const c=n[2]-n[0],u=n[3]-n[1];if(o&&this.annotationCanvasMap){s=s.slice(),s[4]-=n[0],s[5]-=n[1],n=n.slice(),n[0]=n[1]=0,n[2]=c,n[3]=u;const[d,g]=lt.singularValueDecompose2dScale(Gt(this.ctx)),{viewportScale:m}=this,y=Math.ceil(c*this.outputScaleX*m),v=Math.ceil(u*this.outputScaleY*m);this.annotationCanvas=this.canvasFactory.create(y,v);const{canvas:_,context:A}=this.annotationCanvas;this.annotationCanvasMap.set(t,_),this.annotationCanvas.savedCtx=this.ctx,this.ctx=A,this.ctx.save(),this.ctx.setTransform(d,0,0,-g,0,u*g),ao(this.ctx)}else ao(this.ctx),this.endPath(),this.ctx.rect(n[0],n[1],c,u),this.ctx.clip(),this.ctx.beginPath()}this.current=new Gp(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...s),this.transform(...r)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const n=t.count;t=this.getObject(t.data,t),t.count=n;const s=this.ctx,r=this.processingType3;if(r&&(r.compiled===void 0&&(r.compiled=k0(t)),r.compiled)){r.compiled(s);return}const o=this._createMaskCanvas(t),c=o.canvas;s.save(),s.setTransform(1,0,0,1,0,0),s.drawImage(c,o.offsetX,o.offsetY),s.restore(),this.compose()}paintImageMaskXObjectRepeat(t,n,s=0,r=0,o,c){if(!this.contentVisible)return;t=this.getObject(t.data,t);const u=this.ctx;u.save();const d=Gt(u);u.transform(n,s,r,o,0,0);const g=this._createMaskCanvas(t);u.setTransform(1,0,0,1,g.offsetX-d[4],g.offsetY-d[5]);for(let m=0,y=c.length;m<y;m+=2){const v=lt.transform(d,[n,s,r,o,c[m],c[m+1]]),[_,A]=lt.applyTransform([0,0],v);u.drawImage(g.canvas,_,A)}u.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const n=this.ctx,s=this.current.fillColor,r=this.current.patternFill;for(const o of t){const{data:c,width:u,height:d,transform:g}=o,m=this.cachedCanvases.getCanvas("maskCanvas",u,d),y=m.context;y.save();const v=this.getObject(c,o);Xp(y,v),y.globalCompositeOperation="source-in",y.fillStyle=r?s.getPattern(y,this,fn(n),Fe.FILL):s,y.fillRect(0,0,u,d),y.restore(),n.save(),n.transform(...g),n.scale(1,-1),so(n,m.canvas,0,0,u,d,0,-1,1,1),n.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const n=this.getObject(t);if(!n){St("Dependent image isn't ready yet");return}this.paintInlineImageXObject(n)}paintImageXObjectRepeat(t,n,s,r){if(!this.contentVisible)return;const o=this.getObject(t);if(!o){St("Dependent image isn't ready yet");return}const c=o.width,u=o.height,d=[];for(let g=0,m=r.length;g<m;g+=2)d.push({transform:[n,0,0,s,r[g],r[g+1]],x:0,y:0,w:c,h:u});this.paintInlineImageXObjectGroup(o,d)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:n,width:s,height:r}=t,o=this.cachedCanvases.getCanvas("inlineImage",s,r),c=o.context;return c.filter=this.current.transferMaps,c.drawImage(n,0,0),c.filter="none",o.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const n=t.width,s=t.height,r=this.ctx;if(this.save(),!De){const{filter:u}=r;u!=="none"&&u!==""&&(r.filter="none")}r.scale(1/n,-1/s);let o;if(t.bitmap)o=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)o=t;else{const d=this.cachedCanvases.getCanvas("inlineImage",n,s).context;Vp(d,t),o=this.applyTransferMapsToCanvas(d)}const c=this._scaleImage(o,fn(r));r.imageSmoothingEnabled=Yp(Gt(r),t.interpolate),so(r,c.img,0,0,c.paintWidth,c.paintHeight,0,-s,n,s),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,n){if(!this.contentVisible)return;const s=this.ctx;let r;if(t.bitmap)r=t.bitmap;else{const o=t.width,c=t.height,d=this.cachedCanvases.getCanvas("inlineImage",o,c).context;Vp(d,t),r=this.applyTransferMapsToCanvas(d)}for(const o of n)s.save(),s.transform(...o.transform),s.scale(1,-1),so(s,r,o.x,o.y,o.w,o.h,0,-1,1,1),s.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,n){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,n){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(n)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t){const n=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const s=this.ctx;this.pendingClip&&(n||(this.pendingClip===Kp?s.clip("evenodd"):s.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),s.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Gt(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const n=Math.abs(t[0]*t[3]-t[2]*t[1]),s=Math.hypot(t[0],t[2]),r=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(s,r)/n}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:n,b:s,c:r,d:o}=this.ctx.getTransform();let c,u;if(s===0&&r===0){const d=Math.abs(n),g=Math.abs(o);if(d===g)if(t===0)c=u=1/d;else{const m=d*t;c=u=m<1?1/m:1}else if(t===0)c=1/d,u=1/g;else{const m=d*t,y=g*t;c=m<1?1/m:1,u=y<1?1/y:1}}else{const d=Math.abs(n*o-s*r),g=Math.hypot(n,s),m=Math.hypot(r,o);if(t===0)c=m/d,u=g/d;else{const y=t*d;c=m>y?m/y:1,u=g>y?g/y:1}}this._cachedScaleForStroking[0]=c,this._cachedScaleForStroking[1]=u}return this._cachedScaleForStroking}rescaleAndStroke(t){const{ctx:n}=this,{lineWidth:s}=this.current,[r,o]=this.getScaleForStroking();if(n.lineWidth=s||1,r===1&&o===1){n.stroke();return}const c=n.getLineDash();if(t&&n.save(),n.scale(r,o),c.length>0){const u=Math.max(r,o);n.setLineDash(c.map(d=>d/u)),n.lineDashOffset/=u}n.stroke(),t&&n.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}for(const f in Li)_a.prototype[f]!==void 0&&(_a.prototype[Li[f]]=_a.prototype[f]);class Fr{static#t=null;static#e="";static get workerPort(){return this.#t}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");this.#t=t}static get workerSrc(){return this.#e}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");this.#e=t}}const ro={DATA:1,ERROR:2},ee={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function ni(f){switch(f instanceof Error||typeof f=="object"&&f!==null||zt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),f.name){case"AbortException":return new Es(f.message);case"MissingPDFException":return new Ss(f.message);case"PasswordException":return new rh(f.message,f.code);case"UnexpectedResponseException":return new Do(f.message,f.status);case"UnknownErrorException":return new lh(f.message,f.details);default:return new lh(f.message,f.toString())}}class kr{#t=new AbortController;constructor(t,n,s){this.sourceName=t,this.targetName=n,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),s.addEventListener("message",this.#e.bind(this),{signal:this.#t.signal})}#e({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){this.#s(t);return}if(t.callback){const s=t.callbackId,r=this.callbackCapabilities[s];if(!r)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],t.callback===ro.DATA)r.resolve(t.data);else if(t.callback===ro.ERROR)r.reject(ni(t.reason));else throw new Error("Unexpected callback case");return}const n=this.actionHandler[t.action];if(!n)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const s=this.sourceName,r=t.sourceName,o=this.comObj;new Promise(function(c){c(n(t.data))}).then(function(c){o.postMessage({sourceName:s,targetName:r,callback:ro.DATA,callbackId:t.callbackId,data:c})},function(c){o.postMessage({sourceName:s,targetName:r,callback:ro.ERROR,callbackId:t.callbackId,reason:ni(c)})});return}if(t.streamId){this.#i(t);return}n(t.data)}on(t,n){const s=this.actionHandler;if(s[t])throw new Error(`There is already an actionName called "${t}"`);s[t]=n}send(t,n,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:n},s)}sendWithPromise(t,n,s){const r=this.callbackId++,o=Promise.withResolvers();this.callbackCapabilities[r]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:r,data:n},s)}catch(c){o.reject(c)}return o.promise}sendWithStream(t,n,s,r){const o=this.streamId++,c=this.sourceName,u=this.targetName,d=this.comObj;return new ReadableStream({start:g=>{const m=Promise.withResolvers();return this.streamControllers[o]={controller:g,startCall:m,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:c,targetName:u,action:t,streamId:o,data:n,desiredSize:g.desiredSize},r),m.promise},pull:g=>{const m=Promise.withResolvers();return this.streamControllers[o].pullCall=m,d.postMessage({sourceName:c,targetName:u,stream:ee.PULL,streamId:o,desiredSize:g.desiredSize}),m.promise},cancel:g=>{oe(g instanceof Error,"cancel must have a valid reason");const m=Promise.withResolvers();return this.streamControllers[o].cancelCall=m,this.streamControllers[o].isClosed=!0,d.postMessage({sourceName:c,targetName:u,stream:ee.CANCEL,streamId:o,reason:ni(g)}),m.promise}},s)}#i(t){const n=t.streamId,s=this.sourceName,r=t.sourceName,o=this.comObj,c=this,u=this.actionHandler[t.action],d={enqueue(g,m=1,y){if(this.isCancelled)return;const v=this.desiredSize;this.desiredSize-=m,v>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),o.postMessage({sourceName:s,targetName:r,stream:ee.ENQUEUE,streamId:n,chunk:g},y)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:s,targetName:r,stream:ee.CLOSE,streamId:n}),delete c.streamSinks[n])},error(g){oe(g instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,o.postMessage({sourceName:s,targetName:r,stream:ee.ERROR,streamId:n,reason:ni(g)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[n]=d,new Promise(function(g){g(u(t.data,d))}).then(function(){o.postMessage({sourceName:s,targetName:r,stream:ee.START_COMPLETE,streamId:n,success:!0})},function(g){o.postMessage({sourceName:s,targetName:r,stream:ee.START_COMPLETE,streamId:n,reason:ni(g)})})}#s(t){const n=t.streamId,s=this.sourceName,r=t.sourceName,o=this.comObj,c=this.streamControllers[n],u=this.streamSinks[n];switch(t.stream){case ee.START_COMPLETE:t.success?c.startCall.resolve():c.startCall.reject(ni(t.reason));break;case ee.PULL_COMPLETE:t.success?c.pullCall.resolve():c.pullCall.reject(ni(t.reason));break;case ee.PULL:if(!u){o.postMessage({sourceName:s,targetName:r,stream:ee.PULL_COMPLETE,streamId:n,success:!0});break}u.desiredSize<=0&&t.desiredSize>0&&u.sinkCapability.resolve(),u.desiredSize=t.desiredSize,new Promise(function(d){d(u.onPull?.())}).then(function(){o.postMessage({sourceName:s,targetName:r,stream:ee.PULL_COMPLETE,streamId:n,success:!0})},function(d){o.postMessage({sourceName:s,targetName:r,stream:ee.PULL_COMPLETE,streamId:n,reason:ni(d)})});break;case ee.ENQUEUE:if(oe(c,"enqueue should have stream controller"),c.isClosed)break;c.controller.enqueue(t.chunk);break;case ee.CLOSE:if(oe(c,"close should have stream controller"),c.isClosed)break;c.isClosed=!0,c.controller.close(),this.#a(c,n);break;case ee.ERROR:oe(c,"error should have stream controller"),c.controller.error(ni(t.reason)),this.#a(c,n);break;case ee.CANCEL_COMPLETE:t.success?c.cancelCall.resolve():c.cancelCall.reject(ni(t.reason)),this.#a(c,n);break;case ee.CANCEL:if(!u)break;new Promise(function(d){d(u.onCancel?.(ni(t.reason)))}).then(function(){o.postMessage({sourceName:s,targetName:r,stream:ee.CANCEL_COMPLETE,streamId:n,success:!0})},function(d){o.postMessage({sourceName:s,targetName:r,stream:ee.CANCEL_COMPLETE,streamId:n,reason:ni(d)})}),u.sinkCapability.reject(ni(t.reason)),u.isCancelled=!0,delete this.streamSinks[n];break;default:throw new Error("Unexpected stream case")}}async#a(t,n){await Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[n]}destroy(){this.#t?.abort(),this.#t=null}}class j0{#t;#e;constructor({parsedData:t,rawData:n}){this.#t=t,this.#e=n}getRaw(){return this.#e}get(t){return this.#t.get(t)??null}getAll(){return yh(this.#t)}has(t){return this.#t.has(t)}}const va=Symbol("INTERNAL");class H0{#t=!1;#e=!1;#i=!1;#s=!0;constructor(t,{name:n,intent:s,usage:r,rbGroups:o}){this.#t=!!(t&si.DISPLAY),this.#e=!!(t&si.PRINT),this.name=n,this.intent=s,this.usage=r,this.rbGroups=o}get visible(){if(this.#i)return this.#s;if(!this.#s)return!1;const{print:t,view:n}=this.usage;return this.#t?n?.viewState!=="OFF":this.#e?t?.printState!=="OFF":!0}_setVisible(t,n,s=!1){t!==va&&zt("Internal method `_setVisible` called."),this.#i=s,this.#s=n}}class z0{#t=null;#e=new Map;#i=null;#s=null;constructor(t,n=si.DISPLAY){if(this.renderingIntent=n,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,this.#s=t.order;for(const s of t.groups)this.#e.set(s.id,new H0(n,s));if(t.baseState==="OFF")for(const s of this.#e.values())s._setVisible(va,!1);for(const s of t.on)this.#e.get(s)._setVisible(va,!0);for(const s of t.off)this.#e.get(s)._setVisible(va,!1);this.#i=this.getHash()}}#a(t){const n=t.length;if(n<2)return!0;const s=t[0];for(let r=1;r<n;r++){const o=t[r];let c;if(Array.isArray(o))c=this.#a(o);else if(this.#e.has(o))c=this.#e.get(o).visible;else return St(`Optional content group not found: ${o}`),!0;switch(s){case"And":if(!c)return!1;break;case"Or":if(c)return!0;break;case"Not":return!c;default:return!0}}return s==="And"}isVisible(t){if(this.#e.size===0)return!0;if(!t)return Mo("Optional content group not defined."),!0;if(t.type==="OCG")return this.#e.has(t.id)?this.#e.get(t.id).visible:(St(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return this.#a(t.expression);if(!t.policy||t.policy==="AnyOn"){for(const n of t.ids){if(!this.#e.has(n))return St(`Optional content group not found: ${n}`),!0;if(this.#e.get(n).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const n of t.ids){if(!this.#e.has(n))return St(`Optional content group not found: ${n}`),!0;if(!this.#e.get(n).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const n of t.ids){if(!this.#e.has(n))return St(`Optional content group not found: ${n}`),!0;if(!this.#e.get(n).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const n of t.ids){if(!this.#e.has(n))return St(`Optional content group not found: ${n}`),!0;if(this.#e.get(n).visible)return!1}return!0}return St(`Unknown optional content policy ${t.policy}.`),!0}return St(`Unknown group type ${t.type}.`),!0}setVisibility(t,n=!0,s=!0){const r=this.#e.get(t);if(!r){St(`Optional content group not found: ${t}`);return}if(s&&n&&r.rbGroups.length)for(const o of r.rbGroups)for(const c of o)c!==t&&this.#e.get(c)?._setVisible(va,!1,!0);r._setVisible(va,!!n,!0),this.#t=null}setOCGState({state:t,preserveRB:n}){let s;for(const r of t){switch(r){case"ON":case"OFF":case"Toggle":s=r;continue}const o=this.#e.get(r);if(o)switch(s){case"ON":this.setVisibility(r,!0,n);break;case"OFF":this.setVisibility(r,!1,n);break;case"Toggle":this.setVisibility(r,!o.visible,n);break}}this.#t=null}get hasInitialVisibility(){return this.#i===null||this.getHash()===this.#i}getOrder(){return this.#e.size?this.#s?this.#s.slice():[...this.#e.keys()]:null}getGroups(){return this.#e.size>0?yh(this.#e):null}getGroup(t){return this.#e.get(t)||null}getHash(){if(this.#t!==null)return this.#t;const t=new zm;for(const[n,s]of this.#e)t.update(`${n}:${s.visible}`);return this.#t=t.hexdigest()}}class U0{constructor(t,{disableRange:n=!1,disableStream:s=!1}){oe(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:o,progressiveDone:c,contentDispositionFilename:u}=t;if(this._queuedChunks=[],this._progressiveDone=c,this._contentDispositionFilename=u,o?.length>0){const d=o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength?o.buffer:new Uint8Array(o).buffer;this._queuedChunks.push(d)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!s,this._isRangeSupported=!n,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((d,g)=>{this._onReceiveData({begin:d,chunk:g})}),t.addProgressListener((d,g)=>{this._onProgress({loaded:d,total:g})}),t.addProgressiveReadListener(d=>{this._onReceiveData({chunk:d})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:n}){const s=n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength?n.buffer:new Uint8Array(n).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s);else{const r=this._rangeReaders.some(function(o){return o._begin!==t?!1:(o._enqueue(s),!0)});oe(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(t){t.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:t.loaded}):this._fullRequestReader?.onProgress?.({loaded:t.loaded,total:t.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const n=this._rangeReaders.indexOf(t);n>=0&&this._rangeReaders.splice(n,1)}getFullReader(){oe(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new B0(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,n){if(n<=this._progressiveDataLength)return null;const s=new I0(this,t,n);return this._pdfDataRangeTransport.requestDataRange(t,n),this._rangeReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const n of this._rangeReaders.slice(0))n.cancel(t);this._pdfDataRangeTransport.abort()}}class B0{constructor(t,n,s=!1,r=null){this._stream=t,this._done=s||!1,this._filename=_h(r)?r:null,this._queuedChunks=n||[],this._loaded=0;for(const o of this._queuedChunks)this._loaded+=o.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class I0{constructor(t,n,s){this._stream=t,this._begin=n,this._end=s,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const n=this._queuedChunk;return this._queuedChunk=null,{value:n,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function q0(f){let t=!0,n=s("filename\\*","i").exec(f);if(n){n=n[1];let m=u(n);return m=unescape(m),m=d(m),m=g(m),o(m)}if(n=c(f),n){const m=g(n);return o(m)}if(n=s("filename","i").exec(f),n){n=n[1];let m=u(n);return m=g(m),o(m)}function s(m,y){return new RegExp("(?:^|;)\\s*"+m+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',y)}function r(m,y){if(m){if(!/^[\x00-\xFF]+$/.test(y))return y;try{const v=new TextDecoder(m,{fatal:!0}),_=Oo(y);y=v.decode(_),t=!1}catch{}}return y}function o(m){return t&&/[\x80-\xff]/.test(m)&&(m=r("utf-8",m),t&&(m=r("iso-8859-1",m))),m}function c(m){const y=[];let v;const _=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(v=_.exec(m))!==null;){let[,E,w,T]=v;if(E=parseInt(E,10),E in y){if(E===0)break;continue}y[E]=[w,T]}const A=[];for(let E=0;E<y.length&&E in y;++E){let[w,T]=y[E];T=u(T),w&&(T=unescape(T),E===0&&(T=d(T))),A.push(T)}return A.join("")}function u(m){if(m.startsWith('"')){const y=m.slice(1).split('\\"');for(let v=0;v<y.length;++v){const _=y[v].indexOf('"');_!==-1&&(y[v]=y[v].slice(0,_),y.length=v+1),y[v]=y[v].replaceAll(/\\(.)/g,"$1")}m=y.join('"')}return m}function d(m){const y=m.indexOf("'");if(y===-1)return m;const v=m.slice(0,y),A=m.slice(y+1).replace(/^[^']*'/,"");return r(v,A)}function g(m){return!m.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(m)?m:m.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(y,v,_,A){if(_==="q"||_==="Q")return A=A.replaceAll("_"," "),A=A.replaceAll(/=([0-9a-fA-F]{2})/g,function(E,w){return String.fromCharCode(parseInt(w,16))}),r(v,A);try{A=atob(A)}catch{}return r(v,A)})}return""}function Ch(f,t){const n=new Headers;if(!f||!t||typeof t!="object")return n;for(const s in t){const r=t[s];r!==void 0&&n.append(s,r)}return n}function Rh({responseHeaders:f,isHttp:t,rangeChunkSize:n,disableRange:s}){const r={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(f.get("Content-Length"),10);return!Number.isInteger(o)||(r.suggestedLength=o,o<=2*n)||s||!t||f.get("Accept-Ranges")!=="bytes"||(f.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function Mh(f){const t=f.get("Content-Disposition");if(t){let n=q0(t);if(n.includes("%"))try{n=decodeURIComponent(n)}catch{}if(_h(n))return n}return null}function No(f,t){return f===404||f===0&&t.startsWith("file:")?new Ss('Missing PDF "'+t+'".'):new Do(`Unexpected server response (${f}) while retrieving PDF "${t}".`,f)}function Km(f){return f===200||f===206}function Wm(f,t,n){return{method:"GET",headers:f,signal:n.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function $m(f){return f instanceof Uint8Array?f.buffer:f instanceof ArrayBuffer?f:(St(`getArrayBuffer - unexpected data format: ${f}`),new Uint8Array(f).buffer)}class Wp{constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=Ch(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return oe(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new G0(this),this._fullRequestReader}getRangeReader(t,n){if(n<=this._progressiveDataLength)return null;const s=new V0(this,t,n);return this._rangeRequestReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class G0{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const n=t.source;this._withCredentials=n.withCredentials||!1,this._contentLength=n.length,this._headersCapability=Promise.withResolvers(),this._disableRange=n.disableRange||!1,this._rangeChunkSize=n.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!n.disableStream,this._isRangeSupported=!n.disableRange;const s=new Headers(t.headers),r=n.url;fetch(r,Wm(s,this._withCredentials,this._abortController)).then(o=>{if(!Km(o.status))throw No(o.status,r);this._reader=o.body.getReader(),this._headersCapability.resolve();const c=o.headers,{allowRangeRequests:u,suggestedLength:d}=Rh({responseHeaders:c,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=u,this._contentLength=d||this._contentLength,this._filename=Mh(c),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Es("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:t,done:n}=await this._reader.read();return n?{value:t,done:n}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:$m(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}class V0{constructor(t,n,s){this._stream=t,this._reader=null,this._loaded=0;const r=t.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;const o=new Headers(t.headers);o.append("Range",`bytes=${n}-${s-1}`);const c=r.url;fetch(c,Wm(o,this._withCredentials,this._abortController)).then(u=>{if(!Km(u.status))throw No(u.status,c);this._readCapability.resolve(),this._reader=u.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:t,done:n}=await this._reader.read();return n?{value:t,done:n}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded}),{value:$m(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}const th=200,eh=206;function X0(f){const t=f.response;return typeof t!="string"?t:Oo(t).buffer}class Y0{constructor({url:t,httpHeaders:n,withCredentials:s}){this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=Ch(this.isHttp,n),this.withCredentials=s||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(t,n,s){const r={begin:t,end:n};for(const o in s)r[o]=s[o];return this.request(r)}requestFull(t){return this.request(t)}request(t){const n=new XMLHttpRequest,s=this.currXhrId++,r=this.pendingRequests[s]={xhr:n};n.open("GET",this.url),n.withCredentials=this.withCredentials;for(const[o,c]of this.headers)n.setRequestHeader(o,c);return this.isHttp&&"begin"in t&&"end"in t?(n.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),r.expectedStatus=eh):r.expectedStatus=th,n.responseType="arraybuffer",t.onError&&(n.onerror=function(o){t.onError(n.status)}),n.onreadystatechange=this.onStateChange.bind(this,s),n.onprogress=this.onProgress.bind(this,s),r.onHeadersReceived=t.onHeadersReceived,r.onDone=t.onDone,r.onError=t.onError,r.onProgress=t.onProgress,n.send(null),s}onProgress(t,n){const s=this.pendingRequests[t];s&&s.onProgress?.(n)}onStateChange(t,n){const s=this.pendingRequests[t];if(!s)return;const r=s.xhr;if(r.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),r.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],r.status===0&&this.isHttp){s.onError?.(r.status);return}const o=r.status||th;if(!(o===th&&s.expectedStatus===eh)&&o!==s.expectedStatus){s.onError?.(r.status);return}const u=X0(r);if(o===eh){const d=r.getResponseHeader("Content-Range"),g=/bytes (\d+)-(\d+)\/(\d+)/.exec(d);s.onDone({begin:parseInt(g[1],10),chunk:u})}else u?s.onDone({begin:0,chunk:u}):s.onError?.(r.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const n=this.pendingRequests[t].xhr;delete this.pendingRequests[t],n.abort()}}class K0{constructor(t){this._source=t,this._manager=new Y0(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const n=this._rangeRequestReaders.indexOf(t);n>=0&&this._rangeRequestReaders.splice(n,1)}getFullReader(){return oe(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new W0(this._manager,this._source),this._fullRequestReader}getRangeReader(t,n){const s=new $0(this._manager,t,n);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class W0{constructor(t,n){this._manager=t;const s={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=n.url,this._fullRequestId=t.requestFull(s),this._headersCapability=Promise.withResolvers(),this._disableRange=n.disableRange||!1,this._contentLength=n.length,this._rangeChunkSize=n.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,n=this._manager.getRequestXhr(t),s=new Headers(n.getAllResponseHeaders().trim().split(/[\r\n]+/).map(c=>{const[u,...d]=c.split(": ");return[u,d.join(": ")]})),{allowRangeRequests:r,suggestedLength:o}=Rh({responseHeaders:s,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=Mh(s),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=No(t,this._url),this._headersCapability.reject(this._storedError);for(const n of this._requests)n.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class $0{constructor(t,n,s){this._manager=t;const r={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._requestId=t.requestRange(n,s,r),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(t){const n=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:n,done:!1}):this._queuedChunk=n,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError=No(t,this._url);for(const n of this._requests)n.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){this.isStreamingSupported||this.onProgress?.({loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const n=this._queuedChunk;return this._queuedChunk=null,{value:n,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const Q0=/^[a-z][a-z0-9\-+.]+:/i;function Z0(f){if(Q0.test(f))return new URL(f);const t=Yn.get("url");return new URL(t.pathToFileURL(f))}function Qm(f,t,n){return f.protocol==="http:"?Yn.get("http").request(f,{headers:t},n):Yn.get("https").request(f,{headers:t},n)}class J0{constructor(t){this.source=t,this.url=Z0(t.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.headers=Ch(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return oe(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new i_(this):new t_(this),this._fullRequestReader}getRangeReader(t,n){if(n<=this._progressiveDataLength)return null;const s=this.isFsUrl?new n_(this,t,n):new e_(this,t,n);return this._rangeRequestReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class Zm{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const n=t.source;this._contentLength=n.length,this._loaded=0,this._filename=null,this._disableRange=n.disableRange||!1,this._rangeChunkSize=n.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!n.disableStream,this._isRangeSupported=!n.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",n=>{this._error(n)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Es("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class Jm{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const n=t.source;this._isStreamingSupported=!n.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",n=>{this._error(n)}),this._storedError&&this._readableStream.destroy(this._storedError)}}class t_ extends Zm{constructor(t){super(t);const n=Object.fromEntries(t.headers),s=r=>{if(r.statusCode===404){const d=new Ss(`Missing PDF "${this._url}".`);this._storedError=d,this._headersCapability.reject(d);return}this._headersCapability.resolve(),this._setReadableStream(r);const o=new Headers(this._readableStream.headers),{allowRangeRequests:c,suggestedLength:u}=Rh({responseHeaders:o,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=c,this._contentLength=u||this._contentLength,this._filename=Mh(o)};this._request=Qm(this._url,n,s),this._request.on("error",r=>{this._storedError=r,this._headersCapability.reject(r)}),this._request.end()}}class e_ extends Jm{constructor(t,n,s){super(t);const r=Object.fromEntries(t.headers);r.Range=`bytes=${n}-${s-1}`;const o=c=>{if(c.statusCode===404){const u=new Ss(`Missing PDF "${this._url}".`);this._storedError=u;return}this._setReadableStream(c)};this._request=Qm(this._url,r,o),this._request.on("error",c=>{this._storedError=c}),this._request.end()}}class i_ extends Zm{constructor(t){super(t);const n=Yn.get("fs");n.promises.lstat(this._url).then(s=>{this._contentLength=s.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},s=>{s.code==="ENOENT"&&(s=new Ss(`Missing PDF "${this._url}".`)),this._storedError=s,this._headersCapability.reject(s)})}}class n_ extends Jm{constructor(t,n,s){super(t);const r=Yn.get("fs");this._setReadableStream(r.createReadStream(this._url,{start:n,end:s-1}))}}const s_=1e5,Ve=30,a_=.8;let fh=class Si{#t=Promise.withResolvers();#e=null;#i=!1;#s=!!globalThis.FontInspector?.enabled;#a=null;#n=null;#o=0;#c=0;#u=null;#l=null;#h=0;#r=0;#d=Object.create(null);#g=[];#f=null;#y=[];#m=new WeakMap;#p=null;static#v=new Map;static#_=new Map;static#x=new WeakMap;static#E=null;static#w=new Set;constructor({textContentSource:t,container:n,viewport:s}){if(t instanceof ReadableStream)this.#f=t;else if(typeof t=="object")this.#f=new ReadableStream({start(d){d.enqueue(t),d.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#e=this.#l=n,this.#r=s.scale*(globalThis.devicePixelRatio||1),this.#h=s.rotation,this.#n={div:null,properties:null,ctx:null};const{pageWidth:r,pageHeight:o,pageX:c,pageY:u}=s.rawDims;this.#p=[1,0,0,-1,-c,u+o],this.#c=r,this.#o=o,Si.#M(),_s(n,s),this.#t.promise.finally(()=>{Si.#w.delete(this),this.#n=null,this.#d=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:n}=je.platform;return xt(this,"fontFamilyMap",new Map([["sans-serif",`${t&&n?"Calibri, ":""}sans-serif`],["monospace",`${t&&n?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{this.#u.read().then(({value:n,done:s})=>{if(s){this.#t.resolve();return}this.#a??=n.lang,Object.assign(this.#d,n.styles),this.#P(n.items),t()},this.#t.reject)};return this.#u=this.#f.getReader(),Si.#w.add(this),t(),this.#t.promise}update({viewport:t,onBefore:n=null}){const s=t.scale*(globalThis.devicePixelRatio||1),r=t.rotation;if(r!==this.#h&&(n?.(),this.#h=r,_s(this.#l,{rotation:r})),s!==this.#r){n?.(),this.#r=s;const o={div:null,properties:null,ctx:Si.#T(this.#a)};for(const c of this.#y)o.properties=this.#m.get(c),o.div=c,this.#A(o)}}cancel(){const t=new Es("TextLayer task cancelled.");this.#u?.cancel(t).catch(()=>{}),this.#u=null,this.#t.reject(t)}get textDivs(){return this.#y}get textContentItemsStr(){return this.#g}#P(t){if(this.#i)return;this.#n.ctx??=Si.#T(this.#a);const n=this.#y,s=this.#g;for(const r of t){if(n.length>s_){St("Ignoring additional textDivs for performance reasons."),this.#i=!0;return}if(r.str===void 0){if(r.type==="beginMarkedContentProps"||r.type==="beginMarkedContent"){const o=this.#e;this.#e=document.createElement("span"),this.#e.classList.add("markedContent"),r.id!==null&&this.#e.setAttribute("id",`${r.id}`),o.append(this.#e)}else r.type==="endMarkedContent"&&(this.#e=this.#e.parentNode);continue}s.push(r.str),this.#C(r)}}#C(t){const n=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};this.#y.push(n);const r=lt.transform(this.#p,t.transform);let o=Math.atan2(r[1],r[0]);const c=this.#d[t.fontName];c.vertical&&(o+=Math.PI/2);let u=this.#s&&c.fontSubstitution||c.fontFamily;u=Si.fontFamilyMap.get(u)||u;const d=Math.hypot(r[2],r[3]),g=d*Si.#L(u,this.#a);let m,y;o===0?(m=r[4],y=r[5]-g):(m=r[4]+g*Math.sin(o),y=r[5]-g*Math.cos(o));const v="calc(var(--scale-factor)*",_=n.style;this.#e===this.#l?(_.left=`${(100*m/this.#c).toFixed(2)}%`,_.top=`${(100*y/this.#o).toFixed(2)}%`):(_.left=`${v}${m.toFixed(2)}px)`,_.top=`${v}${y.toFixed(2)}px)`),_.fontSize=`${v}${(Si.#E*d).toFixed(2)}px)`,_.fontFamily=u,s.fontSize=d,n.setAttribute("role","presentation"),n.textContent=t.str,n.dir=t.dir,this.#s&&(n.dataset.fontName=c.fontSubstitutionLoadedName||t.fontName),o!==0&&(s.angle=o*(180/Math.PI));let A=!1;if(t.str.length>1)A=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const E=Math.abs(t.transform[0]),w=Math.abs(t.transform[3]);E!==w&&Math.max(E,w)/Math.min(E,w)>1.5&&(A=!0)}if(A&&(s.canvasWidth=c.vertical?t.height:t.width),this.#m.set(n,s),this.#n.div=n,this.#n.properties=s,this.#A(this.#n),s.hasText&&this.#e.append(n),s.hasEOL){const E=document.createElement("br");E.setAttribute("role","presentation"),this.#e.append(E)}}#A(t){const{div:n,properties:s,ctx:r}=t,{style:o}=n;let c="";if(Si.#E>1&&(c=`scale(${1/Si.#E})`),s.canvasWidth!==0&&s.hasText){const{fontFamily:u}=o,{canvasWidth:d,fontSize:g}=s;Si.#R(r,g*this.#r,u);const{width:m}=r.measureText(n.textContent);m>0&&(c=`scaleX(${d*this.#r/m}) ${c}`)}s.angle!==0&&(c=`rotate(${s.angle}deg) ${c}`),c.length>0&&(o.transform=c)}static cleanup(){if(!(this.#w.size>0)){this.#v.clear();for(const{canvas:t}of this.#_.values())t.remove();this.#_.clear()}}static#T(t=null){let n=this.#_.get(t||="");if(!n){const s=document.createElement("canvas");s.className="hiddenCanvasElement",s.lang=t,document.body.append(s),n=s.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#_.set(t,n),this.#x.set(n,{size:0,family:""})}return n}static#R(t,n,s){const r=this.#x.get(t);n===r.size&&s===r.family||(t.font=`${n}px ${s}`,r.size=n,r.family=s)}static#M(){if(this.#E!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),this.#E=t.getBoundingClientRect().height,t.remove()}static#L(t,n){const s=this.#v.get(t);if(s)return s;const r=this.#T(n);r.canvas.width=r.canvas.height=Ve,this.#R(r,Ve,t);const o=r.measureText("");let c=o.fontBoundingBoxAscent,u=Math.abs(o.fontBoundingBoxDescent);if(c){const m=c/(c+u);return this.#v.set(t,m),r.canvas.width=r.canvas.height=0,m}r.strokeStyle="red",r.clearRect(0,0,Ve,Ve),r.strokeText("g",0,0);let d=r.getImageData(0,0,Ve,Ve).data;u=0;for(let m=d.length-1-3;m>=0;m-=4)if(d[m]>0){u=Math.ceil(m/4/Ve);break}r.clearRect(0,0,Ve,Ve),r.strokeText("A",0,Ve),d=r.getImageData(0,0,Ve,Ve).data,c=0;for(let m=0,y=d.length;m<y;m+=4)if(d[m]>0){c=Ve-Math.floor(m/4/Ve);break}r.canvas.width=r.canvas.height=0;const g=c?c/(c+u):a_;return this.#v.set(t,g),g}};class jr{static textContent(t){const n=[],s={items:n,styles:Object.create(null)};function r(o){if(!o)return;let c=null;const u=o.name;if(u==="#text")c=o.value;else if(jr.shouldBuildText(u))o?.attributes?.textContent?c=o.attributes.textContent:o.value&&(c=o.value);else return;if(c!==null&&n.push({str:c}),!!o.children)for(const d of o.children)r(d)}return r(t),s}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const r_=65536,l_=100,o_=5e3,c_=De?A0:v0,u_=De?S0:qm,h_=De?_0:b0,d_=De?E0:Xm;function f_(f={}){typeof f=="string"||f instanceof URL?f={url:f}:(f instanceof ArrayBuffer||ArrayBuffer.isView(f))&&(f={data:f});const t=new Dh,{docId:n}=t,s=f.url?g_(f.url):null,r=f.data?p_(f.data):null,o=f.httpHeaders||null,c=f.withCredentials===!0,u=f.password??null,d=f.range instanceof ty?f.range:null,g=Number.isInteger(f.rangeChunkSize)&&f.rangeChunkSize>0?f.rangeChunkSize:r_;let m=f.worker instanceof Aa?f.worker:null;const y=f.verbosity,v=typeof f.docBaseUrl=="string"&&!ko(f.docBaseUrl)?f.docBaseUrl:null,_=typeof f.cMapUrl=="string"?f.cMapUrl:null,A=f.cMapPacked!==!1,E=f.CMapReaderFactory||u_,w=typeof f.standardFontDataUrl=="string"?f.standardFontDataUrl:null,T=f.StandardFontDataFactory||d_,M=f.stopAtErrors!==!0,C=Number.isInteger(f.maxImageSize)&&f.maxImageSize>-1?f.maxImageSize:-1,O=f.isEvalSupported!==!1,N=typeof f.isOffscreenCanvasSupported=="boolean"?f.isOffscreenCanvasSupported:!De,U=typeof f.isChrome=="boolean"?f.isChrome:!je.platform.isFirefox&&typeof window<"u"&&!!window?.chrome,q=Number.isInteger(f.canvasMaxAreaInBytes)?f.canvasMaxAreaInBytes:-1,$=typeof f.disableFontFace=="boolean"?f.disableFontFace:De,B=f.fontExtraProperties===!0,Z=f.enableXfa===!0,W=f.ownerDocument||globalThis.document,J=f.disableRange===!0,it=f.disableStream===!0,ht=f.disableAutoFetch===!0,st=f.pdfBug===!0,k=f.CanvasFactory||c_,P=f.FilterFactory||h_,Y=f.enableHWA===!0,nt=d?d.length:f.length??NaN,x=typeof f.useSystemFonts=="boolean"?f.useSystemFonts:!De&&!$,I=typeof f.useWorkerFetch=="boolean"?f.useWorkerFetch:E===qm&&T===Xm&&_&&w&&Lr(_,document.baseURI)&&Lr(w,document.baseURI);f.canvasFactory&&jp("`canvasFactory`-instance option, please use `CanvasFactory` instead."),f.filterFactory&&jp("`filterFactory`-instance option, please use `FilterFactory` instead.");const Q=null;Wb(y);const X={canvasFactory:new k({ownerDocument:W,enableHWA:Y}),filterFactory:new P({docId:n,ownerDocument:W}),cMapReaderFactory:I?null:new E({baseUrl:_,isCompressed:A}),standardFontDataFactory:I?null:new T({baseUrl:w})};if(!m){const et={verbosity:y,port:Fr.workerPort};m=et.port?Aa.fromPort(et):new Aa(et),t._worker=m}const tt={docId:n,apiVersion:"4.8.69",data:r,password:u,disableAutoFetch:ht,rangeChunkSize:g,length:nt,docBaseUrl:v,enableXfa:Z,evaluatorOptions:{maxImageSize:C,disableFontFace:$,ignoreErrors:M,isEvalSupported:O,isOffscreenCanvasSupported:N,isChrome:U,canvasMaxAreaInBytes:q,fontExtraProperties:B,useSystemFonts:x,cMapUrl:I?_:null,standardFontDataUrl:I?w:null}},ot={disableFontFace:$,fontExtraProperties:B,ownerDocument:W,pdfBug:st,styleElement:Q,loadingParams:{disableAutoFetch:ht,enableXfa:Z}};return m.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(m.destroyed)throw new Error("Worker was destroyed");const et=m.messageHandler.sendWithPromise("GetDocRequest",tt,r?[r.buffer]:null);let ct;if(d)ct=new U0(d,{disableRange:J,disableStream:it});else if(!r){if(!s)throw new Error("getDocument - no `url` parameter provided.");let _t;De?_t=typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype&&Lr(s)?Wp:J0:_t=Lr(s)?Wp:K0,ct=new _t({url:s,length:nt,httpHeaders:o,withCredentials:c,rangeChunkSize:g,disableRange:J,disableStream:it})}return et.then(_t=>{if(t.destroyed)throw new Error("Loading aborted");if(m.destroyed)throw new Error("Worker was destroyed");const kt=new kr(n,_t,m.port),Ye=new b_(kt,t,ct,ot,X);t._transport=Ye,kt.send("Ready",null)})}).catch(t._capability.reject),t}function g_(f){if(f instanceof URL)return f.href;try{return new URL(f,window.location).href}catch{if(De&&typeof f=="string")return f}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function p_(f){if(De&&typeof Buffer<"u"&&f instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(f instanceof Uint8Array&&f.byteLength===f.buffer.byteLength)return f;if(typeof f=="string")return Oo(f);if(f instanceof ArrayBuffer||ArrayBuffer.isView(f)||typeof f=="object"&&!isNaN(f?.length))return new Uint8Array(f);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function $p(f){return typeof f=="object"&&Number.isInteger(f?.num)&&f.num>=0&&Number.isInteger(f?.gen)&&f.gen>=0}class Dh{static#t=0;constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${Dh.#t++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}}class ty{constructor(t,n,s=!1,r=null){this.length=t,this.initialData=n,this.progressiveDone=s,this.contentDispositionFilename=r,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,n){for(const s of this._rangeListeners)s(t,n)}onDataProgress(t,n){this._readyCapability.promise.then(()=>{for(const s of this._progressListeners)s(t,n)})}onDataProgressiveRead(t){this._readyCapability.promise.then(()=>{for(const n of this._progressiveReadListeners)n(t)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const t of this._progressiveDoneListeners)t()})}transportReady(){this._readyCapability.resolve()}requestDataRange(t,n){zt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class m_{constructor(t,n){this._pdfInfo=t,this._transport=n}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return xt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:n}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(n)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class y_{#t=null;#e=!1;constructor(t,n,s,r=!1){this._pageIndex=t,this._pageInfo=n,this._transport=s,this._stats=r?new Fp:null,this._pdfBug=r,this.commonObjs=s.commonObjs,this.objs=new ey,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:n=this.rotate,offsetX:s=0,offsetY:r=0,dontFlip:o=!1}={}){return new Hr({viewBox:this.view,scale:t,rotation:n,offsetX:s,offsetY:r,dontFlip:o})}getAnnotations({intent:t="display"}={}){const{renderingIntent:n}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,n)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return xt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,viewport:n,intent:s="display",annotationMode:r=Vn.ENABLE,transform:o=null,background:c=null,optionalContentConfigPromise:u=null,annotationCanvasMap:d=null,pageColors:g=null,printAnnotationStorage:m=null,isEditing:y=!1}){this._stats?.time("Overall");const v=this._transport.getRenderingIntent(s,r,m,y),{renderingIntent:_,cacheKey:A}=v;this.#e=!1,this.#s(),u||=this._transport.getOptionalContentConfig(_);let E=this._intentStates.get(A);E||(E=Object.create(null),this._intentStates.set(A,E)),E.streamReaderCancelTimeout&&(clearTimeout(E.streamReaderCancelTimeout),E.streamReaderCancelTimeout=null);const w=!!(_&si.PRINT);E.displayReadyCapability||(E.displayReadyCapability=Promise.withResolvers(),E.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(v));const T=O=>{E.renderTasks.delete(M),(this._maybeCleanupAfterRender||w)&&(this.#e=!0),this.#i(!w),O?(M.capability.reject(O),this._abortOperatorList({intentState:E,reason:O instanceof Error?O:new Error(O)})):M.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},M=new ba({callback:T,params:{canvasContext:t,viewport:n,transform:o,background:c},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:d,operatorList:E.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!w,pdfBug:this._pdfBug,pageColors:g});(E.renderTasks||=new Set).add(M);const C=M.task;return Promise.all([E.displayReadyCapability.promise,u]).then(([O,N])=>{if(this.destroyed){T();return}if(this._stats?.time("Rendering"),!(N.renderingIntent&_))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");M.initializeGraphics({transparency:O,optionalContentConfig:N}),M.operatorListChanged()}).catch(T),C}getOperatorList({intent:t="display",annotationMode:n=Vn.ENABLE,printAnnotationStorage:s=null,isEditing:r=!1}={}){function o(){u.operatorList.lastChunk&&(u.opListReadCapability.resolve(u.operatorList),u.renderTasks.delete(d))}const c=this._transport.getRenderingIntent(t,n,s,r,!0);let u=this._intentStates.get(c.cacheKey);u||(u=Object.create(null),this._intentStates.set(c.cacheKey,u));let d;return u.opListReadCapability||(d=Object.create(null),d.operatorListChanged=o,u.opListReadCapability=Promise.withResolvers(),(u.renderTasks||=new Set).add(d),u.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(c)),u.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:n=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:n===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>jr.textContent(s));const n=this.streamTextContent(t);return new Promise(function(s,r){function o(){c.read().then(function({value:d,done:g}){if(g){s(u);return}u.lang??=d.lang,Object.assign(u.styles,d.styles),u.items.push(...d.items),o()},r)}const c=n.getReader(),u={items:[],styles:Object.create(null),lang:null};o()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const n of this._intentStates.values())if(this._abortOperatorList({intentState:n,reason:new Error("Page was destroyed."),force:!0}),!n.opListReadCapability)for(const s of n.renderTasks)t.push(s.completed),s.cancel();return this.objs.clear(),this.#e=!1,this.#s(),Promise.all(t)}cleanup(t=!1){this.#e=!0;const n=this.#i(!1);return t&&n&&(this._stats&&=new Fp),n}#i(t=!1){if(this.#s(),!this.#e||this.destroyed)return!1;if(t)return this.#t=setTimeout(()=>{this.#t=null,this.#i(!1)},o_),!1;for(const{renderTasks:n,operatorList:s}of this._intentStates.values())if(n.size>0||!s.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#e=!1,!0}#s(){this.#t&&(clearTimeout(this.#t),this.#t=null)}_startRenderPage(t,n){const s=this._intentStates.get(n);s&&(this._stats?.timeEnd("Page Request"),s.displayReadyCapability?.resolve(t))}_renderPageChunk(t,n){for(let s=0,r=t.length;s<r;s++)n.operatorList.fnArray.push(t.fnArray[s]),n.operatorList.argsArray.push(t.argsArray[s]);n.operatorList.lastChunk=t.lastChunk,n.operatorList.separateAnnots=t.separateAnnots;for(const s of n.renderTasks)s.operatorListChanged();t.lastChunk&&this.#i(!0)}_pumpOperatorList({renderingIntent:t,cacheKey:n,annotationStorageSerializable:s,modifiedIds:r}){const{map:o,transfer:c}=s,d=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:n,annotationStorage:o,modifiedIds:r},c).getReader(),g=this._intentStates.get(n);g.streamReader=d;const m=()=>{d.read().then(({value:y,done:v})=>{if(v){g.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(y,g),m())},y=>{if(g.streamReader=null,!this._transport.destroyed){if(g.operatorList){g.operatorList.lastChunk=!0;for(const v of g.renderTasks)v.operatorListChanged();this.#i(!0)}if(g.displayReadyCapability)g.displayReadyCapability.reject(y);else if(g.opListReadCapability)g.opListReadCapability.reject(y);else throw y}})};m()}_abortOperatorList({intentState:t,reason:n,force:s=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!s){if(t.renderTasks.size>0)return;if(n instanceof bh){let r=l_;n.extraDelay>0&&n.extraDelay<1e3&&(r+=n.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:n,force:!0})},r);return}}if(t.streamReader.cancel(new Es(n.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[r,o]of this._intentStates)if(o===t){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}class v_{#t=new Map;#e=Promise.resolve();postMessage(t,n){const s={data:structuredClone(t,n?{transfer:n}:null)};this.#e.then(()=>{for(const[r]of this.#t)r.call(this,s)})}addEventListener(t,n,s=null){let r=null;if(s?.signal instanceof AbortSignal){const{signal:o}=s;if(o.aborted){St("LoopbackPort - cannot use an `aborted` signal.");return}const c=()=>this.removeEventListener(t,n);r=()=>o.removeEventListener("abort",c),o.addEventListener("abort",c)}this.#t.set(n,r)}removeEventListener(t,n){this.#t.get(n)?.(),this.#t.delete(n)}terminate(){for(const[,t]of this.#t)t?.();this.#t.clear()}}var xo,vs,bs,Sa,Eo,Ea,wo;const It=class It{constructor({name:t=null,port:n=null,verbosity:s=$b()}={}){ha(this,Sa);if(this.name=t,this.destroyed=!1,this.verbosity=s,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,n){if(Oi(It,bs)?.has(n))throw new Error("Cannot use more than one PDFWorker per port.");(Oi(It,bs)||wr(It,bs,new WeakMap)).set(n,this),this._initializeFromPort(n);return}this._initialize()}get promise(){return De?Promise.all([Yn.promise,this._readyCapability.promise]):this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new kr("main","worker",t),this._messageHandler.on("ready",function(){}),eo(this,Sa,Eo).call(this)}_initialize(){if(Oi(It,vs)||Oi(It,Ea,wo)){this._setupFakeWorker();return}let{workerSrc:t}=It;try{It._isSameOrigin(window.location.href,t)||(t=It._createCDNWrapper(new URL(t,window.location).href));const n=new Worker(t,{type:"module"}),s=new kr("main","worker",n),r=()=>{o.abort(),s.destroy(),n.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},o=new AbortController;n.addEventListener("error",()=>{this._webWorker||r()},{signal:o.signal}),s.on("test",u=>{if(o.abort(),this.destroyed||!u){r();return}this._messageHandler=s,this._port=n,this._webWorker=n,eo(this,Sa,Eo).call(this)}),s.on("ready",u=>{if(o.abort(),this.destroyed){r();return}try{c()}catch{this._setupFakeWorker()}});const c=()=>{const u=new Uint8Array;s.send("test",u,[u.buffer])};c();return}catch{Mo("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){Oi(It,vs)||(St("Setting up fake worker."),wr(It,vs,!0)),It._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const n=new v_;this._port=n;const s=`fake${Ap(It,xo)._++}`,r=new kr(s+"_worker",s,n);t.setup(r,n),this._messageHandler=new kr(s,s+"_worker",n),eo(this,Sa,Eo).call(this)}).catch(t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),Oi(It,bs)?.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(t){if(!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");const n=Oi(this,bs)?.get(t.port);if(n){if(n._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return n}return new It(t)}static get workerSrc(){if(Fr.workerSrc)return Fr.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return xt(this,"_setupFakeWorkerGlobal",(async()=>Oi(this,Ea,wo)?Oi(this,Ea,wo):(await import(this.workerSrc)).WorkerMessageHandler)())}};xo=new WeakMap,vs=new WeakMap,bs=new WeakMap,Sa=new WeakSet,Eo=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},Ea=new WeakSet,wo=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},ha(It,Ea),ha(It,xo,0),ha(It,vs,!1),ha(It,bs),De&&(wr(It,vs,!0),Fr.workerSrc||="./pdf.worker.mjs"),It._isSameOrigin=(t,n)=>{let s;try{if(s=new URL(t),!s.origin||s.origin==="null")return!1}catch{return!1}const r=new URL(n,s);return s.origin===r.origin},It._createCDNWrapper=t=>{const n=`await import("${t}");`;return URL.createObjectURL(new Blob([n],{type:"text/javascript"}))};let Aa=It;class b_{#t=new Map;#e=new Map;#i=new Map;#s=new Map;#a=null;constructor(t,n,s,r,o){this.messageHandler=t,this.loadingTask=n,this.commonObjs=new ey,this.fontLoader=new m0({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=o.canvasFactory,this.filterFactory=o.filterFactory,this.cMapReaderFactory=o.cMapReaderFactory,this.standardFontDataFactory=o.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}#n(t,n=null){const s=this.#t.get(t);if(s)return s;const r=this.messageHandler.sendWithPromise(t,n);return this.#t.set(t,r),r}get annotationStorage(){return xt(this,"annotationStorage",new wh)}getRenderingIntent(t,n=Vn.ENABLE,s=null,r=!1,o=!1){let c=si.DISPLAY,u=ch;switch(t){case"any":c=si.ANY;break;case"display":break;case"print":c=si.PRINT;break;default:St(`getRenderingIntent - invalid intent: ${t}`)}const d=c&si.PRINT&&s instanceof Um?s:this.annotationStorage;switch(n){case Vn.DISABLE:c+=si.ANNOTATIONS_DISABLE;break;case Vn.ENABLE:break;case Vn.ENABLE_FORMS:c+=si.ANNOTATIONS_FORMS;break;case Vn.ENABLE_STORAGE:c+=si.ANNOTATIONS_STORAGE,u=d.serializable;break;default:St(`getRenderingIntent - invalid annotationMode: ${n}`)}r&&(c+=si.IS_EDITING),o&&(c+=si.OPLIST);const{ids:g,hash:m}=d.modifiedIds,y=[c,u.hash,m];return{renderingIntent:c,cacheKey:y.join("_"),annotationStorageSerializable:u,modifiedIds:g}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#a?.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const s of this.#e.values())t.push(s._destroy());this.#e.clear(),this.#i.clear(),this.#s.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const n=this.messageHandler.sendWithPromise("Terminate",null);return t.push(n),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),fh.cleanup(),this._networkStream?.cancelAllRequests(new Es("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:n}=this;t.on("GetReader",(s,r)=>{oe(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=o=>{this._lastProgress={loaded:o.loaded,total:o.total}},r.onPull=()=>{this._fullReader.read().then(function({value:o,done:c}){if(c){r.close();return}oe(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{r.error(o)})},r.onCancel=o=>{this._fullReader.cancel(o),r.ready.catch(c=>{if(!this.destroyed)throw c})}}),t.on("ReaderHeadersReady",async s=>{await this._fullReader.headersReady;const{isStreamingSupported:r,isRangeSupported:o,contentLength:c}=this._fullReader;return(!r||!o)&&(this._lastProgress&&n.onProgress?.(this._lastProgress),this._fullReader.onProgress=u=>{n.onProgress?.({loaded:u.loaded,total:u.total})}),{isStreamingSupported:r,isRangeSupported:o,contentLength:c}}),t.on("GetRangeReader",(s,r)=>{oe(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const o=this._networkStream.getRangeReader(s.begin,s.end);if(!o){r.close();return}r.onPull=()=>{o.read().then(function({value:c,done:u}){if(u){r.close();return}oe(c instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(c),1,[c])}).catch(c=>{r.error(c)})},r.onCancel=c=>{o.cancel(c),r.ready.catch(u=>{if(!this.destroyed)throw u})}}),t.on("GetDoc",({pdfInfo:s})=>{this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,n._capability.resolve(new m_(s,this))}),t.on("DocException",function(s){let r;switch(s.name){case"PasswordException":r=new rh(s.message,s.code);break;case"InvalidPDFException":r=new Fm(s.message);break;case"MissingPDFException":r=new Ss(s.message);break;case"UnexpectedResponseException":r=new Do(s.message,s.status);break;case"UnknownErrorException":r=new lh(s.message,s.details);break;default:zt("DocException - expected a valid Error.")}n._capability.reject(r)}),t.on("PasswordRequest",s=>{if(this.#a=Promise.withResolvers(),n.onPassword){const r=o=>{o instanceof Error?this.#a.reject(o):this.#a.resolve({password:o})};try{n.onPassword(r,s.code)}catch(o){this.#a.reject(o)}}else this.#a.reject(new rh(s.message,s.code));return this.#a.promise}),t.on("DataLoaded",s=>{n.onProgress?.({loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),t.on("StartRenderPage",s=>{if(this.destroyed)return;this.#e.get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),t.on("commonobj",([s,r,o])=>{if(this.destroyed||this.commonObjs.has(s))return null;switch(r){case"Font":const{disableFontFace:c,fontExtraProperties:u,pdfBug:d}=this._params;if("error"in o){const v=o.error;St(`Error during font loading: ${v}`),this.commonObjs.resolve(s,v);break}const g=d&&globalThis.FontInspector?.enabled?(v,_)=>globalThis.FontInspector.fontAdded(v,_):null,m=new y0(o,{disableFontFace:c,inspectFont:g});this.fontLoader.bind(m).catch(()=>t.sendWithPromise("FontFallback",{id:s})).finally(()=>{!u&&m.data&&(m.data=null),this.commonObjs.resolve(s,m)});break;case"CopyLocalImage":const{imageRef:y}=o;oe(y,"The imageRef must be defined.");for(const v of this.#e.values())for(const[,_]of v.objs)if(_?.ref===y)return _.dataLen?(this.commonObjs.resolve(s,structuredClone(_)),_.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(s,o);break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),t.on("obj",([s,r,o,c])=>{if(this.destroyed)return;const u=this.#e.get(r);if(!u.objs.has(s)){if(u._intentStates.size===0){c?.bitmap?.close();return}switch(o){case"Image":u.objs.resolve(s,c),c?.dataLen>Vb&&(u._maybeCleanupAfterRender=!0);break;case"Pattern":u.objs.resolve(s,c);break;default:throw new Error(`Got unknown object type ${o}`)}}}),t.on("DocProgress",s=>{this.destroyed||n.onProgress?.({loaded:s.loaded,total:s.total})}),t.on("FetchBuiltInCMap",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(s)}),t.on("FetchStandardFontData",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(s)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&St("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:n}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this._fullReader?.filename??null},n).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const n=t-1,s=this.#i.get(n);if(s)return s;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:n}).then(o=>{if(this.destroyed)throw new Error("Transport destroyed");o.refStr&&this.#s.set(o.refStr,t);const c=new y_(n,o,this,this._params.pdfBug);return this.#e.set(n,c),c});return this.#i.set(n,r),r}getPageIndex(t){return $p(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,n){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:n})}getFieldObjects(){return this.#n("GetFieldObjects")}hasJSActions(){return this.#n("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#n("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return this.#n("GetOptionalContentConfig").then(n=>new z0(n,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",n=this.#t.get(t);if(n)return n;const s=this.messageHandler.sendWithPromise(t,null).then(r=>({info:r[0],metadata:r[1]?new j0(r[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#t.set(t,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const n of this.#e.values())if(!n.cleanup())throw new Error(`startCleanup: Page ${n.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0),fh.cleanup()}}cachedPageNumber(t){if(!$p(t))return null;const n=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return this.#s.get(n)??null}}const lo=Symbol("INITIAL_DATA");class ey{#t=Object.create(null);#e(t){return this.#t[t]||={...Promise.withResolvers(),data:lo}}get(t,n=null){if(n){const r=this.#e(t);return r.promise.then(()=>n(r.data)),null}const s=this.#t[t];if(!s||s.data===lo)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return s.data}has(t){const n=this.#t[t];return!!n&&n.data!==lo}resolve(t,n=null){const s=this.#e(t);s.data=n,s.resolve()}clear(){for(const t in this.#t){const{data:n}=this.#t[t];n?.bitmap?.close()}this.#t=Object.create(null)}*[Symbol.iterator](){for(const t in this.#t){const{data:n}=this.#t[t];n!==lo&&(yield[t,n])}}}class __{#t=null;constructor(t){this.#t=t,this.onContinue=null}get promise(){return this.#t.capability.promise}cancel(t=0){this.#t.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this.#t.operatorList;if(!t)return!1;const{annotationCanvasMap:n}=this.#t;return t.form||t.canvas&&n?.size>0}}class ba{#t=null;static#e=new WeakSet;constructor({callback:t,params:n,objs:s,commonObjs:r,annotationCanvasMap:o,operatorList:c,pageIndex:u,canvasFactory:d,filterFactory:g,useRequestAnimationFrame:m=!1,pdfBug:y=!1,pageColors:v=null}){this.callback=t,this.params=n,this.objs=s,this.commonObjs=r,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=c,this._pageIndex=u,this.canvasFactory=d,this.filterFactory=g,this._pdfBug=y,this.pageColors=v,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=m===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new __(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=n.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:n}){if(this.cancelled)return;if(this._canvas){if(ba.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");ba.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:s,viewport:r,transform:o,background:c}=this.params;this.gfx=new _a(s,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:n},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:o,viewport:r,transparency:t,background:c}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,n=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#t&&(window.cancelAnimationFrame(this.#t),this.#t=null),ba.#e.delete(this._canvas),this.callback(t||new bh(`Rendering cancelled, page ${this._pageIndex+1}`,n))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#t=window.requestAnimationFrame(()=>{this.#t=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),ba.#e.delete(this._canvas),this.callback())))}}const A_="4.8.69",S_="3634dab10";function Qp(f){return Math.floor(Math.max(0,Math.min(1,f))*255).toString(16).padStart(2,"0")}function Mr(f){return Math.max(0,Math.min(255,255*f))}class Zp{static CMYK_G([t,n,s,r]){return["G",1-Math.min(1,.3*t+.59*s+.11*n+r)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=Mr(t),[t,t,t]}static G_HTML([t]){const n=Qp(t);return`#${n}${n}${n}`}static RGB_G([t,n,s]){return["G",.3*t+.59*n+.11*s]}static RGB_rgb(t){return t.map(Mr)}static RGB_HTML(t){return`#${t.map(Qp).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,n,s,r]){return["RGB",1-Math.min(1,t+r),1-Math.min(1,s+r),1-Math.min(1,n+r)]}static CMYK_rgb([t,n,s,r]){return[Mr(1-Math.min(1,t+r)),Mr(1-Math.min(1,s+r)),Mr(1-Math.min(1,n+r))]}static CMYK_HTML(t){const n=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(n)}static RGB_CMYK([t,n,s]){const r=1-t,o=1-n,c=1-s,u=Math.min(r,o,c);return["CMYK",r,o,c,u]}}class E_{create(t,n,s=!1){if(t<=0||n<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),s||(r.setAttribute("width",`${t}px`),r.setAttribute("height",`${n}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${t} ${n}`),r}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){zt("Abstract method `_createSVG` called.")}}class Oh extends E_{_createSVG(t){return document.createElementNS(pn,t)}}class iy{static setupStorage(t,n,s,r,o){const c=r.getValue(n,{value:null});switch(s.name){case"textarea":if(c.value!==null&&(t.textContent=c.value),o==="print")break;t.addEventListener("input",u=>{r.setValue(n,{value:u.target.value})});break;case"input":if(s.attributes.type==="radio"||s.attributes.type==="checkbox"){if(c.value===s.attributes.xfaOn?t.setAttribute("checked",!0):c.value===s.attributes.xfaOff&&t.removeAttribute("checked"),o==="print")break;t.addEventListener("change",u=>{r.setValue(n,{value:u.target.checked?u.target.getAttribute("xfaOn"):u.target.getAttribute("xfaOff")})})}else{if(c.value!==null&&t.setAttribute("value",c.value),o==="print")break;t.addEventListener("input",u=>{r.setValue(n,{value:u.target.value})})}break;case"select":if(c.value!==null){t.setAttribute("value",c.value);for(const u of s.children)u.attributes.value===c.value?u.attributes.selected=!0:u.attributes.hasOwnProperty("selected")&&delete u.attributes.selected}t.addEventListener("input",u=>{const d=u.target.options,g=d.selectedIndex===-1?"":d[d.selectedIndex].value;r.setValue(n,{value:g})});break}}static setAttributes({html:t,element:n,storage:s=null,intent:r,linkService:o}){const{attributes:c}=n,u=t instanceof HTMLAnchorElement;c.type==="radio"&&(c.name=`${c.name}-${r}`);for(const[d,g]of Object.entries(c))if(g!=null)switch(d){case"class":g.length&&t.setAttribute(d,g.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",g);break;case"style":Object.assign(t.style,g);break;case"textContent":t.textContent=g;break;default:(!u||d!=="href"&&d!=="newWindow")&&t.setAttribute(d,g)}u&&o.addLinkAttributes(t,c.href,c.newWindow),s&&c.dataId&&this.setupStorage(t,c.dataId,n,s)}static render(t){const n=t.annotationStorage,s=t.linkService,r=t.xfaHtml,o=t.intent||"display",c=document.createElement(r.name);r.attributes&&this.setAttributes({html:c,element:r,intent:o,linkService:s});const u=o!=="richText",d=t.div;if(d.append(c),t.viewport){const y=`matrix(${t.viewport.transform.join(",")})`;d.style.transform=y}u&&d.setAttribute("class","xfaLayer xfaFont");const g=[];if(r.children.length===0){if(r.value){const y=document.createTextNode(r.value);c.append(y),u&&jr.shouldBuildText(r.name)&&g.push(y)}return{textDivs:g}}const m=[[r,-1,c]];for(;m.length>0;){const[y,v,_]=m.at(-1);if(v+1===y.children.length){m.pop();continue}const A=y.children[++m.at(-1)[1]];if(A===null)continue;const{name:E}=A;if(E==="#text"){const T=document.createTextNode(A.value);g.push(T),_.append(T);continue}const w=A?.attributes?.xmlns?document.createElementNS(A.attributes.xmlns,E):document.createElement(E);if(_.append(w),A.attributes&&this.setAttributes({html:w,element:A,storage:n,intent:o,linkService:s}),A.children?.length>0)m.push([A,-1,w]);else if(A.value){const T=document.createTextNode(A.value);u&&jr.shouldBuildText(E)&&g.push(T),w.append(T)}}for(const y of d.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))y.setAttribute("readOnly",!0);return{textDivs:g}}static update(t){const n=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=n,t.div.hidden=!1}}const Ur=1e3,w_=9,As=new WeakSet;function yn(f){return{width:f[2]-f[0],height:f[3]-f[1]}}class T_{static create(t){switch(t.data.annotationType){case re.LINK:return new ny(t);case re.TEXT:return new x_(t);case re.WIDGET:switch(t.data.fieldType){case"Tx":return new C_(t);case"Btn":return t.data.radioButton?new sy(t):t.data.checkBox?new M_(t):new D_(t);case"Ch":return new O_(t);case"Sig":return new R_(t)}return new ws(t);case re.POPUP:return new gh(t);case re.FREETEXT:return new ay(t);case re.LINE:return new k_(t);case re.SQUARE:return new N_(t);case re.CIRCLE:return new P_(t);case re.POLYLINE:return new ry(t);case re.CARET:return new j_(t);case re.INK:return new Lh(t);case re.POLYGON:return new F_(t);case re.HIGHLIGHT:return new ly(t);case re.UNDERLINE:return new H_(t);case re.SQUIGGLY:return new z_(t);case re.STRIKEOUT:return new U_(t);case re.STAMP:return new oy(t);case re.FILEATTACHMENT:return new B_(t);default:return new Zt(t)}}}class Zt{#t=null;#e=!1;#i=null;constructor(t,{isRenderable:n=!1,ignoreBorder:s=!1,createQuadrilaterals:r=!1}={}){this.isRenderable=n,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,n&&(this.container=this._createContainer(s)),r&&this._createQuadrilaterals()}static _hasPopupData({titleObj:t,contentsObj:n,richText:s}){return!!(t?.str||n?.str||s?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Zt._hasPopupData(this.data)}updateEdited(t){if(!this.container)return;this.#t||={rect:this.data.rect.slice(0)};const{rect:n}=t;n&&this.#s(n),this.#i?.popup.updateEdited(t)}resetEdited(){this.#t&&(this.#s(this.#t.rect),this.#i?.popup.resetEdited(),this.#t=null)}#s(t){const{container:{style:n},data:{rect:s,rotation:r},parent:{viewport:{rawDims:{pageWidth:o,pageHeight:c,pageX:u,pageY:d}}}}=this;s?.splice(0,4,...t);const{width:g,height:m}=yn(t);n.left=`${100*(t[0]-u)/o}%`,n.top=`${100*(c-t[3]+d)/c}%`,r===0?(n.width=`${100*g/o}%`,n.height=`${100*m/c}%`):this.setRotation(r)}_createContainer(t){const{data:n,parent:{page:s,viewport:r}}=this,o=document.createElement("section");o.setAttribute("data-annotation-id",n.id),this instanceof ws||(o.tabIndex=Ur);const{style:c}=o;if(c.zIndex=this.parent.zIndex++,n.alternativeText&&(o.title=n.alternativeText),n.noRotate&&o.classList.add("norotate"),!n.rect||this instanceof gh){const{rotation:E}=n;return!n.hasOwnCanvas&&E!==0&&this.setRotation(E,o),o}const{width:u,height:d}=yn(n.rect);if(!t&&n.borderStyle.width>0){c.borderWidth=`${n.borderStyle.width}px`;const E=n.borderStyle.horizontalCornerRadius,w=n.borderStyle.verticalCornerRadius;if(E>0||w>0){const M=`calc(${E}px * var(--scale-factor)) / calc(${w}px * var(--scale-factor))`;c.borderRadius=M}else if(this instanceof sy){const M=`calc(${u}px * var(--scale-factor)) / calc(${d}px * var(--scale-factor))`;c.borderRadius=M}switch(n.borderStyle.style){case Cr.SOLID:c.borderStyle="solid";break;case Cr.DASHED:c.borderStyle="dashed";break;case Cr.BEVELED:St("Unimplemented border style: beveled");break;case Cr.INSET:St("Unimplemented border style: inset");break;case Cr.UNDERLINE:c.borderBottomStyle="solid";break}const T=n.borderColor||null;T?(this.#e=!0,c.borderColor=lt.makeHexColor(T[0]|0,T[1]|0,T[2]|0)):c.borderWidth=0}const g=lt.normalizeRect([n.rect[0],s.view[3]-n.rect[1]+s.view[1],n.rect[2],s.view[3]-n.rect[3]+s.view[1]]),{pageWidth:m,pageHeight:y,pageX:v,pageY:_}=r.rawDims;c.left=`${100*(g[0]-v)/m}%`,c.top=`${100*(g[1]-_)/y}%`;const{rotation:A}=n;return n.hasOwnCanvas||A===0?(c.width=`${100*u/m}%`,c.height=`${100*d/y}%`):this.setRotation(A,o),o}setRotation(t,n=this.container){if(!this.data.rect)return;const{pageWidth:s,pageHeight:r}=this.parent.viewport.rawDims,{width:o,height:c}=yn(this.data.rect);let u,d;t%180===0?(u=100*o/s,d=100*c/r):(u=100*c/s,d=100*o/r),n.style.width=`${u}%`,n.style.height=`${d}%`,n.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(n,s,r)=>{const o=r.detail[n],c=o[0],u=o.slice(1);r.target.style[s]=Zp[`${c}_HTML`](u),this.annotationStorage.setValue(this.data.id,{[s]:Zp[`${c}_rgb`](u)})};return xt(this,"_commonActions",{display:n=>{const{display:s}=n.detail,r=s%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:s===1||s===2})},print:n=>{this.annotationStorage.setValue(this.data.id,{noPrint:!n.detail.print})},hidden:n=>{const{hidden:s}=n.detail;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:s,noView:s})},focus:n=>{setTimeout(()=>n.target.focus({preventScroll:!1}),0)},userName:n=>{n.target.title=n.detail.userName},readonly:n=>{n.target.disabled=n.detail.readonly},required:n=>{this._setRequired(n.target,n.detail.required)},bgColor:n=>{t("bgColor","backgroundColor",n)},fillColor:n=>{t("fillColor","backgroundColor",n)},fgColor:n=>{t("fgColor","color",n)},textColor:n=>{t("textColor","color",n)},borderColor:n=>{t("borderColor","borderColor",n)},strokeColor:n=>{t("strokeColor","borderColor",n)},rotation:n=>{const s=n.detail.rotation;this.setRotation(s),this.annotationStorage.setValue(this.data.id,{rotation:s})}})}_dispatchEventFromSandbox(t,n){const s=this._commonActions;for(const r of Object.keys(n.detail))(t[r]||s[r])?.(n)}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const n=this.annotationStorage.getRawValue(this.data.id);if(!n)return;const s=this._commonActions;for(const[r,o]of Object.entries(n)){const c=s[r];if(c){const u={detail:{[r]:o},target:t};c(u),delete n[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[n,s,r,o]=this.data.rect.map(E=>Math.fround(E));if(t.length===8){const[E,w,T,M]=t.subarray(2,6);if(r===E&&o===w&&n===T&&s===M)return}const{style:c}=this.container;let u;if(this.#e){const{borderColor:E,borderWidth:w}=c;c.borderWidth=0,u=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${E}" stroke-width="${w}">`],this.container.classList.add("hasBorder")}const d=r-n,g=o-s,{svgFactory:m}=this,y=m.createElement("svg");y.classList.add("quadrilateralsContainer"),y.setAttribute("width",0),y.setAttribute("height",0);const v=m.createElement("defs");y.append(v);const _=m.createElement("clipPath"),A=`clippath_${this.data.id}`;_.setAttribute("id",A),_.setAttribute("clipPathUnits","objectBoundingBox"),v.append(_);for(let E=2,w=t.length;E<w;E+=8){const T=t[E],M=t[E+1],C=t[E+2],O=t[E+3],N=m.createElement("rect"),U=(C-n)/d,q=(o-M)/g,$=(T-C)/d,B=(M-O)/g;N.setAttribute("x",U),N.setAttribute("y",q),N.setAttribute("width",$),N.setAttribute("height",B),_.append(N),u?.push(`<rect vector-effect="non-scaling-stroke" x="${U}" y="${q}" width="${$}" height="${B}"/>`)}this.#e&&(u.push("</g></svg>')"),c.backgroundImage=u.join("")),this.container.append(y),this.container.style.clipPath=`url(#${A})`}_createPopup(){const{data:t}=this,n=this.#i=new gh({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation},parent:this.parent,elements:[this]});this.parent.div.append(n.render())}render(){zt("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,n=null){const s=[];if(this._fieldObjects){const r=this._fieldObjects[t];if(r)for(const{page:o,id:c,exportValues:u}of r){if(o===-1||c===n)continue;const d=typeof u=="string"?u:null,g=document.querySelector(`[data-element-id="${c}"]`);if(g&&!As.has(g)){St(`_getElementsByName - element not allowed: ${c}`);continue}s.push({id:c,exportValue:d,domElement:g})}return s}for(const r of document.getElementsByName(t)){const{exportValue:o}=r,c=r.getAttribute("data-element-id");c!==n&&As.has(r)&&s.push({id:c,exportValue:o,domElement:r})}return s}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const n of t)n.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:n}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:n})})}}class ny extends Zt{constructor(t,n=null){super(t,{isRenderable:!0,ignoreBorder:!!n?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:n}=this,s=document.createElement("a");s.setAttribute("data-element-id",t.id);let r=!1;return t.url?(n.addLinkAttributes(s,t.url,t.newWindow),r=!0):t.action?(this._bindNamedAction(s,t.action),r=!0):t.attachment?(this.#e(s,t.attachment,t.attachmentDest),r=!0):t.setOCGState?(this.#i(s,t.setOCGState),r=!0):t.dest?(this._bindLink(s,t.dest),r=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,t),r=!0),t.resetForm?(this._bindResetFormAction(s,t.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(s,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(s),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(t,n){t.href=this.linkService.getDestinationHash(n),t.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&this.#t()}_bindNamedAction(t,n){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(n),!1),this.#t()}#e(t,n,s=null){t.href=this.linkService.getAnchorUrl(""),n.description&&(t.title=n.description),t.onclick=()=>(this.downloadManager?.openOrDownloadData(n.content,n.filename,s),!1),this.#t()}#i(t,n){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(n),!1),this.#t()}_bindJSAction(t,n){t.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(n.actions)){const o=s.get(r);o&&(t[o]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:r}}),!1))}t.onclick||(t.onclick=()=>!1),this.#t()}_bindResetFormAction(t,n){const s=t.onclick;if(s||(t.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){St('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(t.onclick=()=>!1);return}t.onclick=()=>{s?.();const{fields:r,refs:o,include:c}=n,u=[];if(r.length!==0||o.length!==0){const m=new Set(o);for(const y of r){const v=this._fieldObjects[y]||[];for(const{id:_}of v)m.add(_)}for(const y of Object.values(this._fieldObjects))for(const v of y)m.has(v.id)===c&&u.push(v)}else for(const m of Object.values(this._fieldObjects))u.push(...m);const d=this.annotationStorage,g=[];for(const m of u){const{id:y}=m;switch(g.push(y),m.type){case"text":{const _=m.defaultValue||"";d.setValue(y,{value:_});break}case"checkbox":case"radiobutton":{const _=m.defaultValue===m.exportValues;d.setValue(y,{value:_});break}case"combobox":case"listbox":{const _=m.defaultValue||"";d.setValue(y,{value:_});break}default:continue}const v=document.querySelector(`[data-element-id="${y}"]`);if(v){if(!As.has(v)){St(`_bindResetFormAction - element not allowed: ${y}`);continue}}else continue;v.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:g,name:"ResetForm"}}),!1}}}class x_ extends Zt{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class ws extends Zt{render(){return this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&(t.previousSibling?.nodeName==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return je.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,n,s,r,o){s.includes("mouse")?t.addEventListener(s,c=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:o(c),shift:c.shiftKey,modifier:this._getKeyModifier(c)}})}):t.addEventListener(s,c=>{if(s==="blur"){if(!n.focused||!c.relatedTarget)return;n.focused=!1}else if(s==="focus"){if(n.focused)return;n.focused=!0}o&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:o(c)}})})}_setEventListeners(t,n,s,r){for(const[o,c]of s)(c==="Action"||this.data.actions?.[c])&&((c==="Focus"||c==="Blur")&&(n||={focused:!1}),this._setEventListener(t,n,o,c,r),c==="Focus"&&!this.data.actions?.Blur?this._setEventListener(t,n,"blur","Blur",null):c==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(t,n,"focus","Focus",null))}_setBackgroundColor(t){const n=this.data.backgroundColor||null;t.style.backgroundColor=n===null?"transparent":lt.makeHexColor(n[0],n[1],n[2])}_setTextStyle(t){const n=["left","center","right"],{fontColor:s}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||w_,o=t.style;let c;const u=2,d=g=>Math.round(10*g)/10;if(this.data.multiLine){const g=Math.abs(this.data.rect[3]-this.data.rect[1]-u),m=Math.round(g/($u*r))||1,y=g/m;c=Math.min(r,d(y/$u))}else{const g=Math.abs(this.data.rect[3]-this.data.rect[1]-u);c=Math.min(r,d(g/$u))}o.fontSize=`calc(${c}px * var(--scale-factor))`,o.color=lt.makeHexColor(s[0],s[1],s[2]),this.data.textAlignment!==null&&(o.textAlign=n[this.data.textAlignment])}_setRequired(t,n){n?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",n)}}class C_ extends ws{constructor(t){const n=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:n})}setPropertyOnSiblings(t,n,s,r){const o=this.annotationStorage;for(const c of this._getElementsByName(t.name,t.id))c.domElement&&(c.domElement[n]=s),o.setValue(c.id,{[r]:s})}render(){const t=this.annotationStorage,n=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){const r=t.getValue(n,{value:this.data.fieldValue});let o=r.value||"";const c=t.getValue(n,{charLimit:this.data.maxLen}).charLimit;c&&o.length>c&&(o=o.slice(0,c));let u=r.formattedValue||this.data.textContent?.join(`
`)||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const d={userValue:o,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(s=document.createElement("textarea"),s.textContent=u??o,this.data.doNotScroll&&(s.style.overflowY="hidden")):(s=document.createElement("input"),s.type="text",s.setAttribute("value",u??o),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),As.add(s),s.setAttribute("data-element-id",n),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=Ur,this._setRequired(s,this.data.required),c&&(s.maxLength=c),s.addEventListener("input",m=>{t.setValue(n,{value:m.target.value}),this.setPropertyOnSiblings(s,"value",m.target.value,"value"),d.formattedValue=null}),s.addEventListener("resetform",m=>{const y=this.data.defaultFieldValue??"";s.value=d.userValue=y,d.formattedValue=null});let g=m=>{const{formattedValue:y}=d;y!=null&&(m.target.value=y),m.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",y=>{if(d.focused)return;const{target:v}=y;d.userValue&&(v.value=d.userValue),d.lastCommittedValue=v.value,d.commitKey=1,this.data.actions?.Focus||(d.focused=!0)}),s.addEventListener("updatefromsandbox",y=>{this.showElementAndHideCanvas(y.target);const v={value(_){d.userValue=_.detail.value??"",t.setValue(n,{value:d.userValue.toString()}),_.target.value=d.userValue},formattedValue(_){const{formattedValue:A}=_.detail;d.formattedValue=A,A!=null&&_.target!==document.activeElement&&(_.target.value=A),t.setValue(n,{formattedValue:A})},selRange(_){_.target.setSelectionRange(..._.detail.selRange)},charLimit:_=>{const{charLimit:A}=_.detail,{target:E}=_;if(A===0){E.removeAttribute("maxLength");return}E.setAttribute("maxLength",A);let w=d.userValue;!w||w.length<=A||(w=w.slice(0,A),E.value=d.userValue=w,t.setValue(n,{value:w}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:w,willCommit:!0,commitKey:1,selStart:E.selectionStart,selEnd:E.selectionEnd}}))}};this._dispatchEventFromSandbox(v,y)}),s.addEventListener("keydown",y=>{d.commitKey=1;let v=-1;if(y.key==="Escape"?v=0:y.key==="Enter"&&!this.data.multiLine?v=2:y.key==="Tab"&&(d.commitKey=3),v===-1)return;const{value:_}=y.target;d.lastCommittedValue!==_&&(d.lastCommittedValue=_,d.userValue=_,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:_,willCommit:!0,commitKey:v,selStart:y.target.selectionStart,selEnd:y.target.selectionEnd}}))});const m=g;g=null,s.addEventListener("blur",y=>{if(!d.focused||!y.relatedTarget)return;this.data.actions?.Blur||(d.focused=!1);const{value:v}=y.target;d.userValue=v,d.lastCommittedValue!==v&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:v,willCommit:!0,commitKey:d.commitKey,selStart:y.target.selectionStart,selEnd:y.target.selectionEnd}}),m(y)}),this.data.actions?.Keystroke&&s.addEventListener("beforeinput",y=>{d.lastCommittedValue=null;const{data:v,target:_}=y,{value:A,selectionStart:E,selectionEnd:w}=_;let T=E,M=w;switch(y.inputType){case"deleteWordBackward":{const C=A.substring(0,E).match(/\w*[^\w]*$/);C&&(T-=C[0].length);break}case"deleteWordForward":{const C=A.substring(E).match(/^[^\w]*\w*/);C&&(M+=C[0].length);break}case"deleteContentBackward":E===w&&(T-=1);break;case"deleteContentForward":E===w&&(M+=1);break}y.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:A,change:v||"",willCommit:!1,selStart:T,selEnd:M}})}),this._setEventListeners(s,d,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],y=>y.target.value)}if(g&&s.addEventListener("blur",g),this.data.comb){const y=(this.data.rect[2]-this.data.rect[0])/c;s.classList.add("comb"),s.style.letterSpacing=`calc(${y}px * var(--scale-factor) - 1ch)`}}else s=document.createElement("div"),s.textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class R_ extends ws{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class M_ extends ws{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,n=this.data,s=n.id;let r=t.getValue(s,{value:n.exportValue===n.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",t.setValue(s,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const o=document.createElement("input");return As.add(o),o.setAttribute("data-element-id",s),o.disabled=n.readOnly,this._setRequired(o,this.data.required),o.type="checkbox",o.name=n.fieldName,r&&o.setAttribute("checked",!0),o.setAttribute("exportValue",n.exportValue),o.tabIndex=Ur,o.addEventListener("change",c=>{const{name:u,checked:d}=c.target;for(const g of this._getElementsByName(u,s)){const m=d&&g.exportValue===n.exportValue;g.domElement&&(g.domElement.checked=m),t.setValue(g.id,{value:m})}t.setValue(s,{value:d})}),o.addEventListener("resetform",c=>{const u=n.defaultFieldValue||"Off";c.target.checked=u===n.exportValue}),this.enableScripting&&this.hasJSActions&&(o.addEventListener("updatefromsandbox",c=>{const u={value(d){d.target.checked=d.detail.value!=="Off",t.setValue(s,{value:d.target.checked})}};this._dispatchEventFromSandbox(u,c)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class sy extends ws{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,n=this.data,s=n.id;let r=t.getValue(s,{value:n.fieldValue===n.buttonValue}).value;if(typeof r=="string"&&(r=r!==n.buttonValue,t.setValue(s,{value:r})),r)for(const c of this._getElementsByName(n.fieldName,s))t.setValue(c.id,{value:!1});const o=document.createElement("input");if(As.add(o),o.setAttribute("data-element-id",s),o.disabled=n.readOnly,this._setRequired(o,this.data.required),o.type="radio",o.name=n.fieldName,r&&o.setAttribute("checked",!0),o.tabIndex=Ur,o.addEventListener("change",c=>{const{name:u,checked:d}=c.target;for(const g of this._getElementsByName(u,s))t.setValue(g.id,{value:!1});t.setValue(s,{value:d})}),o.addEventListener("resetform",c=>{const u=n.defaultFieldValue;c.target.checked=u!=null&&u===n.buttonValue}),this.enableScripting&&this.hasJSActions){const c=n.buttonValue;o.addEventListener("updatefromsandbox",u=>{const d={value:g=>{const m=c===g.detail.value;for(const y of this._getElementsByName(g.target.name)){const v=m&&y.id===s;y.domElement&&(y.domElement.checked=v),t.setValue(y.id,{value:v})}}};this._dispatchEventFromSandbox(d,u)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)}return this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class D_ extends ny{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const n=t.lastChild;return this.enableScripting&&this.hasJSActions&&n&&(this._setDefaultPropertiesFromJS(n),n.addEventListener("updatefromsandbox",s=>{this._dispatchEventFromSandbox({},s)})),t}}class O_ extends ws{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,n=this.data.id,s=t.getValue(n,{value:this.data.fieldValue}),r=document.createElement("select");As.add(r),r.setAttribute("data-element-id",n),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=Ur;let o=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",m=>{const y=this.data.defaultFieldValue;for(const v of r.options)v.selected=v.value===y});for(const m of this.data.options){const y=document.createElement("option");y.textContent=m.displayValue,y.value=m.exportValue,s.value.includes(m.exportValue)&&(y.setAttribute("selected",!0),o=!1),r.append(y)}let c=null;if(o){const m=document.createElement("option");m.value=" ",m.setAttribute("hidden",!0),m.setAttribute("selected",!0),r.prepend(m),c=()=>{m.remove(),r.removeEventListener("input",c),c=null},r.addEventListener("input",c)}const u=m=>{const y=m?"value":"textContent",{options:v,multiple:_}=r;return _?Array.prototype.filter.call(v,A=>A.selected).map(A=>A[y]):v.selectedIndex===-1?null:v[v.selectedIndex][y]};let d=u(!1);const g=m=>{const y=m.target.options;return Array.prototype.map.call(y,v=>({displayValue:v.textContent,exportValue:v.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",m=>{const y={value(v){c?.();const _=v.detail.value,A=new Set(Array.isArray(_)?_:[_]);for(const E of r.options)E.selected=A.has(E.value);t.setValue(n,{value:u(!0)}),d=u(!1)},multipleSelection(v){r.multiple=!0},remove(v){const _=r.options,A=v.detail.remove;_[A].selected=!1,r.remove(A),_.length>0&&Array.prototype.findIndex.call(_,w=>w.selected)===-1&&(_[0].selected=!0),t.setValue(n,{value:u(!0),items:g(v)}),d=u(!1)},clear(v){for(;r.length!==0;)r.remove(0);t.setValue(n,{value:null,items:[]}),d=u(!1)},insert(v){const{index:_,displayValue:A,exportValue:E}=v.detail.insert,w=r.children[_],T=document.createElement("option");T.textContent=A,T.value=E,w?w.before(T):r.append(T),t.setValue(n,{value:u(!0),items:g(v)}),d=u(!1)},items(v){const{items:_}=v.detail;for(;r.length!==0;)r.remove(0);for(const A of _){const{displayValue:E,exportValue:w}=A,T=document.createElement("option");T.textContent=E,T.value=w,r.append(T)}r.options.length>0&&(r.options[0].selected=!0),t.setValue(n,{value:u(!0),items:g(v)}),d=u(!1)},indices(v){const _=new Set(v.detail.indices);for(const A of v.target.options)A.selected=_.has(A.index);t.setValue(n,{value:u(!0)}),d=u(!1)},editable(v){v.target.disabled=!v.detail.editable}};this._dispatchEventFromSandbox(y,m)}),r.addEventListener("input",m=>{const y=u(!0),v=u(!1);t.setValue(n,{value:y}),m.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:d,change:v,changeEx:y,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],m=>m.target.value)):r.addEventListener("input",function(m){t.setValue(n,{value:u(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class gh extends Zt{constructor(t){const{data:n,elements:s}=t;super(t,{isRenderable:Zt._hasPopupData(n)}),this.elements=s,this.popup=null}render(){this.container.classList.add("popupAnnotation");const t=this.popup=new L_({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),n=[];for(const s of this.elements)s.popup=t,s.container.ariaHasPopup="dialog",n.push(s.data.id),s.addHighlightArea();return this.container.setAttribute("aria-controls",n.map(s=>`${vh}${s}`).join(",")),this.container}}class L_{#t=this.#P.bind(this);#e=this.#R.bind(this);#i=this.#T.bind(this);#s=this.#A.bind(this);#a=null;#n=null;#o=null;#c=null;#u=null;#l=null;#h=null;#r=!1;#d=null;#g=null;#f=null;#y=null;#m=null;#p=null;#v=!1;constructor({container:t,color:n,elements:s,titleObj:r,modificationDate:o,contentsObj:c,richText:u,parent:d,rect:g,parentRect:m,open:y}){this.#n=t,this.#m=r,this.#o=c,this.#y=u,this.#l=d,this.#a=n,this.#f=g,this.#h=m,this.#u=s,this.#c=Hm.toDateObject(o),this.trigger=s.flatMap(v=>v.getElementsToTriggerPopup());for(const v of this.trigger)v.addEventListener("click",this.#s),v.addEventListener("mouseenter",this.#i),v.addEventListener("mouseleave",this.#e),v.classList.add("popupTriggerArea");for(const v of s)v.container?.addEventListener("keydown",this.#t);this.#n.hidden=!0,y&&this.#A()}render(){if(this.#d)return;const t=this.#d=document.createElement("div");if(t.className="popup",this.#a){const o=t.style.outlineColor=lt.makeHexColor(...this.#a);CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?t.style.backgroundColor=`color-mix(in srgb, ${o} 30%, white)`:t.style.backgroundColor=lt.makeHexColor(...this.#a.map(u=>Math.floor(.7*(255-u)+u)))}const n=document.createElement("span");n.className="header";const s=document.createElement("h1");if(n.append(s),{dir:s.dir,str:s.textContent}=this.#m,t.append(n),this.#c){const o=document.createElement("span");o.classList.add("popupDate"),o.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),o.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#c.valueOf()})),n.append(o)}const r=this.#_;if(r)iy.render({xfaHtml:r,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const o=this._formatContents(this.#o);t.append(o)}this.#n.append(t)}get#_(){const t=this.#y,n=this.#o;return t?.str&&(!n?.str||n.str===t.str)&&this.#y.html||null}get#x(){return this.#_?.attributes?.style?.fontSize||0}get#E(){return this.#_?.attributes?.style?.color||null}#w(t){const n=[],s={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:n}]}},r={style:{color:this.#E,fontSize:this.#x?`calc(${this.#x}px * var(--scale-factor))`:""}};for(const o of t.split(`
`))n.push({name:"span",value:o,attributes:r});return s}_formatContents({str:t,dir:n}){const s=document.createElement("p");s.classList.add("popupContent"),s.dir=n;const r=t.split(/(?:\r\n?|\n)/);for(let o=0,c=r.length;o<c;++o){const u=r[o];s.append(document.createTextNode(u)),o<c-1&&s.append(document.createElement("br"))}return s}#P(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&this.#r)&&this.#A()}updateEdited({rect:t,popupContent:n}){this.#p||={contentsObj:this.#o,richText:this.#y},t&&(this.#g=null),n&&(this.#y=this.#w(n),this.#o=null),this.#d?.remove(),this.#d=null}resetEdited(){this.#p&&({contentsObj:this.#o,richText:this.#y}=this.#p,this.#p=null,this.#d?.remove(),this.#d=null,this.#g=null)}#C(){if(this.#g!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:n,pageHeight:s,pageX:r,pageY:o}}}=this.#l;let c=!!this.#h,u=c?this.#h:this.#f;for(const A of this.#u)if(!u||lt.intersect(A.data.rect,u)!==null){u=A.data.rect,c=!0;break}const d=lt.normalizeRect([u[0],t[3]-u[1]+t[1],u[2],t[3]-u[3]+t[1]]),m=c?u[2]-u[0]+5:0,y=d[0]+m,v=d[1];this.#g=[100*(y-r)/n,100*(v-o)/s];const{style:_}=this.#n;_.left=`${this.#g[0]}%`,_.top=`${this.#g[1]}%`}#A(){this.#r=!this.#r,this.#r?(this.#T(),this.#n.addEventListener("click",this.#s),this.#n.addEventListener("keydown",this.#t)):(this.#R(),this.#n.removeEventListener("click",this.#s),this.#n.removeEventListener("keydown",this.#t))}#T(){this.#d||this.render(),this.isVisible?this.#r&&this.#n.classList.add("focused"):(this.#C(),this.#n.hidden=!1,this.#n.style.zIndex=parseInt(this.#n.style.zIndex)+1e3)}#R(){this.#n.classList.remove("focused"),!(this.#r||!this.isVisible)&&(this.#n.hidden=!0,this.#n.style.zIndex=parseInt(this.#n.style.zIndex)-1e3)}forceHide(){this.#v=this.isVisible,this.#v&&(this.#n.hidden=!0)}maybeShow(){this.#v&&(this.#d||this.#T(),this.#v=!1,this.#n.hidden=!1)}get isVisible(){return this.#n.hidden===!1}}class ay extends Zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=bt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const n of this.textContent){const s=document.createElement("span");s.textContent=n,t.append(s)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class k_ extends Zt{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const t=this.data,{width:n,height:s}=yn(t.rect),r=this.svgFactory.create(n,s,!0),o=this.#t=this.svgFactory.createElement("svg:line");return o.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),o.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),o.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),o.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class N_ extends Zt{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const t=this.data,{width:n,height:s}=yn(t.rect),r=this.svgFactory.create(n,s,!0),o=t.borderStyle.width,c=this.#t=this.svgFactory.createElement("svg:rect");return c.setAttribute("x",o/2),c.setAttribute("y",o/2),c.setAttribute("width",n-o),c.setAttribute("height",s-o),c.setAttribute("stroke-width",o||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),r.append(c),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class P_ extends Zt{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const t=this.data,{width:n,height:s}=yn(t.rect),r=this.svgFactory.create(n,s,!0),o=t.borderStyle.width,c=this.#t=this.svgFactory.createElement("svg:ellipse");return c.setAttribute("cx",n/2),c.setAttribute("cy",s/2),c.setAttribute("rx",n/2-o/2),c.setAttribute("ry",s/2-o/2),c.setAttribute("stroke-width",o||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),r.append(c),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class ry extends Zt{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:n,borderStyle:s,popupRef:r}}=this;if(!n)return this.container;const{width:o,height:c}=yn(t),u=this.svgFactory.create(o,c,!0);let d=[];for(let m=0,y=n.length;m<y;m+=2){const v=n[m]-t[0],_=t[3]-n[m+1];d.push(`${v},${_}`)}d=d.join(" ");const g=this.#t=this.svgFactory.createElement(this.svgElementName);return g.setAttribute("points",d),g.setAttribute("stroke-width",s.width||1),g.setAttribute("stroke","transparent"),g.setAttribute("fill","transparent"),u.append(g),this.container.append(u),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class F_ extends ry{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class j_ extends Zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class Lh extends Zt{#t=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?bt.HIGHLIGHT:bt.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,inkLists:n,borderStyle:s,popupRef:r}}=this,{width:o,height:c}=yn(t),u=this.svgFactory.create(o,c,!0);for(const d of n){let g=[];for(let y=0,v=d.length;y<v;y+=2){const _=d[y]-t[0],A=t[3]-d[y+1];g.push(`${_},${A}`)}g=g.join(" ");const m=this.svgFactory.createElement(this.svgElementName);this.#t.push(m),m.setAttribute("points",g),m.setAttribute("stroke-width",s.width||1),m.setAttribute("stroke","transparent"),m.setAttribute("fill","transparent"),u.append(m)}return!r&&this.hasPopupData&&this._createPopup(),this.container.append(u),this._editOnDoubleClick(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class ly extends Zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=bt.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class H_ extends Zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class z_ extends Zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class U_ extends Zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class oy extends Zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=bt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class B_ extends Zt{#t=null;constructor(t){super(t,{isRenderable:!0});const{file:n}=this.data;this.filename=n.filename,this.content=n.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:n}=this;let s;n.hasAppearance||n.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),s.addEventListener("dblclick",this.#e.bind(this)),this.#t=s;const{isMac:r}=je.platform;return t.addEventListener("keydown",o=>{o.key==="Enter"&&(r?o.metaKey:o.ctrlKey)&&this.#e()}),!n.popupRef&&this.hasPopupData?this._createPopup():s.classList.add("popupTriggerArea"),t.append(s),t}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}let I_=class{#t=null;#e=null;#i=new Map;#s=null;constructor({div:t,accessibilityManager:n,annotationCanvasMap:s,annotationEditorUIManager:r,page:o,viewport:c,structTreeLayer:u}){this.div=t,this.#t=n,this.#e=s,this.#s=u||null,this.page=o,this.viewport=c,this.zIndex=0,this._annotationEditorUIManager=r}hasEditableAnnotations(){return this.#i.size>0}async#a(t,n){const s=t.firstChild||t,r=s.id=`${vh}${n}`,o=await this.#s?.getAriaAttributes(r);if(o)for(const[c,u]of o)s.setAttribute(c,u);this.div.append(t),this.#t?.moveElementInDOM(this.div,t,s,!1)}async render(t){const{annotations:n}=t,s=this.div;_s(s,this.viewport);const r=new Map,o={data:null,layer:s,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new Oh,annotationStorage:t.annotationStorage||new wh,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const c of n){if(c.noHTML)continue;const u=c.annotationType===re.POPUP;if(u){const m=r.get(c.id);if(!m)continue;o.elements=m}else{const{width:m,height:y}=yn(c.rect);if(m<=0||y<=0)continue}o.data=c;const d=T_.create(o);if(!d.isRenderable)continue;if(!u&&c.popupRef){const m=r.get(c.popupRef);m?m.push(d):r.set(c.popupRef,[d])}const g=d.render();c.hidden&&(g.style.visibility="hidden"),await this.#a(g,c.id),d._isEditable&&(this.#i.set(d.data.id,d),this._annotationEditorUIManager?.renderAnnotationElement(d))}this.#n()}update({viewport:t}){const n=this.div;this.viewport=t,_s(n,{rotation:t.rotation}),this.#n(),n.hidden=!1}#n(){if(!this.#e)return;const t=this.div;for(const[n,s]of this.#e){const r=t.querySelector(`[data-annotation-id="${n}"]`);if(!r)continue;s.className="annotationContent";const{firstChild:o}=r;o?o.nodeName==="CANVAS"?o.replaceWith(s):o.classList.contains("annotationContent")?o.after(s):o.before(s):r.append(s)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#i.values())}getEditableAnnotation(t){return this.#i.get(t)}};const oo=/\r\n?|\n/g;class le extends pt{#t;#e="";#i=`${this.id}-editor`;#s=null;#a;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const t=le.prototype,n=o=>o.isEmpty(),s=Xn.TRANSLATE_SMALL,r=Xn.TRANSLATE_BIG;return xt(this,"_keyboardManager",new zr([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:n}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[s,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[r,0],checker:n}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:n}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,s],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,r],checker:n}]]))}static _type="freetext";static _editorType=bt.FREETEXT;constructor(t){super({...t,name:"freeTextEditor"}),this.#t=t.color||le._defaultColor||pt._defaultLineColor,this.#a=t.fontSize||le._defaultFontSize}static initialize(t,n){pt.initialize(t,n);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,n){switch(t){case mt.FREETEXT_SIZE:le._defaultFontSize=n;break;case mt.FREETEXT_COLOR:le._defaultColor=n;break}}updateParams(t,n){switch(t){case mt.FREETEXT_SIZE:this.#n(n);break;case mt.FREETEXT_COLOR:this.#o(n);break}}static get defaultPropertiesToUpdate(){return[[mt.FREETEXT_SIZE,le._defaultFontSize],[mt.FREETEXT_COLOR,le._defaultColor||pt._defaultLineColor]]}get propertiesToUpdate(){return[[mt.FREETEXT_SIZE,this.#a],[mt.FREETEXT_COLOR,this.#t]]}#n(t){const n=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--scale-factor))`,this.translate(0,-(r-this.#a)*this.parentScale),this.#a=r,this.#u()},s=this.#a;this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:mt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#o(t){const n=r=>{this.#t=this.editorDiv.style.color=r},s=this.#t;this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:mt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,n){this._uiManager.translateSelectedEditors(t,n,!0)}getInitialTranslation(){const t=this.parentScale;return[-le._internalPadding*t,-(le._internalPadding+this.#a)*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(bt.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#s=new AbortController;const t=this._uiManager.combinedSignal(this.#s);this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t})}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#i),this._isDraggable=!0,this.#s?.abort(),this.#s=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#c(){const t=[];this.editorDiv.normalize();let n=null;for(const s of this.editorDiv.childNodes)n?.nodeType===Node.TEXT_NODE&&s.nodeName==="BR"||(t.push(le.#l(s)),n=s);return t.join(`
`)}#u(){const[t,n]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:r,div:o}=this,c=o.style.display,u=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",r.div.append(this.div),s=o.getBoundingClientRect(),o.remove(),o.style.display=c,o.classList.toggle("hidden",u)}this.rotation%180===this.parentRotation%180?(this.width=s.width/t,this.height=s.height/n):(this.width=s.height/t,this.height=s.width/n),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=this.#e,n=this.#e=this.#c().trimEnd();if(t===n)return;const s=r=>{if(this.#e=r,!r){this.remove();return}this.#h(),this._uiManager.rebuild(this),this.#u()};this.addCommands({cmd:()=>{s(n)},undo:()=>{s(t)},mustExec:!1}),this.#u()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(t){this.enterInEditMode()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){le._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let t,n;this.width&&(t=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#i),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${this.#a}px * var(--scale-factor))`,s.color=this.#t,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),To(this,this.div,["dblclick","keydown"]),this.width){const[r,o]=this.parentDimensions;if(this.annotationElementId){const{position:c}=this._initialData;let[u,d]=this.getInitialTranslation();[u,d]=this.pageTranslationToScreen(u,d);const[g,m]=this.pageDimensions,[y,v]=this.pageTranslation;let _,A;switch(this.rotation){case 0:_=t+(c[0]-y)/g,A=n+this.height-(c[1]-v)/m;break;case 90:_=t+(c[0]-y)/g,A=n-(c[1]-v)/m,[u,d]=[d,-u];break;case 180:_=t-this.width+(c[0]-y)/g,A=n-(c[1]-v)/m,[u,d]=[-u,-d];break;case 270:_=t+(c[0]-y-this.height*m)/g,A=n+(c[1]-v-this.width*g)/m,[u,d]=[-d,u];break}this.setAt(_*r,A*o,u,d)}else this.setAt(t*r,n*o,this.width*r,this.height*o);this.#h(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#l(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(oo,"")}editorDivPaste(t){const n=t.clipboardData||window.clipboardData,{types:s}=n;if(s.length===1&&s[0]==="text/plain")return;t.preventDefault();const r=le.#d(n.getData("text")||"").replaceAll(oo,`
`);if(!r)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const c=o.getRangeAt(0);if(!r.includes(`
`)){c.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:u,startOffset:d}=c,g=[],m=[];if(u.nodeType===Node.TEXT_NODE){const _=u.parentElement;if(m.push(u.nodeValue.slice(d).replaceAll(oo,"")),_!==this.editorDiv){let A=g;for(const E of this.editorDiv.childNodes){if(E===_){A=m;continue}A.push(le.#l(E))}}g.push(u.nodeValue.slice(0,d).replaceAll(oo,""))}else if(u===this.editorDiv){let _=g,A=0;for(const E of this.editorDiv.childNodes)A++===d&&(_=m),_.push(le.#l(E))}this.#e=`${g.join(`
`)}${r}${m.join(`
`)}`,this.#h();const y=new Range;let v=g.reduce((_,A)=>_+A.length,0);for(const{firstChild:_}of this.editorDiv.childNodes)if(_.nodeType===Node.TEXT_NODE){const A=_.nodeValue.length;if(v<=A){y.setStart(_,v),y.setEnd(_,v);break}v-=A}o.removeAllRanges(),o.addRange(y)}#h(){if(this.editorDiv.replaceChildren(),!!this.#e)for(const t of this.#e.split(`
`)){const n=document.createElement("div");n.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(n)}}#r(){return this.#e.replaceAll(""," ")}static#d(t){return t.replaceAll(" ","")}get contentDiv(){return this.editorDiv}static async deserialize(t,n,s){let r=null;if(t instanceof ay){const{data:{defaultAppearanceData:{fontSize:c,fontColor:u},rect:d,rotation:g,id:m,popupRef:y},textContent:v,textPosition:_,parent:{page:{pageNumber:A}}}=t;if(!v||v.length===0)return null;r=t={annotationType:bt.FREETEXT,color:Array.from(u),fontSize:c,value:v.join(`
`),position:_,pageIndex:A-1,rect:d.slice(0),rotation:g,id:m,deleted:!1,popupRef:y}}const o=await super.deserialize(t,n,s);return o.#a=t.fontSize,o.#t=lt.makeHexColor(...t.color),o.#e=le.#d(t.value),o.annotationElementId=t.id||null,o._initialData=r,o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=le._internalPadding*this.parentScale,s=this.getRect(n,n),r=pt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#t),o={annotationType:bt.FREETEXT,color:r,fontSize:this.#a,value:this.#r(),pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?o:this.annotationElementId&&!this.#g(o)?null:(o.id=this.annotationElementId,o)}#g(t){const{value:n,fontSize:s,color:r,pageIndex:o}=this._initialData;return this._hasBeenMoved||t.value!==n||t.fontSize!==s||t.color.some((c,u)=>c!==r[u])||t.pageIndex!==o}renderAnnotationElement(t){const n=super.renderAnnotationElement(t);if(this.deleted)return n;const{style:s}=n;s.fontSize=`calc(${this.#a}px * var(--scale-factor))`,s.color=this.#t,n.replaceChildren();for(const o of this.#e.split(`
`)){const c=document.createElement("div");c.append(o?document.createTextNode(o):document.createElement("br")),n.append(c)}const r=le._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(r,r),popupContent:this.#e}),n}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}}let cy=class{toSVGPath(){zt("Abstract method `toSVGPath` must be implemented.")}get box(){zt("Abstract getter `box` must be implemented.")}serialize(t,n){zt("Abstract method `serialize` must be implemented.")}get classNamesForDrawing(){zt("Abstract getter `classNamesForDrawing` must be implemented.")}get classNamesForOutlining(){zt("Abstract getter `classNamesForOutlining` must be implemented.")}get mustRemoveSelfIntersections(){return!1}};class ys{#t;#e=[];#i;#s;#a=[];#n=new Float64Array(18);#o;#c;#u;#l;#h;#r;#d=[];static#g=8;static#f=2;static#y=ys.#g+ys.#f;constructor({x:t,y:n},s,r,o,c,u=0){this.#t=s,this.#r=o*r,this.#s=c,this.#n.set([NaN,NaN,NaN,NaN,t,n],6),this.#i=u,this.#l=ys.#g*r,this.#u=ys.#y*r,this.#h=r,this.#d.push(t,n)}isEmpty(){return isNaN(this.#n[8])}#m(){const t=this.#n.subarray(4,6),n=this.#n.subarray(16,18),[s,r,o,c]=this.#t;return[(this.#o+(t[0]-n[0])/2-s)/o,(this.#c+(t[1]-n[1])/2-r)/c,(this.#o+(n[0]-t[0])/2-s)/o,(this.#c+(n[1]-t[1])/2-r)/c]}add({x:t,y:n}){this.#o=t,this.#c=n;const[s,r,o,c]=this.#t;let[u,d,g,m]=this.#n.subarray(8,12);const y=t-g,v=n-m,_=Math.hypot(y,v);if(_<this.#u)return!1;const A=_-this.#l,E=A/_,w=E*y,T=E*v;let M=u,C=d;u=g,d=m,g+=w,m+=T,this.#d?.push(t,n);const O=-T/A,N=w/A,U=O*this.#r,q=N*this.#r;return this.#n.set(this.#n.subarray(2,8),0),this.#n.set([g+U,m+q],4),this.#n.set(this.#n.subarray(14,18),12),this.#n.set([g-U,m-q],16),isNaN(this.#n[6])?(this.#a.length===0&&(this.#n.set([u+U,d+q],2),this.#a.push(NaN,NaN,NaN,NaN,(u+U-s)/o,(d+q-r)/c),this.#n.set([u-U,d-q],14),this.#e.push(NaN,NaN,NaN,NaN,(u-U-s)/o,(d-q-r)/c)),this.#n.set([M,C,u,d,g,m],6),!this.isEmpty()):(this.#n.set([M,C,u,d,g,m],6),Math.abs(Math.atan2(C-d,M-u)-Math.atan2(T,w))<Math.PI/2?([u,d,g,m]=this.#n.subarray(2,6),this.#a.push(NaN,NaN,NaN,NaN,((u+g)/2-s)/o,((d+m)/2-r)/c),[u,d,M,C]=this.#n.subarray(14,18),this.#e.push(NaN,NaN,NaN,NaN,((M+u)/2-s)/o,((C+d)/2-r)/c),!0):([M,C,u,d,g,m]=this.#n.subarray(0,6),this.#a.push(((M+5*u)/6-s)/o,((C+5*d)/6-r)/c,((5*u+g)/6-s)/o,((5*d+m)/6-r)/c,((u+g)/2-s)/o,((d+m)/2-r)/c),[g,m,u,d,M,C]=this.#n.subarray(12,18),this.#e.push(((M+5*u)/6-s)/o,((C+5*d)/6-r)/c,((5*u+g)/6-s)/o,((5*d+m)/6-r)/c,((u+g)/2-s)/o,((d+m)/2-r)/c),!0))}toSVGPath(){if(this.isEmpty())return"";const t=this.#a,n=this.#e;if(isNaN(this.#n[6])&&!this.isEmpty())return this.#p();const s=[];s.push(`M${t[4]} ${t[5]}`);for(let r=6;r<t.length;r+=6)isNaN(t[r])?s.push(`L${t[r+4]} ${t[r+5]}`):s.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);this.#_(s);for(let r=n.length-6;r>=6;r-=6)isNaN(n[r])?s.push(`L${n[r+4]} ${n[r+5]}`):s.push(`C${n[r]} ${n[r+1]} ${n[r+2]} ${n[r+3]} ${n[r+4]} ${n[r+5]}`);return this.#v(s),s.join(" ")}#p(){const[t,n,s,r]=this.#t,[o,c,u,d]=this.#m();return`M${(this.#n[2]-t)/s} ${(this.#n[3]-n)/r} L${(this.#n[4]-t)/s} ${(this.#n[5]-n)/r} L${o} ${c} L${u} ${d} L${(this.#n[16]-t)/s} ${(this.#n[17]-n)/r} L${(this.#n[14]-t)/s} ${(this.#n[15]-n)/r} Z`}#v(t){const n=this.#e;t.push(`L${n[4]} ${n[5]} Z`)}#_(t){const[n,s,r,o]=this.#t,c=this.#n.subarray(4,6),u=this.#n.subarray(16,18),[d,g,m,y]=this.#m();t.push(`L${(c[0]-n)/r} ${(c[1]-s)/o} L${d} ${g} L${m} ${y} L${(u[0]-n)/r} ${(u[1]-s)/o}`)}newFreeDrawOutline(t,n,s,r,o,c){return new uy(t,n,s,r,o,c)}getOutlines(){const t=this.#a,n=this.#e,s=this.#n,[r,o,c,u]=this.#t,d=new Float64Array((this.#d?.length??0)+2);for(let y=0,v=d.length-2;y<v;y+=2)d[y]=(this.#d[y]-r)/c,d[y+1]=(this.#d[y+1]-o)/u;if(d[d.length-2]=(this.#o-r)/c,d[d.length-1]=(this.#c-o)/u,isNaN(s[6])&&!this.isEmpty())return this.#x(d);const g=new Float64Array(this.#a.length+24+this.#e.length);let m=t.length;for(let y=0;y<m;y+=2){if(isNaN(t[y])){g[y]=g[y+1]=NaN;continue}g[y]=t[y],g[y+1]=t[y+1]}m=this.#w(g,m);for(let y=n.length-6;y>=6;y-=6)for(let v=0;v<6;v+=2){if(isNaN(n[y+v])){g[m]=g[m+1]=NaN,m+=2;continue}g[m]=n[y+v],g[m+1]=n[y+v+1],m+=2}return this.#E(g,m),this.newFreeDrawOutline(g,d,this.#t,this.#h,this.#i,this.#s)}#x(t){const n=this.#n,[s,r,o,c]=this.#t,[u,d,g,m]=this.#m(),y=new Float64Array(36);return y.set([NaN,NaN,NaN,NaN,(n[2]-s)/o,(n[3]-r)/c,NaN,NaN,NaN,NaN,(n[4]-s)/o,(n[5]-r)/c,NaN,NaN,NaN,NaN,u,d,NaN,NaN,NaN,NaN,g,m,NaN,NaN,NaN,NaN,(n[16]-s)/o,(n[17]-r)/c,NaN,NaN,NaN,NaN,(n[14]-s)/o,(n[15]-r)/c],0),this.newFreeDrawOutline(y,t,this.#t,this.#h,this.#i,this.#s)}#E(t,n){const s=this.#e;return t.set([NaN,NaN,NaN,NaN,s[4],s[5]],n),n+=6}#w(t,n){const s=this.#n.subarray(4,6),r=this.#n.subarray(16,18),[o,c,u,d]=this.#t,[g,m,y,v]=this.#m();return t.set([NaN,NaN,NaN,NaN,(s[0]-o)/u,(s[1]-c)/d,NaN,NaN,NaN,NaN,g,m,NaN,NaN,NaN,NaN,y,v,NaN,NaN,NaN,NaN,(r[0]-o)/u,(r[1]-c)/d],n),n+=24}}class uy extends cy{#t;#e=null;#i;#s;#a;#n;#o;constructor(t,n,s,r,o,c){super(),this.#o=t,this.#a=n,this.#t=s,this.#n=r,this.#i=o,this.#s=c,this.#l(c);const{x:u,y:d,width:g,height:m}=this.#e;for(let y=0,v=t.length;y<v;y+=2)t[y]=(t[y]-u)/g,t[y+1]=(t[y+1]-d)/m;for(let y=0,v=n.length;y<v;y+=2)n[y]=(n[y]-u)/g,n[y+1]=(n[y+1]-d)/m}toSVGPath(){const t=[`M${this.#o[4]} ${this.#o[5]}`];for(let n=6,s=this.#o.length;n<s;n+=6){if(isNaN(this.#o[n])){t.push(`L${this.#o[n+4]} ${this.#o[n+5]}`);continue}t.push(`C${this.#o[n]} ${this.#o[n+1]} ${this.#o[n+2]} ${this.#o[n+3]} ${this.#o[n+4]} ${this.#o[n+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,n,s,r],o){const c=s-t,u=r-n;let d,g;switch(o){case 0:d=this.#c(this.#o,t,r,c,-u),g=this.#c(this.#a,t,r,c,-u);break;case 90:d=this.#u(this.#o,t,n,c,u),g=this.#u(this.#a,t,n,c,u);break;case 180:d=this.#c(this.#o,s,n,-c,u),g=this.#c(this.#a,s,n,-c,u);break;case 270:d=this.#u(this.#o,s,r,-c,-u),g=this.#u(this.#a,s,r,-c,-u);break}return{outline:Array.from(d),points:[Array.from(g)]}}#c(t,n,s,r,o){const c=new Float64Array(t.length);for(let u=0,d=t.length;u<d;u+=2)c[u]=n+t[u]*r,c[u+1]=s+t[u+1]*o;return c}#u(t,n,s,r,o){const c=new Float64Array(t.length);for(let u=0,d=t.length;u<d;u+=2)c[u]=n+t[u+1]*r,c[u+1]=s+t[u]*o;return c}#l(t){const n=this.#o;let s=n[4],r=n[5],o=s,c=r,u=s,d=r,g=s,m=r;const y=t?Math.max:Math.min;for(let w=6,T=n.length;w<T;w+=6){if(isNaN(n[w]))o=Math.min(o,n[w+4]),c=Math.min(c,n[w+5]),u=Math.max(u,n[w+4]),d=Math.max(d,n[w+5]),m<n[w+5]?(g=n[w+4],m=n[w+5]):m===n[w+5]&&(g=y(g,n[w+4]));else{const M=lt.bezierBoundingBox(s,r,...n.slice(w,w+6));o=Math.min(o,M[0]),c=Math.min(c,M[1]),u=Math.max(u,M[2]),d=Math.max(d,M[3]),m<M[3]?(g=M[2],m=M[3]):m===M[3]&&(g=y(g,M[2]))}s=n[w+4],r=n[w+5]}const v=o-this.#i,_=c-this.#i,A=u-o+2*this.#i,E=d-c+2*this.#i;this.#e={x:v,y:_,width:A,height:E,lastPoint:[g,m]}}get box(){return this.#e}newOutliner(t,n,s,r,o,c=0){return new ys(t,n,s,r,o,c)}getNewOutline(t,n){const{x:s,y:r,width:o,height:c}=this.#e,[u,d,g,m]=this.#t,y=o*g,v=c*m,_=s*g+u,A=r*m+d,E=this.newOutliner({x:this.#a[0]*y+_,y:this.#a[1]*v+A},this.#t,this.#n,t,this.#s,n??this.#i);for(let w=2;w<this.#a.length;w+=2)E.add({x:this.#a[w]*y+_,y:this.#a[w+1]*v+A});return E.getOutlines()}get mustRemoveSelfIntersections(){return!0}}class Jp{#t;#e=[];#i=[];constructor(t,n=0,s=0,r=!0){let o=1/0,c=-1/0,u=1/0,d=-1/0;const g=10**-4;for(const{x:w,y:T,width:M,height:C}of t){const O=Math.floor((w-n)/g)*g,N=Math.ceil((w+M+n)/g)*g,U=Math.floor((T-n)/g)*g,q=Math.ceil((T+C+n)/g)*g,$=[O,U,q,!0],B=[N,U,q,!1];this.#e.push($,B),o=Math.min(o,O),c=Math.max(c,N),u=Math.min(u,U),d=Math.max(d,q)}const m=c-o+2*s,y=d-u+2*s,v=o-s,_=u-s,A=this.#e.at(r?-1:-2),E=[A[0],A[2]];for(const w of this.#e){const[T,M,C]=w;w[0]=(T-v)/m,w[1]=(M-_)/y,w[2]=(C-_)/y}this.#t={x:v,y:_,width:m,height:y,lastPoint:E}}getOutlines(){this.#e.sort((n,s)=>n[0]-s[0]||n[1]-s[1]||n[2]-s[2]);const t=[];for(const n of this.#e)n[3]?(t.push(...this.#c(n)),this.#n(n)):(this.#o(n),t.push(...this.#c(n)));return this.#s(t)}#s(t){const n=[],s=new Set;for(const c of t){const[u,d,g]=c;n.push([u,d,c],[u,g,c])}n.sort((c,u)=>c[1]-u[1]||c[0]-u[0]);for(let c=0,u=n.length;c<u;c+=2){const d=n[c][2],g=n[c+1][2];d.push(g),g.push(d),s.add(d),s.add(g)}const r=[];let o;for(;s.size>0;){const c=s.values().next().value;let[u,d,g,m,y]=c;s.delete(c);let v=u,_=d;for(o=[u,g],r.push(o);;){let A;if(s.has(m))A=m;else if(s.has(y))A=y;else break;s.delete(A),[u,d,g,m,y]=A,v!==u&&(o.push(v,_,u,_===d?d:g),v=u),_=_===d?g:d}o.push(v,_)}return new q_(r,this.#t)}#a(t){const n=this.#i;let s=0,r=n.length-1;for(;s<=r;){const o=s+r>>1,c=n[o][0];if(c===t)return o;c<t?s=o+1:r=o-1}return r+1}#n([,t,n]){const s=this.#a(t);this.#i.splice(s,0,[t,n])}#o([,t,n]){const s=this.#a(t);for(let r=s;r<this.#i.length;r++){const[o,c]=this.#i[r];if(o!==t)break;if(o===t&&c===n){this.#i.splice(r,1);return}}for(let r=s-1;r>=0;r--){const[o,c]=this.#i[r];if(o!==t)break;if(o===t&&c===n){this.#i.splice(r,1);return}}}#c(t){const[n,s,r]=t,o=[[n,s,r]],c=this.#a(r);for(let u=0;u<c;u++){const[d,g]=this.#i[u];for(let m=0,y=o.length;m<y;m++){const[,v,_]=o[m];if(!(g<=v||_<=d)){if(v>=d){if(_>g)o[m][1]=g;else{if(y===1)return[];o.splice(m,1),m--,y--}continue}o[m][2]=d,_>g&&o.push([n,g,_])}}}return o}}class q_ extends cy{#t;#e;constructor(t,n){super(),this.#e=t,this.#t=n}toSVGPath(){const t=[];for(const n of this.#e){let[s,r]=n;t.push(`M${s} ${r}`);for(let o=2;o<n.length;o+=2){const c=n[o],u=n[o+1];c===s?(t.push(`V${u}`),r=u):u===r&&(t.push(`H${c}`),s=c)}t.push("Z")}return t.join(" ")}serialize([t,n,s,r],o){const c=[],u=s-t,d=r-n;for(const g of this.#e){const m=new Array(g.length);for(let y=0;y<g.length;y+=2)m[y]=t+g[y]*u,m[y+1]=r-g[y+1]*d;c.push(m)}return c}get box(){return this.#t}get classNamesForDrawing(){return["highlight"]}get classNamesForOutlining(){return["highlightOutline"]}}class ph extends ys{newFreeDrawOutline(t,n,s,r,o,c){return new G_(t,n,s,r,o,c)}get classNamesForDrawing(){return["highlight","free"]}}class G_ extends uy{get classNamesForDrawing(){return["highlight","free"]}get classNamesForOutlining(){return["highlightOutline","free"]}newOutliner(t,n,s,r,o,c=0){return new ph(t,n,s,r,o,c)}}class Ei{#t=null;#e=null;#i;#s=null;#a=!1;#n=!1;#o=null;#c;#u=null;#l=null;#h;static#r=null;static get _keyboardManager(){return xt(this,"_keyboardManager",new zr([[["Escape","mac+Escape"],Ei.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Ei.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Ei.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Ei.prototype._moveToPrevious],[["Home","mac+Home"],Ei.prototype._moveToBeginning],[["End","mac+End"],Ei.prototype._moveToEnd]]))}constructor({editor:t=null,uiManager:n=null}){t?(this.#n=!1,this.#h=mt.HIGHLIGHT_COLOR,this.#o=t):(this.#n=!0,this.#h=mt.HIGHLIGHT_DEFAULT_COLOR),this.#l=t?._uiManager||n,this.#c=this.#l._eventBus,this.#i=t?.color||this.#l?.highlightColors.values().next().value||"#FFFF98",Ei.#r||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const t=this.#t=document.createElement("button");t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.setAttribute("aria-haspopup",!0);const n=this.#l._signal;t.addEventListener("click",this.#y.bind(this),{signal:n}),t.addEventListener("keydown",this.#f.bind(this),{signal:n});const s=this.#e=document.createElement("span");return s.className="swatch",s.setAttribute("aria-hidden",!0),s.style.backgroundColor=this.#i,t.append(s),t}renderMainDropdown(){const t=this.#s=this.#d();return t.setAttribute("aria-orientation","horizontal"),t.setAttribute("aria-labelledby","highlightColorPickerLabel"),t}#d(){const t=document.createElement("div"),n=this.#l._signal;t.addEventListener("contextmenu",wi,{signal:n}),t.className="dropdown",t.role="listbox",t.setAttribute("aria-multiselectable",!1),t.setAttribute("aria-orientation","vertical"),t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[s,r]of this.#l.highlightColors){const o=document.createElement("button");o.tabIndex="0",o.role="option",o.setAttribute("data-color",r),o.title=s,o.setAttribute("data-l10n-id",Ei.#r[s]);const c=document.createElement("span");o.append(c),c.className="swatch",c.style.backgroundColor=r,o.setAttribute("aria-selected",r===this.#i),o.addEventListener("click",this.#g.bind(this,r),{signal:n}),t.append(o)}return t.addEventListener("keydown",this.#f.bind(this),{signal:n}),t}#g(t,n){n.stopPropagation(),this.#c.dispatch("switchannotationeditorparams",{source:this,type:this.#h,value:t})}_colorSelectFromKeyboard(t){if(t.target===this.#t){this.#y(t);return}const n=t.target.getAttribute("data-color");n&&this.#g(n,t)}_moveToNext(t){if(!this.#p){this.#y(t);return}if(t.target===this.#t){this.#s.firstChild?.focus();return}t.target.nextSibling?.focus()}_moveToPrevious(t){if(t.target===this.#s?.firstChild||t.target===this.#t){this.#p&&this._hideDropdownFromKeyboard();return}this.#p||this.#y(t),t.target.previousSibling?.focus()}_moveToBeginning(t){if(!this.#p){this.#y(t);return}this.#s.firstChild?.focus()}_moveToEnd(t){if(!this.#p){this.#y(t);return}this.#s.lastChild?.focus()}#f(t){Ei._keyboardManager.exec(this,t)}#y(t){if(this.#p){this.hideDropdown();return}if(this.#a=t.detail===0,this.#u||(this.#u=new AbortController,window.addEventListener("pointerdown",this.#m.bind(this),{signal:this.#l.combinedSignal(this.#u)})),this.#s){this.#s.classList.remove("hidden");return}const n=this.#s=this.#d();this.#t.append(n)}#m(t){this.#s?.contains(t.target)||this.hideDropdown()}hideDropdown(){this.#s?.classList.add("hidden"),this.#u?.abort(),this.#u=null}get#p(){return this.#s&&!this.#s.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#n){if(!this.#p){this.#o?.unselect();return}this.hideDropdown(),this.#t.focus({preventScroll:!0,focusVisible:this.#a})}}updateColor(t){if(this.#e&&(this.#e.style.backgroundColor=t),!this.#s)return;const n=this.#l.highlightColors.values();for(const s of this.#s.children)s.setAttribute("aria-selected",n.next().value===t)}destroy(){this.#t?.remove(),this.#t=null,this.#e=null,this.#s?.remove(),this.#s=null}}class Qt extends pt{#t=null;#e=0;#i;#s=null;#a=null;#n=null;#o=null;#c=0;#u=null;#l=null;#h=null;#r=!1;#d=null;#g;#f=null;#y="";#m;#p="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=bt.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const t=Qt.prototype;return xt(this,"_keyboardManager",new zr([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super({...t,name:"highlightEditor"}),this.color=t.color||Qt._defaultColor,this.#m=t.thickness||Qt._defaultThickness,this.#g=t.opacity||Qt._defaultOpacity,this.#i=t.boxes||null,this.#p=t.methodOfCreation||"",this.#y=t.text||"",this._isDraggable=!1,t.highlightId>-1?(this.#r=!0,this.#_(t),this.#C()):this.#i&&(this.#t=t.anchorNode,this.#e=t.anchorOffset,this.#o=t.focusNode,this.#c=t.focusOffset,this.#v(),this.#C(),this.rotate(this.rotation))}get telemetryInitialData(){return{action:"added",type:this.#r?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:this.#m,methodOfCreation:this.#p}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}#v(){const t=new Jp(this.#i,.001);this.#l=t.getOutlines(),{x:this.x,y:this.y,width:this.width,height:this.height}=this.#l.box;const n=new Jp(this.#i,.0025,.001,this._uiManager.direction==="ltr");this.#n=n.getOutlines();const{lastPoint:s}=this.#n.box;this.#d=[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height]}#_({highlightOutlines:t,highlightId:n,clipPathId:s}){this.#l=t;const r=1.5;if(this.#n=t.getNewOutline(this.#m/2+r,.0025),n>=0)this.#h=n,this.#s=s,this.parent.drawLayer.finalizeLine(n,t),this.#f=this.parent.drawLayer.drawOutline(this.#n);else if(this.parent){const m=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(this.#h,t),this.parent.drawLayer.updateBox(this.#h,Qt.#A(this.#l.box,(m-this.rotation+360)%360)),this.parent.drawLayer.updateLine(this.#f,this.#n),this.parent.drawLayer.updateBox(this.#f,Qt.#A(this.#n.box,m))}const{x:o,y:c,width:u,height:d}=t.box;switch(this.rotation){case 0:this.x=o,this.y=c,this.width=u,this.height=d;break;case 90:{const[m,y]=this.parentDimensions;this.x=c,this.y=1-o,this.width=u*y/m,this.height=d*m/y;break}case 180:this.x=1-o,this.y=1-c,this.width=u,this.height=d;break;case 270:{const[m,y]=this.parentDimensions;this.x=1-c,this.y=o,this.width=u*y/m,this.height=d*m/y;break}}const{lastPoint:g}=this.#n.box;this.#d=[(g[0]-o)/u,(g[1]-c)/d]}static initialize(t,n){pt.initialize(t,n),Qt._defaultColor||=n.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(t,n){switch(t){case mt.HIGHLIGHT_DEFAULT_COLOR:Qt._defaultColor=n;break;case mt.HIGHLIGHT_THICKNESS:Qt._defaultThickness=n;break}}translateInPage(t,n){}get toolbarPosition(){return this.#d}updateParams(t,n){switch(t){case mt.HIGHLIGHT_COLOR:this.#x(n);break;case mt.HIGHLIGHT_THICKNESS:this.#E(n);break}}static get defaultPropertiesToUpdate(){return[[mt.HIGHLIGHT_DEFAULT_COLOR,Qt._defaultColor],[mt.HIGHLIGHT_THICKNESS,Qt._defaultThickness]]}get propertiesToUpdate(){return[[mt.HIGHLIGHT_COLOR,this.color||Qt._defaultColor],[mt.HIGHLIGHT_THICKNESS,this.#m||Qt._defaultThickness],[mt.HIGHLIGHT_FREE,this.#r]]}#x(t){const n=(o,c)=>{this.color=o,this.parent?.drawLayer.changeColor(this.#h,o),this.#a?.updateColor(o),this.#g=c,this.parent?.drawLayer.changeOpacity(this.#h,c)},s=this.color,r=this.#g;this.addCommands({cmd:n.bind(this,t,Qt._defaultOpacity),undo:n.bind(this,s,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:mt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)}#E(t){const n=this.#m,s=r=>{this.#m=r,this.#w(r)};this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:mt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}async addEditToolbar(){const t=await super.addEditToolbar();return t?(this._uiManager.highlightColors&&(this.#a=new Ei({editor:this}),t.addColorPicker(this.#a)),t):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#M())}getBaseTranslation(){return[0,0]}getRect(t,n){return super.getRect(t,n,this.#M())}onceAdded(){this.annotationElementId||this.parent.addUndoableEditor(this),this.div.focus()}remove(){this.#P(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#C(),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let n=!1;this.parent&&!t?this.#P():t&&(this.#C(t),n=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),n&&this.select()}#w(t){if(!this.#r)return;this.#_({highlightOutlines:this.#l.getNewOutline(t/2)}),this.fixAndSetPosition();const[n,s]=this.parentDimensions;this.setDims(this.width*n,this.height*s)}#P(){this.#h===null||!this.parent||(this.parent.drawLayer.remove(this.#h),this.#h=null,this.parent.drawLayer.remove(this.#f),this.#f=null)}#C(t=this.parent){this.#h===null&&({id:this.#h,clipPathId:this.#s}=t.drawLayer.draw(this.#l,this.color,this.#g),this.#f=t.drawLayer.drawOutline(this.#n),this.#u&&(this.#u.style.clipPath=this.#s))}static#A({x:t,y:n,width:s,height:r},o){switch(o){case 90:return{x:1-n-r,y:t,width:r,height:s};case 180:return{x:1-t-s,y:1-n-r,width:s,height:r};case 270:return{x:n,y:1-t-s,width:r,height:s}}return{x:t,y:n,width:s,height:r}}rotate(t){const{drawLayer:n}=this.parent;let s;this.#r?(t=(t-this.rotation+360)%360,s=Qt.#A(this.#l.box,t)):s=Qt.#A(this,t),n.rotate(this.#h,t),n.rotate(this.#f,t),n.updateBox(this.#h,s),n.updateBox(this.#f,Qt.#A(this.#n.box,t))}render(){if(this.div)return this.div;const t=super.render();this.#y&&(t.setAttribute("aria-label",this.#y),t.setAttribute("role","mark")),this.#r?t.classList.add("free"):this.div.addEventListener("keydown",this.#T.bind(this),{signal:this._uiManager._signal});const n=this.#u=document.createElement("div");t.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=this.#s;const[s,r]=this.parentDimensions;return this.setDims(this.width*s,this.height*r),To(this,this.#u,["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent.drawLayer.addClass(this.#f,"hovered")}pointerleave(){this.isSelected||this.parent.drawLayer.removeClass(this.#f,"hovered")}#T(t){Qt._keyboardManager.exec(this,t)}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:this.#R(!0);break;case 1:case 3:this.#R(!1);break}}#R(t){if(!this.#t)return;const n=window.getSelection();t?n.setPosition(this.#t,this.#e):n.setPosition(this.#o,this.#c)}select(){super.select(),this.#f&&(this.parent?.drawLayer.removeClass(this.#f,"hovered"),this.parent?.drawLayer.addClass(this.#f,"selected"))}unselect(){super.unselect(),this.#f&&(this.parent?.drawLayer.removeClass(this.#f,"selected"),this.#r||this.#R(!1))}get _mustFixPosition(){return!this.#r}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.show(this.#h,t),this.parent.drawLayer.show(this.#f,t))}#M(){return this.#r?this.rotation:0}#L(){if(this.#r)return null;const[t,n]=this.pageDimensions,[s,r]=this.pageTranslation,o=this.#i,c=new Float32Array(o.length*8);let u=0;for(const{x:d,y:g,width:m,height:y}of o){const v=d*t+s,_=(1-g-y)*n+r;c[u]=c[u+4]=v,c[u+1]=c[u+3]=_,c[u+2]=c[u+6]=v+m*t,c[u+5]=c[u+7]=_+y*n,u+=8}return c}#S(t){return this.#l.serialize(t,this.#M())}static startHighlighting(t,n,{target:s,x:r,y:o}){const{x:c,y:u,width:d,height:g}=s.getBoundingClientRect(),m=new AbortController,y=t.combinedSignal(m),v=A=>{A.preventDefault(),A.stopPropagation()},_=A=>{m.abort(),this.#k(t,A)};window.addEventListener("blur",_,{signal:y}),window.addEventListener("pointerup",_,{signal:y}),window.addEventListener("pointerdown",v,{capture:!0,passive:!1,signal:y}),window.addEventListener("contextmenu",wi,{signal:y}),s.addEventListener("pointermove",this.#b.bind(this,t),{signal:y}),this._freeHighlight=new ph({x:r,y:o},[c,u,d,g],t.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0)}static#b(t,n){this._freeHighlight.add(n)&&t.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)}static#k(t,n){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(t,n,s){let r=null;if(t instanceof ly){const{data:{quadPoints:A,rect:E,rotation:w,id:T,color:M,opacity:C,popupRef:O},parent:{page:{pageNumber:N}}}=t;r=t={annotationType:bt.HIGHLIGHT,color:Array.from(M),opacity:C,quadPoints:A,boxes:null,pageIndex:N-1,rect:E.slice(0),rotation:w,id:T,deleted:!1,popupRef:O}}else if(t instanceof Lh){const{data:{inkLists:A,rect:E,rotation:w,id:T,color:M,borderStyle:{rawWidth:C},popupRef:O},parent:{page:{pageNumber:N}}}=t;r=t={annotationType:bt.HIGHLIGHT,color:Array.from(M),thickness:C,inkLists:A,boxes:null,pageIndex:N-1,rect:E.slice(0),rotation:w,id:T,deleted:!1,popupRef:O}}const{color:o,quadPoints:c,inkLists:u,opacity:d}=t,g=await super.deserialize(t,n,s);g.color=lt.makeHexColor(...o),g.#g=d||1,u&&(g.#m=t.thickness),g.annotationElementId=t.id||null,g._initialData=r;const[m,y]=g.pageDimensions,[v,_]=g.pageTranslation;if(c){const A=g.#i=[];for(let E=0;E<c.length;E+=8)A.push({x:(c[E]-v)/m,y:1-(c[E+1]-_)/y,width:(c[E+2]-c[E])/m,height:(c[E+1]-c[E+5])/y});g.#v(),g.#C(),g.rotate(g.rotation)}else if(u){g.#r=!0;const A=u[0],E={x:A[0]-v,y:y-(A[1]-_)},w=new ph(E,[0,0,m,y],1,g.#m/2,!0,.001);for(let C=0,O=A.length;C<O;C+=2)E.x=A[C]-v,E.y=y-(A[C+1]-_),w.add(E);const{id:T,clipPathId:M}=n.drawLayer.draw(w,g.color,g._defaultOpacity,!0);g.#_({highlightOutlines:w.getOutlines(),highlightId:T,clipPathId:M}),g.#C()}return g}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const n=this.getRect(0,0),s=pt._colorManager.convert(this.color),r={annotationType:bt.HIGHLIGHT,color:s,opacity:this.#g,thickness:this.#m,quadPoints:this.#L(),outlines:this.#S(n),pageIndex:this.pageIndex,rect:n,rotation:this.#M(),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!this.#N(r)?null:(r.id=this.annotationElementId,r)}#N(t){const{color:n}=this._initialData;return t.color.some((s,r)=>s!==n[r])}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}class Ae extends pt{#t=0;#e=0;#i=null;#s=new Path2D;#a=!1;#n=null;#o=!1;#c=!1;#u=null;#l=null;#h=0;#r=0;#d=null;static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=1;static _type="ink";static _editorType=bt.INK;constructor(t){super({...t,name:"inkEditor"}),this.color=t.color||null,this.thickness=t.thickness||null,this.opacity=t.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(t,n){pt.initialize(t,n)}static updateDefaultParams(t,n){switch(t){case mt.INK_THICKNESS:Ae._defaultThickness=n;break;case mt.INK_COLOR:Ae._defaultColor=n;break;case mt.INK_OPACITY:Ae._defaultOpacity=n/100;break}}updateParams(t,n){switch(t){case mt.INK_THICKNESS:this.#g(n);break;case mt.INK_COLOR:this.#f(n);break;case mt.INK_OPACITY:this.#y(n);break}}static get defaultPropertiesToUpdate(){return[[mt.INK_THICKNESS,Ae._defaultThickness],[mt.INK_COLOR,Ae._defaultColor||pt._defaultLineColor],[mt.INK_OPACITY,Math.round(Ae._defaultOpacity*100)]]}get propertiesToUpdate(){return[[mt.INK_THICKNESS,this.thickness||Ae._defaultThickness],[mt.INK_COLOR,this.color||Ae._defaultColor||pt._defaultLineColor],[mt.INK_OPACITY,Math.round(100*(this.opacity??Ae._defaultOpacity))]]}#g(t){const n=r=>{this.thickness=r,this.#D()},s=this.thickness;this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:mt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}#f(t){const n=r=>{this.color=r,this.#A()},s=this.color;this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:mt.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}#y(t){const n=r=>{this.opacity=r,this.#A()};t/=100;const s=this.opacity;this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:mt.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(this.#L(),this.#S()),this.isAttachedToDOM||(this.parent.add(this),this.#b()),this.#D()))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,this.#i&&(clearTimeout(this.#i),this.#i=null),this.#u?.disconnect(),this.#u=null,super.remove())}setParent(t){!this.parent&&t?this._uiManager.removeShouldRescale(this):this.parent&&t===null&&this._uiManager.addShouldRescale(this),super.setParent(t)}onScaleChanging(){const[t,n]=this.parentDimensions,s=this.width*t,r=this.height*n;this.setDimensions(s,r)}enableEditMode(){this.#a||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.#T())}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.#R())}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}#m(){const{parentRotation:t,parentDimensions:[n,s]}=this;switch(t){case 90:return[0,s,s,n];case 180:return[n,s,n,s];case 270:return[n,0,s,n];default:return[0,0,n,s]}}#p(){const{ctx:t,color:n,opacity:s,thickness:r,parentScale:o,scaleFactor:c}=this;t.lineWidth=r*o/c,t.lineCap="round",t.lineJoin="round",t.miterLimit=10,t.strokeStyle=`${n}${d0(s)}`}#v(t,n){this.canvas.addEventListener("contextmenu",wi,{signal:this._uiManager._signal}),this.#R(),this.#n=new AbortController;const s=this._uiManager.combinedSignal(this.#n);this.canvas.addEventListener("pointerleave",this.canvasPointerleave.bind(this),{signal:s}),this.canvas.addEventListener("pointermove",this.canvasPointermove.bind(this),{signal:s}),this.canvas.addEventListener("pointerup",this.canvasPointerup.bind(this),{signal:s}),this.isEditing=!0,this.#c||(this.#c=!0,this.#b(),this.thickness||=Ae._defaultThickness,this.color||=Ae._defaultColor||pt._defaultLineColor,this.opacity??=Ae._defaultOpacity),this.currentPath.push([t,n]),this.#o=!1,this.#p(),this.#d=()=>{this.#w(),this.#d&&window.requestAnimationFrame(this.#d)},window.requestAnimationFrame(this.#d)}#_(t,n){const[s,r]=this.currentPath.at(-1);if(this.currentPath.length>1&&t===s&&n===r)return;const o=this.currentPath;let c=this.#s;if(o.push([t,n]),this.#o=!0,o.length<=2){c.moveTo(...o[0]),c.lineTo(t,n);return}o.length===3&&(this.#s=c=new Path2D,c.moveTo(...o[0])),this.#P(c,...o.at(-3),...o.at(-2),t,n)}#x(){if(this.currentPath.length===0)return;const t=this.currentPath.at(-1);this.#s.lineTo(...t)}#E(t,n){this.#d=null,t=Math.min(Math.max(t,0),this.canvas.width),n=Math.min(Math.max(n,0),this.canvas.height),this.#_(t,n),this.#x();let s;if(this.currentPath.length!==1)s=this.#C();else{const d=[t,n];s=[[d,d.slice(),d.slice(),d]]}const r=this.#s,o=this.currentPath;this.currentPath=[],this.#s=new Path2D;const c=()=>{this.allRawPaths.push(o),this.paths.push(s),this.bezierPath2D.push(r),this._uiManager.rebuild(this)},u=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(this.#L(),this.#S()),this.#D())};this.addCommands({cmd:c,undo:u,mustExec:!0})}#w(){if(!this.#o)return;this.#o=!1;const t=Math.ceil(this.thickness*this.parentScale),n=this.currentPath.slice(-3),s=n.map(c=>c[0]),r=n.map(c=>c[1]);Math.min(...s)-t,Math.max(...s)+t,Math.min(...r)-t,Math.max(...r)+t;const{ctx:o}=this;o.save(),o.clearRect(0,0,this.canvas.width,this.canvas.height);for(const c of this.bezierPath2D)o.stroke(c);o.stroke(this.#s),o.restore()}#P(t,n,s,r,o,c,u){const d=(n+r)/2,g=(s+o)/2,m=(r+c)/2,y=(o+u)/2;t.bezierCurveTo(d+2*(r-d)/3,g+2*(o-g)/3,m+2*(r-m)/3,y+2*(o-y)/3,m,y)}#C(){const t=this.currentPath;if(t.length<=2)return[[t[0],t[0],t.at(-1),t.at(-1)]];const n=[];let s,[r,o]=t[0];for(s=1;s<t.length-2;s++){const[v,_]=t[s],[A,E]=t[s+1],w=(v+A)/2,T=(_+E)/2,M=[r+2*(v-r)/3,o+2*(_-o)/3],C=[w+2*(v-w)/3,T+2*(_-T)/3];n.push([[r,o],M,C,[w,T]]),[r,o]=[w,T]}const[c,u]=t[s],[d,g]=t[s+1],m=[r+2*(c-r)/3,o+2*(u-o)/3],y=[d+2*(c-d)/3,g+2*(u-g)/3];return n.push([[r,o],m,y,[d,g]]),n}#A(){if(this.isEmpty()){this.#N();return}this.#p();const{canvas:t,ctx:n}=this;n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,t.width,t.height),this.#N();for(const s of this.bezierPath2D)n.stroke(s)}commit(){this.#a||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),this.#a=!0,this.div.classList.add("disabled"),this.#D(!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),this.enableEditMode())}#T(){if(this.#l)return;this.#l=new AbortController;const t=this._uiManager.combinedSignal(this.#l);this.canvas.addEventListener("pointerdown",this.canvasPointerdown.bind(this),{signal:t})}#R(){this.pointerdownAC?.abort(),this.pointerdownAC=null}canvasPointerdown(t){t.button!==0||!this.isInEditMode()||this.#a||(this.setInForeground(),t.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),this.#v(t.offsetX,t.offsetY))}canvasPointermove(t){t.preventDefault(),this.#_(t.offsetX,t.offsetY)}canvasPointerup(t){t.preventDefault(),this.#M(t)}canvasPointerleave(t){this.#M(t)}#M(t){this.#n?.abort(),this.#n=null,this.#T(),this.#i&&clearTimeout(this.#i),this.#i=setTimeout(()=>{this.#i=null,this.canvas.removeEventListener("contextmenu",wi)},10),this.#E(t.offsetX,t.offsetY),this.addToAnnotationStorage(),this.setInBackground()}#L(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}#S(){this.#u=new ResizeObserver(t=>{const n=t[0].contentRect;n.width&&n.height&&this.setDimensions(n.width,n.height)}),this.#u.observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{this.#u?.disconnect(),this.#u=null},{once:!0})}get isResizable(){return!this.isEmpty()&&this.#a}render(){if(this.div)return this.div;let t,n;this.width&&(t=this.x,n=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[s,r,o,c]=this.#m();if(this.setAt(s,r,0,0),this.setDims(o,c),this.#L(),this.width){const[u,d]=this.parentDimensions;this.setAspectRatio(this.width*u,this.height*d),this.setAt(t*u,n*d,this.width*u,this.height*d),this.#c=!0,this.#b(),this.setDims(this.width*u,this.height*d),this.#A(),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return this.#S(),this.div}#b(){if(!this.#c)return;const[t,n]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*t),this.canvas.height=Math.ceil(this.height*n),this.#N()}setDimensions(t,n){const s=Math.round(t),r=Math.round(n);if(this.#h===s&&this.#r===r)return;this.#h=s,this.#r=r,this.canvas.style.visibility="hidden";const[o,c]=this.parentDimensions;this.width=t/o,this.height=n/c,this.fixAndSetPosition(),this.#a&&this.#k(t,n),this.#b(),this.#A(),this.canvas.style.visibility="visible",this.fixDims()}#k(t,n){const s=this.#B(),r=(t-s)/this.#e,o=(n-s)/this.#t;this.scaleFactor=Math.min(r,o)}#N(){const t=this.#B()/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+t,this.translationY*this.scaleFactor+t)}static#F(t){const n=new Path2D;for(let s=0,r=t.length;s<r;s++){const[o,c,u,d]=t[s];s===0&&n.moveTo(...o),n.bezierCurveTo(c[0],c[1],u[0],u[1],d[0],d[1])}return n}static#I(t,n,s){const[r,o,c,u]=n;switch(s){case 0:for(let d=0,g=t.length;d<g;d+=2)t[d]+=r,t[d+1]=u-t[d+1];break;case 90:for(let d=0,g=t.length;d<g;d+=2){const m=t[d];t[d]=t[d+1]+r,t[d+1]=m+o}break;case 180:for(let d=0,g=t.length;d<g;d+=2)t[d]=c-t[d],t[d+1]+=o;break;case 270:for(let d=0,g=t.length;d<g;d+=2){const m=t[d];t[d]=c-t[d+1],t[d+1]=u-m}break;default:throw new Error("Invalid rotation")}return t}static#z(t,n,s){const[r,o,c,u]=n;switch(s){case 0:for(let d=0,g=t.length;d<g;d+=2)t[d]-=r,t[d+1]=u-t[d+1];break;case 90:for(let d=0,g=t.length;d<g;d+=2){const m=t[d];t[d]=t[d+1]-o,t[d+1]=m-r}break;case 180:for(let d=0,g=t.length;d<g;d+=2)t[d]=c-t[d],t[d+1]-=o;break;case 270:for(let d=0,g=t.length;d<g;d+=2){const m=t[d];t[d]=u-t[d+1],t[d+1]=c-m}break;default:throw new Error("Invalid rotation")}return t}#j(t,n,s,r){const o=[],c=this.thickness/2,u=t*n+c,d=t*s+c;for(const g of this.paths){const m=[],y=[];for(let v=0,_=g.length;v<_;v++){const[A,E,w,T]=g[v];if(A[0]===T[0]&&A[1]===T[1]&&_===1){const Z=t*A[0]+u,W=t*A[1]+d;m.push(Z,W),y.push(Z,W);break}const M=t*A[0]+u,C=t*A[1]+d,O=t*E[0]+u,N=t*E[1]+d,U=t*w[0]+u,q=t*w[1]+d,$=t*T[0]+u,B=t*T[1]+d;v===0&&(m.push(M,C),y.push(M,C)),m.push(O,N,U,q,$,B),y.push(O,N),v===_-1&&y.push($,B)}o.push({bezier:Ae.#I(m,r,this.rotation),points:Ae.#I(y,r,this.rotation)})}return o}#H(){let t=1/0,n=-1/0,s=1/0,r=-1/0;for(const o of this.paths)for(const[c,u,d,g]of o){const m=lt.bezierBoundingBox(...c,...u,...d,...g);t=Math.min(t,m[0]),s=Math.min(s,m[1]),n=Math.max(n,m[2]),r=Math.max(r,m[3])}return[t,s,n,r]}#B(){return this.#a?Math.ceil(this.thickness*this.parentScale):0}#D(t=!1){if(this.isEmpty())return;if(!this.#a){this.#A();return}const n=this.#H(),s=this.#B();this.#e=Math.max(pt.MIN_SIZE,n[2]-n[0]),this.#t=Math.max(pt.MIN_SIZE,n[3]-n[1]);const r=Math.ceil(s+this.#e*this.scaleFactor),o=Math.ceil(s+this.#t*this.scaleFactor),[c,u]=this.parentDimensions;this.width=r/c,this.height=o/u,this.setAspectRatio(r,o);const d=this.translationX,g=this.translationY;this.translationX=-n[0],this.translationY=-n[1],this.#b(),this.#A(),this.#h=r,this.#r=o,this.setDims(r,o);const m=t?s/this.scaleFactor/2:0;this.translate(d-this.translationX-m,g-this.translationY-m)}static async deserialize(t,n,s){if(t instanceof Lh)return null;const r=await super.deserialize(t,n,s);r.thickness=t.thickness,r.color=lt.makeHexColor(...t.color),r.opacity=t.opacity;const[o,c]=r.pageDimensions,u=r.width*o,d=r.height*c,g=r.parentScale,m=t.thickness/2;r.#a=!0,r.#h=Math.round(u),r.#r=Math.round(d);const{paths:y,rect:v,rotation:_}=t;for(let{bezier:E}of y){E=Ae.#z(E,v,_);const w=[];r.paths.push(w);let T=g*(E[0]-m),M=g*(E[1]-m);for(let O=2,N=E.length;O<N;O+=6){const U=g*(E[O]-m),q=g*(E[O+1]-m),$=g*(E[O+2]-m),B=g*(E[O+3]-m),Z=g*(E[O+4]-m),W=g*(E[O+5]-m);w.push([[T,M],[U,q],[$,B],[Z,W]]),T=Z,M=W}const C=this.#F(w);r.bezierPath2D.push(C)}const A=r.#H();return r.#e=Math.max(pt.MIN_SIZE,A[2]-A[0]),r.#t=Math.max(pt.MIN_SIZE,A[3]-A[1]),r.#k(u,d),r}serialize(){if(this.isEmpty())return null;const t=this.getRect(0,0),n=pt._colorManager.convert(this.ctx.strokeStyle);return{annotationType:bt.INK,color:n,thickness:this.thickness,opacity:this.opacity,paths:this.#j(this.scaleFactor/this.parentScale,this.translationX,this.translationY,t),pageIndex:this.pageIndex,rect:t,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}}class kh extends pt{#t=null;#e=null;#i=null;#s=null;#a=null;#n="";#o=null;#c=null;#u=null;#l=!1;#h=!1;static _type="stamp";static _editorType=bt.STAMP;constructor(t){super({...t,name:"stampEditor"}),this.#s=t.bitmapUrl,this.#a=t.bitmapFile}static initialize(t,n){pt.initialize(t,n)}static get supportedTypes(){return xt(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(n=>`image/${n}`))}static get supportedTypesStr(){return xt(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(t){return this.supportedTypes.includes(t)}static paste(t,n){n.pasteEditor(bt.STAMP,{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(t){const n=t.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}#r(t,n=!1){if(!t){this.remove();return}this.#t=t.bitmap,n||(this.#e=t.id,this.#l=t.isSvg),t.file&&(this.#n=t.file.name),this.#f()}#d(){if(this.#i=null,this._uiManager.enableWaiting(!1),!!this.#o){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(t=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:o,height:c}=t||this.copyCanvas(null,null,!0).imageData,u=await s.guess({name:"altText",request:{data:r,width:o,height:c,channels:r.length/(o*c)}});if(!u)throw new Error("No response from the AI service.");if(u.error)throw new Error("Error from the AI service.");if(u.cancel)return null;if(!u.output)throw new Error("No valid response from the AI service.");const d=u.output;return await this.setGuessedAltText(d),n&&!this.hasAltTextData()&&(this.altTextData={alt:d,decorative:!1}),d}#g(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(s=>this.#r(s,!0)).finally(()=>this.#d());return}if(this.#s){const s=this.#s;this.#s=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromUrl(s).then(r=>this.#r(r)).finally(()=>this.#d());return}if(this.#a){const s=this.#a;this.#a=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromFile(s).then(r=>this.#r(r)).finally(()=>this.#d());return}const t=document.createElement("input");t.type="file",t.accept=kh.supportedTypesStr;const n=this._uiManager._signal;this.#i=new Promise(s=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#r(r)}s()},{signal:n}),t.addEventListener("cancel",()=>{this.remove(),s()},{signal:n})}).finally(()=>this.#d()),t.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#o?.remove(),this.#o=null,this.#c?.disconnect(),this.#c=null,this.#u&&(clearTimeout(this.#u),this.#u=null)),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#g();return}super.rebuild(),this.div!==null&&(this.#e&&this.#o===null&&this.#g(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(this.#i||this.#t||this.#s||this.#a||this.#e)}get isResizable(){return!0}render(){if(this.div)return this.div;let t,n;if(this.width&&(t=this.x,n=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),this.#t?this.#f():this.#g(),this.width&&!this.annotationElementId){const[s,r]=this.parentDimensions;this.setAt(t*s,n*r,this.width*s,this.height*r)}return this.div}#f(){const{div:t}=this;let{width:n,height:s}=this.#t;const[r,o]=this.pageDimensions,c=.75;if(this.width)n=this.width*r,s=this.height*o;else if(n>c*r||s>c*o){const m=Math.min(c*r/n,c*o/s);n*=m,s*=m}const[u,d]=this.parentDimensions;this.setDims(n*u/r,s*d/o),this._uiManager.enableWaiting(!1);const g=this.#o=document.createElement("canvas");g.setAttribute("role","img"),this.addContainer(g),(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),this.#p(n,s),this.#_(),this.#h||(this.parent.addUndoableEditor(this),this.#h=!0),this._reportTelemetry({action:"inserted_image"}),this.#n&&g.setAttribute("aria-label",this.#n)}copyCanvas(t,n,s=!1){t||(t=224);const{width:r,height:o}=this.#t,c=new oh;let u=this.#t,d=r,g=o,m=null;if(n){if(r>n||o>n){const U=Math.min(n/r,n/o);d=Math.floor(r*U),g=Math.floor(o*U)}m=document.createElement("canvas");const v=m.width=Math.ceil(d*c.sx),_=m.height=Math.ceil(g*c.sy);this.#l||(u=this.#m(v,_));const A=m.getContext("2d");A.filter=this._uiManager.hcmFilter;let E="white",w="#cfcfd8";this._uiManager.hcmFilter!=="none"?w="black":window.matchMedia?.("(prefers-color-scheme: dark)").matches&&(E="#8f8f9d",w="#42414d");const T=15,M=T*c.sx,C=T*c.sy,O=new OffscreenCanvas(M*2,C*2),N=O.getContext("2d");N.fillStyle=E,N.fillRect(0,0,M*2,C*2),N.fillStyle=w,N.fillRect(0,0,M,C),N.fillRect(M,C,M,C),A.fillStyle=A.createPattern(O,"repeat"),A.fillRect(0,0,v,_),A.drawImage(u,0,0,u.width,u.height,0,0,v,_)}let y=null;if(s){let v,_;if(c.symmetric&&u.width<t&&u.height<t)v=u.width,_=u.height;else if(u=this.#t,r>t||o>t){const w=Math.min(t/r,t/o);v=Math.floor(r*w),_=Math.floor(o*w),this.#l||(u=this.#m(v,_))}const E=new OffscreenCanvas(v,_).getContext("2d",{willReadFrequently:!0});E.drawImage(u,0,0,u.width,u.height,0,0,v,_),y={width:v,height:_,data:E.getImageData(0,0,v,_).data}}return{canvas:m,width:d,height:g,imageData:y}}#y(t,n){const[s,r]=this.parentDimensions;this.width=t/s,this.height=n/r,this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,this.#u!==null&&clearTimeout(this.#u);const o=200;this.#u=setTimeout(()=>{this.#u=null,this.#p(t,n)},o)}#m(t,n){const{width:s,height:r}=this.#t;let o=s,c=r,u=this.#t;for(;o>2*t||c>2*n;){const d=o,g=c;o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),c>2*n&&(c=c>=16384?Math.floor(c/2)-1:Math.ceil(c/2));const m=new OffscreenCanvas(o,c);m.getContext("2d").drawImage(u,0,0,d,g,0,0,o,c),u=m.transferToImageBitmap()}return u}#p(t,n){const s=new oh,r=Math.ceil(t*s.sx),o=Math.ceil(n*s.sy),c=this.#o;if(!c||c.width===r&&c.height===o)return;c.width=r,c.height=o;const u=this.#l?this.#t:this.#m(r,o),d=c.getContext("2d");d.filter=this._uiManager.hcmFilter,d.drawImage(u,0,0,u.width,u.height,0,0,r,o)}getImageForAltText(){return this.#o}#v(t){if(t){if(this.#l){const r=this._uiManager.imageManager.getSvgUrl(this.#e);if(r)return r}const n=document.createElement("canvas");return{width:n.width,height:n.height}=this.#t,n.getContext("2d").drawImage(this.#t,0,0),n.toDataURL()}if(this.#l){const[n,s]=this.pageDimensions,r=Math.round(this.width*n*wa.PDF_TO_CSS_UNITS),o=Math.round(this.height*s*wa.PDF_TO_CSS_UNITS),c=new OffscreenCanvas(r,o);return c.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,r,o),c.transferToImageBitmap()}return structuredClone(this.#t)}#_(){this._uiManager._signal&&(this.#c=new ResizeObserver(t=>{const n=t[0].contentRect;n.width&&n.height&&this.#y(n.width,n.height)}),this.#c.observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{this.#c?.disconnect(),this.#c=null},{once:!0}))}static async deserialize(t,n,s){let r=null;if(t instanceof oy){const{data:{rect:A,rotation:E,id:w,structParent:T,popupRef:M},container:C,parent:{page:{pageNumber:O}}}=t,N=C.querySelector("canvas"),U=s.imageManager.getFromCanvas(C.id,N);N.remove();const q=(await n._structTree.getAriaAttributes(`${vh}${w}`))?.get("aria-label")||"";r=t={annotationType:bt.STAMP,bitmapId:U.id,bitmap:U.bitmap,pageIndex:O-1,rect:A.slice(0),rotation:E,id:w,deleted:!1,accessibilityData:{decorative:!1,altText:q},isSvg:!1,structParent:T,popupRef:M}}const o=await super.deserialize(t,n,s),{rect:c,bitmap:u,bitmapUrl:d,bitmapId:g,isSvg:m,accessibilityData:y}=t;g&&s.imageManager.isValidId(g)?(o.#e=g,u&&(o.#t=u)):o.#s=d,o.#l=m;const[v,_]=o.pageDimensions;return o.width=(c[2]-c[0])/v,o.height=(c[3]-c[1])/_,o.annotationElementId=t.id||null,y&&(o.altTextData=y),o._initialData=r,o.#h=!!r,o}serialize(t=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s={annotationType:bt.STAMP,bitmapId:this.#e,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#l,structTreeParentId:this._structTreeParentId};if(t)return s.bitmapUrl=this.#v(!0),s.accessibilityData=this.serializeAltText(!0),s;const{decorative:r,altText:o}=this.serializeAltText(!1);if(!r&&o&&(s.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const u=this.#x(s);if(u.isSame)return null;u.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1}if(s.id=this.annotationElementId,n===null)return s;n.stamps||=new Map;const c=this.#l?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!n.stamps.has(this.#e))n.stamps.set(this.#e,{area:c,serialized:s}),s.bitmap=this.#v(!1);else if(this.#l){const u=n.stamps.get(this.#e);c>u.area&&(u.area=c,u.serialized.bitmap.close(),u.serialized.bitmap=this.#v(!1))}return s}#x(t){const{rect:n,pageIndex:s,accessibilityData:{altText:r}}=this._initialData,o=t.rect.every((d,g)=>Math.abs(d-n[g])<1),c=t.pageIndex===s,u=(t.accessibilityData?.alt||"")===r;return{isSame:o&&c&&u,isSameAltText:u}}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}}class mn{#t;#e=!1;#i=null;#s=null;#a=null;#n=new Map;#o=!1;#c=!1;#u=!1;#l=null;#h=null;#r;static _initialized=!1;static#d=new Map([le,Ae,kh,Qt].map(t=>[t._editorType,t]));constructor({uiManager:t,pageIndex:n,div:s,structTreeLayer:r,accessibilityManager:o,annotationLayer:c,drawLayer:u,textLayer:d,viewport:g,l10n:m}){const y=[...mn.#d.values()];if(!mn._initialized){mn._initialized=!0;for(const v of y)v.initialize(m,t)}t.registerEditorTypes(y),this.#r=t,this.pageIndex=n,this.div=s,this.#t=o,this.#i=c,this.viewport=g,this.#l=d,this.drawLayer=u,this._structTree=r,this.#r.addLayer(this)}get isEmpty(){return this.#n.size===0}get isInvisible(){return this.isEmpty&&this.#r.getMode()===bt.NONE}updateToolbar(t){this.#r.updateToolbar(t)}updateMode(t=this.#r.getMode()){switch(this.#p(),t){case bt.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case bt.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case bt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:n}=this.div;for(const s of mn.#d.values())n.toggle(`${s._type}Editing`,t===s._editorType);this.div.hidden=!1}hasTextLayer(t){return t===this.#l?.div}addInkEditorIfNeeded(t){if(this.#r.getMode()!==bt.INK)return;if(!t){for(const s of this.#n.values())if(s.isEmpty()){s.setInBackground();return}}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(t){this.#r.setEditingState(t)}addCommands(t){this.#r.addCommands(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#i?.div.classList.toggle("disabled",!t)}async enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const t=new Set;for(const s of this.#n.values())s.enableEditing(),s.show(!0),s.annotationElementId&&(this.#r.removeChangedExistingAnnotation(s),t.add(s.annotationElementId));if(!this.#i)return;const n=this.#i.getEditableAnnotations();for(const s of n){if(s.hide(),this.#r.isDeletedAnnotationElement(s.data.id)||t.has(s.data.id))continue;const r=await this.deserialize(s);r&&(this.addOrRebuild(r),r.enableEditing())}}disable(){this.#u=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1);const t=new Map,n=new Map;for(const r of this.#n.values())if(r.disableEditing(),!!r.annotationElementId){if(r.serialize()!==null){t.set(r.annotationElementId,r);continue}else n.set(r.annotationElementId,r);this.getEditableAnnotation(r.annotationElementId)?.show(),r.remove()}if(this.#i){const r=this.#i.getEditableAnnotations();for(const o of r){const{id:c}=o.data;if(this.#r.isDeletedAnnotationElement(c))continue;let u=n.get(c);if(u){u.resetAnnotationElement(o),u.show(!1),o.show();continue}u=t.get(c),u&&(this.#r.addChangedExistingAnnotation(u),u.renderAnnotationElement(o)&&u.show(!1)),o.show()}}this.#p(),this.isEmpty&&(this.div.hidden=!0);const{classList:s}=this.div;for(const r of mn.#d.values())s.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#u=!1}getEditableAnnotation(t){return this.#i?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#r.getActive()!==t&&this.#r.setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,this.#l?.div&&!this.#h){this.#h=new AbortController;const t=this.#r.combinedSignal(this.#h);this.#l.div.addEventListener("pointerdown",this.#g.bind(this),{signal:t}),this.#l.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#l?.div&&this.#h&&(this.#h.abort(),this.#h=null,this.#l.div.classList.remove("highlighting"))}#g(t){this.#r.unselectAll();const{target:n}=t;if(n===this.#l.div||(n.getAttribute("role")==="img"||n.classList.contains("endOfContent"))&&this.#l.div.contains(n)){const{isMac:s}=je.platform;if(t.button!==0||t.ctrlKey&&s)return;this.#r.showAllEditors("highlight",!0,!0),this.#l.div.classList.add("free"),this.toggleDrawing(),Qt.startHighlighting(this,this.#r.direction==="ltr",{target:this.#l.div,x:t.x,y:t.y}),this.#l.div.addEventListener("pointerup",()=>{this.#l.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#r._signal}),t.preventDefault()}}enableClick(){if(this.#s)return;this.#s=new AbortController;const t=this.#r.combinedSignal(this.#s);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t}),this.div.addEventListener("pointerup",this.pointerup.bind(this),{signal:t})}disableClick(){this.#s?.abort(),this.#s=null}attach(t){this.#n.set(t.id,t);const{annotationElementId:n}=t;n&&this.#r.isDeletedAnnotationElement(n)&&this.#r.removeDeletedAnnotationElement(t)}detach(t){this.#n.delete(t.id),this.#t?.removePointerInTextLayer(t.contentDiv),!this.#u&&t.annotationElementId&&this.#r.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#r.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1,this.#c||this.addInkEditorIfNeeded(!1)}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#r.addDeletedAnnotationElement(t.annotationElementId),pt.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),this.#r.addEditor(t),this.attach(t),!t.isAttachedToDOM){const n=t.render();this.div.append(n),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(),this.#r.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;const{activeElement:n}=document;t.div.contains(n)&&!this.#a&&(t._focusEventsAllowed=!1,this.#a=setTimeout(()=>{this.#a=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this.#r._signal}),n.focus())},0)),t._structTreeParentId=this.#t?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const n=()=>t._uiManager.rebuild(t),s=()=>{t.remove()};this.addCommands({cmd:n,undo:s,mustExec:!1})}getNextId(){return this.#r.getId()}get#f(){return mn.#d.get(this.#r.getMode())}combinedSignal(t){return this.#r.combinedSignal(t)}#y(t){const n=this.#f;return n?new n.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#f?.canCreateNewEmptyEditor()}pasteEditor(t,n){this.#r.updateToolbar(t),this.#r.updateMode(t);const{offsetX:s,offsetY:r}=this.#m(),o=this.getNextId(),c=this.#y({parent:this,id:o,x:s,y:r,uiManager:this.#r,isCentered:!0,...n});c&&this.add(c)}async deserialize(t){return await mn.#d.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#r)||null}createAndAddNewEditor(t,n,s={}){const r=this.getNextId(),o=this.#y({parent:this,id:r,x:t.offsetX,y:t.offsetY,uiManager:this.#r,isCentered:n,...s});return o&&this.add(o),o}#m(){const{x:t,y:n,width:s,height:r}=this.div.getBoundingClientRect(),o=Math.max(0,t),c=Math.max(0,n),u=Math.min(window.innerWidth,t+s),d=Math.min(window.innerHeight,n+r),g=(o+u)/2-t,m=(c+d)/2-n,[y,v]=this.viewport.rotation%180===0?[g,m]:[m,g];return{offsetX:y,offsetY:v}}addNewEditor(){this.createAndAddNewEditor(this.#m(),!0)}setSelected(t){this.#r.setSelected(t)}toggleSelected(t){this.#r.toggleSelected(t)}unselect(t){this.#r.unselect(t)}pointerup(t){const{isMac:n}=je.platform;if(!(t.button!==0||t.ctrlKey&&n)&&t.target===this.div&&this.#o){if(this.#o=!1,!this.#e){this.#e=!0;return}if(this.#r.getMode()===bt.STAMP){this.#r.unselectAll();return}this.createAndAddNewEditor(t,!1)}}pointerdown(t){if(this.#r.getMode()===bt.HIGHLIGHT&&this.enableTextSelection(),this.#o){this.#o=!1;return}const{isMac:n}=je.platform;if(t.button!==0||t.ctrlKey&&n||t.target!==this.div)return;this.#o=!0;const s=this.#r.getActive();this.#e=!s||s.isEmpty()}findNewParent(t,n,s){const r=this.#r.findParent(n,s);return r===null||r===this?!1:(r.changeParent(t),!0)}destroy(){this.#r.getActive()?.parent===this&&(this.#r.commitOrRemove(),this.#r.setActiveEditor(null)),this.#a&&(clearTimeout(this.#a),this.#a=null);for(const t of this.#n.values())this.#t?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#n.clear(),this.#r.removeLayer(this)}#p(){this.#c=!0;for(const t of this.#n.values())t.isEmpty()&&t.remove();this.#c=!1}render({viewport:t}){this.viewport=t,_s(this.div,t);for(const n of this.#r.getEditors(this.pageIndex))this.add(n),n.rebuild();this.updateMode()}update({viewport:t}){this.#r.commitOrRemove(),this.#p();const n=this.viewport.rotation,s=t.rotation;if(this.viewport=t,_s(this.div,{rotation:s}),n!==s)for(const r of this.#n.values())r.rotate(s);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:t,pageHeight:n}=this.viewport.rawDims;return[t,n]}get scale(){return this.#r.viewParameters.realScale}}class Me{#t=null;#e=0;#i=new Map;#s=new Map;constructor({pageIndex:t}){this.pageIndex=t}setParent(t){if(!this.#t){this.#t=t;return}if(this.#t!==t){if(this.#i.size>0)for(const n of this.#i.values())n.remove(),t.append(n);this.#t=t}}static get _svgFactory(){return xt(this,"_svgFactory",new Oh)}static#a(t,{x:n=0,y:s=0,width:r=1,height:o=1}={}){const{style:c}=t;c.top=`${100*s}%`,c.left=`${100*n}%`,c.width=`${100*r}%`,c.height=`${100*o}%`}#n(t){const n=Me._svgFactory.create(1,1,!0);return this.#t.append(n),n.setAttribute("aria-hidden",!0),Me.#a(n,t),n}#o(t,n){const s=Me._svgFactory.createElement("clipPath");t.append(s);const r=`clip_${n}`;s.setAttribute("id",r),s.setAttribute("clipPathUnits","objectBoundingBox");const o=Me._svgFactory.createElement("use");return s.append(o),o.setAttribute("href",`#${n}`),o.classList.add("clip"),r}draw(t,n,s,r=!1){const o=this.#e++,c=this.#n(t.box);c.classList.add(...t.classNamesForDrawing);const u=Me._svgFactory.createElement("defs");c.append(u);const d=Me._svgFactory.createElement("path");u.append(d);const g=`path_p${this.pageIndex}_${o}`;d.setAttribute("id",g),d.setAttribute("d",t.toSVGPath()),r&&this.#s.set(o,d);const m=this.#o(u,g),y=Me._svgFactory.createElement("use");return c.append(y),c.setAttribute("fill",n),c.setAttribute("fill-opacity",s),y.setAttribute("href",`#${g}`),this.#i.set(o,c),{id:o,clipPathId:`url(#${m})`}}drawOutline(t){const n=this.#e++,s=this.#n(t.box);s.classList.add(...t.classNamesForOutlining);const r=Me._svgFactory.createElement("defs");s.append(r);const o=Me._svgFactory.createElement("path");r.append(o);const c=`path_p${this.pageIndex}_${n}`;o.setAttribute("id",c),o.setAttribute("d",t.toSVGPath()),o.setAttribute("vector-effect","non-scaling-stroke");let u;if(t.mustRemoveSelfIntersections){const m=Me._svgFactory.createElement("mask");r.append(m),u=`mask_p${this.pageIndex}_${n}`,m.setAttribute("id",u),m.setAttribute("maskUnits","objectBoundingBox");const y=Me._svgFactory.createElement("rect");m.append(y),y.setAttribute("width","1"),y.setAttribute("height","1"),y.setAttribute("fill","white");const v=Me._svgFactory.createElement("use");m.append(v),v.setAttribute("href",`#${c}`),v.setAttribute("stroke","none"),v.setAttribute("fill","black"),v.setAttribute("fill-rule","nonzero"),v.classList.add("mask")}const d=Me._svgFactory.createElement("use");s.append(d),d.setAttribute("href",`#${c}`),u&&d.setAttribute("mask",`url(#${u})`);const g=d.cloneNode();return s.append(g),d.classList.add("mainOutline"),g.classList.add("secondaryOutline"),this.#i.set(n,s),n}finalizeLine(t,n){const s=this.#s.get(t);this.#s.delete(t),this.updateBox(t,n.box),s.setAttribute("d",n.toSVGPath())}updateLine(t,n){this.#i.get(t).firstChild.firstChild.setAttribute("d",n.toSVGPath())}updatePath(t,n){this.#s.get(t).setAttribute("d",n.toSVGPath())}updateBox(t,n){Me.#a(this.#i.get(t),n)}show(t,n){this.#i.get(t).classList.toggle("hidden",!n)}rotate(t,n){this.#i.get(t).setAttribute("data-main-rotation",n)}changeColor(t,n){this.#i.get(t).setAttribute("fill",n)}changeOpacity(t,n){this.#i.get(t).setAttribute("fill-opacity",n)}addClass(t,n){this.#i.get(t).classList.add(n)}removeClass(t,n){this.#i.get(t).classList.remove(n)}getSVGRoot(t){return this.#i.get(t)}remove(t){this.#s.delete(t),this.#t!==null&&(this.#i.get(t).remove(),this.#i.delete(t))}destroy(){this.#t=null;for(const t of this.#i.values())t.remove();this.#i.clear(),this.#s.clear()}}var V_=yt.AbortException,X_=yt.AnnotationEditorLayer,Y_=yt.AnnotationEditorParamsType,K_=yt.AnnotationEditorType,W_=yt.AnnotationEditorUIManager,$_=yt.AnnotationLayer,Q_=yt.AnnotationMode,Z_=yt.ColorPicker,J_=yt.DOMSVGFactory,tA=yt.DrawLayer,eA=yt.FeatureTest,iA=yt.GlobalWorkerOptions,nA=yt.ImageKind,sA=yt.InvalidPDFException,aA=yt.MissingPDFException,rA=yt.OPS,lA=yt.OutputScale,oA=yt.PDFDataRangeTransport,cA=yt.PDFDateString,uA=yt.PDFWorker,hA=yt.PasswordResponses,dA=yt.PermissionFlag,fA=yt.PixelsPerInch,gA=yt.RenderingCancelledException,pA=yt.TextLayer,mA=yt.UnexpectedResponseException,yA=yt.Util,vA=yt.VerbosityLevel,bA=yt.XfaLayer,_A=yt.build,AA=yt.createValidAbsoluteUrl,SA=yt.fetchData,EA=yt.getDocument,wA=yt.getFilenameFromUrl,TA=yt.getPdfFilenameFromUrl,xA=yt.getXfaPageViewport,CA=yt.isDataScheme,RA=yt.isPdfFile,MA=yt.noContextMenu,DA=yt.normalizeUnicode,OA=yt.setLayerDimensions,LA=yt.shadow,kA=yt.version;const NA=Object.freeze(Object.defineProperty({__proto__:null,AbortException:V_,AnnotationEditorLayer:X_,AnnotationEditorParamsType:Y_,AnnotationEditorType:K_,AnnotationEditorUIManager:W_,AnnotationLayer:$_,AnnotationMode:Q_,ColorPicker:Z_,DOMSVGFactory:J_,DrawLayer:tA,FeatureTest:eA,GlobalWorkerOptions:iA,ImageKind:nA,InvalidPDFException:sA,MissingPDFException:aA,OPS:rA,OutputScale:lA,PDFDataRangeTransport:oA,PDFDateString:cA,PDFWorker:uA,PasswordResponses:hA,PermissionFlag:dA,PixelsPerInch:fA,RenderingCancelledException:gA,TextLayer:pA,UnexpectedResponseException:mA,Util:yA,VerbosityLevel:vA,XfaLayer:bA,build:_A,createValidAbsoluteUrl:AA,fetchData:SA,getDocument:EA,getFilenameFromUrl:wA,getPdfFilenameFromUrl:TA,getXfaPageViewport:xA,isDataScheme:CA,isPdfFile:RA,noContextMenu:MA,normalizeUnicode:DA,setLayerDimensions:OA,shadow:LA,version:kA},Symbol.toStringTag,{value:"Module"})),Br=Mb(NA);var Ce={},Dr={},tm;function Nh(){return tm||(tm=1,function(f){var t=Dr&&Dr.__spreadArray||function(s,r,o){if(o||arguments.length===2)for(var c=0,u=r.length,d;c<u;c++)(d||!(c in r))&&(d||(d=Array.prototype.slice.call(r,0,c)),d[c]=r[c]);return s.concat(d||Array.prototype.slice.call(r))};Object.defineProperty(f,"__esModule",{value:!0}),f.allEvents=f.changeEvents=f.otherEvents=f.transitionEvents=f.animationEvents=f.wheelEvents=f.uiEvents=f.pointerEvents=f.touchEvents=f.selectionEvents=f.dragEvents=f.mouseEvents=f.mediaEvents=f.keyboardEvents=f.imageEvents=f.formEvents=f.focusEvents=f.compositionEvents=f.clipboardEvents=void 0,f.clipboardEvents=["onCopy","onCut","onPaste"],f.compositionEvents=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],f.focusEvents=["onFocus","onBlur"],f.formEvents=["onInput","onInvalid","onReset","onSubmit"],f.imageEvents=["onLoad","onError"],f.keyboardEvents=["onKeyDown","onKeyPress","onKeyUp"],f.mediaEvents=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],f.mouseEvents=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],f.dragEvents=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],f.selectionEvents=["onSelect"],f.touchEvents=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],f.pointerEvents=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],f.uiEvents=["onScroll"],f.wheelEvents=["onWheel"],f.animationEvents=["onAnimationStart","onAnimationEnd","onAnimationIteration"],f.transitionEvents=["onTransitionEnd"],f.otherEvents=["onToggle"],f.changeEvents=["onChange"],f.allEvents=t(t(t(t(t(t(t(t(t(t(t(t(t(t(t(t(t(t([],f.clipboardEvents,!0),f.compositionEvents,!0),f.focusEvents,!0),f.formEvents,!0),f.imageEvents,!0),f.keyboardEvents,!0),f.mediaEvents,!0),f.mouseEvents,!0),f.dragEvents,!0),f.selectionEvents,!0),f.touchEvents,!0),f.pointerEvents,!0),f.uiEvents,!0),f.wheelEvents,!0),f.animationEvents,!0),f.transitionEvents,!0),f.changeEvents,!0),f.otherEvents,!0);function n(s,r){var o={};return f.allEvents.forEach(function(c){var u=s[c];u&&(r?o[c]=function(d){return u(d,r(c))}:o[c]=u)}),o}f.default=n}(Dr)),Dr}var co={},em;function Ta(){if(em)return co;em=1,Object.defineProperty(co,"__esModule",{value:!0});function f(t){var n=!1,s=new Promise(function(r,o){t.then(function(c){return!n&&r(c)}).catch(function(c){return!n&&o(c)})});return{promise:s,cancel:function(){n=!0}}}return co.default=f,co}var uo={exports:{}},im;function xa(){if(im)return uo.exports;im=1;function f(n){var s,r,o="";if(typeof n=="string"||typeof n=="number")o+=n;else if(typeof n=="object")if(Array.isArray(n)){var c=n.length;for(s=0;s<c;s++)n[s]&&(r=f(n[s]))&&(o&&(o+=" "),o+=r)}else for(r in n)n[r]&&(o&&(o+=" "),o+=r);return o}function t(){for(var n,s,r=0,o="",c=arguments.length;r<c;r++)(n=arguments[r])&&(s=f(n))&&(o&&(o+=" "),o+=s);return o}return uo.exports=t,uo.exports.clsx=t,uo.exports}var ih,nm;function ki(){if(nm)return ih;nm=1;var f="Invariant failed";function t(n,s){if(!n)throw new Error(f)}return ih=t,ih}var nh,sm;function Wn(){if(sm)return nh;sm=1;var f=function(){};return nh=f,nh}var sh={},am;function PA(){if(am)return sh;am=1;var f=Object.prototype.hasOwnProperty;function t(s,r,o){for(o of s.keys())if(n(o,r))return o}function n(s,r){var o,c,u;if(s===r)return!0;if(s&&r&&(o=s.constructor)===r.constructor){if(o===Date)return s.getTime()===r.getTime();if(o===RegExp)return s.toString()===r.toString();if(o===Array){if((c=s.length)===r.length)for(;c--&&n(s[c],r[c]););return c===-1}if(o===Set){if(s.size!==r.size)return!1;for(c of s)if(u=c,u&&typeof u=="object"&&(u=t(r,u),!u)||!r.has(u))return!1;return!0}if(o===Map){if(s.size!==r.size)return!1;for(c of s)if(u=c[0],u&&typeof u=="object"&&(u=t(r,u),!u)||!n(c[1],r.get(u)))return!1;return!0}if(o===ArrayBuffer)s=new Uint8Array(s),r=new Uint8Array(r);else if(o===DataView){if((c=s.byteLength)===r.byteLength)for(;c--&&s.getInt8(c)===r.getInt8(c););return c===-1}if(ArrayBuffer.isView(s)){if((c=s.byteLength)===r.byteLength)for(;c--&&s[c]===r[c];);return c===-1}if(!o||typeof s=="object"){c=0;for(o in s)if(f.call(s,o)&&++c&&!f.call(r,o)||!(o in r)||!n(s[o],r[o]))return!1;return Object.keys(r).length===c}}return s!==s&&r!==r}return sh.dequal=n,sh}var ho={},rm;function hy(){if(rm)return ho;rm=1,Object.defineProperty(ho,"__esModule",{value:!0});const t=(0,ce().createContext)(null);return ho.default=t,ho}var fo={},lm;function dy(){if(lm)return fo;lm=1,Object.defineProperty(fo,"__esModule",{value:!0}),fo.default=t;const f=Ti();function t({children:n,type:s}){return(0,f.jsx)("div",{className:`react-pdf__message react-pdf__message--${s}`,children:n})}return fo}var fa={},om;function FA(){if(om)return fa;om=1;var f=fa&&fa.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(fa,"__esModule",{value:!0});const t=f(ki()),n="noopener noreferrer nofollow";let s=class{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(o){this.pdfDocument=o}setViewer(o){this.pdfViewer=o}setExternalLinkRel(o){this.externalLinkRel=o}setExternalLinkTarget(o){this.externalLinkTarget=o}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return(0,t.default)(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber||0}set page(o){(0,t.default)(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber=o}get rotation(){return 0}set rotation(o){}goToDestination(o){return new Promise(c=>{(0,t.default)(this.pdfDocument,"PDF document not loaded."),(0,t.default)(o,"Destination is not specified."),typeof o=="string"?this.pdfDocument.getDestination(o).then(c):Array.isArray(o)?c(o):o.then(c)}).then(c=>{(0,t.default)(Array.isArray(c),`"${c}" is not a valid destination array.`);const u=c[0];new Promise(d=>{(0,t.default)(this.pdfDocument,"PDF document not loaded."),u instanceof Object?this.pdfDocument.getPageIndex(u).then(g=>{d(g)}).catch(()=>{(0,t.default)(!1,`"${u}" is not a valid page reference.`)}):typeof u=="number"?d(u):(0,t.default)(!1,`"${u}" is not a valid destination reference.`)}).then(d=>{const g=d+1;(0,t.default)(this.pdfViewer,"PDF viewer is not initialized."),(0,t.default)(g>=1&&g<=this.pagesCount,`"${g}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({dest:c,pageIndex:d,pageNumber:g})})})}navigateTo(o){this.goToDestination(o)}goToPage(o){const c=o-1;(0,t.default)(this.pdfViewer,"PDF viewer is not initialized."),(0,t.default)(o>=1&&o<=this.pagesCount,`"${o}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({pageIndex:c,pageNumber:o})}addLinkAttributes(o,c,u){o.href=c,o.rel=this.externalLinkRel||n,o.target=u?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}};return fa.default=s,fa}var go={},cm;function fy(){if(cm)return go;cm=1,Object.defineProperty(go,"__esModule",{value:!0});const f={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};return go.default=f,go}var Or={},um;function Yi(){return um||(um=1,function(f){var t=Or&&Or.__importDefault||function(C){return C&&C.__esModule?C:{default:C}};Object.defineProperty(f,"__esModule",{value:!0}),f.isLocalFileSystem=f.isBrowser=void 0,f.isDefined=r,f.isProvided=o,f.isString=c,f.isArrayBuffer=u,f.isBlob=d,f.isDataURI=g,f.dataURItoByteString=m,f.getDevicePixelRatio=y,f.displayCORSWarning=_,f.displayWorkerWarning=A,f.cancelRunningTask=E,f.makePageCallback=w,f.isCancelException=T,f.loadFromFile=M;const n=t(ki()),s=t(Wn());f.isBrowser=typeof window<"u",f.isLocalFileSystem=f.isBrowser&&window.location.protocol==="file:";function r(C){return typeof C<"u"}function o(C){return r(C)&&C!==null}function c(C){return typeof C=="string"}function u(C){return C instanceof ArrayBuffer}function d(C){return(0,n.default)(f.isBrowser,"isBlob can only be used in a browser environment"),C instanceof Blob}function g(C){return c(C)&&/^data:/.test(C)}function m(C){(0,n.default)(g(C),"Invalid data URI.");const[O="",N=""]=C.split(",");return O.split(";").indexOf("base64")!==-1?atob(N):unescape(N)}function y(){return f.isBrowser&&window.devicePixelRatio||1}const v="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function _(){(0,s.default)(!f.isLocalFileSystem,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${v}`)}function A(){(0,s.default)(!f.isLocalFileSystem,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${v}`)}function E(C){C?.cancel&&C.cancel()}function w(C,O){return Object.defineProperty(C,"width",{get(){return this.view[2]*O},configurable:!0}),Object.defineProperty(C,"height",{get(){return this.view[3]*O},configurable:!0}),Object.defineProperty(C,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(C,"originalHeight",{get(){return this.view[3]},configurable:!0}),C}function T(C){return C.name==="RenderingCancelledException"}function M(C){return new Promise((O,N)=>{const U=new FileReader;U.onload=()=>{if(!U.result)return N(new Error("Error while reading a file."));O(U.result)},U.onerror=q=>{if(!q.target)return N(new Error("Error while reading a file."));const{error:$}=q.target;if(!$)return N(new Error("Error while reading a file."));switch($.code){case $.NOT_FOUND_ERR:return N(new Error("Error while reading a file: File not found."));case $.SECURITY_ERR:return N(new Error("Error while reading a file: Security error."));case $.ABORT_ERR:return N(new Error("Error while reading a file: Aborted."));default:return N(new Error("Error while reading a file."))}},U.readAsArrayBuffer(C)})}}(Or)),Or}var po={},hm;function Ca(){if(hm)return po;hm=1,Object.defineProperty(po,"__esModule",{value:!0}),po.default=n;const f=ce();function t(s,r){switch(r.type){case"RESOLVE":return{value:r.value,error:void 0};case"REJECT":return{value:!1,error:r.error};case"RESET":return{value:void 0,error:void 0};default:return s}}function n(){return(0,f.useReducer)(t,{value:void 0,error:void 0})}return po}var dm;function jA(){if(dm)return Ce;dm=1;var f=Ce&&Ce.__createBinding||(Object.create?function(B,Z,W,J){J===void 0&&(J=W);var it=Object.getOwnPropertyDescriptor(Z,W);(!it||("get"in it?!Z.__esModule:it.writable||it.configurable))&&(it={enumerable:!0,get:function(){return Z[W]}}),Object.defineProperty(B,J,it)}:function(B,Z,W,J){J===void 0&&(J=W),B[J]=Z[W]}),t=Ce&&Ce.__setModuleDefault||(Object.create?function(B,Z){Object.defineProperty(B,"default",{enumerable:!0,value:Z})}:function(B,Z){B.default=Z}),n=Ce&&Ce.__importStar||function(B){if(B&&B.__esModule)return B;var Z={};if(B!=null)for(var W in B)W!=="default"&&Object.prototype.hasOwnProperty.call(B,W)&&f(Z,B,W);return t(Z,B),Z},s=Ce&&Ce.__awaiter||function(B,Z,W,J){function it(ht){return ht instanceof W?ht:new W(function(st){st(ht)})}return new(W||(W=Promise))(function(ht,st){function k(nt){try{Y(J.next(nt))}catch(x){st(x)}}function P(nt){try{Y(J.throw(nt))}catch(x){st(x)}}function Y(nt){nt.done?ht(nt.value):it(nt.value).then(k,P)}Y((J=J.apply(B,Z||[])).next())})},r=Ce&&Ce.__rest||function(B,Z){var W={};for(var J in B)Object.prototype.hasOwnProperty.call(B,J)&&Z.indexOf(J)<0&&(W[J]=B[J]);if(B!=null&&typeof Object.getOwnPropertySymbols=="function")for(var it=0,J=Object.getOwnPropertySymbols(B);it<J.length;it++)Z.indexOf(J[it])<0&&Object.prototype.propertyIsEnumerable.call(B,J[it])&&(W[J[it]]=B[J[it]]);return W},o=Ce&&Ce.__importDefault||function(B){return B&&B.__esModule?B:{default:B}};Object.defineProperty(Ce,"__esModule",{value:!0});const c=Ti(),u=ce(),d=o(Nh()),g=o(Ta()),m=o(xa()),y=o(ki()),v=o(Wn()),_=PA(),A=n(Br),E=o(hy()),w=o(dy()),T=o(FA()),M=o(fy()),C=Yi(),O=o(Ca()),{PDFDataRangeTransport:N}=A,U=(B,Z)=>{switch(Z){case M.default.NEED_PASSWORD:{const W=prompt("Enter the password to open this PDF file.");B(W);break}case M.default.INCORRECT_PASSWORD:{const W=prompt("Invalid password. Please try again.");B(W);break}}};function q(B){return typeof B=="object"&&B!==null&&("data"in B||"range"in B||"url"in B)}const $=(0,u.forwardRef)(function(Z,W){var{children:J,className:it,error:ht="Failed to load PDF file.",externalLinkRel:st,externalLinkTarget:k,file:P,inputRef:Y,imageResourcesPath:nt,loading:x="Loading PDF",noData:I="No PDF file specified.",onItemClick:Q,onLoadError:X,onLoadProgress:tt,onLoadSuccess:ot,onPassword:et=U,onSourceError:ct,onSourceSuccess:_t,options:kt,renderMode:Ye,rotate:Ke}=Z,He=r(Z,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);const[Ni,Le]=(0,O.default)(),{value:ue,error:xi}=Ni,[Kt,Pi]=(0,O.default)(),{value:ie,error:Ki}=Kt,We=(0,u.useRef)(new T.default),Ci=(0,u.useRef)([]),Fi=(0,u.useRef)(void 0),ji=(0,u.useRef)(void 0);P&&P!==Fi.current&&q(P)&&((0,v.default)(!(0,_.dequal)(P,Fi.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),Fi.current=P),kt&&kt!==ji.current&&((0,v.default)(!(0,_.dequal)(kt,ji.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),ji.current=kt);const vn=(0,u.useRef)({scrollPageIntoView:ne=>{const{dest:Ee,pageNumber:ze,pageIndex:Ne=ze-1}=ne;if(Q){Q({dest:Ee,pageIndex:Ne,pageNumber:ze});return}const li=Ci.current[Ne];if(li){li.scrollIntoView();return}(0,v.default)(!1,`An internal link leading to page ${ze} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});(0,u.useImperativeHandle)(W,()=>({linkService:We,pages:Ci,viewer:vn}),[]);function ai(){_t&&_t()}function he(){xi&&((0,v.default)(!1,xi.toString()),ct&&ct(xi))}function ri(){Le({type:"RESET"})}(0,u.useEffect)(ri,[P,Le]);const Vt=(0,u.useCallback)(()=>s(this,void 0,void 0,function*(){if(!P)return null;if(typeof P=="string")return(0,C.isDataURI)(P)?{data:(0,C.dataURItoByteString)(P)}:((0,C.displayCORSWarning)(),{url:P});if(P instanceof N)return{range:P};if((0,C.isArrayBuffer)(P))return{data:P};if(C.isBrowser&&(0,C.isBlob)(P))return{data:yield(0,C.loadFromFile)(P)};if((0,y.default)(typeof P=="object","Invalid parameter in file, need either Uint8Array, string or a parameter object"),(0,y.default)(q(P),"Invalid parameter object: need either .data, .range or .url"),"url"in P&&typeof P.url=="string"){if((0,C.isDataURI)(P.url)){const{url:ne}=P,Ee=r(P,["url"]),ze=(0,C.dataURItoByteString)(ne);return Object.assign({data:ze},Ee)}(0,C.displayCORSWarning)()}return P}),[P]);(0,u.useEffect)(()=>{const ne=(0,g.default)(Vt());return ne.promise.then(Ee=>{Le({type:"RESOLVE",value:Ee})}).catch(Ee=>{Le({type:"REJECT",error:Ee})}),()=>{(0,C.cancelRunningTask)(ne)}},[Vt,Le]),(0,u.useEffect)(()=>{if(!(typeof ue>"u")){if(ue===!1){he();return}ai()}},[ue]);function Ut(){ie&&(ot&&ot(ie),Ci.current=new Array(ie.numPages),We.current.setDocument(ie))}function $n(){Ki&&((0,v.default)(!1,Ki.toString()),X&&X(Ki))}(0,u.useEffect)(function(){Pi({type:"RESET"})},[Pi,ue]),(0,u.useEffect)(function(){if(!ue)return;const Ee=kt?Object.assign(Object.assign({},ue),kt):ue,ze=A.getDocument(Ee);tt&&(ze.onProgress=tt),et&&(ze.onPassword=et);const Ne=ze,li=Ne.promise.then(Qn=>{Pi({type:"RESOLVE",value:Qn})}).catch(Qn=>{Ne.destroyed||Pi({type:"REJECT",error:Qn})});return()=>{li.finally(()=>Ne.destroy())}},[kt,Pi,ue]),(0,u.useEffect)(()=>{if(!(typeof ie>"u")){if(ie===!1){$n();return}Ut()}},[ie]),(0,u.useEffect)(function(){We.current.setViewer(vn.current),We.current.setExternalLinkRel(st),We.current.setExternalLinkTarget(k)},[st,k]);const bn=(0,u.useCallback)((ne,Ee)=>{Ci.current[ne]=Ee},[]),de=(0,u.useCallback)(ne=>{delete Ci.current[ne]},[]),ke=(0,u.useMemo)(()=>({imageResourcesPath:nt,linkService:We.current,onItemClick:Q,pdf:ie,registerPage:bn,renderMode:Ye,rotate:Ke,unregisterPage:de}),[nt,Q,ie,bn,Ye,Ke,de]),Se=(0,u.useMemo)(()=>(0,d.default)(He,()=>ie),[He,ie]);function fe(){return(0,c.jsx)(E.default.Provider,{value:ke,children:J})}function Wi(){return P?ie==null?(0,c.jsx)(w.default,{type:"loading",children:typeof x=="function"?x():x}):ie===!1?(0,c.jsx)(w.default,{type:"error",children:typeof ht=="function"?ht():ht}):fe():(0,c.jsx)(w.default,{type:"no-data",children:typeof I=="function"?I():I})}return(0,c.jsx)("div",Object.assign({className:(0,m.default)("react-pdf__Document",it),ref:Y,style:{"--scale-factor":"1"}},Se,{children:Wi()}))});return Ce.default=$,Ce}var In={},mo={},fm;function gy(){if(fm)return mo;fm=1,Object.defineProperty(mo,"__esModule",{value:!0});const t=(0,ce().createContext)(null);return mo.default=t,mo}var Vi={},yo={},gm;function HA(){if(gm)return yo;gm=1,Object.defineProperty(yo,"__esModule",{value:!0});let f=class{constructor({num:n,gen:s}){this.num=n,this.gen=s}toString(){let n=`${this.num}R`;return this.gen!==0&&(n+=this.gen),n}};return yo.default=f,yo}var vo={},pm;function zA(){if(pm)return vo;pm=1,Object.defineProperty(vo,"__esModule",{value:!0}),vo.default=n;const f=ce(),t=Yi();function n(s){const r=(0,f.useRef)(void 0),o=r.current;return(0,t.isDefined)(o)?()=>o:()=>{const c=s();return r.current=c,c}}return vo}var ga={},mm;function Ra(){if(mm)return ga;mm=1;var f=ga&&ga.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ga,"__esModule",{value:!0}),ga.default=s;const t=ce(),n=f(hy());function s(){return(0,t.useContext)(n.default)}return ga}var pa={},ym;function py(){if(ym)return pa;ym=1;var f=pa&&pa.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(pa,"__esModule",{value:!0}),pa.default=s;const t=ce(),n=f(gy());function s(){return(0,t.useContext)(n.default)}return pa}var vm;function UA(){if(vm)return Vi;vm=1;var f=Vi&&Vi.__awaiter||function(m,y,v,_){function A(E){return E instanceof v?E:new v(function(w){w(E)})}return new(v||(v=Promise))(function(E,w){function T(O){try{C(_.next(O))}catch(N){w(N)}}function M(O){try{C(_.throw(O))}catch(N){w(N)}}function C(O){O.done?E(O.value):A(O.value).then(T,M)}C((_=_.apply(m,y||[])).next())})},t=Vi&&Vi.__rest||function(m,y){var v={};for(var _ in m)Object.prototype.hasOwnProperty.call(m,_)&&y.indexOf(_)<0&&(v[_]=m[_]);if(m!=null&&typeof Object.getOwnPropertySymbols=="function")for(var A=0,_=Object.getOwnPropertySymbols(m);A<_.length;A++)y.indexOf(_[A])<0&&Object.prototype.propertyIsEnumerable.call(m,_[A])&&(v[_[A]]=m[_[A]]);return v},n=Vi&&Vi.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(Vi,"__esModule",{value:!0}),Vi.default=g;const s=Ti(),r=n(ki()),o=n(HA()),c=n(zA()),u=n(Ra()),d=n(py());function g(m){const y=(0,u.default)(),v=(0,d.default)();(0,r.default)(v,"Unable to find Outline context.");const _=Object.assign(Object.assign(Object.assign({},y),v),m),{item:A,linkService:E,onItemClick:w,pdf:T}=_,M=t(_,["item","linkService","onItemClick","pdf"]);(0,r.default)(T,"Attempted to load an outline, but no document was specified. Wrap <Outline /> in a <Document /> or pass explicit `pdf` prop.");const C=(0,c.default)(()=>typeof A.dest=="string"?T.getDestination(A.dest):A.dest),O=(0,c.default)(()=>f(this,void 0,void 0,function*(){const $=yield C();if(!$)throw new Error("Destination not found.");const[B]=$;return T.getPageIndex(new o.default(B))})),N=(0,c.default)(()=>f(this,void 0,void 0,function*(){return(yield O())+1}));function U($){$.preventDefault(),(0,r.default)(w||E,"Either onItemClick callback or linkService must be defined in order to navigate to an outline item."),w?Promise.all([C(),O(),N()]).then(([B,Z,W])=>{w({dest:B,pageIndex:Z,pageNumber:W})}):E&&E.goToDestination(A.dest)}function q(){if(!A.items||!A.items.length)return null;const{items:$}=A;return(0,s.jsx)("ul",{children:$.map((B,Z)=>(0,s.jsx)(g,Object.assign({item:B,pdf:T},M),typeof B.dest=="string"?B.dest:Z))})}return(0,s.jsxs)("li",{children:[(0,s.jsx)("a",{href:"#",onClick:U,children:A.title}),q()]})}return Vi}var bm;function BA(){if(bm)return In;bm=1;var f=In&&In.__rest||function(E,w){var T={};for(var M in E)Object.prototype.hasOwnProperty.call(E,M)&&w.indexOf(M)<0&&(T[M]=E[M]);if(E!=null&&typeof Object.getOwnPropertySymbols=="function")for(var C=0,M=Object.getOwnPropertySymbols(E);C<M.length;C++)w.indexOf(M[C])<0&&Object.prototype.propertyIsEnumerable.call(E,M[C])&&(T[M[C]]=E[M[C]]);return T},t=In&&In.__importDefault||function(E){return E&&E.__esModule?E:{default:E}};Object.defineProperty(In,"__esModule",{value:!0}),In.default=A;const n=Ti(),s=ce(),r=t(Ta()),o=t(Nh()),c=t(xa()),u=t(ki()),d=t(Wn()),g=t(gy()),m=t(UA()),y=Yi(),v=t(Ra()),_=t(Ca());function A(E){const w=(0,v.default)(),T=Object.assign(Object.assign({},w),E),{className:M,inputRef:C,onItemClick:O,onLoadError:N,onLoadSuccess:U,pdf:q}=T,$=f(T,["className","inputRef","onItemClick","onLoadError","onLoadSuccess","pdf"]);(0,u.default)(q,"Attempted to load an outline, but no document was specified. Wrap <Outline /> in a <Document /> or pass explicit `pdf` prop.");const[B,Z]=(0,_.default)(),{value:W,error:J}=B;function it(){typeof W>"u"||W===!1||U&&U(W)}function ht(){J&&((0,d.default)(!1,J.toString()),N&&N(J))}(0,s.useEffect)(function(){Z({type:"RESET"})},[Z,q]),(0,s.useEffect)(function(){if(!q)return;const nt=(0,r.default)(q.getOutline()),x=nt;return nt.promise.then(I=>{Z({type:"RESOLVE",value:I})}).catch(I=>{Z({type:"REJECT",error:I})}),()=>(0,y.cancelRunningTask)(x)},[Z,q]),(0,s.useEffect)(()=>{if(W!==void 0){if(W===!1){ht();return}it()}},[W]);const st=(0,s.useMemo)(()=>({onItemClick:O}),[O]),k=(0,s.useMemo)(()=>(0,o.default)($,()=>W),[$,W]);if(!W)return null;function P(){return W?(0,n.jsx)("ul",{children:W.map((Y,nt)=>(0,n.jsx)(m.default,{item:Y,pdf:q},typeof Y.dest=="string"?Y.dest:nt))}):null}return(0,n.jsx)("div",Object.assign({className:(0,c.default)("react-pdf__Outline",M),ref:C},k,{children:(0,n.jsx)(g.default.Provider,{value:st,children:P()})}))}return In}var qn={},bo={},_m;function my(){if(_m)return bo;_m=1,Object.defineProperty(bo,"__esModule",{value:!0});function f(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var s=t.filter(Boolean);if(s.length<=1){var r=s[0];return r||null}return function(c){s.forEach(function(u){typeof u=="function"?u(c):u&&(u.current=c)})}}return bo.default=f,bo}var _o={},Am;function yy(){if(Am)return _o;Am=1,Object.defineProperty(_o,"__esModule",{value:!0});const t=(0,ce().createContext)(null);return _o.default=t,_o}var bi={},ma={},Ao={},gn={},ms={},Sm;function IA(){return Sm||(Sm=1,Object.defineProperty(ms,"__esModule",{value:!0}),ms.HEADING_PATTERN=ms.PDF_ROLE_TO_HTML_ROLE=void 0,ms.PDF_ROLE_TO_HTML_ROLE={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},ms.HEADING_PATTERN=/^H(\d+)$/),ms}var Em;function qA(){if(Em)return gn;Em=1,Object.defineProperty(gn,"__esModule",{value:!0}),gn.isPdfRole=t,gn.isStructTreeNode=n,gn.isStructTreeNodeWithOnlyContentChild=s,gn.getRoleAttributes=r,gn.getBaseAttributes=o,gn.getAttributes=c;const f=IA();function t(u){return u in f.PDF_ROLE_TO_HTML_ROLE}function n(u){return"children"in u}function s(u){return n(u)?u.children.length===1&&0 in u.children&&"id"in u.children[0]:!1}function r(u){const d={};if(n(u)){const{role:g}=u,m=g.match(f.HEADING_PATTERN);if(m)d.role="heading",d["aria-level"]=Number(m[1]);else if(t(g)){const y=f.PDF_ROLE_TO_HTML_ROLE[g];y&&(d.role=y)}}return d}function o(u){const d={};if(n(u)){if(u.alt!==void 0&&(d["aria-label"]=u.alt),u.lang!==void 0&&(d.lang=u.lang),s(u)){const[g]=u.children;if(g){const m=o(g);return Object.assign(Object.assign({},d),m)}}}else"id"in u&&(d["aria-owns"]=u.id);return d}function c(u){return u?Object.assign(Object.assign({},r(u)),o(u)):null}return gn}var wm;function GA(){if(wm)return Ao;wm=1,Object.defineProperty(Ao,"__esModule",{value:!0}),Ao.default=s;const f=Ti(),t=ce(),n=qA();function s({className:r,node:o}){const c=(0,t.useMemo)(()=>(0,n.getAttributes)(o),[o]),u=(0,t.useMemo)(()=>!(0,n.isStructTreeNode)(o)||(0,n.isStructTreeNodeWithOnlyContentChild)(o)?null:o.children.map((d,g)=>(0,f.jsx)(s,{node:d},g)),[o]);return(0,f.jsx)("span",Object.assign({className:r},c,{children:u}))}return Ao}var ya={},Tm;function Ir(){if(Tm)return ya;Tm=1;var f=ya&&ya.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ya,"__esModule",{value:!0}),ya.default=s;const t=ce(),n=f(yy());function s(){return(0,t.useContext)(n.default)}return ya}var xm;function VA(){if(xm)return ma;xm=1;var f=ma&&ma.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(ma,"__esModule",{value:!0}),ma.default=m;const t=Ti(),n=ce(),s=f(Ta()),r=f(ki()),o=f(Wn()),c=f(GA()),u=f(Ir()),d=f(Ca()),g=Yi();function m(){const y=(0,u.default)();(0,r.default)(y,"Unable to find Page context.");const{onGetStructTreeError:v,onGetStructTreeSuccess:_}=y,[A,E]=(0,d.default)(),{value:w,error:T}=A,{customTextRenderer:M,page:C}=y;function O(){w&&_&&_(w)}function N(){T&&((0,o.default)(!1,T.toString()),v&&v(T))}return(0,n.useEffect)(function(){E({type:"RESET"})},[E,C]),(0,n.useEffect)(function(){if(M||!C)return;const q=(0,s.default)(C.getStructTree()),$=q;return q.promise.then(B=>{E({type:"RESOLVE",value:B})}).catch(B=>{E({type:"REJECT",error:B})}),()=>(0,g.cancelRunningTask)($)},[M,C,E]),(0,n.useEffect)(()=>{if(w!==void 0){if(w===!1){N();return}O()}},[w]),w?(0,t.jsx)(c.default,{className:"react-pdf__Page__structTree structTree",node:w}):null}return ma}var Cm;function XA(){if(Cm)return bi;Cm=1;var f=bi&&bi.__createBinding||(Object.create?function(E,w,T,M){M===void 0&&(M=T);var C=Object.getOwnPropertyDescriptor(w,T);(!C||("get"in C?!w.__esModule:C.writable||C.configurable))&&(C={enumerable:!0,get:function(){return w[T]}}),Object.defineProperty(E,M,C)}:function(E,w,T,M){M===void 0&&(M=T),E[M]=w[T]}),t=bi&&bi.__setModuleDefault||(Object.create?function(E,w){Object.defineProperty(E,"default",{enumerable:!0,value:w})}:function(E,w){E.default=w}),n=bi&&bi.__importStar||function(E){if(E&&E.__esModule)return E;var w={};if(E!=null)for(var T in E)T!=="default"&&Object.prototype.hasOwnProperty.call(E,T)&&f(w,E,T);return t(w,E),w},s=bi&&bi.__importDefault||function(E){return E&&E.__esModule?E:{default:E}};Object.defineProperty(bi,"__esModule",{value:!0}),bi.default=A;const r=Ti(),o=ce(),c=s(my()),u=s(ki()),d=s(Wn()),g=n(Br),m=s(VA()),y=s(Ir()),v=Yi(),_=g.AnnotationMode;function A(E){const w=(0,y.default)();(0,u.default)(w,"Unable to find Page context.");const T=Object.assign(Object.assign({},w),E),{_className:M,canvasBackground:C,devicePixelRatio:O=(0,v.getDevicePixelRatio)(),onRenderError:N,onRenderSuccess:U,page:q,renderForms:$,renderTextLayer:B,rotate:Z,scale:W}=T,{canvasRef:J}=E;(0,u.default)(q,"Attempted to render page canvas, but no page was specified.");const it=(0,o.useRef)(null);function ht(){q&&U&&U((0,v.makePageCallback)(q,W))}function st(nt){(0,v.isCancelException)(nt)||((0,d.default)(!1,nt.toString()),N&&N(nt))}const k=(0,o.useMemo)(()=>q.getViewport({scale:W*O,rotation:Z}),[O,q,Z,W]),P=(0,o.useMemo)(()=>q.getViewport({scale:W,rotation:Z}),[q,Z,W]);(0,o.useEffect)(function(){if(!q)return;q.cleanup();const{current:x}=it;if(!x)return;x.width=k.width,x.height=k.height,x.style.width=`${Math.floor(P.width)}px`,x.style.height=`${Math.floor(P.height)}px`,x.style.visibility="hidden";const I={annotationMode:$?_.ENABLE_FORMS:_.ENABLE,canvasContext:x.getContext("2d",{alpha:!1}),viewport:k};C&&(I.background=C);const Q=q.render(I),X=Q;return Q.promise.then(()=>{x.style.visibility="",ht()}).catch(st),()=>(0,v.cancelRunningTask)(X)},[C,q,$,k,P]);const Y=(0,o.useCallback)(()=>{const{current:nt}=it;nt&&(nt.width=0,nt.height=0)},[]);return(0,o.useEffect)(()=>Y,[Y]),(0,r.jsx)("canvas",{className:`${M}__canvas`,dir:"ltr",ref:(0,c.default)(J,it),style:{display:"block",userSelect:"none"},children:B?(0,r.jsx)(m.default,{}):null})}return bi}var _i={},Rm;function YA(){if(Rm)return _i;Rm=1;var f=_i&&_i.__createBinding||(Object.create?function(w,T,M,C){C===void 0&&(C=M);var O=Object.getOwnPropertyDescriptor(T,M);(!O||("get"in O?!T.__esModule:O.writable||O.configurable))&&(O={enumerable:!0,get:function(){return T[M]}}),Object.defineProperty(w,C,O)}:function(w,T,M,C){C===void 0&&(C=M),w[C]=T[M]}),t=_i&&_i.__setModuleDefault||(Object.create?function(w,T){Object.defineProperty(w,"default",{enumerable:!0,value:T})}:function(w,T){w.default=T}),n=_i&&_i.__importStar||function(w){if(w&&w.__esModule)return w;var T={};if(w!=null)for(var M in w)M!=="default"&&Object.prototype.hasOwnProperty.call(w,M)&&f(T,w,M);return t(T,w),T},s=_i&&_i.__importDefault||function(w){return w&&w.__esModule?w:{default:w}};Object.defineProperty(_i,"__esModule",{value:!0}),_i.default=E;const r=Ti(),o=ce(),c=s(Ta()),u=s(xa()),d=s(ki()),g=s(Wn()),m=n(Br),y=s(Ir()),v=s(Ca()),_=Yi();function A(w){return"str"in w}function E(){const w=(0,y.default)();(0,d.default)(w,"Unable to find Page context.");const{customTextRenderer:T,onGetTextError:M,onGetTextSuccess:C,onRenderTextLayerError:O,onRenderTextLayerSuccess:N,page:U,pageIndex:q,pageNumber:$,rotate:B,scale:Z}=w;(0,d.default)(U,"Attempted to load page text content, but no page was specified.");const[W,J]=(0,v.default)(),{value:it,error:ht}=W,st=(0,o.useRef)(null);(0,g.default)(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function k(){it&&C&&C(it)}function P(){ht&&((0,g.default)(!1,ht.toString()),M&&M(ht))}(0,o.useEffect)(function(){J({type:"RESET"})},[U,J]),(0,o.useEffect)(function(){if(!U)return;const tt=(0,c.default)(U.getTextContent()),ot=tt;return tt.promise.then(et=>{J({type:"RESOLVE",value:et})}).catch(et=>{J({type:"REJECT",error:et})}),()=>(0,_.cancelRunningTask)(ot)},[U,J]),(0,o.useEffect)(()=>{if(it!==void 0){if(it===!1){P();return}k()}},[it]);const Y=(0,o.useCallback)(()=>{N&&N()},[N]),nt=(0,o.useCallback)(X=>{(0,g.default)(!1,X.toString()),O&&O(X)},[O]);function x(){const X=st.current;X&&X.classList.add("selecting")}function I(){const X=st.current;X&&X.classList.remove("selecting")}const Q=(0,o.useMemo)(()=>U.getViewport({scale:Z,rotation:B}),[U,B,Z]);return(0,o.useLayoutEffect)(function(){if(!U||!it)return;const{current:tt}=st;if(!tt)return;tt.innerHTML="";const ot=U.streamTextContent({includeMarkedContent:!0}),et={container:tt,textContentSource:ot,viewport:Q},ct=new m.TextLayer(et),_t=ct;return ct.render().then(()=>{const kt=document.createElement("div");kt.className="endOfContent",tt.append(kt);const Ye=tt.querySelectorAll('[role="presentation"]');if(T){let Ke=0;it.items.forEach((He,Ni)=>{if(!A(He))return;const Le=Ye[Ke];if(!Le)return;const ue=T(Object.assign({pageIndex:q,pageNumber:$,itemIndex:Ni},He));Le.innerHTML=ue,Ke+=He.str&&He.hasEOL?2:1})}Y()}).catch(nt),()=>(0,_.cancelRunningTask)(_t)},[T,nt,Y,U,q,$,it,Q]),(0,r.jsx)("div",{className:(0,u.default)("react-pdf__Page__textContent","textLayer"),onMouseUp:I,onMouseDown:x,ref:st})}return _i}var Ai={},Mm;function KA(){if(Mm)return Ai;Mm=1;var f=Ai&&Ai.__createBinding||(Object.create?function(w,T,M,C){C===void 0&&(C=M);var O=Object.getOwnPropertyDescriptor(T,M);(!O||("get"in O?!T.__esModule:O.writable||O.configurable))&&(O={enumerable:!0,get:function(){return T[M]}}),Object.defineProperty(w,C,O)}:function(w,T,M,C){C===void 0&&(C=M),w[C]=T[M]}),t=Ai&&Ai.__setModuleDefault||(Object.create?function(w,T){Object.defineProperty(w,"default",{enumerable:!0,value:T})}:function(w,T){w.default=T}),n=Ai&&Ai.__importStar||function(w){if(w&&w.__esModule)return w;var T={};if(w!=null)for(var M in w)M!=="default"&&Object.prototype.hasOwnProperty.call(w,M)&&f(T,w,M);return t(T,w),T},s=Ai&&Ai.__importDefault||function(w){return w&&w.__esModule?w:{default:w}};Object.defineProperty(Ai,"__esModule",{value:!0}),Ai.default=E;const r=Ti(),o=ce(),c=s(Ta()),u=s(xa()),d=s(ki()),g=s(Wn()),m=n(Br),y=s(Ra()),v=s(Ir()),_=s(Ca()),A=Yi();function E(){const w=(0,y.default)(),T=(0,v.default)();(0,d.default)(T,"Unable to find Page context.");const M=Object.assign(Object.assign({},w),T),{imageResourcesPath:C,linkService:O,onGetAnnotationsError:N,onGetAnnotationsSuccess:U,onRenderAnnotationLayerError:q,onRenderAnnotationLayerSuccess:$,page:B,pdf:Z,renderForms:W,rotate:J,scale:it=1}=M;(0,d.default)(Z,"Attempted to load page annotations, but no document was specified. Wrap <Page /> in a <Document /> or pass explicit `pdf` prop."),(0,d.default)(B,"Attempted to load page annotations, but no page was specified."),(0,d.default)(O,"Attempted to load page annotations, but no linkService was specified.");const[ht,st]=(0,_.default)(),{value:k,error:P}=ht,Y=(0,o.useRef)(null);(0,g.default)(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function nt(){k&&U&&U(k)}function x(){P&&((0,g.default)(!1,P.toString()),N&&N(P))}(0,o.useEffect)(function(){st({type:"RESET"})},[st,B]),(0,o.useEffect)(function(){if(!B)return;const ot=(0,c.default)(B.getAnnotations()),et=ot;return ot.promise.then(ct=>{st({type:"RESOLVE",value:ct})}).catch(ct=>{st({type:"REJECT",error:ct})}),()=>{(0,A.cancelRunningTask)(et)}},[st,B]),(0,o.useEffect)(()=>{if(k!==void 0){if(k===!1){x();return}nt()}},[k]);function I(){$&&$()}function Q(tt){(0,g.default)(!1,`${tt}`),q&&q(tt)}const X=(0,o.useMemo)(()=>B.getViewport({scale:it,rotation:J}),[B,J,it]);return(0,o.useEffect)(function(){if(!Z||!B||!O||!k)return;const{current:ot}=Y;if(!ot)return;const et=X.clone({dontFlip:!0}),ct={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,div:ot,l10n:null,page:B,structTreeLayer:null,viewport:et},_t={annotations:k,annotationStorage:Z.annotationStorage,div:ot,imageResourcesPath:C,linkService:O,page:B,renderForms:W,viewport:et};ot.innerHTML="";try{new m.AnnotationLayer(ct).render(_t),I()}catch(kt){Q(kt)}return()=>{}},[k,C,O,B,Z,W,X]),(0,r.jsx)("div",{className:(0,u.default)("react-pdf__Page__annotations","annotationLayer"),ref:Y})}return Ai}var Dm;function vy(){if(Dm)return qn;Dm=1;var f=qn&&qn.__rest||function(O,N){var U={};for(var q in O)Object.prototype.hasOwnProperty.call(O,q)&&N.indexOf(q)<0&&(U[q]=O[q]);if(O!=null&&typeof Object.getOwnPropertySymbols=="function")for(var $=0,q=Object.getOwnPropertySymbols(O);$<q.length;$++)N.indexOf(q[$])<0&&Object.prototype.propertyIsEnumerable.call(O,q[$])&&(U[q[$]]=O[q[$]]);return U},t=qn&&qn.__importDefault||function(O){return O&&O.__esModule?O:{default:O}};Object.defineProperty(qn,"__esModule",{value:!0}),qn.default=C;const n=Ti(),s=ce(),r=t(Ta()),o=t(Nh()),c=t(xa()),u=t(my()),d=t(ki()),g=t(Wn()),m=t(yy()),y=t(dy()),v=t(XA()),_=t(YA()),A=t(KA()),E=Yi(),w=t(Ra()),T=t(Ca()),M=1;function C(O){const N=(0,w.default)(),U=Object.assign(Object.assign({},N),O),{_className:q="react-pdf__Page",_enableRegisterUnregisterPage:$=!0,canvasBackground:B,canvasRef:Z,children:W,className:J,customRenderer:it,customTextRenderer:ht,devicePixelRatio:st,error:k="Failed to load the page.",height:P,inputRef:Y,loading:nt="Loading page",noData:x="No page specified.",onGetAnnotationsError:I,onGetAnnotationsSuccess:Q,onGetStructTreeError:X,onGetStructTreeSuccess:tt,onGetTextError:ot,onGetTextSuccess:et,onLoadError:ct,onLoadSuccess:_t,onRenderAnnotationLayerError:kt,onRenderAnnotationLayerSuccess:Ye,onRenderError:Ke,onRenderSuccess:He,onRenderTextLayerError:Ni,onRenderTextLayerSuccess:Le,pageIndex:ue,pageNumber:xi,pdf:Kt,registerPage:Pi,renderAnnotationLayer:ie=!0,renderForms:Ki=!1,renderMode:We="canvas",renderTextLayer:Ci=!0,rotate:Fi,scale:ji=M,unregisterPage:vn,width:ai}=U,he=f(U,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[ri,Vt]=(0,T.default)(),{value:Ut,error:$n}=ri,bn=(0,s.useRef)(null);(0,d.default)(Kt,"Attempted to load a page, but no document was specified. Wrap <Page /> in a <Document /> or pass explicit `pdf` prop.");const de=(0,E.isProvided)(xi)?xi-1:ue??null,ke=xi??((0,E.isProvided)(ue)?ue+1:null),Se=Fi??(Ut?Ut.rotate:null),fe=(0,s.useMemo)(()=>{if(!Ut)return null;let Hi=1;const Zn=ji??M;if(ai||P){const Ts=Ut.getViewport({scale:1,rotation:Se});ai?Hi=ai/Ts.width:P&&(Hi=P/Ts.height)}return Zn*Hi},[P,Ut,Se,ji,ai]);(0,s.useEffect)(function(){return()=>{(0,E.isProvided)(de)&&$&&vn&&vn(de)}},[$,Kt,de,vn]);function Wi(){if(_t){if(!Ut||!fe)return;_t((0,E.makePageCallback)(Ut,fe))}if($&&Pi){if(!(0,E.isProvided)(de)||!bn.current)return;Pi(de,bn.current)}}function ne(){$n&&((0,g.default)(!1,$n.toString()),ct&&ct($n))}(0,s.useEffect)(function(){Vt({type:"RESET"})},[Vt,Kt,de]),(0,s.useEffect)(function(){if(!Kt||!ke)return;const Zn=(0,r.default)(Kt.getPage(ke)),Ts=Zn;return Zn.promise.then(oi=>{Vt({type:"RESOLVE",value:oi})}).catch(oi=>{Vt({type:"REJECT",error:oi})}),()=>(0,E.cancelRunningTask)(Ts)},[Vt,Kt,ke]),(0,s.useEffect)(()=>{if(Ut!==void 0){if(Ut===!1){ne();return}Wi()}},[Ut,fe]);const Ee=(0,s.useMemo)(()=>Ut&&(0,E.isProvided)(de)&&ke&&(0,E.isProvided)(Se)&&(0,E.isProvided)(fe)?{_className:q,canvasBackground:B,customTextRenderer:ht,devicePixelRatio:st,onGetAnnotationsError:I,onGetAnnotationsSuccess:Q,onGetStructTreeError:X,onGetStructTreeSuccess:tt,onGetTextError:ot,onGetTextSuccess:et,onRenderAnnotationLayerError:kt,onRenderAnnotationLayerSuccess:Ye,onRenderError:Ke,onRenderSuccess:He,onRenderTextLayerError:Ni,onRenderTextLayerSuccess:Le,page:Ut,pageIndex:de,pageNumber:ke,renderForms:Ki,renderTextLayer:Ci,rotate:Se,scale:fe}:null,[q,B,ht,st,I,Q,X,tt,ot,et,kt,Ye,Ke,He,Ni,Le,Ut,de,ke,Ki,Ci,Se,fe]),ze=(0,s.useMemo)(()=>(0,o.default)(he,()=>Ut&&(fe?(0,E.makePageCallback)(Ut,fe):void 0)),[he,Ut,fe]),Ne=`${de}@${fe}/${Se}`;function li(){switch(We){case"custom":return(0,d.default)(it,'renderMode was set to "custom", but no customRenderer was passed.'),(0,n.jsx)(it,{},`${Ne}_custom`);case"none":return null;case"canvas":default:return(0,n.jsx)(v.default,{canvasRef:Z},`${Ne}_canvas`)}}function Qn(){return Ci?(0,n.jsx)(_.default,{},`${Ne}_text`):null}function qr(){return ie?(0,n.jsx)(A.default,{},`${Ne}_annotations`):null}function Gr(){return(0,n.jsxs)(m.default.Provider,{value:Ee,children:[li(),Qn(),qr(),W]})}function Ma(){return ke?Kt===null||Ut===void 0||Ut===null?(0,n.jsx)(y.default,{type:"loading",children:typeof nt=="function"?nt():nt}):Kt===!1||Ut===!1?(0,n.jsx)(y.default,{type:"error",children:typeof k=="function"?k():k}):Gr():(0,n.jsx)(y.default,{type:"no-data",children:typeof x=="function"?x():x})}return(0,n.jsx)("div",Object.assign({className:(0,c.default)(q,J),"data-page-number":ke,ref:(0,u.default)(Y,bn),style:{"--scale-factor":`${fe}`,backgroundColor:B||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},ze,{children:Ma()}))}return qn}var Gn={},Om;function WA(){if(Om)return Gn;Om=1;var f=Gn&&Gn.__rest||function(g,m){var y={};for(var v in g)Object.prototype.hasOwnProperty.call(g,v)&&m.indexOf(v)<0&&(y[v]=g[v]);if(g!=null&&typeof Object.getOwnPropertySymbols=="function")for(var _=0,v=Object.getOwnPropertySymbols(g);_<v.length;_++)m.indexOf(v[_])<0&&Object.prototype.propertyIsEnumerable.call(g,v[_])&&(y[v[_]]=g[v[_]]);return y},t=Gn&&Gn.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(Gn,"__esModule",{value:!0}),Gn.default=d;const n=Ti(),s=t(xa()),r=t(ki()),o=t(vy()),c=Yi(),u=t(Ra());function d(g){const m=(0,u.default)(),y=Object.assign(Object.assign({},m),g),{className:v,linkService:_,onItemClick:A,pageIndex:E,pageNumber:w,pdf:T}=y;(0,r.default)(T,"Attempted to load a thumbnail, but no document was specified. Wrap <Thumbnail /> in a <Document /> or pass explicit `pdf` prop.");const M=(0,c.isProvided)(w)?w-1:E??null,C=w??((0,c.isProvided)(E)?E+1:null);function O($){$.preventDefault(),!(!(0,c.isProvided)(M)||!C)&&((0,r.default)(A||_,"Either onItemClick callback or linkService must be defined in order to navigate to an outline item."),A?A({pageIndex:M,pageNumber:C}):_&&_.goToPage(C))}const{className:N,onItemClick:U}=g,q=f(g,["className","onItemClick"]);return(0,n.jsx)("a",{className:(0,s.default)("react-pdf__Thumbnail",v),href:C?"#":void 0,onClick:O,children:(0,n.jsx)(o.default,Object.assign({},q,{_className:"react-pdf__Thumbnail__page",_enableRegisterUnregisterPage:!1,renderAnnotationLayer:!1,renderTextLayer:!1}))})}return Gn}var Lm;function $A(){if(Lm)return Lt;Lm=1;var f=Lt&&Lt.__createBinding||(Object.create?function(A,E,w,T){T===void 0&&(T=w);var M=Object.getOwnPropertyDescriptor(E,w);(!M||("get"in M?!E.__esModule:M.writable||M.configurable))&&(M={enumerable:!0,get:function(){return E[w]}}),Object.defineProperty(A,T,M)}:function(A,E,w,T){T===void 0&&(T=w),A[T]=E[w]}),t=Lt&&Lt.__setModuleDefault||(Object.create?function(A,E){Object.defineProperty(A,"default",{enumerable:!0,value:E})}:function(A,E){A.default=E}),n=Lt&&Lt.__importStar||function(A){if(A&&A.__esModule)return A;var E={};if(A!=null)for(var w in A)w!=="default"&&Object.prototype.hasOwnProperty.call(A,w)&&f(E,A,w);return t(E,A),E},s=Lt&&Lt.__importDefault||function(A){return A&&A.__esModule?A:{default:A}};Object.defineProperty(Lt,"__esModule",{value:!0}),Lt.PasswordResponses=Lt.usePageContext=Lt.useOutlineContext=Lt.useDocumentContext=Lt.Thumbnail=Lt.Page=Lt.Outline=Lt.Document=Lt.pdfjs=void 0;const r=n(Br);Lt.pdfjs=r;const o=s(jA());Lt.Document=o.default;const c=s(BA());Lt.Outline=c.default;const u=s(vy());Lt.Page=u.default;const d=s(WA());Lt.Thumbnail=d.default;const g=s(Ra());Lt.useDocumentContext=g.default;const m=s(py());Lt.useOutlineContext=m.default;const y=s(Ir());Lt.usePageContext=y.default;const v=s(fy());return Lt.PasswordResponses=v.default,(0,Yi().displayWorkerWarning)(),r.GlobalWorkerOptions.workerSrc="pdf.worker.mjs",Lt}var km;function QA(){if(km)return da;km=1;var f=da&&da.__awaiter||function(s,r,o,c){function u(d){return d instanceof o?d:new o(function(g){g(d)})}return new(o||(o=Promise))(function(d,g){function m(_){try{v(c.next(_))}catch(A){g(A)}}function y(_){try{v(c.throw(_))}catch(A){g(A)}}function v(_){_.done?d(_.value):u(_.value).then(m,y)}v((c=c.apply(s,r||[])).next())})};Object.defineProperty(da,"__esModule",{value:!0});const t=$A();t.pdfjs.GlobalWorkerOptions.workerSrc=`//cdnjs.cloudflare.com/ajax/libs/pdf.js/${t.pdfjs.version}/pdf.worker.mjs`;const n=s=>f(void 0,void 0,void 0,function*(){const r=URL.createObjectURL(s),o=t.pdfjs.getDocument(r);let c="";try{const u=yield o.promise,d=u.numPages;for(let g=1;g<=d;g++){const v=(yield(yield u.getPage(g)).getTextContent()).items.map(_=>"str"in _?_.str:"").join(" ");c+=v}}catch(u){throw new Error(`Failed to extract text from PDF: ${u}`)}finally{URL.revokeObjectURL(r),o.destroy()}return c});return da.default=n,da}var ZA=QA();const JA=Nm(ZA),Oe=Ib((f,t)=>({selectedFile:null,setSelectedFile:n=>f({selectedFile:n}),dictionary:new Set,setDictionary:n=>f({dictionary:new Set(n)}),loading:!1,setLoading:n=>f({loading:n}),wordCounts:{},setWordCounts:n=>f({wordCounts:n}),lookupLoading:new Set,addLookupLoading:n=>f(s=>{const r=new Set(s.lookupLoading);return r.add(n),{lookupLoading:r}}),removeLookupLoading:n=>f(s=>{const r=new Set(s.lookupLoading);return r.delete(n),{lookupLoading:r}}),expandedWords:new Set,openLookup:async n=>{const{expandedWords:s,lookupData:r,setLookupData:o,addLookupLoading:c,removeLookupLoading:u}=t();if(s.has(n))return;const d=new Set(s);if(d.add(n),f({expandedWords:d}),r[n])return;c(n);const g=y=>{const v=new Set,_=y.toLowerCase();return v.add(_),_.endsWith("ies")&&v.add(_.slice(0,-3)+"y"),_.endsWith("ves")&&(v.add(_.slice(0,-3)+"f"),v.add(_.slice(0,-3)+"fe")),_.endsWith("es")&&v.add(_.slice(0,-2)),_.endsWith("s")&&v.add(_.slice(0,-1)),_.endsWith("ied")&&v.add(_.slice(0,-3)+"y"),_.endsWith("ed")&&(v.add(_.slice(0,-2)),v.add(_.slice(0,-1))),_.endsWith("ing")&&(v.add(_.slice(0,-3)),v.add(_.slice(0,-3)+"e")),_.endsWith("ier")&&v.add(_.slice(0,-3)+"y"),_.endsWith("iest")&&v.add(_.slice(0,-4)+"y"),_.endsWith("er")&&v.add(_.slice(0,-2)),_.endsWith("est")&&v.add(_.slice(0,-3)),Array.from(v)},m=async y=>{const A=(await(await fetch(`https://api.allorigins.win/raw?url=${encodeURIComponent(`https://api.excelapi.org/dictionary/enja?word=${y}`)}`,{headers:{Accept:"text/plain","User-Agent":"Mozilla/5.0"}})).text()).replace(/^\uFEFF/,"").replace(/[]/g,"'").replace(/[]/g,'"').replace(/[\u0000-\u001F\u007F]/g,"").replace(/\u3000/g," ").trim();let w=A.split(/\s*\/\s*/).map(T=>T.trim()).flatMap(T=>T.split(/[;,]/).map(M=>M.trim()).filter(M=>M.length>0));return w.length===0&&A.length>0&&(w=[A]),w};try{let y=await m(n);if(y.length===0){const v=g(n);for(const _ of v){if(_===n.toLowerCase())continue;const A=await m(_);if(A.length>0){y=A;break}}}o(n,y)}catch(y){console.error("Lookup failed:",y),o(n,[])}finally{u(n)}},closeLookup:n=>{const{expandedWords:s}=t(),r=new Set(s);r.delete(n),f({expandedWords:r})},lookupData:{},setLookupData:(n,s)=>f(r=>({lookupData:{...r.lookupData,[n]:s}})),extractText:async(n,s)=>{const{dictionary:r,setLoading:o,setWordCounts:c}=t();o(!0);try{let u=await JA(n);u=u.toLocaleLowerCase().replace(/[^a-z0-9\s]/g," ");let d=u.split(/\s+/).filter(Boolean);d=d.filter(y=>!s.includes(y)&&r.has(y)&&!/^\d+$/.test(y)&&y.length>3);const g=new Map;d.forEach(y=>{g.set(y,(g.get(y)||0)+1)});const m=Object.fromEntries(g);c(m)}catch(u){console.error("Text extraction failed",u),c({})}finally{o(!1)}}}));function tS(){return gt.jsxs(gt.Fragment,{children:[gt.jsx("h2",{children:"Personal Dictionary"}),gt.jsx("p",{children:"Upload a PDF file and get all the words"})]})}function eS(){const f=Oe(r=>r.selectedFile),t=Oe(r=>r.setSelectedFile),n=r=>{r.target.files?.length&&t(r.target.files[0])},s=r=>{r.preventDefault(),r.dataTransfer.files?.length&&t(r.dataTransfer.files[0])};return gt.jsxs("div",{className:"drop-zone",onDrop:s,onDragOver:r=>r.preventDefault(),onClick:()=>document.getElementById("fileInput")?.click(),children:[gt.jsx("input",{id:"fileInput",type:"file",accept:"application/pdf",onChange:n,style:{display:"none"}}),gt.jsx("button",{className:"upload-btn",children:f?"Change File":"Select File"}),gt.jsx("p",{className:"small-text",children:"or drag and drop here"})]})}const iS=["a","an","the","and","or","but","if","while","of","at","by","for","with","about","against","between","into","through","during","before","after","above","below","to","from","up","down","in","out","on","off","over","under","again","further","then","once","here","there","when","where","why","how","all","any","both","each","few","more","most","other","some","such","no","nor","not","only","own","same","so","than","too","very","can","will","just","don","should","now","you","me","we","us","they","them","your","am","is","are","be","although","because","since","unless","though","even","whereas","while","once","provided","rather","lest","if","until","as","that","after","i","he","she","it","you","we","they","me","him","her","us","them","my","mine","your","yours","his","her","hers","its","our","ours","their","theirs","myself","yourself","himself","herself","itself","ourselves","yourselves","themselves","who","whom","whose","which","that","anyone","everyone","someone","noone","none","each","the","be","to","of","and","a","in","that","have","I","you","do","but","at","by","we","his","from","they","she","one","all","would","there","say","make","can","like","time","no","up","about","who","get","which","go","me","my","when","so","if","out","into","just","over","after","also","how","is","am","will","are","what","was","had","has","this","that","those","one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen","twenty","twenty-one","twenty-two","twenty-three","twenty-four","twenty-five","twenty-six","twenty-seven","twenty-eight","twenty-nine","thirty","thirty-one","thirty-two","thirty-three","thirty-four","thirty-five","thirty-six","thirty-seven","thirty-eight","thirty-nine","forty","forty-one","forty-two","forty-three","forty-four","forty-five","forty-six","forty-seven","forty-eight","forty-nine","fifty","fifty-one","fifty-two","fifty-three","fifty-four","fifty-five","fifty-six","fifty-seven","fifty-eight","fifty-nine","sixty","sixty-one","sixty-two","sixty-three","sixty-four","sixty-five","sixty-six","sixty-seven","sixty-eight","sixty-nine","seventy","seventy-one","seventy-two","seventy-three","seventy-four","seventy-five","seventy-six","seventy-seven","seventy-eight","seventy-nine","eighty","eighty-one","eighty-two","eighty-three","eighty-four","eighty-five","eighty-six","eighty-seven","eighty-eight","eighty-nine","ninety","ninety-one","ninety-two","ninety-three","ninety-four","ninety-five","ninety-six","ninety-seven","ninety-eight","ninety-nine"],nS={stopwords:iS};function sS(){const f=Oe(o=>o.selectedFile),t=Oe(o=>o.loading),n=Oe(o=>o.dictionary),s=Oe(o=>o.extractText),r=async()=>{if(!f)return;const o=nS.stopwords;await s(f,o)};return gt.jsx("button",{className:"process-btn",onClick:r,disabled:!f||t||n.size===0,children:t?"Processing...":f?gt.jsxs(gt.Fragment,{children:["Process ",gt.jsx("strong",{children:f.name})]}):"Process PDF"})}function aS({word:f}){const t=Oe(r=>r.expandedWords),n=Oe(r=>r.openLookup),s=Oe(r=>r.closeLookup);return gt.jsx("button",{style:{padding:"2px 6px",fontSize:"0.8rem",cursor:"pointer",background:"#007bff",color:"white",border:"none",borderRadius:"3px",width:"70px",textAlign:"center"},onClick:()=>t.has(f)?s(f):n(f),children:t.has(f)?"Close":"Lookup"})}function rS(){const f=Oe(r=>r.wordCounts),t=Oe(r=>r.expandedWords),n=Oe(r=>r.lookupLoading),s=Oe(r=>r.lookupData);return gt.jsx(gt.Fragment,{children:Object.entries(f).map(([r,o],c)=>gt.jsxs(gt.Fragment,{children:[gt.jsxs("tr",{style:{backgroundColor:c%2===0?"#f9f9f9":"#ffffff"},children:[gt.jsxs("td",{style:{padding:"8px",display:"flex",alignItems:"center",gap:"6px"},children:[gt.jsx(aS,{word:r}),gt.jsx("span",{children:r}),n.has(r)&&gt.jsx("span",{style:{marginLeft:"8px",fontSize:"0.8rem",color:"#666"},children:"Loading..."})]}),gt.jsx("td",{style:{padding:"8px",textAlign:"right"},children:o})]},`${r}-row`),t.has(r)&&gt.jsx("tr",{children:gt.jsxs("td",{colSpan:2,style:{padding:"8px",background:"#eef"},children:[s[r]&&s[r].length>0&&gt.jsxs("div",{children:[gt.jsx("strong",{children:r}),gt.jsx("ul",{children:s[r].map((u,d)=>gt.jsx("li",{children:u},d))})]}),s[r]&&s[r].length===0&&"No results found."]})},`${r}-expanded`)]}))})}function lS(){const f=Oe(s=>s.wordCounts),t=Oe(s=>s.loading),n=Object.keys(f).length;return gt.jsxs("div",{className:"results",children:[n>0&&gt.jsxs("p",{children:[gt.jsx("strong",{children:"Unique words:"})," ",n]}),n===0&&!t?"No data yet.":gt.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",marginTop:"1rem"},children:[gt.jsx("thead",{children:gt.jsxs("tr",{children:[gt.jsx("th",{style:{textAlign:"left",borderBottom:"2px solid #ccc",padding:"8px"},children:"Word"}),gt.jsx("th",{style:{textAlign:"right",borderBottom:"2px solid #ccc",padding:"8px"},children:"Count"})]})}),gt.jsx(rS,{})]})]})}function oS(){const f=Oe(t=>t.setDictionary);return mh.useEffect(()=>{async function t(){try{const n=await fetch("/pdf-analyzer/dictionary.json");if(!n.ok)throw new Error("Failed to load dictionary");const s=await n.json();f(s.dictionary)}catch(n){console.error("Failed to load dictionary:",n)}}t()},[f]),gt.jsxs("div",{className:"upload-container",children:[gt.jsx(tS,{}),gt.jsx(eS,{}),gt.jsx(sS,{}),gt.jsx(lS,{})]})}function cS(){return gt.jsx(oS,{})}Hb.createRoot(document.getElementById("root")).render(gt.jsx(mh.StrictMode,{children:gt.jsx(cS,{})}));
