var _p=g=>{throw TypeError(g)};var Gu=(g,t,n)=>t.has(g)||_p("Cannot "+n);var Di=(g,t,n)=>(Gu(g,t,"read from private field"),n?n.call(g):t.get(g)),ha=(g,t,n)=>t.has(g)?_p("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(g):t.set(g,n),wr=(g,t,n,a)=>(Gu(g,t,"write to private field"),a?a.call(g,n):t.set(g,n),n),io=(g,t,n)=>(Gu(g,t,"access private method"),n);var Ap=(g,t,n,a)=>({set _(r){wr(g,t,r,n)},get _(){return Di(g,t,a)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();function Nm(g){return g&&g.__esModule&&Object.prototype.hasOwnProperty.call(g,"default")?g.default:g}function Mb(g){if(Object.prototype.hasOwnProperty.call(g,"__esModule"))return g;var t=g.default;if(typeof t=="function"){var n=function a(){var r=!1;try{r=this instanceof a}catch{}return r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(g).forEach(function(a){var r=Object.getOwnPropertyDescriptor(g,a);Object.defineProperty(n,a,r.get?r:{enumerable:!0,get:function(){return g[a]}})}),n}var Vu={exports:{}},Tr={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sp;function Db(){if(Sp)return Tr;Sp=1;var g=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(a,r,o){var c=null;if(o!==void 0&&(c=""+o),r.key!==void 0&&(c=""+r.key),"key"in r){o={};for(var u in r)u!=="key"&&(o[u]=r[u])}else o=r;return r=o.ref,{$$typeof:g,type:a,key:c,ref:r!==void 0?r:null,props:o}}return Tr.Fragment=t,Tr.jsx=n,Tr.jsxs=n,Tr}var Ep;function wi(){return Ep||(Ep=1,Vu.exports=Db()),Vu.exports}var Tt=wi(),Xu={exports:{}},yt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wp;function Ob(){if(wp)return yt;wp=1;var g=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),y=Symbol.iterator;function v(x){return x===null||typeof x!="object"?null:(x=y&&x[y]||x["@@iterator"],typeof x=="function"?x:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,A={};function w(x,I,W){this.props=x,this.context=I,this.refs=A,this.updater=W||_}w.prototype.isReactComponent={},w.prototype.setState=function(x,I){if(typeof x!="object"&&typeof x!="function"&&x!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,x,I,"setState")},w.prototype.forceUpdate=function(x){this.updater.enqueueForceUpdate(this,x,"forceUpdate")};function T(){}T.prototype=w.prototype;function M(x,I,W){this.props=x,this.context=I,this.refs=A,this.updater=W||_}var C=M.prototype=new T;C.constructor=M,S(C,w.prototype),C.isPureReactComponent=!0;var O=Array.isArray,N={H:null,A:null,T:null,S:null,V:null},U=Object.prototype.hasOwnProperty;function q(x,I,W,X,tt,ot){return W=ot.ref,{$$typeof:g,type:x,key:I,ref:W!==void 0?W:null,props:ot}}function Q(x,I){return q(x.type,I,void 0,void 0,void 0,x.props)}function B(x){return typeof x=="object"&&x!==null&&x.$$typeof===g}function Z(x){var I={"=":"=0",":":"=2"};return"$"+x.replace(/[=:]/g,function(W){return I[W]})}var $=/\/+/g;function J(x,I){return typeof x=="object"&&x!==null&&x.key!=null?Z(""+x.key):I.toString(36)}function it(){}function ht(x){switch(x.status){case"fulfilled":return x.value;case"rejected":throw x.reason;default:switch(typeof x.status=="string"?x.then(it,it):(x.status="pending",x.then(function(I){x.status==="pending"&&(x.status="fulfilled",x.value=I)},function(I){x.status==="pending"&&(x.status="rejected",x.reason=I)})),x.status){case"fulfilled":return x.value;case"rejected":throw x.reason}}throw x}function st(x,I,W,X,tt){var ot=typeof x;(ot==="undefined"||ot==="boolean")&&(x=null);var et=!1;if(x===null)et=!0;else switch(ot){case"bigint":case"string":case"number":et=!0;break;case"object":switch(x.$$typeof){case g:case t:et=!0;break;case m:return et=x._init,st(et(x._payload),I,W,X,tt)}}if(et)return tt=tt(x),et=X===""?"."+J(x,0):X,O(tt)?(W="",et!=null&&(W=et.replace($,"$&/")+"/"),st(tt,I,W,"",function(kt){return kt})):tt!=null&&(B(tt)&&(tt=Q(tt,W+(tt.key==null||x&&x.key===tt.key?"":(""+tt.key).replace($,"$&/")+"/")+et)),I.push(tt)),1;et=0;var ct=X===""?".":X+":";if(O(x))for(var bt=0;bt<x.length;bt++)X=x[bt],ot=ct+J(X,bt),et+=st(X,I,W,ot,tt);else if(bt=v(x),typeof bt=="function")for(x=bt.call(x),bt=0;!(X=x.next()).done;)X=X.value,ot=ct+J(X,bt++),et+=st(X,I,W,ot,tt);else if(ot==="object"){if(typeof x.then=="function")return st(ht(x),I,W,X,tt);throw I=String(x),Error("Objects are not valid as a React child (found: "+(I==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":I)+"). If you meant to render a collection of children, use an array instead.")}return et}function k(x,I,W){if(x==null)return x;var X=[],tt=0;return st(x,X,"","",function(ot){return I.call(W,ot,tt++)}),X}function P(x){if(x._status===-1){var I=x._result;I=I(),I.then(function(W){(x._status===0||x._status===-1)&&(x._status=1,x._result=W)},function(W){(x._status===0||x._status===-1)&&(x._status=2,x._result=W)}),x._status===-1&&(x._status=0,x._result=I)}if(x._status===1)return x._result.default;throw x._result}var Y=typeof reportError=="function"?reportError:function(x){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var I=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof x=="object"&&x!==null&&typeof x.message=="string"?String(x.message):String(x),error:x});if(!window.dispatchEvent(I))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",x);return}console.error(x)};function nt(){}return yt.Children={map:k,forEach:function(x,I,W){k(x,function(){I.apply(this,arguments)},W)},count:function(x){var I=0;return k(x,function(){I++}),I},toArray:function(x){return k(x,function(I){return I})||[]},only:function(x){if(!B(x))throw Error("React.Children.only expected to receive a single React element child.");return x}},yt.Component=w,yt.Fragment=n,yt.Profiler=r,yt.PureComponent=M,yt.StrictMode=a,yt.Suspense=d,yt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,yt.__COMPILER_RUNTIME={__proto__:null,c:function(x){return N.H.useMemoCache(x)}},yt.cache=function(x){return function(){return x.apply(null,arguments)}},yt.cloneElement=function(x,I,W){if(x==null)throw Error("The argument must be a React element, but you passed "+x+".");var X=S({},x.props),tt=x.key,ot=void 0;if(I!=null)for(et in I.ref!==void 0&&(ot=void 0),I.key!==void 0&&(tt=""+I.key),I)!U.call(I,et)||et==="key"||et==="__self"||et==="__source"||et==="ref"&&I.ref===void 0||(X[et]=I[et]);var et=arguments.length-2;if(et===1)X.children=W;else if(1<et){for(var ct=Array(et),bt=0;bt<et;bt++)ct[bt]=arguments[bt+2];X.children=ct}return q(x.type,tt,void 0,void 0,ot,X)},yt.createContext=function(x){return x={$$typeof:c,_currentValue:x,_currentValue2:x,_threadCount:0,Provider:null,Consumer:null},x.Provider=x,x.Consumer={$$typeof:o,_context:x},x},yt.createElement=function(x,I,W){var X,tt={},ot=null;if(I!=null)for(X in I.key!==void 0&&(ot=""+I.key),I)U.call(I,X)&&X!=="key"&&X!=="__self"&&X!=="__source"&&(tt[X]=I[X]);var et=arguments.length-2;if(et===1)tt.children=W;else if(1<et){for(var ct=Array(et),bt=0;bt<et;bt++)ct[bt]=arguments[bt+2];tt.children=ct}if(x&&x.defaultProps)for(X in et=x.defaultProps,et)tt[X]===void 0&&(tt[X]=et[X]);return q(x,ot,void 0,void 0,null,tt)},yt.createRef=function(){return{current:null}},yt.forwardRef=function(x){return{$$typeof:u,render:x}},yt.isValidElement=B,yt.lazy=function(x){return{$$typeof:m,_payload:{_status:-1,_result:x},_init:P}},yt.memo=function(x,I){return{$$typeof:f,type:x,compare:I===void 0?null:I}},yt.startTransition=function(x){var I=N.T,W={};N.T=W;try{var X=x(),tt=N.S;tt!==null&&tt(W,X),typeof X=="object"&&X!==null&&typeof X.then=="function"&&X.then(nt,Y)}catch(ot){Y(ot)}finally{N.T=I}},yt.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},yt.use=function(x){return N.H.use(x)},yt.useActionState=function(x,I,W){return N.H.useActionState(x,I,W)},yt.useCallback=function(x,I){return N.H.useCallback(x,I)},yt.useContext=function(x){return N.H.useContext(x)},yt.useDebugValue=function(){},yt.useDeferredValue=function(x,I){return N.H.useDeferredValue(x,I)},yt.useEffect=function(x,I,W){var X=N.H;if(typeof W=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return X.useEffect(x,I)},yt.useId=function(){return N.H.useId()},yt.useImperativeHandle=function(x,I,W){return N.H.useImperativeHandle(x,I,W)},yt.useInsertionEffect=function(x,I){return N.H.useInsertionEffect(x,I)},yt.useLayoutEffect=function(x,I){return N.H.useLayoutEffect(x,I)},yt.useMemo=function(x,I){return N.H.useMemo(x,I)},yt.useOptimistic=function(x,I){return N.H.useOptimistic(x,I)},yt.useReducer=function(x,I,W){return N.H.useReducer(x,I,W)},yt.useRef=function(x){return N.H.useRef(x)},yt.useState=function(x){return N.H.useState(x)},yt.useSyncExternalStore=function(x,I,W){return N.H.useSyncExternalStore(x,I,W)},yt.useTransition=function(){return N.H.useTransition()},yt.version="19.1.1",yt}var Tp;function ce(){return Tp||(Tp=1,Xu.exports=Ob()),Xu.exports}var Nr=ce();const no=Nm(Nr);var Yu={exports:{}},xr={},Ku={exports:{}},$u={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xp;function Lb(){return xp||(xp=1,function(g){function t(k,P){var Y=k.length;k.push(P);t:for(;0<Y;){var nt=Y-1>>>1,x=k[nt];if(0<r(x,P))k[nt]=P,k[Y]=x,Y=nt;else break t}}function n(k){return k.length===0?null:k[0]}function a(k){if(k.length===0)return null;var P=k[0],Y=k.pop();if(Y!==P){k[0]=Y;t:for(var nt=0,x=k.length,I=x>>>1;nt<I;){var W=2*(nt+1)-1,X=k[W],tt=W+1,ot=k[tt];if(0>r(X,Y))tt<x&&0>r(ot,X)?(k[nt]=ot,k[tt]=Y,nt=tt):(k[nt]=X,k[W]=Y,nt=W);else if(tt<x&&0>r(ot,Y))k[nt]=ot,k[tt]=Y,nt=tt;else break t}}return P}function r(k,P){var Y=k.sortIndex-P.sortIndex;return Y!==0?Y:k.id-P.id}if(g.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;g.unstable_now=function(){return o.now()}}else{var c=Date,u=c.now();g.unstable_now=function(){return c.now()-u}}var d=[],f=[],m=1,y=null,v=3,_=!1,S=!1,A=!1,w=!1,T=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function O(k){for(var P=n(f);P!==null;){if(P.callback===null)a(f);else if(P.startTime<=k)a(f),P.sortIndex=P.expirationTime,t(d,P);else break;P=n(f)}}function N(k){if(A=!1,O(k),!S)if(n(d)!==null)S=!0,U||(U=!0,J());else{var P=n(f);P!==null&&st(N,P.startTime-k)}}var U=!1,q=-1,Q=5,B=-1;function Z(){return w?!0:!(g.unstable_now()-B<Q)}function $(){if(w=!1,U){var k=g.unstable_now();B=k;var P=!0;try{t:{S=!1,A&&(A=!1,M(q),q=-1),_=!0;var Y=v;try{e:{for(O(k),y=n(d);y!==null&&!(y.expirationTime>k&&Z());){var nt=y.callback;if(typeof nt=="function"){y.callback=null,v=y.priorityLevel;var x=nt(y.expirationTime<=k);if(k=g.unstable_now(),typeof x=="function"){y.callback=x,O(k),P=!0;break e}y===n(d)&&a(d),O(k)}else a(d);y=n(d)}if(y!==null)P=!0;else{var I=n(f);I!==null&&st(N,I.startTime-k),P=!1}}break t}finally{y=null,v=Y,_=!1}P=void 0}}finally{P?J():U=!1}}}var J;if(typeof C=="function")J=function(){C($)};else if(typeof MessageChannel<"u"){var it=new MessageChannel,ht=it.port2;it.port1.onmessage=$,J=function(){ht.postMessage(null)}}else J=function(){T($,0)};function st(k,P){q=T(function(){k(g.unstable_now())},P)}g.unstable_IdlePriority=5,g.unstable_ImmediatePriority=1,g.unstable_LowPriority=4,g.unstable_NormalPriority=3,g.unstable_Profiling=null,g.unstable_UserBlockingPriority=2,g.unstable_cancelCallback=function(k){k.callback=null},g.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Q=0<k?Math.floor(1e3/k):5},g.unstable_getCurrentPriorityLevel=function(){return v},g.unstable_next=function(k){switch(v){case 1:case 2:case 3:var P=3;break;default:P=v}var Y=v;v=P;try{return k()}finally{v=Y}},g.unstable_requestPaint=function(){w=!0},g.unstable_runWithPriority=function(k,P){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var Y=v;v=k;try{return P()}finally{v=Y}},g.unstable_scheduleCallback=function(k,P,Y){var nt=g.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?nt+Y:nt):Y=nt,k){case 1:var x=-1;break;case 2:x=250;break;case 5:x=1073741823;break;case 4:x=1e4;break;default:x=5e3}return x=Y+x,k={id:m++,callback:P,priorityLevel:k,startTime:Y,expirationTime:x,sortIndex:-1},Y>nt?(k.sortIndex=Y,t(f,k),n(d)===null&&k===n(f)&&(A?(M(q),q=-1):A=!0,st(N,Y-nt))):(k.sortIndex=x,t(d,k),S||_||(S=!0,U||(U=!0,J()))),k},g.unstable_shouldYield=Z,g.unstable_wrapCallback=function(k){var P=v;return function(){var Y=v;v=P;try{return k.apply(this,arguments)}finally{v=Y}}}}($u)),$u}var Cp;function kb(){return Cp||(Cp=1,Ku.exports=Lb()),Ku.exports}var Qu={exports:{}},xe={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rp;function Nb(){if(Rp)return xe;Rp=1;var g=ce();function t(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)f+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var a={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function o(d,f,m){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:y==null?null:""+y,children:d,containerInfo:f,implementation:m}}var c=g.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return xe.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,xe.createPortal=function(d,f){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return o(d,f,null,m)},xe.flushSync=function(d){var f=c.T,m=a.p;try{if(c.T=null,a.p=2,d)return d()}finally{c.T=f,a.p=m,a.d.f()}},xe.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,a.d.C(d,f))},xe.prefetchDNS=function(d){typeof d=="string"&&a.d.D(d)},xe.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var m=f.as,y=u(m,f.crossOrigin),v=typeof f.integrity=="string"?f.integrity:void 0,_=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;m==="style"?a.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:y,integrity:v,fetchPriority:_}):m==="script"&&a.d.X(d,{crossOrigin:y,integrity:v,fetchPriority:_,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},xe.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var m=u(f.as,f.crossOrigin);a.d.M(d,{crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&a.d.M(d)},xe.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var m=f.as,y=u(m,f.crossOrigin);a.d.L(d,m,{crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},xe.preloadModule=function(d,f){if(typeof d=="string")if(f){var m=u(f.as,f.crossOrigin);a.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else a.d.m(d)},xe.requestFormReset=function(d){a.d.r(d)},xe.unstable_batchedUpdates=function(d,f){return d(f)},xe.useFormState=function(d,f,m){return c.H.useFormState(d,f,m)},xe.useFormStatus=function(){return c.H.useHostTransitionStatus()},xe.version="19.1.1",xe}var Mp;function Pb(){if(Mp)return Qu.exports;Mp=1;function g(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(g)}catch(t){console.error(t)}}return g(),Qu.exports=Nb(),Qu.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dp;function jb(){if(Dp)return xr;Dp=1;var g=kb(),t=ce(),n=Pb();function a(e){var i="https://react.dev/errors/"+e;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)i+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+e+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function o(e){var i=e,s=e;if(e.alternate)for(;i.return;)i=i.return;else{e=i;do i=e,(i.flags&4098)!==0&&(s=i.return),e=i.return;while(e)}return i.tag===3?s:null}function c(e){if(e.tag===13){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function u(e){if(o(e)!==e)throw Error(a(188))}function d(e){var i=e.alternate;if(!i){if(i=o(e),i===null)throw Error(a(188));return i!==e?null:e}for(var s=e,l=i;;){var h=s.return;if(h===null)break;var p=h.alternate;if(p===null){if(l=h.return,l!==null){s=l;continue}break}if(h.child===p.child){for(p=h.child;p;){if(p===s)return u(h),e;if(p===l)return u(h),i;p=p.sibling}throw Error(a(188))}if(s.return!==l.return)s=h,l=p;else{for(var b=!1,E=h.child;E;){if(E===s){b=!0,s=h,l=p;break}if(E===l){b=!0,l=h,s=p;break}E=E.sibling}if(!b){for(E=p.child;E;){if(E===s){b=!0,s=p,l=h;break}if(E===l){b=!0,l=p,s=h;break}E=E.sibling}if(!b)throw Error(a(189))}}if(s.alternate!==l)throw Error(a(190))}if(s.tag!==3)throw Error(a(188));return s.stateNode.current===s?e:i}function f(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e;for(e=e.child;e!==null;){if(i=f(e),i!==null)return i;e=e.sibling}return null}var m=Object.assign,y=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),M=Symbol.for("react.consumer"),C=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),U=Symbol.for("react.suspense_list"),q=Symbol.for("react.memo"),Q=Symbol.for("react.lazy"),B=Symbol.for("react.activity"),Z=Symbol.for("react.memo_cache_sentinel"),$=Symbol.iterator;function J(e){return e===null||typeof e!="object"?null:(e=$&&e[$]||e["@@iterator"],typeof e=="function"?e:null)}var it=Symbol.for("react.client.reference");function ht(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===it?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case S:return"Fragment";case w:return"Profiler";case A:return"StrictMode";case N:return"Suspense";case U:return"SuspenseList";case B:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case _:return"Portal";case C:return(e.displayName||"Context")+".Provider";case M:return(e._context.displayName||"Context")+".Consumer";case O:var i=e.render;return e=e.displayName,e||(e=i.displayName||i.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case q:return i=e.displayName||null,i!==null?i:ht(e.type)||"Memo";case Q:i=e._payload,e=e._init;try{return ht(e(i))}catch{}}return null}var st=Array.isArray,k=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,P=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y={pending:!1,data:null,method:null,action:null},nt=[],x=-1;function I(e){return{current:e}}function W(e){0>x||(e.current=nt[x],nt[x]=null,x--)}function X(e,i){x++,nt[x]=e.current,e.current=i}var tt=I(null),ot=I(null),et=I(null),ct=I(null);function bt(e,i){switch(X(et,i),X(ot,e),X(tt,null),i.nodeType){case 9:case 11:e=(e=i.documentElement)&&(e=e.namespaceURI)?Kg(e):0;break;default:if(e=i.tagName,i=i.namespaceURI)i=Kg(i),e=$g(i,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}W(tt),X(tt,e)}function kt(){W(tt),W(ot),W(et)}function Xe(e){e.memoizedState!==null&&X(ct,e);var i=tt.current,s=$g(i,e.type);i!==s&&(X(ot,e),X(tt,s))}function Ye(e){ot.current===e&&(W(tt),W(ot)),ct.current===e&&(W(ct),br._currentValue=Y)}var Fe=Object.prototype.hasOwnProperty,ki=g.unstable_scheduleCallback,Oe=g.unstable_cancelCallback,ue=g.unstable_shouldYield,Ti=g.unstable_requestPaint,Kt=g.unstable_now,Ni=g.unstable_getCurrentPriorityLevel,ie=g.unstable_ImmediatePriority,Yi=g.unstable_UserBlockingPriority,Ke=g.unstable_NormalPriority,xi=g.unstable_LowPriority,Pi=g.unstable_IdlePriority,ji=g.log,vn=g.unstable_setDisableYieldValue,si=null,he=null;function ai(e){if(typeof ji=="function"&&vn(e),he&&typeof he.setStrictMode=="function")try{he.setStrictMode(si,e)}catch{}}var Vt=Math.clz32?Math.clz32:bn,Ut=Math.log,Qn=Math.LN2;function bn(e){return e>>>=0,e===0?32:31-(Ut(e)/Qn|0)|0}var de=256,Le=4194304;function Se(e){var i=e&42;if(i!==0)return i;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function fe(e,i,s){var l=e.pendingLanes;if(l===0)return 0;var h=0,p=e.suspendedLanes,b=e.pingedLanes;e=e.warmLanes;var E=l&134217727;return E!==0?(l=E&~p,l!==0?h=Se(l):(b&=E,b!==0?h=Se(b):s||(s=E&~e,s!==0&&(h=Se(s))))):(E=l&~p,E!==0?h=Se(E):b!==0?h=Se(b):s||(s=l&~e,s!==0&&(h=Se(s)))),h===0?0:i!==0&&i!==h&&(i&p)===0&&(p=h&-h,s=i&-i,p>=s||p===32&&(s&4194048)!==0)?i:h}function Ki(e,i){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&i)===0}function ne(e,i){switch(e){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ee(){var e=de;return de<<=1,(de&4194048)===0&&(de=256),e}function He(){var e=Le;return Le<<=1,(Le&62914560)===0&&(Le=4194304),e}function ke(e){for(var i=[],s=0;31>s;s++)i.push(e);return i}function ri(e,i){e.pendingLanes|=i,i!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Wn(e,i,s,l,h,p){var b=e.pendingLanes;e.pendingLanes=s,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=s,e.entangledLanes&=s,e.errorRecoveryDisabledLanes&=s,e.shellSuspendCounter=0;var E=e.entanglements,R=e.expirationTimes,F=e.hiddenUpdates;for(s=b&~s;0<s;){var G=31-Vt(s),K=1<<G;E[G]=0,R[G]=-1;var H=F[G];if(H!==null)for(F[G]=null,G=0;G<H.length;G++){var z=H[G];z!==null&&(z.lane&=-536870913)}s&=~K}l!==0&&Gr(e,l,0),p!==0&&h===0&&e.tag!==0&&(e.suspendedLanes|=p&~(b&~i))}function Gr(e,i,s){e.pendingLanes|=i,e.suspendedLanes&=~i;var l=31-Vt(i);e.entangledLanes|=i,e.entanglements[l]=e.entanglements[l]|1073741824|s&4194090}function Vr(e,i){var s=e.entangledLanes|=i;for(e=e.entanglements;s;){var l=31-Vt(s),h=1<<l;h&i|e[l]&i&&(e[l]|=i),s&=~h}}function Ma(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Fi(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Zn(){var e=P.p;return e!==0?e:(e=window.event,e===void 0?32:gp(e.type))}function Ts(e,i){var s=P.p;try{return P.p=e,i()}finally{P.p=s}}var li=Math.random().toString(36).slice(2),we="__reactFiber$"+li,ze="__reactProps$"+li,xs="__reactContainer$"+li,jo="__reactEvents$"+li,by="__reactListeners$"+li,_y="__reactHandles$"+li,Ph="__reactResources$"+li,Da="__reactMarker$"+li;function Fo(e){delete e[we],delete e[ze],delete e[jo],delete e[by],delete e[_y]}function Cs(e){var i=e[we];if(i)return i;for(var s=e.parentNode;s;){if(i=s[xs]||s[we]){if(s=i.alternate,i.child!==null||s!==null&&s.child!==null)for(e=Jg(e);e!==null;){if(s=e[we])return s;e=Jg(e)}return i}e=s,s=e.parentNode}return null}function Rs(e){if(e=e[we]||e[xs]){var i=e.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return e}return null}function Oa(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e.stateNode;throw Error(a(33))}function Ms(e){var i=e[Ph];return i||(i=e[Ph]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function ge(e){e[Da]=!0}var jh=new Set,Fh={};function Jn(e,i){Ds(e,i),Ds(e+"Capture",i)}function Ds(e,i){for(Fh[e]=i,e=0;e<i.length;e++)jh.add(i[e])}var Ay=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Hh={},zh={};function Sy(e){return Fe.call(zh,e)?!0:Fe.call(Hh,e)?!1:Ay.test(e)?zh[e]=!0:(Hh[e]=!0,!1)}function Xr(e,i,s){if(Sy(i))if(s===null)e.removeAttribute(i);else{switch(typeof s){case"undefined":case"function":case"symbol":e.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(i);return}}e.setAttribute(i,""+s)}}function Yr(e,i,s){if(s===null)e.removeAttribute(i);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttribute(i,""+s)}}function $i(e,i,s,l){if(l===null)e.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(s);return}e.setAttributeNS(i,s,""+l)}}var Ho,Uh;function Os(e){if(Ho===void 0)try{throw Error()}catch(s){var i=s.stack.trim().match(/\n( *(at )?)/);Ho=i&&i[1]||"",Uh=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ho+e+Uh}var zo=!1;function Uo(e,i){if(!e||zo)return"";zo=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var K=function(){throw Error()};if(Object.defineProperty(K.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(K,[])}catch(z){var H=z}Reflect.construct(e,[],K)}else{try{K.call()}catch(z){H=z}e.call(K.prototype)}}else{try{throw Error()}catch(z){H=z}(K=e())&&typeof K.catch=="function"&&K.catch(function(){})}}catch(z){if(z&&H&&typeof z.stack=="string")return[z.stack,H.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=l.DetermineComponentFrameRoot(),b=p[0],E=p[1];if(b&&E){var R=b.split(`
`),F=E.split(`
`);for(h=l=0;l<R.length&&!R[l].includes("DetermineComponentFrameRoot");)l++;for(;h<F.length&&!F[h].includes("DetermineComponentFrameRoot");)h++;if(l===R.length||h===F.length)for(l=R.length-1,h=F.length-1;1<=l&&0<=h&&R[l]!==F[h];)h--;for(;1<=l&&0<=h;l--,h--)if(R[l]!==F[h]){if(l!==1||h!==1)do if(l--,h--,0>h||R[l]!==F[h]){var G=`
`+R[l].replace(" at new "," at ");return e.displayName&&G.includes("<anonymous>")&&(G=G.replace("<anonymous>",e.displayName)),G}while(1<=l&&0<=h);break}}}finally{zo=!1,Error.prepareStackTrace=s}return(s=e?e.displayName||e.name:"")?Os(s):""}function Ey(e){switch(e.tag){case 26:case 27:case 5:return Os(e.type);case 16:return Os("Lazy");case 13:return Os("Suspense");case 19:return Os("SuspenseList");case 0:case 15:return Uo(e.type,!1);case 11:return Uo(e.type.render,!1);case 1:return Uo(e.type,!0);case 31:return Os("Activity");default:return""}}function Bh(e){try{var i="";do i+=Ey(e),e=e.return;while(e);return i}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}function oi(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ih(e){var i=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function wy(e){var i=Ih(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,i),l=""+e[i];if(!e.hasOwnProperty(i)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var h=s.get,p=s.set;return Object.defineProperty(e,i,{configurable:!0,get:function(){return h.call(this)},set:function(b){l=""+b,p.call(this,b)}}),Object.defineProperty(e,i,{enumerable:s.enumerable}),{getValue:function(){return l},setValue:function(b){l=""+b},stopTracking:function(){e._valueTracker=null,delete e[i]}}}}function Kr(e){e._valueTracker||(e._valueTracker=wy(e))}function qh(e){if(!e)return!1;var i=e._valueTracker;if(!i)return!0;var s=i.getValue(),l="";return e&&(l=Ih(e)?e.checked?"true":"false":e.value),e=l,e!==s?(i.setValue(e),!0):!1}function $r(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Ty=/[\n"\\]/g;function ci(e){return e.replace(Ty,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Bo(e,i,s,l,h,p,b,E){e.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?e.type=b:e.removeAttribute("type"),i!=null?b==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+oi(i)):e.value!==""+oi(i)&&(e.value=""+oi(i)):b!=="submit"&&b!=="reset"||e.removeAttribute("value"),i!=null?Io(e,b,oi(i)):s!=null?Io(e,b,oi(s)):l!=null&&e.removeAttribute("value"),h==null&&p!=null&&(e.defaultChecked=!!p),h!=null&&(e.checked=h&&typeof h!="function"&&typeof h!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?e.name=""+oi(E):e.removeAttribute("name")}function Gh(e,i,s,l,h,p,b,E){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(e.type=p),i!=null||s!=null){if(!(p!=="submit"&&p!=="reset"||i!=null))return;s=s!=null?""+oi(s):"",i=i!=null?""+oi(i):s,E||i===e.value||(e.value=i),e.defaultValue=i}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=E?e.checked:!!l,e.defaultChecked=!!l,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(e.name=b)}function Io(e,i,s){i==="number"&&$r(e.ownerDocument)===e||e.defaultValue===""+s||(e.defaultValue=""+s)}function Ls(e,i,s,l){if(e=e.options,i){i={};for(var h=0;h<s.length;h++)i["$"+s[h]]=!0;for(s=0;s<e.length;s++)h=i.hasOwnProperty("$"+e[s].value),e[s].selected!==h&&(e[s].selected=h),h&&l&&(e[s].defaultSelected=!0)}else{for(s=""+oi(s),i=null,h=0;h<e.length;h++){if(e[h].value===s){e[h].selected=!0,l&&(e[h].defaultSelected=!0);return}i!==null||e[h].disabled||(i=e[h])}i!==null&&(i.selected=!0)}}function Vh(e,i,s){if(i!=null&&(i=""+oi(i),i!==e.value&&(e.value=i),s==null)){e.defaultValue!==i&&(e.defaultValue=i);return}e.defaultValue=s!=null?""+oi(s):""}function Xh(e,i,s,l){if(i==null){if(l!=null){if(s!=null)throw Error(a(92));if(st(l)){if(1<l.length)throw Error(a(93));l=l[0]}s=l}s==null&&(s=""),i=s}s=oi(i),e.defaultValue=s,l=e.textContent,l===s&&l!==""&&l!==null&&(e.value=l)}function ks(e,i){if(i){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=i;return}}e.textContent=i}var xy=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Yh(e,i,s){var l=i.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?l?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="":l?e.setProperty(i,s):typeof s!="number"||s===0||xy.has(i)?i==="float"?e.cssFloat=s:e[i]=(""+s).trim():e[i]=s+"px"}function Kh(e,i,s){if(i!=null&&typeof i!="object")throw Error(a(62));if(e=e.style,s!=null){for(var l in s)!s.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var h in i)l=i[h],i.hasOwnProperty(h)&&s[h]!==l&&Yh(e,h,l)}else for(var p in i)i.hasOwnProperty(p)&&Yh(e,p,i[p])}function qo(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Cy=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ry=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Qr(e){return Ry.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Go=null;function Vo(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ns=null,Ps=null;function $h(e){var i=Rs(e);if(i&&(e=i.stateNode)){var s=e[ze]||null;t:switch(e=i.stateNode,i.type){case"input":if(Bo(e,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),i=s.name,s.type==="radio"&&i!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+ci(""+i)+'"][type="radio"]'),i=0;i<s.length;i++){var l=s[i];if(l!==e&&l.form===e.form){var h=l[ze]||null;if(!h)throw Error(a(90));Bo(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<s.length;i++)l=s[i],l.form===e.form&&qh(l)}break t;case"textarea":Vh(e,s.value,s.defaultValue);break t;case"select":i=s.value,i!=null&&Ls(e,!!s.multiple,i,!1)}}}var Xo=!1;function Qh(e,i,s){if(Xo)return e(i,s);Xo=!0;try{var l=e(i);return l}finally{if(Xo=!1,(Ns!==null||Ps!==null)&&(Pl(),Ns&&(i=Ns,e=Ps,Ps=Ns=null,$h(i),e)))for(i=0;i<e.length;i++)$h(e[i])}}function La(e,i){var s=e.stateNode;if(s===null)return null;var l=s[ze]||null;if(l===null)return null;s=l[i];t:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break t;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(a(231,i,typeof s));return s}var Qi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Yo=!1;if(Qi)try{var ka={};Object.defineProperty(ka,"passive",{get:function(){Yo=!0}}),window.addEventListener("test",ka,ka),window.removeEventListener("test",ka,ka)}catch{Yo=!1}var _n=null,Ko=null,Wr=null;function Wh(){if(Wr)return Wr;var e,i=Ko,s=i.length,l,h="value"in _n?_n.value:_n.textContent,p=h.length;for(e=0;e<s&&i[e]===h[e];e++);var b=s-e;for(l=1;l<=b&&i[s-l]===h[p-l];l++);return Wr=h.slice(e,1<l?1-l:void 0)}function Zr(e){var i=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&i===13&&(e=13)):e=i,e===10&&(e=13),32<=e||e===13?e:0}function Jr(){return!0}function Zh(){return!1}function Ue(e){function i(s,l,h,p,b){this._reactName=s,this._targetInst=h,this.type=l,this.nativeEvent=p,this.target=b,this.currentTarget=null;for(var E in e)e.hasOwnProperty(E)&&(s=e[E],this[E]=s?s(p):p[E]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Jr:Zh,this.isPropagationStopped=Zh,this}return m(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Jr)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Jr)},persist:function(){},isPersistent:Jr}),i}var ts={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tl=Ue(ts),Na=m({},ts,{view:0,detail:0}),My=Ue(Na),$o,Qo,Pa,el=m({},Na,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zo,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Pa&&(Pa&&e.type==="mousemove"?($o=e.screenX-Pa.screenX,Qo=e.screenY-Pa.screenY):Qo=$o=0,Pa=e),$o)},movementY:function(e){return"movementY"in e?e.movementY:Qo}}),Jh=Ue(el),Dy=m({},el,{dataTransfer:0}),Oy=Ue(Dy),Ly=m({},Na,{relatedTarget:0}),Wo=Ue(Ly),ky=m({},ts,{animationName:0,elapsedTime:0,pseudoElement:0}),Ny=Ue(ky),Py=m({},ts,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),jy=Ue(Py),Fy=m({},ts,{data:0}),td=Ue(Fy),Hy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Uy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function By(e){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(e):(e=Uy[e])?!!i[e]:!1}function Zo(){return By}var Iy=m({},Na,{key:function(e){if(e.key){var i=Hy[e.key]||e.key;if(i!=="Unidentified")return i}return e.type==="keypress"?(e=Zr(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?zy[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zo,charCode:function(e){return e.type==="keypress"?Zr(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Zr(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),qy=Ue(Iy),Gy=m({},el,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ed=Ue(Gy),Vy=m({},Na,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zo}),Xy=Ue(Vy),Yy=m({},ts,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ky=Ue(Yy),$y=m({},el,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Qy=Ue($y),Wy=m({},ts,{newState:0,oldState:0}),Zy=Ue(Wy),Jy=[9,13,27,32],Jo=Qi&&"CompositionEvent"in window,ja=null;Qi&&"documentMode"in document&&(ja=document.documentMode);var tv=Qi&&"TextEvent"in window&&!ja,id=Qi&&(!Jo||ja&&8<ja&&11>=ja),nd=" ",sd=!1;function ad(e,i){switch(e){case"keyup":return Jy.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var js=!1;function ev(e,i){switch(e){case"compositionend":return rd(i);case"keypress":return i.which!==32?null:(sd=!0,nd);case"textInput":return e=i.data,e===nd&&sd?null:e;default:return null}}function iv(e,i){if(js)return e==="compositionend"||!Jo&&ad(e,i)?(e=Wh(),Wr=Ko=_n=null,js=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return id&&i.locale!=="ko"?null:i.data;default:return null}}var nv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ld(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i==="input"?!!nv[e.type]:i==="textarea"}function od(e,i,s,l){Ns?Ps?Ps.push(l):Ps=[l]:Ns=l,i=Bl(i,"onChange"),0<i.length&&(s=new tl("onChange","change",null,s,l),e.push({event:s,listeners:i}))}var Fa=null,Ha=null;function sv(e){qg(e,0)}function il(e){var i=Oa(e);if(qh(i))return e}function cd(e,i){if(e==="change")return i}var ud=!1;if(Qi){var tc;if(Qi){var ec="oninput"in document;if(!ec){var hd=document.createElement("div");hd.setAttribute("oninput","return;"),ec=typeof hd.oninput=="function"}tc=ec}else tc=!1;ud=tc&&(!document.documentMode||9<document.documentMode)}function dd(){Fa&&(Fa.detachEvent("onpropertychange",fd),Ha=Fa=null)}function fd(e){if(e.propertyName==="value"&&il(Ha)){var i=[];od(i,Ha,e,Vo(e)),Qh(sv,i)}}function av(e,i,s){e==="focusin"?(dd(),Fa=i,Ha=s,Fa.attachEvent("onpropertychange",fd)):e==="focusout"&&dd()}function rv(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return il(Ha)}function lv(e,i){if(e==="click")return il(i)}function ov(e,i){if(e==="input"||e==="change")return il(i)}function cv(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}var $e=typeof Object.is=="function"?Object.is:cv;function za(e,i){if($e(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;var s=Object.keys(e),l=Object.keys(i);if(s.length!==l.length)return!1;for(l=0;l<s.length;l++){var h=s[l];if(!Fe.call(i,h)||!$e(e[h],i[h]))return!1}return!0}function gd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function pd(e,i){var s=gd(e);e=0;for(var l;s;){if(s.nodeType===3){if(l=e+s.textContent.length,e<=i&&l>=i)return{node:s,offset:i-e};e=l}t:{for(;s;){if(s.nextSibling){s=s.nextSibling;break t}s=s.parentNode}s=void 0}s=gd(s)}}function md(e,i){return e&&i?e===i?!0:e&&e.nodeType===3?!1:i&&i.nodeType===3?md(e,i.parentNode):"contains"in e?e.contains(i):e.compareDocumentPosition?!!(e.compareDocumentPosition(i)&16):!1:!1}function yd(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var i=$r(e.document);i instanceof e.HTMLIFrameElement;){try{var s=typeof i.contentWindow.location.href=="string"}catch{s=!1}if(s)e=i.contentWindow;else break;i=$r(e.document)}return i}function ic(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i&&(i==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||i==="textarea"||e.contentEditable==="true")}var uv=Qi&&"documentMode"in document&&11>=document.documentMode,Fs=null,nc=null,Ua=null,sc=!1;function vd(e,i,s){var l=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;sc||Fs==null||Fs!==$r(l)||(l=Fs,"selectionStart"in l&&ic(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Ua&&za(Ua,l)||(Ua=l,l=Bl(nc,"onSelect"),0<l.length&&(i=new tl("onSelect","select",null,i,s),e.push({event:i,listeners:l}),i.target=Fs)))}function es(e,i){var s={};return s[e.toLowerCase()]=i.toLowerCase(),s["Webkit"+e]="webkit"+i,s["Moz"+e]="moz"+i,s}var Hs={animationend:es("Animation","AnimationEnd"),animationiteration:es("Animation","AnimationIteration"),animationstart:es("Animation","AnimationStart"),transitionrun:es("Transition","TransitionRun"),transitionstart:es("Transition","TransitionStart"),transitioncancel:es("Transition","TransitionCancel"),transitionend:es("Transition","TransitionEnd")},ac={},bd={};Qi&&(bd=document.createElement("div").style,"AnimationEvent"in window||(delete Hs.animationend.animation,delete Hs.animationiteration.animation,delete Hs.animationstart.animation),"TransitionEvent"in window||delete Hs.transitionend.transition);function is(e){if(ac[e])return ac[e];if(!Hs[e])return e;var i=Hs[e],s;for(s in i)if(i.hasOwnProperty(s)&&s in bd)return ac[e]=i[s];return e}var _d=is("animationend"),Ad=is("animationiteration"),Sd=is("animationstart"),hv=is("transitionrun"),dv=is("transitionstart"),fv=is("transitioncancel"),Ed=is("transitionend"),wd=new Map,rc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");rc.push("scrollEnd");function Ci(e,i){wd.set(e,i),Jn(i,[e])}var Td=new WeakMap;function ui(e,i){if(typeof e=="object"&&e!==null){var s=Td.get(e);return s!==void 0?s:(i={value:e,source:i,stack:Bh(i)},Td.set(e,i),i)}return{value:e,source:i,stack:Bh(i)}}var hi=[],zs=0,lc=0;function nl(){for(var e=zs,i=lc=zs=0;i<e;){var s=hi[i];hi[i++]=null;var l=hi[i];hi[i++]=null;var h=hi[i];hi[i++]=null;var p=hi[i];if(hi[i++]=null,l!==null&&h!==null){var b=l.pending;b===null?h.next=h:(h.next=b.next,b.next=h),l.pending=h}p!==0&&xd(s,h,p)}}function sl(e,i,s,l){hi[zs++]=e,hi[zs++]=i,hi[zs++]=s,hi[zs++]=l,lc|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function oc(e,i,s,l){return sl(e,i,s,l),al(e)}function Us(e,i){return sl(e,null,null,i),al(e)}function xd(e,i,s){e.lanes|=s;var l=e.alternate;l!==null&&(l.lanes|=s);for(var h=!1,p=e.return;p!==null;)p.childLanes|=s,l=p.alternate,l!==null&&(l.childLanes|=s),p.tag===22&&(e=p.stateNode,e===null||e._visibility&1||(h=!0)),e=p,p=p.return;return e.tag===3?(p=e.stateNode,h&&i!==null&&(h=31-Vt(s),e=p.hiddenUpdates,l=e[h],l===null?e[h]=[i]:l.push(i),i.lane=s|536870912),p):null}function al(e){if(50<hr)throw hr=0,gu=null,Error(a(185));for(var i=e.return;i!==null;)e=i,i=e.return;return e.tag===3?e.stateNode:null}var Bs={};function gv(e,i,s,l){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qe(e,i,s,l){return new gv(e,i,s,l)}function cc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Wi(e,i){var s=e.alternate;return s===null?(s=Qe(e.tag,i,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=i,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&65011712,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,i=e.dependencies,s.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s.refCleanup=e.refCleanup,s}function Cd(e,i){e.flags&=65011714;var s=e.alternate;return s===null?(e.childLanes=0,e.lanes=i,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=s.childLanes,e.lanes=s.lanes,e.child=s.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=s.memoizedProps,e.memoizedState=s.memoizedState,e.updateQueue=s.updateQueue,e.type=s.type,i=s.dependencies,e.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),e}function rl(e,i,s,l,h,p){var b=0;if(l=e,typeof e=="function")cc(e)&&(b=1);else if(typeof e=="string")b=mb(e,s,tt.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case B:return e=Qe(31,s,i,h),e.elementType=B,e.lanes=p,e;case S:return ns(s.children,h,p,i);case A:b=8,h|=24;break;case w:return e=Qe(12,s,i,h|2),e.elementType=w,e.lanes=p,e;case N:return e=Qe(13,s,i,h),e.elementType=N,e.lanes=p,e;case U:return e=Qe(19,s,i,h),e.elementType=U,e.lanes=p,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case T:case C:b=10;break t;case M:b=9;break t;case O:b=11;break t;case q:b=14;break t;case Q:b=16,l=null;break t}b=29,s=Error(a(130,e===null?"null":typeof e,"")),l=null}return i=Qe(b,s,i,h),i.elementType=e,i.type=l,i.lanes=p,i}function ns(e,i,s,l){return e=Qe(7,e,l,i),e.lanes=s,e}function uc(e,i,s){return e=Qe(6,e,null,i),e.lanes=s,e}function hc(e,i,s){return i=Qe(4,e.children!==null?e.children:[],e.key,i),i.lanes=s,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}var Is=[],qs=0,ll=null,ol=0,di=[],fi=0,ss=null,Zi=1,Ji="";function as(e,i){Is[qs++]=ol,Is[qs++]=ll,ll=e,ol=i}function Rd(e,i,s){di[fi++]=Zi,di[fi++]=Ji,di[fi++]=ss,ss=e;var l=Zi;e=Ji;var h=32-Vt(l)-1;l&=~(1<<h),s+=1;var p=32-Vt(i)+h;if(30<p){var b=h-h%5;p=(l&(1<<b)-1).toString(32),l>>=b,h-=b,Zi=1<<32-Vt(i)+h|s<<h|l,Ji=p+e}else Zi=1<<p|s<<h|l,Ji=e}function dc(e){e.return!==null&&(as(e,1),Rd(e,1,0))}function fc(e){for(;e===ll;)ll=Is[--qs],Is[qs]=null,ol=Is[--qs],Is[qs]=null;for(;e===ss;)ss=di[--fi],di[fi]=null,Ji=di[--fi],di[fi]=null,Zi=di[--fi],di[fi]=null}var Ne=null,Xt=null,Mt=!1,rs=null,Hi=!1,gc=Error(a(519));function ls(e){var i=Error(a(418,""));throw qa(ui(i,e)),gc}function Md(e){var i=e.stateNode,s=e.type,l=e.memoizedProps;switch(i[we]=e,i[ze]=l,s){case"dialog":wt("cancel",i),wt("close",i);break;case"iframe":case"object":case"embed":wt("load",i);break;case"video":case"audio":for(s=0;s<fr.length;s++)wt(fr[s],i);break;case"source":wt("error",i);break;case"img":case"image":case"link":wt("error",i),wt("load",i);break;case"details":wt("toggle",i);break;case"input":wt("invalid",i),Gh(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),Kr(i);break;case"select":wt("invalid",i);break;case"textarea":wt("invalid",i),Xh(i,l.value,l.defaultValue,l.children),Kr(i)}s=l.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||i.textContent===""+s||l.suppressHydrationWarning===!0||Yg(i.textContent,s)?(l.popover!=null&&(wt("beforetoggle",i),wt("toggle",i)),l.onScroll!=null&&wt("scroll",i),l.onScrollEnd!=null&&wt("scrollend",i),l.onClick!=null&&(i.onclick=Il),i=!0):i=!1,i||ls(e)}function Dd(e){for(Ne=e.return;Ne;)switch(Ne.tag){case 5:case 13:Hi=!1;return;case 27:case 3:Hi=!0;return;default:Ne=Ne.return}}function Ba(e){if(e!==Ne)return!1;if(!Mt)return Dd(e),Mt=!0,!1;var i=e.tag,s;if((s=i!==3&&i!==27)&&((s=i===5)&&(s=e.type,s=!(s!=="form"&&s!=="button")||Du(e.type,e.memoizedProps)),s=!s),s&&Xt&&ls(e),Dd(e),i===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(a(317));t:{for(e=e.nextSibling,i=0;e;){if(e.nodeType===8)if(s=e.data,s==="/$"){if(i===0){Xt=Mi(e.nextSibling);break t}i--}else s!=="$"&&s!=="$!"&&s!=="$?"||i++;e=e.nextSibling}Xt=null}}else i===27?(i=Xt,jn(e.type)?(e=Nu,Nu=null,Xt=e):Xt=i):Xt=Ne?Mi(e.stateNode.nextSibling):null;return!0}function Ia(){Xt=Ne=null,Mt=!1}function Od(){var e=rs;return e!==null&&(qe===null?qe=e:qe.push.apply(qe,e),rs=null),e}function qa(e){rs===null?rs=[e]:rs.push(e)}var pc=I(null),os=null,tn=null;function An(e,i,s){X(pc,i._currentValue),i._currentValue=s}function en(e){e._currentValue=pc.current,W(pc)}function mc(e,i,s){for(;e!==null;){var l=e.alternate;if((e.childLanes&i)!==i?(e.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),e===s)break;e=e.return}}function yc(e,i,s,l){var h=e.child;for(h!==null&&(h.return=e);h!==null;){var p=h.dependencies;if(p!==null){var b=h.child;p=p.firstContext;t:for(;p!==null;){var E=p;p=h;for(var R=0;R<i.length;R++)if(E.context===i[R]){p.lanes|=s,E=p.alternate,E!==null&&(E.lanes|=s),mc(p.return,s,e),l||(b=null);break t}p=E.next}}else if(h.tag===18){if(b=h.return,b===null)throw Error(a(341));b.lanes|=s,p=b.alternate,p!==null&&(p.lanes|=s),mc(b,s,e),b=null}else b=h.child;if(b!==null)b.return=h;else for(b=h;b!==null;){if(b===e){b=null;break}if(h=b.sibling,h!==null){h.return=b.return,b=h;break}b=b.return}h=b}}function Ga(e,i,s,l){e=null;for(var h=i,p=!1;h!==null;){if(!p){if((h.flags&524288)!==0)p=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var b=h.alternate;if(b===null)throw Error(a(387));if(b=b.memoizedProps,b!==null){var E=h.type;$e(h.pendingProps.value,b.value)||(e!==null?e.push(E):e=[E])}}else if(h===ct.current){if(b=h.alternate,b===null)throw Error(a(387));b.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(e!==null?e.push(br):e=[br])}h=h.return}e!==null&&yc(i,e,s,l),i.flags|=262144}function cl(e){for(e=e.firstContext;e!==null;){if(!$e(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function cs(e){os=e,tn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Te(e){return Ld(os,e)}function ul(e,i){return os===null&&cs(e),Ld(e,i)}function Ld(e,i){var s=i._currentValue;if(i={context:i,memoizedValue:s,next:null},tn===null){if(e===null)throw Error(a(308));tn=i,e.dependencies={lanes:0,firstContext:i},e.flags|=524288}else tn=tn.next=i;return s}var pv=typeof AbortController<"u"?AbortController:function(){var e=[],i=this.signal={aborted:!1,addEventListener:function(s,l){e.push(l)}};this.abort=function(){i.aborted=!0,e.forEach(function(s){return s()})}},mv=g.unstable_scheduleCallback,yv=g.unstable_NormalPriority,se={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function vc(){return{controller:new pv,data:new Map,refCount:0}}function Va(e){e.refCount--,e.refCount===0&&mv(yv,function(){e.controller.abort()})}var Xa=null,bc=0,Gs=0,Vs=null;function vv(e,i){if(Xa===null){var s=Xa=[];bc=0,Gs=Au(),Vs={status:"pending",value:void 0,then:function(l){s.push(l)}}}return bc++,i.then(kd,kd),i}function kd(){if(--bc===0&&Xa!==null){Vs!==null&&(Vs.status="fulfilled");var e=Xa;Xa=null,Gs=0,Vs=null;for(var i=0;i<e.length;i++)(0,e[i])()}}function bv(e,i){var s=[],l={status:"pending",value:null,reason:null,then:function(h){s.push(h)}};return e.then(function(){l.status="fulfilled",l.value=i;for(var h=0;h<s.length;h++)(0,s[h])(i)},function(h){for(l.status="rejected",l.reason=h,h=0;h<s.length;h++)(0,s[h])(void 0)}),l}var Nd=k.S;k.S=function(e,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&vv(e,i),Nd!==null&&Nd(e,i)};var us=I(null);function _c(){var e=us.current;return e!==null?e:Ht.pooledCache}function hl(e,i){i===null?X(us,us.current):X(us,i.pool)}function Pd(){var e=_c();return e===null?null:{parent:se._currentValue,pool:e}}var Ya=Error(a(460)),jd=Error(a(474)),dl=Error(a(542)),Ac={then:function(){}};function Fd(e){return e=e.status,e==="fulfilled"||e==="rejected"}function fl(){}function Hd(e,i,s){switch(s=e[s],s===void 0?e.push(i):s!==i&&(i.then(fl,fl),i=s),i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,Ud(e),e;default:if(typeof i.status=="string")i.then(fl,fl);else{if(e=Ht,e!==null&&100<e.shellSuspendCounter)throw Error(a(482));e=i,e.status="pending",e.then(function(l){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=l}},function(l){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,Ud(e),e}throw Ka=i,Ya}}var Ka=null;function zd(){if(Ka===null)throw Error(a(459));var e=Ka;return Ka=null,e}function Ud(e){if(e===Ya||e===dl)throw Error(a(483))}var Sn=!1;function Sc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ec(e,i){e=e.updateQueue,i.updateQueue===e&&(i.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function En(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function wn(e,i,s){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(Dt&2)!==0){var h=l.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),l.pending=i,i=al(e),xd(e,null,s),i}return sl(e,l,i,s),al(e)}function $a(e,i,s){if(i=i.updateQueue,i!==null&&(i=i.shared,(s&4194048)!==0)){var l=i.lanes;l&=e.pendingLanes,s|=l,i.lanes=s,Vr(e,s)}}function wc(e,i){var s=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,s===l)){var h=null,p=null;if(s=s.firstBaseUpdate,s!==null){do{var b={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};p===null?h=p=b:p=p.next=b,s=s.next}while(s!==null);p===null?h=p=i:p=p.next=i}else h=p=i;s={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:p,shared:l.shared,callbacks:l.callbacks},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=i:e.next=i,s.lastBaseUpdate=i}var Tc=!1;function Qa(){if(Tc){var e=Vs;if(e!==null)throw e}}function Wa(e,i,s,l){Tc=!1;var h=e.updateQueue;Sn=!1;var p=h.firstBaseUpdate,b=h.lastBaseUpdate,E=h.shared.pending;if(E!==null){h.shared.pending=null;var R=E,F=R.next;R.next=null,b===null?p=F:b.next=F,b=R;var G=e.alternate;G!==null&&(G=G.updateQueue,E=G.lastBaseUpdate,E!==b&&(E===null?G.firstBaseUpdate=F:E.next=F,G.lastBaseUpdate=R))}if(p!==null){var K=h.baseState;b=0,G=F=R=null,E=p;do{var H=E.lane&-536870913,z=H!==E.lane;if(z?(Ct&H)===H:(l&H)===H){H!==0&&H===Gs&&(Tc=!0),G!==null&&(G=G.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});t:{var ft=e,ut=E;H=i;var jt=s;switch(ut.tag){case 1:if(ft=ut.payload,typeof ft=="function"){K=ft.call(jt,K,H);break t}K=ft;break t;case 3:ft.flags=ft.flags&-65537|128;case 0:if(ft=ut.payload,H=typeof ft=="function"?ft.call(jt,K,H):ft,H==null)break t;K=m({},K,H);break t;case 2:Sn=!0}}H=E.callback,H!==null&&(e.flags|=64,z&&(e.flags|=8192),z=h.callbacks,z===null?h.callbacks=[H]:z.push(H))}else z={lane:H,tag:E.tag,payload:E.payload,callback:E.callback,next:null},G===null?(F=G=z,R=K):G=G.next=z,b|=H;if(E=E.next,E===null){if(E=h.shared.pending,E===null)break;z=E,E=z.next,z.next=null,h.lastBaseUpdate=z,h.shared.pending=null}}while(!0);G===null&&(R=K),h.baseState=R,h.firstBaseUpdate=F,h.lastBaseUpdate=G,p===null&&(h.shared.lanes=0),Ln|=b,e.lanes=b,e.memoizedState=K}}function Bd(e,i){if(typeof e!="function")throw Error(a(191,e));e.call(i)}function Id(e,i){var s=e.callbacks;if(s!==null)for(e.callbacks=null,e=0;e<s.length;e++)Bd(s[e],i)}var Xs=I(null),gl=I(0);function qd(e,i){e=cn,X(gl,e),X(Xs,i),cn=e|i.baseLanes}function xc(){X(gl,cn),X(Xs,Xs.current)}function Cc(){cn=gl.current,W(Xs),W(gl)}var Tn=0,_t=null,Nt=null,Jt=null,pl=!1,Ys=!1,hs=!1,ml=0,Za=0,Ks=null,_v=0;function $t(){throw Error(a(321))}function Rc(e,i){if(i===null)return!1;for(var s=0;s<i.length&&s<e.length;s++)if(!$e(e[s],i[s]))return!1;return!0}function Mc(e,i,s,l,h,p){return Tn=p,_t=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,k.H=e===null||e.memoizedState===null?Cf:Rf,hs=!1,p=s(l,h),hs=!1,Ys&&(p=Vd(i,s,l,h)),Gd(e),p}function Gd(e){k.H=Sl;var i=Nt!==null&&Nt.next!==null;if(Tn=0,Jt=Nt=_t=null,pl=!1,Za=0,Ks=null,i)throw Error(a(300));e===null||pe||(e=e.dependencies,e!==null&&cl(e)&&(pe=!0))}function Vd(e,i,s,l){_t=e;var h=0;do{if(Ys&&(Ks=null),Za=0,Ys=!1,25<=h)throw Error(a(301));if(h+=1,Jt=Nt=null,e.updateQueue!=null){var p=e.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}k.H=Cv,p=i(s,l)}while(Ys);return p}function Av(){var e=k.H,i=e.useState()[0];return i=typeof i.then=="function"?Ja(i):i,e=e.useState()[0],(Nt!==null?Nt.memoizedState:null)!==e&&(_t.flags|=1024),i}function Dc(){var e=ml!==0;return ml=0,e}function Oc(e,i,s){i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~s}function Lc(e){if(pl){for(e=e.memoizedState;e!==null;){var i=e.queue;i!==null&&(i.pending=null),e=e.next}pl=!1}Tn=0,Jt=Nt=_t=null,Ys=!1,Za=ml=0,Ks=null}function Be(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Jt===null?_t.memoizedState=Jt=e:Jt=Jt.next=e,Jt}function te(){if(Nt===null){var e=_t.alternate;e=e!==null?e.memoizedState:null}else e=Nt.next;var i=Jt===null?_t.memoizedState:Jt.next;if(i!==null)Jt=i,Nt=e;else{if(e===null)throw _t.alternate===null?Error(a(467)):Error(a(310));Nt=e,e={memoizedState:Nt.memoizedState,baseState:Nt.baseState,baseQueue:Nt.baseQueue,queue:Nt.queue,next:null},Jt===null?_t.memoizedState=Jt=e:Jt=Jt.next=e}return Jt}function kc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ja(e){var i=Za;return Za+=1,Ks===null&&(Ks=[]),e=Hd(Ks,e,i),i=_t,(Jt===null?i.memoizedState:Jt.next)===null&&(i=i.alternate,k.H=i===null||i.memoizedState===null?Cf:Rf),e}function yl(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Ja(e);if(e.$$typeof===C)return Te(e)}throw Error(a(438,String(e)))}function Nc(e){var i=null,s=_t.updateQueue;if(s!==null&&(i=s.memoCache),i==null){var l=_t.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),s===null&&(s=kc(),_t.updateQueue=s),s.memoCache=i,s=i.data[i.index],s===void 0)for(s=i.data[i.index]=Array(e),l=0;l<e;l++)s[l]=Z;return i.index++,s}function nn(e,i){return typeof i=="function"?i(e):i}function vl(e){var i=te();return Pc(i,Nt,e)}function Pc(e,i,s){var l=e.queue;if(l===null)throw Error(a(311));l.lastRenderedReducer=s;var h=e.baseQueue,p=l.pending;if(p!==null){if(h!==null){var b=h.next;h.next=p.next,p.next=b}i.baseQueue=h=p,l.pending=null}if(p=e.baseState,h===null)e.memoizedState=p;else{i=h.next;var E=b=null,R=null,F=i,G=!1;do{var K=F.lane&-536870913;if(K!==F.lane?(Ct&K)===K:(Tn&K)===K){var H=F.revertLane;if(H===0)R!==null&&(R=R.next={lane:0,revertLane:0,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),K===Gs&&(G=!0);else if((Tn&H)===H){F=F.next,H===Gs&&(G=!0);continue}else K={lane:0,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},R===null?(E=R=K,b=p):R=R.next=K,_t.lanes|=H,Ln|=H;K=F.action,hs&&s(p,K),p=F.hasEagerState?F.eagerState:s(p,K)}else H={lane:K,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},R===null?(E=R=H,b=p):R=R.next=H,_t.lanes|=K,Ln|=K;F=F.next}while(F!==null&&F!==i);if(R===null?b=p:R.next=E,!$e(p,e.memoizedState)&&(pe=!0,G&&(s=Vs,s!==null)))throw s;e.memoizedState=p,e.baseState=b,e.baseQueue=R,l.lastRenderedState=p}return h===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function jc(e){var i=te(),s=i.queue;if(s===null)throw Error(a(311));s.lastRenderedReducer=e;var l=s.dispatch,h=s.pending,p=i.memoizedState;if(h!==null){s.pending=null;var b=h=h.next;do p=e(p,b.action),b=b.next;while(b!==h);$e(p,i.memoizedState)||(pe=!0),i.memoizedState=p,i.baseQueue===null&&(i.baseState=p),s.lastRenderedState=p}return[p,l]}function Xd(e,i,s){var l=_t,h=te(),p=Mt;if(p){if(s===void 0)throw Error(a(407));s=s()}else s=i();var b=!$e((Nt||h).memoizedState,s);b&&(h.memoizedState=s,pe=!0),h=h.queue;var E=$d.bind(null,l,h,e);if(tr(2048,8,E,[e]),h.getSnapshot!==i||b||Jt!==null&&Jt.memoizedState.tag&1){if(l.flags|=2048,$s(9,bl(),Kd.bind(null,l,h,s,i),null),Ht===null)throw Error(a(349));p||(Tn&124)!==0||Yd(l,i,s)}return s}function Yd(e,i,s){e.flags|=16384,e={getSnapshot:i,value:s},i=_t.updateQueue,i===null?(i=kc(),_t.updateQueue=i,i.stores=[e]):(s=i.stores,s===null?i.stores=[e]:s.push(e))}function Kd(e,i,s,l){i.value=s,i.getSnapshot=l,Qd(i)&&Wd(e)}function $d(e,i,s){return s(function(){Qd(i)&&Wd(e)})}function Qd(e){var i=e.getSnapshot;e=e.value;try{var s=i();return!$e(e,s)}catch{return!0}}function Wd(e){var i=Us(e,2);i!==null&&ei(i,e,2)}function Fc(e){var i=Be();if(typeof e=="function"){var s=e;if(e=s(),hs){ai(!0);try{s()}finally{ai(!1)}}}return i.memoizedState=i.baseState=e,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:nn,lastRenderedState:e},i}function Zd(e,i,s,l){return e.baseState=s,Pc(e,Nt,typeof l=="function"?l:nn)}function Sv(e,i,s,l,h){if(Al(e))throw Error(a(485));if(e=i.action,e!==null){var p={payload:h,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){p.listeners.push(b)}};k.T!==null?s(!0):p.isTransition=!1,l(p),s=i.pending,s===null?(p.next=i.pending=p,Jd(i,p)):(p.next=s.next,i.pending=s.next=p)}}function Jd(e,i){var s=i.action,l=i.payload,h=e.state;if(i.isTransition){var p=k.T,b={};k.T=b;try{var E=s(h,l),R=k.S;R!==null&&R(b,E),tf(e,i,E)}catch(F){Hc(e,i,F)}finally{k.T=p}}else try{p=s(h,l),tf(e,i,p)}catch(F){Hc(e,i,F)}}function tf(e,i,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(l){ef(e,i,l)},function(l){return Hc(e,i,l)}):ef(e,i,s)}function ef(e,i,s){i.status="fulfilled",i.value=s,nf(i),e.state=s,i=e.pending,i!==null&&(s=i.next,s===i?e.pending=null:(s=s.next,i.next=s,Jd(e,s)))}function Hc(e,i,s){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=s,nf(i),i=i.next;while(i!==l)}e.action=null}function nf(e){e=e.listeners;for(var i=0;i<e.length;i++)(0,e[i])()}function sf(e,i){return i}function af(e,i){if(Mt){var s=Ht.formState;if(s!==null){t:{var l=_t;if(Mt){if(Xt){e:{for(var h=Xt,p=Hi;h.nodeType!==8;){if(!p){h=null;break e}if(h=Mi(h.nextSibling),h===null){h=null;break e}}p=h.data,h=p==="F!"||p==="F"?h:null}if(h){Xt=Mi(h.nextSibling),l=h.data==="F!";break t}}ls(l)}l=!1}l&&(i=s[0])}}return s=Be(),s.memoizedState=s.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:sf,lastRenderedState:i},s.queue=l,s=wf.bind(null,_t,l),l.dispatch=s,l=Fc(!1),p=qc.bind(null,_t,!1,l.queue),l=Be(),h={state:i,dispatch:null,action:e,pending:null},l.queue=h,s=Sv.bind(null,_t,h,p,s),h.dispatch=s,l.memoizedState=e,[i,s,!1]}function rf(e){var i=te();return lf(i,Nt,e)}function lf(e,i,s){if(i=Pc(e,i,sf)[0],e=vl(nn)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=Ja(i)}catch(b){throw b===Ya?dl:b}else l=i;i=te();var h=i.queue,p=h.dispatch;return s!==i.memoizedState&&(_t.flags|=2048,$s(9,bl(),Ev.bind(null,h,s),null)),[l,p,e]}function Ev(e,i){e.action=i}function of(e){var i=te(),s=Nt;if(s!==null)return lf(i,s,e);te(),i=i.memoizedState,s=te();var l=s.queue.dispatch;return s.memoizedState=e,[i,l,!1]}function $s(e,i,s,l){return e={tag:e,create:s,deps:l,inst:i,next:null},i=_t.updateQueue,i===null&&(i=kc(),_t.updateQueue=i),s=i.lastEffect,s===null?i.lastEffect=e.next=e:(l=s.next,s.next=e,e.next=l,i.lastEffect=e),e}function bl(){return{destroy:void 0,resource:void 0}}function cf(){return te().memoizedState}function _l(e,i,s,l){var h=Be();l=l===void 0?null:l,_t.flags|=e,h.memoizedState=$s(1|i,bl(),s,l)}function tr(e,i,s,l){var h=te();l=l===void 0?null:l;var p=h.memoizedState.inst;Nt!==null&&l!==null&&Rc(l,Nt.memoizedState.deps)?h.memoizedState=$s(i,p,s,l):(_t.flags|=e,h.memoizedState=$s(1|i,p,s,l))}function uf(e,i){_l(8390656,8,e,i)}function hf(e,i){tr(2048,8,e,i)}function df(e,i){return tr(4,2,e,i)}function ff(e,i){return tr(4,4,e,i)}function gf(e,i){if(typeof i=="function"){e=e();var s=i(e);return function(){typeof s=="function"?s():i(null)}}if(i!=null)return e=e(),i.current=e,function(){i.current=null}}function pf(e,i,s){s=s!=null?s.concat([e]):null,tr(4,4,gf.bind(null,i,e),s)}function zc(){}function mf(e,i){var s=te();i=i===void 0?null:i;var l=s.memoizedState;return i!==null&&Rc(i,l[1])?l[0]:(s.memoizedState=[e,i],e)}function yf(e,i){var s=te();i=i===void 0?null:i;var l=s.memoizedState;if(i!==null&&Rc(i,l[1]))return l[0];if(l=e(),hs){ai(!0);try{e()}finally{ai(!1)}}return s.memoizedState=[l,i],l}function Uc(e,i,s){return s===void 0||(Tn&1073741824)!==0?e.memoizedState=i:(e.memoizedState=s,e=_g(),_t.lanes|=e,Ln|=e,s)}function vf(e,i,s,l){return $e(s,i)?s:Xs.current!==null?(e=Uc(e,s,l),$e(e,i)||(pe=!0),e):(Tn&42)===0?(pe=!0,e.memoizedState=s):(e=_g(),_t.lanes|=e,Ln|=e,i)}function bf(e,i,s,l,h){var p=P.p;P.p=p!==0&&8>p?p:8;var b=k.T,E={};k.T=E,qc(e,!1,i,s);try{var R=h(),F=k.S;if(F!==null&&F(E,R),R!==null&&typeof R=="object"&&typeof R.then=="function"){var G=bv(R,l);er(e,i,G,ti(e))}else er(e,i,l,ti(e))}catch(K){er(e,i,{then:function(){},status:"rejected",reason:K},ti())}finally{P.p=p,k.T=b}}function wv(){}function Bc(e,i,s,l){if(e.tag!==5)throw Error(a(476));var h=_f(e).queue;bf(e,h,i,Y,s===null?wv:function(){return Af(e),s(l)})}function _f(e){var i=e.memoizedState;if(i!==null)return i;i={memoizedState:Y,baseState:Y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:nn,lastRenderedState:Y},next:null};var s={};return i.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:nn,lastRenderedState:s},next:null},e.memoizedState=i,e=e.alternate,e!==null&&(e.memoizedState=i),i}function Af(e){var i=_f(e).next.queue;er(e,i,{},ti())}function Ic(){return Te(br)}function Sf(){return te().memoizedState}function Ef(){return te().memoizedState}function Tv(e){for(var i=e.return;i!==null;){switch(i.tag){case 24:case 3:var s=ti();e=En(s);var l=wn(i,e,s);l!==null&&(ei(l,i,s),$a(l,i,s)),i={cache:vc()},e.payload=i;return}i=i.return}}function xv(e,i,s){var l=ti();s={lane:l,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null},Al(e)?Tf(i,s):(s=oc(e,i,s,l),s!==null&&(ei(s,e,l),xf(s,i,l)))}function wf(e,i,s){var l=ti();er(e,i,s,l)}function er(e,i,s,l){var h={lane:l,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null};if(Al(e))Tf(i,h);else{var p=e.alternate;if(e.lanes===0&&(p===null||p.lanes===0)&&(p=i.lastRenderedReducer,p!==null))try{var b=i.lastRenderedState,E=p(b,s);if(h.hasEagerState=!0,h.eagerState=E,$e(E,b))return sl(e,i,h,0),Ht===null&&nl(),!1}catch{}finally{}if(s=oc(e,i,h,l),s!==null)return ei(s,e,l),xf(s,i,l),!0}return!1}function qc(e,i,s,l){if(l={lane:2,revertLane:Au(),action:l,hasEagerState:!1,eagerState:null,next:null},Al(e)){if(i)throw Error(a(479))}else i=oc(e,s,l,2),i!==null&&ei(i,e,2)}function Al(e){var i=e.alternate;return e===_t||i!==null&&i===_t}function Tf(e,i){Ys=pl=!0;var s=e.pending;s===null?i.next=i:(i.next=s.next,s.next=i),e.pending=i}function xf(e,i,s){if((s&4194048)!==0){var l=i.lanes;l&=e.pendingLanes,s|=l,i.lanes=s,Vr(e,s)}}var Sl={readContext:Te,use:yl,useCallback:$t,useContext:$t,useEffect:$t,useImperativeHandle:$t,useLayoutEffect:$t,useInsertionEffect:$t,useMemo:$t,useReducer:$t,useRef:$t,useState:$t,useDebugValue:$t,useDeferredValue:$t,useTransition:$t,useSyncExternalStore:$t,useId:$t,useHostTransitionStatus:$t,useFormState:$t,useActionState:$t,useOptimistic:$t,useMemoCache:$t,useCacheRefresh:$t},Cf={readContext:Te,use:yl,useCallback:function(e,i){return Be().memoizedState=[e,i===void 0?null:i],e},useContext:Te,useEffect:uf,useImperativeHandle:function(e,i,s){s=s!=null?s.concat([e]):null,_l(4194308,4,gf.bind(null,i,e),s)},useLayoutEffect:function(e,i){return _l(4194308,4,e,i)},useInsertionEffect:function(e,i){_l(4,2,e,i)},useMemo:function(e,i){var s=Be();i=i===void 0?null:i;var l=e();if(hs){ai(!0);try{e()}finally{ai(!1)}}return s.memoizedState=[l,i],l},useReducer:function(e,i,s){var l=Be();if(s!==void 0){var h=s(i);if(hs){ai(!0);try{s(i)}finally{ai(!1)}}}else h=i;return l.memoizedState=l.baseState=h,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:h},l.queue=e,e=e.dispatch=xv.bind(null,_t,e),[l.memoizedState,e]},useRef:function(e){var i=Be();return e={current:e},i.memoizedState=e},useState:function(e){e=Fc(e);var i=e.queue,s=wf.bind(null,_t,i);return i.dispatch=s,[e.memoizedState,s]},useDebugValue:zc,useDeferredValue:function(e,i){var s=Be();return Uc(s,e,i)},useTransition:function(){var e=Fc(!1);return e=bf.bind(null,_t,e.queue,!0,!1),Be().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,i,s){var l=_t,h=Be();if(Mt){if(s===void 0)throw Error(a(407));s=s()}else{if(s=i(),Ht===null)throw Error(a(349));(Ct&124)!==0||Yd(l,i,s)}h.memoizedState=s;var p={value:s,getSnapshot:i};return h.queue=p,uf($d.bind(null,l,p,e),[e]),l.flags|=2048,$s(9,bl(),Kd.bind(null,l,p,s,i),null),s},useId:function(){var e=Be(),i=Ht.identifierPrefix;if(Mt){var s=Ji,l=Zi;s=(l&~(1<<32-Vt(l)-1)).toString(32)+s,i=""+i+"R"+s,s=ml++,0<s&&(i+="H"+s.toString(32)),i+=""}else s=_v++,i=""+i+"r"+s.toString(32)+"";return e.memoizedState=i},useHostTransitionStatus:Ic,useFormState:af,useActionState:af,useOptimistic:function(e){var i=Be();i.memoizedState=i.baseState=e;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=s,i=qc.bind(null,_t,!0,s),s.dispatch=i,[e,i]},useMemoCache:Nc,useCacheRefresh:function(){return Be().memoizedState=Tv.bind(null,_t)}},Rf={readContext:Te,use:yl,useCallback:mf,useContext:Te,useEffect:hf,useImperativeHandle:pf,useInsertionEffect:df,useLayoutEffect:ff,useMemo:yf,useReducer:vl,useRef:cf,useState:function(){return vl(nn)},useDebugValue:zc,useDeferredValue:function(e,i){var s=te();return vf(s,Nt.memoizedState,e,i)},useTransition:function(){var e=vl(nn)[0],i=te().memoizedState;return[typeof e=="boolean"?e:Ja(e),i]},useSyncExternalStore:Xd,useId:Sf,useHostTransitionStatus:Ic,useFormState:rf,useActionState:rf,useOptimistic:function(e,i){var s=te();return Zd(s,Nt,e,i)},useMemoCache:Nc,useCacheRefresh:Ef},Cv={readContext:Te,use:yl,useCallback:mf,useContext:Te,useEffect:hf,useImperativeHandle:pf,useInsertionEffect:df,useLayoutEffect:ff,useMemo:yf,useReducer:jc,useRef:cf,useState:function(){return jc(nn)},useDebugValue:zc,useDeferredValue:function(e,i){var s=te();return Nt===null?Uc(s,e,i):vf(s,Nt.memoizedState,e,i)},useTransition:function(){var e=jc(nn)[0],i=te().memoizedState;return[typeof e=="boolean"?e:Ja(e),i]},useSyncExternalStore:Xd,useId:Sf,useHostTransitionStatus:Ic,useFormState:of,useActionState:of,useOptimistic:function(e,i){var s=te();return Nt!==null?Zd(s,Nt,e,i):(s.baseState=e,[e,s.queue.dispatch])},useMemoCache:Nc,useCacheRefresh:Ef},Qs=null,ir=0;function El(e){var i=ir;return ir+=1,Qs===null&&(Qs=[]),Hd(Qs,e,i)}function nr(e,i){i=i.props.ref,e.ref=i!==void 0?i:null}function wl(e,i){throw i.$$typeof===y?Error(a(525)):(e=Object.prototype.toString.call(i),Error(a(31,e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)))}function Mf(e){var i=e._init;return i(e._payload)}function Df(e){function i(L,D){if(e){var j=L.deletions;j===null?(L.deletions=[D],L.flags|=16):j.push(D)}}function s(L,D){if(!e)return null;for(;D!==null;)i(L,D),D=D.sibling;return null}function l(L){for(var D=new Map;L!==null;)L.key!==null?D.set(L.key,L):D.set(L.index,L),L=L.sibling;return D}function h(L,D){return L=Wi(L,D),L.index=0,L.sibling=null,L}function p(L,D,j){return L.index=j,e?(j=L.alternate,j!==null?(j=j.index,j<D?(L.flags|=67108866,D):j):(L.flags|=67108866,D)):(L.flags|=1048576,D)}function b(L){return e&&L.alternate===null&&(L.flags|=67108866),L}function E(L,D,j,V){return D===null||D.tag!==6?(D=uc(j,L.mode,V),D.return=L,D):(D=h(D,j),D.return=L,D)}function R(L,D,j,V){var at=j.type;return at===S?G(L,D,j.props.children,V,j.key):D!==null&&(D.elementType===at||typeof at=="object"&&at!==null&&at.$$typeof===Q&&Mf(at)===D.type)?(D=h(D,j.props),nr(D,j),D.return=L,D):(D=rl(j.type,j.key,j.props,null,L.mode,V),nr(D,j),D.return=L,D)}function F(L,D,j,V){return D===null||D.tag!==4||D.stateNode.containerInfo!==j.containerInfo||D.stateNode.implementation!==j.implementation?(D=hc(j,L.mode,V),D.return=L,D):(D=h(D,j.children||[]),D.return=L,D)}function G(L,D,j,V,at){return D===null||D.tag!==7?(D=ns(j,L.mode,V,at),D.return=L,D):(D=h(D,j),D.return=L,D)}function K(L,D,j){if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return D=uc(""+D,L.mode,j),D.return=L,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case v:return j=rl(D.type,D.key,D.props,null,L.mode,j),nr(j,D),j.return=L,j;case _:return D=hc(D,L.mode,j),D.return=L,D;case Q:var V=D._init;return D=V(D._payload),K(L,D,j)}if(st(D)||J(D))return D=ns(D,L.mode,j,null),D.return=L,D;if(typeof D.then=="function")return K(L,El(D),j);if(D.$$typeof===C)return K(L,ul(L,D),j);wl(L,D)}return null}function H(L,D,j,V){var at=D!==null?D.key:null;if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return at!==null?null:E(L,D,""+j,V);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case v:return j.key===at?R(L,D,j,V):null;case _:return j.key===at?F(L,D,j,V):null;case Q:return at=j._init,j=at(j._payload),H(L,D,j,V)}if(st(j)||J(j))return at!==null?null:G(L,D,j,V,null);if(typeof j.then=="function")return H(L,D,El(j),V);if(j.$$typeof===C)return H(L,D,ul(L,j),V);wl(L,j)}return null}function z(L,D,j,V,at){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return L=L.get(j)||null,E(D,L,""+V,at);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case v:return L=L.get(V.key===null?j:V.key)||null,R(D,L,V,at);case _:return L=L.get(V.key===null?j:V.key)||null,F(D,L,V,at);case Q:var St=V._init;return V=St(V._payload),z(L,D,j,V,at)}if(st(V)||J(V))return L=L.get(j)||null,G(D,L,V,at,null);if(typeof V.then=="function")return z(L,D,j,El(V),at);if(V.$$typeof===C)return z(L,D,j,ul(D,V),at);wl(D,V)}return null}function ft(L,D,j,V){for(var at=null,St=null,rt=D,dt=D=0,ye=null;rt!==null&&dt<j.length;dt++){rt.index>dt?(ye=rt,rt=null):ye=rt.sibling;var Rt=H(L,rt,j[dt],V);if(Rt===null){rt===null&&(rt=ye);break}e&&rt&&Rt.alternate===null&&i(L,rt),D=p(Rt,D,dt),St===null?at=Rt:St.sibling=Rt,St=Rt,rt=ye}if(dt===j.length)return s(L,rt),Mt&&as(L,dt),at;if(rt===null){for(;dt<j.length;dt++)rt=K(L,j[dt],V),rt!==null&&(D=p(rt,D,dt),St===null?at=rt:St.sibling=rt,St=rt);return Mt&&as(L,dt),at}for(rt=l(rt);dt<j.length;dt++)ye=z(rt,L,dt,j[dt],V),ye!==null&&(e&&ye.alternate!==null&&rt.delete(ye.key===null?dt:ye.key),D=p(ye,D,dt),St===null?at=ye:St.sibling=ye,St=ye);return e&&rt.forEach(function(Bn){return i(L,Bn)}),Mt&&as(L,dt),at}function ut(L,D,j,V){if(j==null)throw Error(a(151));for(var at=null,St=null,rt=D,dt=D=0,ye=null,Rt=j.next();rt!==null&&!Rt.done;dt++,Rt=j.next()){rt.index>dt?(ye=rt,rt=null):ye=rt.sibling;var Bn=H(L,rt,Rt.value,V);if(Bn===null){rt===null&&(rt=ye);break}e&&rt&&Bn.alternate===null&&i(L,rt),D=p(Bn,D,dt),St===null?at=Bn:St.sibling=Bn,St=Bn,rt=ye}if(Rt.done)return s(L,rt),Mt&&as(L,dt),at;if(rt===null){for(;!Rt.done;dt++,Rt=j.next())Rt=K(L,Rt.value,V),Rt!==null&&(D=p(Rt,D,dt),St===null?at=Rt:St.sibling=Rt,St=Rt);return Mt&&as(L,dt),at}for(rt=l(rt);!Rt.done;dt++,Rt=j.next())Rt=z(rt,L,dt,Rt.value,V),Rt!==null&&(e&&Rt.alternate!==null&&rt.delete(Rt.key===null?dt:Rt.key),D=p(Rt,D,dt),St===null?at=Rt:St.sibling=Rt,St=Rt);return e&&rt.forEach(function(Rb){return i(L,Rb)}),Mt&&as(L,dt),at}function jt(L,D,j,V){if(typeof j=="object"&&j!==null&&j.type===S&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case v:t:{for(var at=j.key;D!==null;){if(D.key===at){if(at=j.type,at===S){if(D.tag===7){s(L,D.sibling),V=h(D,j.props.children),V.return=L,L=V;break t}}else if(D.elementType===at||typeof at=="object"&&at!==null&&at.$$typeof===Q&&Mf(at)===D.type){s(L,D.sibling),V=h(D,j.props),nr(V,j),V.return=L,L=V;break t}s(L,D);break}else i(L,D);D=D.sibling}j.type===S?(V=ns(j.props.children,L.mode,V,j.key),V.return=L,L=V):(V=rl(j.type,j.key,j.props,null,L.mode,V),nr(V,j),V.return=L,L=V)}return b(L);case _:t:{for(at=j.key;D!==null;){if(D.key===at)if(D.tag===4&&D.stateNode.containerInfo===j.containerInfo&&D.stateNode.implementation===j.implementation){s(L,D.sibling),V=h(D,j.children||[]),V.return=L,L=V;break t}else{s(L,D);break}else i(L,D);D=D.sibling}V=hc(j,L.mode,V),V.return=L,L=V}return b(L);case Q:return at=j._init,j=at(j._payload),jt(L,D,j,V)}if(st(j))return ft(L,D,j,V);if(J(j)){if(at=J(j),typeof at!="function")throw Error(a(150));return j=at.call(j),ut(L,D,j,V)}if(typeof j.then=="function")return jt(L,D,El(j),V);if(j.$$typeof===C)return jt(L,D,ul(L,j),V);wl(L,j)}return typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint"?(j=""+j,D!==null&&D.tag===6?(s(L,D.sibling),V=h(D,j),V.return=L,L=V):(s(L,D),V=uc(j,L.mode,V),V.return=L,L=V),b(L)):s(L,D)}return function(L,D,j,V){try{ir=0;var at=jt(L,D,j,V);return Qs=null,at}catch(rt){if(rt===Ya||rt===dl)throw rt;var St=Qe(29,rt,null,L.mode);return St.lanes=V,St.return=L,St}finally{}}}var Ws=Df(!0),Of=Df(!1),gi=I(null),zi=null;function xn(e){var i=e.alternate;X(ae,ae.current&1),X(gi,e),zi===null&&(i===null||Xs.current!==null||i.memoizedState!==null)&&(zi=e)}function Lf(e){if(e.tag===22){if(X(ae,ae.current),X(gi,e),zi===null){var i=e.alternate;i!==null&&i.memoizedState!==null&&(zi=e)}}else Cn()}function Cn(){X(ae,ae.current),X(gi,gi.current)}function sn(e){W(gi),zi===e&&(zi=null),W(ae)}var ae=I(0);function Tl(e){for(var i=e;i!==null;){if(i.tag===13){var s=i.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||ku(s)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function Gc(e,i,s,l){i=e.memoizedState,s=s(l,i),s=s==null?i:m({},i,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var Vc={enqueueSetState:function(e,i,s){e=e._reactInternals;var l=ti(),h=En(l);h.payload=i,s!=null&&(h.callback=s),i=wn(e,h,l),i!==null&&(ei(i,e,l),$a(i,e,l))},enqueueReplaceState:function(e,i,s){e=e._reactInternals;var l=ti(),h=En(l);h.tag=1,h.payload=i,s!=null&&(h.callback=s),i=wn(e,h,l),i!==null&&(ei(i,e,l),$a(i,e,l))},enqueueForceUpdate:function(e,i){e=e._reactInternals;var s=ti(),l=En(s);l.tag=2,i!=null&&(l.callback=i),i=wn(e,l,s),i!==null&&(ei(i,e,s),$a(i,e,s))}};function kf(e,i,s,l,h,p,b){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,p,b):i.prototype&&i.prototype.isPureReactComponent?!za(s,l)||!za(h,p):!0}function Nf(e,i,s,l){e=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(s,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(s,l),i.state!==e&&Vc.enqueueReplaceState(i,i.state,null)}function ds(e,i){var s=i;if("ref"in i){s={};for(var l in i)l!=="ref"&&(s[l]=i[l])}if(e=e.defaultProps){s===i&&(s=m({},s));for(var h in e)s[h]===void 0&&(s[h]=e[h])}return s}var xl=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Pf(e){xl(e)}function jf(e){console.error(e)}function Ff(e){xl(e)}function Cl(e,i){try{var s=e.onUncaughtError;s(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function Hf(e,i,s){try{var l=e.onCaughtError;l(s.value,{componentStack:s.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Xc(e,i,s){return s=En(s),s.tag=3,s.payload={element:null},s.callback=function(){Cl(e,i)},s}function zf(e){return e=En(e),e.tag=3,e}function Uf(e,i,s,l){var h=s.type.getDerivedStateFromError;if(typeof h=="function"){var p=l.value;e.payload=function(){return h(p)},e.callback=function(){Hf(i,s,l)}}var b=s.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(e.callback=function(){Hf(i,s,l),typeof h!="function"&&(kn===null?kn=new Set([this]):kn.add(this));var E=l.stack;this.componentDidCatch(l.value,{componentStack:E!==null?E:""})})}function Rv(e,i,s,l,h){if(s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=s.alternate,i!==null&&Ga(i,s,h,!0),s=gi.current,s!==null){switch(s.tag){case 13:return zi===null?mu():s.alternate===null&&Yt===0&&(Yt=3),s.flags&=-257,s.flags|=65536,s.lanes=h,l===Ac?s.flags|=16384:(i=s.updateQueue,i===null?s.updateQueue=new Set([l]):i.add(l),vu(e,l,h)),!1;case 22:return s.flags|=65536,l===Ac?s.flags|=16384:(i=s.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},s.updateQueue=i):(s=i.retryQueue,s===null?i.retryQueue=new Set([l]):s.add(l)),vu(e,l,h)),!1}throw Error(a(435,s.tag))}return vu(e,l,h),mu(),!1}if(Mt)return i=gi.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,l!==gc&&(e=Error(a(422),{cause:l}),qa(ui(e,s)))):(l!==gc&&(i=Error(a(423),{cause:l}),qa(ui(i,s))),e=e.current.alternate,e.flags|=65536,h&=-h,e.lanes|=h,l=ui(l,s),h=Xc(e.stateNode,l,h),wc(e,h),Yt!==4&&(Yt=2)),!1;var p=Error(a(520),{cause:l});if(p=ui(p,s),ur===null?ur=[p]:ur.push(p),Yt!==4&&(Yt=2),i===null)return!0;l=ui(l,s),s=i;do{switch(s.tag){case 3:return s.flags|=65536,e=h&-h,s.lanes|=e,e=Xc(s.stateNode,l,e),wc(s,e),!1;case 1:if(i=s.type,p=s.stateNode,(s.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(kn===null||!kn.has(p))))return s.flags|=65536,h&=-h,s.lanes|=h,h=zf(h),Uf(h,e,s,l),wc(s,h),!1}s=s.return}while(s!==null);return!1}var Bf=Error(a(461)),pe=!1;function ve(e,i,s,l){i.child=e===null?Of(i,null,s,l):Ws(i,e.child,s,l)}function If(e,i,s,l,h){s=s.render;var p=i.ref;if("ref"in l){var b={};for(var E in l)E!=="ref"&&(b[E]=l[E])}else b=l;return cs(i),l=Mc(e,i,s,b,p,h),E=Dc(),e!==null&&!pe?(Oc(e,i,h),an(e,i,h)):(Mt&&E&&dc(i),i.flags|=1,ve(e,i,l,h),i.child)}function qf(e,i,s,l,h){if(e===null){var p=s.type;return typeof p=="function"&&!cc(p)&&p.defaultProps===void 0&&s.compare===null?(i.tag=15,i.type=p,Gf(e,i,p,l,h)):(e=rl(s.type,null,l,i,i.mode,h),e.ref=i.ref,e.return=i,i.child=e)}if(p=e.child,!tu(e,h)){var b=p.memoizedProps;if(s=s.compare,s=s!==null?s:za,s(b,l)&&e.ref===i.ref)return an(e,i,h)}return i.flags|=1,e=Wi(p,l),e.ref=i.ref,e.return=i,i.child=e}function Gf(e,i,s,l,h){if(e!==null){var p=e.memoizedProps;if(za(p,l)&&e.ref===i.ref)if(pe=!1,i.pendingProps=l=p,tu(e,h))(e.flags&131072)!==0&&(pe=!0);else return i.lanes=e.lanes,an(e,i,h)}return Yc(e,i,s,l,h)}function Vf(e,i,s){var l=i.pendingProps,h=l.children,p=e!==null?e.memoizedState:null;if(l.mode==="hidden"){if((i.flags&128)!==0){if(l=p!==null?p.baseLanes|s:s,e!==null){for(h=i.child=e.child,p=0;h!==null;)p=p|h.lanes|h.childLanes,h=h.sibling;i.childLanes=p&~l}else i.childLanes=0,i.child=null;return Xf(e,i,l,s)}if((s&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},e!==null&&hl(i,p!==null?p.cachePool:null),p!==null?qd(i,p):xc(),Lf(i);else return i.lanes=i.childLanes=536870912,Xf(e,i,p!==null?p.baseLanes|s:s,s)}else p!==null?(hl(i,p.cachePool),qd(i,p),Cn(),i.memoizedState=null):(e!==null&&hl(i,null),xc(),Cn());return ve(e,i,h,s),i.child}function Xf(e,i,s,l){var h=_c();return h=h===null?null:{parent:se._currentValue,pool:h},i.memoizedState={baseLanes:s,cachePool:h},e!==null&&hl(i,null),xc(),Lf(i),e!==null&&Ga(e,i,l,!0),null}function Rl(e,i){var s=i.ref;if(s===null)e!==null&&e.ref!==null&&(i.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(a(284));(e===null||e.ref!==s)&&(i.flags|=4194816)}}function Yc(e,i,s,l,h){return cs(i),s=Mc(e,i,s,l,void 0,h),l=Dc(),e!==null&&!pe?(Oc(e,i,h),an(e,i,h)):(Mt&&l&&dc(i),i.flags|=1,ve(e,i,s,h),i.child)}function Yf(e,i,s,l,h,p){return cs(i),i.updateQueue=null,s=Vd(i,l,s,h),Gd(e),l=Dc(),e!==null&&!pe?(Oc(e,i,p),an(e,i,p)):(Mt&&l&&dc(i),i.flags|=1,ve(e,i,s,p),i.child)}function Kf(e,i,s,l,h){if(cs(i),i.stateNode===null){var p=Bs,b=s.contextType;typeof b=="object"&&b!==null&&(p=Te(b)),p=new s(l,p),i.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=Vc,i.stateNode=p,p._reactInternals=i,p=i.stateNode,p.props=l,p.state=i.memoizedState,p.refs={},Sc(i),b=s.contextType,p.context=typeof b=="object"&&b!==null?Te(b):Bs,p.state=i.memoizedState,b=s.getDerivedStateFromProps,typeof b=="function"&&(Gc(i,s,b,l),p.state=i.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(b=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),b!==p.state&&Vc.enqueueReplaceState(p,p.state,null),Wa(i,l,p,h),Qa(),p.state=i.memoizedState),typeof p.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(e===null){p=i.stateNode;var E=i.memoizedProps,R=ds(s,E);p.props=R;var F=p.context,G=s.contextType;b=Bs,typeof G=="object"&&G!==null&&(b=Te(G));var K=s.getDerivedStateFromProps;G=typeof K=="function"||typeof p.getSnapshotBeforeUpdate=="function",E=i.pendingProps!==E,G||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(E||F!==b)&&Nf(i,p,l,b),Sn=!1;var H=i.memoizedState;p.state=H,Wa(i,l,p,h),Qa(),F=i.memoizedState,E||H!==F||Sn?(typeof K=="function"&&(Gc(i,s,K,l),F=i.memoizedState),(R=Sn||kf(i,s,R,l,H,F,b))?(G||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(i.flags|=4194308)):(typeof p.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=F),p.props=l,p.state=F,p.context=b,l=R):(typeof p.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{p=i.stateNode,Ec(e,i),b=i.memoizedProps,G=ds(s,b),p.props=G,K=i.pendingProps,H=p.context,F=s.contextType,R=Bs,typeof F=="object"&&F!==null&&(R=Te(F)),E=s.getDerivedStateFromProps,(F=typeof E=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(b!==K||H!==R)&&Nf(i,p,l,R),Sn=!1,H=i.memoizedState,p.state=H,Wa(i,l,p,h),Qa();var z=i.memoizedState;b!==K||H!==z||Sn||e!==null&&e.dependencies!==null&&cl(e.dependencies)?(typeof E=="function"&&(Gc(i,s,E,l),z=i.memoizedState),(G=Sn||kf(i,s,G,l,H,z,R)||e!==null&&e.dependencies!==null&&cl(e.dependencies))?(F||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(l,z,R),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(l,z,R)),typeof p.componentDidUpdate=="function"&&(i.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof p.componentDidUpdate!="function"||b===e.memoizedProps&&H===e.memoizedState||(i.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&H===e.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=z),p.props=l,p.state=z,p.context=R,l=G):(typeof p.componentDidUpdate!="function"||b===e.memoizedProps&&H===e.memoizedState||(i.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&H===e.memoizedState||(i.flags|=1024),l=!1)}return p=l,Rl(e,i),l=(i.flags&128)!==0,p||l?(p=i.stateNode,s=l&&typeof s.getDerivedStateFromError!="function"?null:p.render(),i.flags|=1,e!==null&&l?(i.child=Ws(i,e.child,null,h),i.child=Ws(i,null,s,h)):ve(e,i,s,h),i.memoizedState=p.state,e=i.child):e=an(e,i,h),e}function $f(e,i,s,l){return Ia(),i.flags|=256,ve(e,i,s,l),i.child}var Kc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function $c(e){return{baseLanes:e,cachePool:Pd()}}function Qc(e,i,s){return e=e!==null?e.childLanes&~s:0,i&&(e|=pi),e}function Qf(e,i,s){var l=i.pendingProps,h=!1,p=(i.flags&128)!==0,b;if((b=p)||(b=e!==null&&e.memoizedState===null?!1:(ae.current&2)!==0),b&&(h=!0,i.flags&=-129),b=(i.flags&32)!==0,i.flags&=-33,e===null){if(Mt){if(h?xn(i):Cn(),Mt){var E=Xt,R;if(R=E){t:{for(R=E,E=Hi;R.nodeType!==8;){if(!E){E=null;break t}if(R=Mi(R.nextSibling),R===null){E=null;break t}}E=R}E!==null?(i.memoizedState={dehydrated:E,treeContext:ss!==null?{id:Zi,overflow:Ji}:null,retryLane:536870912,hydrationErrors:null},R=Qe(18,null,null,0),R.stateNode=E,R.return=i,i.child=R,Ne=i,Xt=null,R=!0):R=!1}R||ls(i)}if(E=i.memoizedState,E!==null&&(E=E.dehydrated,E!==null))return ku(E)?i.lanes=32:i.lanes=536870912,null;sn(i)}return E=l.children,l=l.fallback,h?(Cn(),h=i.mode,E=Ml({mode:"hidden",children:E},h),l=ns(l,h,s,null),E.return=i,l.return=i,E.sibling=l,i.child=E,h=i.child,h.memoizedState=$c(s),h.childLanes=Qc(e,b,s),i.memoizedState=Kc,l):(xn(i),Wc(i,E))}if(R=e.memoizedState,R!==null&&(E=R.dehydrated,E!==null)){if(p)i.flags&256?(xn(i),i.flags&=-257,i=Zc(e,i,s)):i.memoizedState!==null?(Cn(),i.child=e.child,i.flags|=128,i=null):(Cn(),h=l.fallback,E=i.mode,l=Ml({mode:"visible",children:l.children},E),h=ns(h,E,s,null),h.flags|=2,l.return=i,h.return=i,l.sibling=h,i.child=l,Ws(i,e.child,null,s),l=i.child,l.memoizedState=$c(s),l.childLanes=Qc(e,b,s),i.memoizedState=Kc,i=h);else if(xn(i),ku(E)){if(b=E.nextSibling&&E.nextSibling.dataset,b)var F=b.dgst;b=F,l=Error(a(419)),l.stack="",l.digest=b,qa({value:l,source:null,stack:null}),i=Zc(e,i,s)}else if(pe||Ga(e,i,s,!1),b=(s&e.childLanes)!==0,pe||b){if(b=Ht,b!==null&&(l=s&-s,l=(l&42)!==0?1:Ma(l),l=(l&(b.suspendedLanes|s))!==0?0:l,l!==0&&l!==R.retryLane))throw R.retryLane=l,Us(e,l),ei(b,e,l),Bf;E.data==="$?"||mu(),i=Zc(e,i,s)}else E.data==="$?"?(i.flags|=192,i.child=e.child,i=null):(e=R.treeContext,Xt=Mi(E.nextSibling),Ne=i,Mt=!0,rs=null,Hi=!1,e!==null&&(di[fi++]=Zi,di[fi++]=Ji,di[fi++]=ss,Zi=e.id,Ji=e.overflow,ss=i),i=Wc(i,l.children),i.flags|=4096);return i}return h?(Cn(),h=l.fallback,E=i.mode,R=e.child,F=R.sibling,l=Wi(R,{mode:"hidden",children:l.children}),l.subtreeFlags=R.subtreeFlags&65011712,F!==null?h=Wi(F,h):(h=ns(h,E,s,null),h.flags|=2),h.return=i,l.return=i,l.sibling=h,i.child=l,l=h,h=i.child,E=e.child.memoizedState,E===null?E=$c(s):(R=E.cachePool,R!==null?(F=se._currentValue,R=R.parent!==F?{parent:F,pool:F}:R):R=Pd(),E={baseLanes:E.baseLanes|s,cachePool:R}),h.memoizedState=E,h.childLanes=Qc(e,b,s),i.memoizedState=Kc,l):(xn(i),s=e.child,e=s.sibling,s=Wi(s,{mode:"visible",children:l.children}),s.return=i,s.sibling=null,e!==null&&(b=i.deletions,b===null?(i.deletions=[e],i.flags|=16):b.push(e)),i.child=s,i.memoizedState=null,s)}function Wc(e,i){return i=Ml({mode:"visible",children:i},e.mode),i.return=e,e.child=i}function Ml(e,i){return e=Qe(22,e,null,i),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Zc(e,i,s){return Ws(i,e.child,null,s),e=Wc(i,i.pendingProps.children),e.flags|=2,i.memoizedState=null,e}function Wf(e,i,s){e.lanes|=i;var l=e.alternate;l!==null&&(l.lanes|=i),mc(e.return,i,s)}function Jc(e,i,s,l,h){var p=e.memoizedState;p===null?e.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:s,tailMode:h}:(p.isBackwards=i,p.rendering=null,p.renderingStartTime=0,p.last=l,p.tail=s,p.tailMode=h)}function Zf(e,i,s){var l=i.pendingProps,h=l.revealOrder,p=l.tail;if(ve(e,i,l.children,s),l=ae.current,(l&2)!==0)l=l&1|2,i.flags|=128;else{if(e!==null&&(e.flags&128)!==0)t:for(e=i.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Wf(e,s,i);else if(e.tag===19)Wf(e,s,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break t;for(;e.sibling===null;){if(e.return===null||e.return===i)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}l&=1}switch(X(ae,l),h){case"forwards":for(s=i.child,h=null;s!==null;)e=s.alternate,e!==null&&Tl(e)===null&&(h=s),s=s.sibling;s=h,s===null?(h=i.child,i.child=null):(h=s.sibling,s.sibling=null),Jc(i,!1,h,s,p);break;case"backwards":for(s=null,h=i.child,i.child=null;h!==null;){if(e=h.alternate,e!==null&&Tl(e)===null){i.child=h;break}e=h.sibling,h.sibling=s,s=h,h=e}Jc(i,!0,s,null,p);break;case"together":Jc(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function an(e,i,s){if(e!==null&&(i.dependencies=e.dependencies),Ln|=i.lanes,(s&i.childLanes)===0)if(e!==null){if(Ga(e,i,s,!1),(s&i.childLanes)===0)return null}else return null;if(e!==null&&i.child!==e.child)throw Error(a(153));if(i.child!==null){for(e=i.child,s=Wi(e,e.pendingProps),i.child=s,s.return=i;e.sibling!==null;)e=e.sibling,s=s.sibling=Wi(e,e.pendingProps),s.return=i;s.sibling=null}return i.child}function tu(e,i){return(e.lanes&i)!==0?!0:(e=e.dependencies,!!(e!==null&&cl(e)))}function Mv(e,i,s){switch(i.tag){case 3:bt(i,i.stateNode.containerInfo),An(i,se,e.memoizedState.cache),Ia();break;case 27:case 5:Xe(i);break;case 4:bt(i,i.stateNode.containerInfo);break;case 10:An(i,i.type,i.memoizedProps.value);break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(xn(i),i.flags|=128,null):(s&i.child.childLanes)!==0?Qf(e,i,s):(xn(i),e=an(e,i,s),e!==null?e.sibling:null);xn(i);break;case 19:var h=(e.flags&128)!==0;if(l=(s&i.childLanes)!==0,l||(Ga(e,i,s,!1),l=(s&i.childLanes)!==0),h){if(l)return Zf(e,i,s);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),X(ae,ae.current),l)break;return null;case 22:case 23:return i.lanes=0,Vf(e,i,s);case 24:An(i,se,e.memoizedState.cache)}return an(e,i,s)}function Jf(e,i,s){if(e!==null)if(e.memoizedProps!==i.pendingProps)pe=!0;else{if(!tu(e,s)&&(i.flags&128)===0)return pe=!1,Mv(e,i,s);pe=(e.flags&131072)!==0}else pe=!1,Mt&&(i.flags&1048576)!==0&&Rd(i,ol,i.index);switch(i.lanes=0,i.tag){case 16:t:{e=i.pendingProps;var l=i.elementType,h=l._init;if(l=h(l._payload),i.type=l,typeof l=="function")cc(l)?(e=ds(l,e),i.tag=1,i=Kf(null,i,l,e,s)):(i.tag=0,i=Yc(null,i,l,e,s));else{if(l!=null){if(h=l.$$typeof,h===O){i.tag=11,i=If(null,i,l,e,s);break t}else if(h===q){i.tag=14,i=qf(null,i,l,e,s);break t}}throw i=ht(l)||l,Error(a(306,i,""))}}return i;case 0:return Yc(e,i,i.type,i.pendingProps,s);case 1:return l=i.type,h=ds(l,i.pendingProps),Kf(e,i,l,h,s);case 3:t:{if(bt(i,i.stateNode.containerInfo),e===null)throw Error(a(387));l=i.pendingProps;var p=i.memoizedState;h=p.element,Ec(e,i),Wa(i,l,null,s);var b=i.memoizedState;if(l=b.cache,An(i,se,l),l!==p.cache&&yc(i,[se],s,!0),Qa(),l=b.element,p.isDehydrated)if(p={element:l,isDehydrated:!1,cache:b.cache},i.updateQueue.baseState=p,i.memoizedState=p,i.flags&256){i=$f(e,i,l,s);break t}else if(l!==h){h=ui(Error(a(424)),i),qa(h),i=$f(e,i,l,s);break t}else{switch(e=i.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Xt=Mi(e.firstChild),Ne=i,Mt=!0,rs=null,Hi=!0,s=Of(i,null,l,s),i.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling}else{if(Ia(),l===h){i=an(e,i,s);break t}ve(e,i,l,s)}i=i.child}return i;case 26:return Rl(e,i),e===null?(s=np(i.type,null,i.pendingProps,null))?i.memoizedState=s:Mt||(s=i.type,e=i.pendingProps,l=ql(et.current).createElement(s),l[we]=i,l[ze]=e,_e(l,s,e),ge(l),i.stateNode=l):i.memoizedState=np(i.type,e.memoizedProps,i.pendingProps,e.memoizedState),null;case 27:return Xe(i),e===null&&Mt&&(l=i.stateNode=tp(i.type,i.pendingProps,et.current),Ne=i,Hi=!0,h=Xt,jn(i.type)?(Nu=h,Xt=Mi(l.firstChild)):Xt=h),ve(e,i,i.pendingProps.children,s),Rl(e,i),e===null&&(i.flags|=4194304),i.child;case 5:return e===null&&Mt&&((h=l=Xt)&&(l=nb(l,i.type,i.pendingProps,Hi),l!==null?(i.stateNode=l,Ne=i,Xt=Mi(l.firstChild),Hi=!1,h=!0):h=!1),h||ls(i)),Xe(i),h=i.type,p=i.pendingProps,b=e!==null?e.memoizedProps:null,l=p.children,Du(h,p)?l=null:b!==null&&Du(h,b)&&(i.flags|=32),i.memoizedState!==null&&(h=Mc(e,i,Av,null,null,s),br._currentValue=h),Rl(e,i),ve(e,i,l,s),i.child;case 6:return e===null&&Mt&&((e=s=Xt)&&(s=sb(s,i.pendingProps,Hi),s!==null?(i.stateNode=s,Ne=i,Xt=null,e=!0):e=!1),e||ls(i)),null;case 13:return Qf(e,i,s);case 4:return bt(i,i.stateNode.containerInfo),l=i.pendingProps,e===null?i.child=Ws(i,null,l,s):ve(e,i,l,s),i.child;case 11:return If(e,i,i.type,i.pendingProps,s);case 7:return ve(e,i,i.pendingProps,s),i.child;case 8:return ve(e,i,i.pendingProps.children,s),i.child;case 12:return ve(e,i,i.pendingProps.children,s),i.child;case 10:return l=i.pendingProps,An(i,i.type,l.value),ve(e,i,l.children,s),i.child;case 9:return h=i.type._context,l=i.pendingProps.children,cs(i),h=Te(h),l=l(h),i.flags|=1,ve(e,i,l,s),i.child;case 14:return qf(e,i,i.type,i.pendingProps,s);case 15:return Gf(e,i,i.type,i.pendingProps,s);case 19:return Zf(e,i,s);case 31:return l=i.pendingProps,s=i.mode,l={mode:l.mode,children:l.children},e===null?(s=Ml(l,s),s.ref=i.ref,i.child=s,s.return=i,i=s):(s=Wi(e.child,l),s.ref=i.ref,i.child=s,s.return=i,i=s),i;case 22:return Vf(e,i,s);case 24:return cs(i),l=Te(se),e===null?(h=_c(),h===null&&(h=Ht,p=vc(),h.pooledCache=p,p.refCount++,p!==null&&(h.pooledCacheLanes|=s),h=p),i.memoizedState={parent:l,cache:h},Sc(i),An(i,se,h)):((e.lanes&s)!==0&&(Ec(e,i),Wa(i,null,null,s),Qa()),h=e.memoizedState,p=i.memoizedState,h.parent!==l?(h={parent:l,cache:l},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),An(i,se,l)):(l=p.cache,An(i,se,l),l!==h.cache&&yc(i,[se],s,!0))),ve(e,i,i.pendingProps.children,s),i.child;case 29:throw i.pendingProps}throw Error(a(156,i.tag))}function rn(e){e.flags|=4}function tg(e,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!op(i)){if(i=gi.current,i!==null&&((Ct&4194048)===Ct?zi!==null:(Ct&62914560)!==Ct&&(Ct&536870912)===0||i!==zi))throw Ka=Ac,jd;e.flags|=8192}}function Dl(e,i){i!==null&&(e.flags|=4),e.flags&16384&&(i=e.tag!==22?He():536870912,e.lanes|=i,ea|=i)}function sr(e,i){if(!Mt)switch(e.tailMode){case"hidden":i=e.tail;for(var s=null;i!==null;)i.alternate!==null&&(s=i),i=i.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?i||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function qt(e){var i=e.alternate!==null&&e.alternate.child===e.child,s=0,l=0;if(i)for(var h=e.child;h!==null;)s|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=e,h=h.sibling;else for(h=e.child;h!==null;)s|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=e,h=h.sibling;return e.subtreeFlags|=l,e.childLanes=s,i}function Dv(e,i,s){var l=i.pendingProps;switch(fc(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qt(i),null;case 1:return qt(i),null;case 3:return s=i.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),en(se),kt(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Ba(i)?rn(i):e===null||e.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Od())),qt(i),null;case 26:return s=i.memoizedState,e===null?(rn(i),s!==null?(qt(i),tg(i,s)):(qt(i),i.flags&=-16777217)):s?s!==e.memoizedState?(rn(i),qt(i),tg(i,s)):(qt(i),i.flags&=-16777217):(e.memoizedProps!==l&&rn(i),qt(i),i.flags&=-16777217),null;case 27:Ye(i),s=et.current;var h=i.type;if(e!==null&&i.stateNode!=null)e.memoizedProps!==l&&rn(i);else{if(!l){if(i.stateNode===null)throw Error(a(166));return qt(i),null}e=tt.current,Ba(i)?Md(i):(e=tp(h,l,s),i.stateNode=e,rn(i))}return qt(i),null;case 5:if(Ye(i),s=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==l&&rn(i);else{if(!l){if(i.stateNode===null)throw Error(a(166));return qt(i),null}if(e=tt.current,Ba(i))Md(i);else{switch(h=ql(et.current),e){case 1:e=h.createElementNS("http://www.w3.org/2000/svg",s);break;case 2:e=h.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;default:switch(s){case"svg":e=h.createElementNS("http://www.w3.org/2000/svg",s);break;case"math":e=h.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;case"script":e=h.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof l.is=="string"?h.createElement("select",{is:l.is}):h.createElement("select"),l.multiple?e.multiple=!0:l.size&&(e.size=l.size);break;default:e=typeof l.is=="string"?h.createElement(s,{is:l.is}):h.createElement(s)}}e[we]=i,e[ze]=l;t:for(h=i.child;h!==null;){if(h.tag===5||h.tag===6)e.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===i)break t;for(;h.sibling===null;){if(h.return===null||h.return===i)break t;h=h.return}h.sibling.return=h.return,h=h.sibling}i.stateNode=e;t:switch(_e(e,s,l),s){case"button":case"input":case"select":case"textarea":e=!!l.autoFocus;break t;case"img":e=!0;break t;default:e=!1}e&&rn(i)}}return qt(i),i.flags&=-16777217,null;case 6:if(e&&i.stateNode!=null)e.memoizedProps!==l&&rn(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(a(166));if(e=et.current,Ba(i)){if(e=i.stateNode,s=i.memoizedProps,l=null,h=Ne,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}e[we]=i,e=!!(e.nodeValue===s||l!==null&&l.suppressHydrationWarning===!0||Yg(e.nodeValue,s)),e||ls(i)}else e=ql(e).createTextNode(l),e[we]=i,i.stateNode=e}return qt(i),null;case 13:if(l=i.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(h=Ba(i),l!==null&&l.dehydrated!==null){if(e===null){if(!h)throw Error(a(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(a(317));h[we]=i}else Ia(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;qt(i),h=!1}else h=Od(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(sn(i),i):(sn(i),null)}if(sn(i),(i.flags&128)!==0)return i.lanes=s,i;if(s=l!==null,e=e!==null&&e.memoizedState!==null,s){l=i.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool);var p=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),p!==h&&(l.flags|=2048)}return s!==e&&s&&(i.child.flags|=8192),Dl(i,i.updateQueue),qt(i),null;case 4:return kt(),e===null&&Tu(i.stateNode.containerInfo),qt(i),null;case 10:return en(i.type),qt(i),null;case 19:if(W(ae),h=i.memoizedState,h===null)return qt(i),null;if(l=(i.flags&128)!==0,p=h.rendering,p===null)if(l)sr(h,!1);else{if(Yt!==0||e!==null&&(e.flags&128)!==0)for(e=i.child;e!==null;){if(p=Tl(e),p!==null){for(i.flags|=128,sr(h,!1),e=p.updateQueue,i.updateQueue=e,Dl(i,e),i.subtreeFlags=0,e=s,s=i.child;s!==null;)Cd(s,e),s=s.sibling;return X(ae,ae.current&1|2),i.child}e=e.sibling}h.tail!==null&&Kt()>kl&&(i.flags|=128,l=!0,sr(h,!1),i.lanes=4194304)}else{if(!l)if(e=Tl(p),e!==null){if(i.flags|=128,l=!0,e=e.updateQueue,i.updateQueue=e,Dl(i,e),sr(h,!0),h.tail===null&&h.tailMode==="hidden"&&!p.alternate&&!Mt)return qt(i),null}else 2*Kt()-h.renderingStartTime>kl&&s!==536870912&&(i.flags|=128,l=!0,sr(h,!1),i.lanes=4194304);h.isBackwards?(p.sibling=i.child,i.child=p):(e=h.last,e!==null?e.sibling=p:i.child=p,h.last=p)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=Kt(),i.sibling=null,e=ae.current,X(ae,l?e&1|2:e&1),i):(qt(i),null);case 22:case 23:return sn(i),Cc(),l=i.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(s&536870912)!==0&&(i.flags&128)===0&&(qt(i),i.subtreeFlags&6&&(i.flags|=8192)):qt(i),s=i.updateQueue,s!==null&&Dl(i,s.retryQueue),s=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==s&&(i.flags|=2048),e!==null&&W(us),null;case 24:return s=null,e!==null&&(s=e.memoizedState.cache),i.memoizedState.cache!==s&&(i.flags|=2048),en(se),qt(i),null;case 25:return null;case 30:return null}throw Error(a(156,i.tag))}function Ov(e,i){switch(fc(i),i.tag){case 1:return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 3:return en(se),kt(),e=i.flags,(e&65536)!==0&&(e&128)===0?(i.flags=e&-65537|128,i):null;case 26:case 27:case 5:return Ye(i),null;case 13:if(sn(i),e=i.memoizedState,e!==null&&e.dehydrated!==null){if(i.alternate===null)throw Error(a(340));Ia()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 19:return W(ae),null;case 4:return kt(),null;case 10:return en(i.type),null;case 22:case 23:return sn(i),Cc(),e!==null&&W(us),e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 24:return en(se),null;case 25:return null;default:return null}}function eg(e,i){switch(fc(i),i.tag){case 3:en(se),kt();break;case 26:case 27:case 5:Ye(i);break;case 4:kt();break;case 13:sn(i);break;case 19:W(ae);break;case 10:en(i.type);break;case 22:case 23:sn(i),Cc(),e!==null&&W(us);break;case 24:en(se)}}function ar(e,i){try{var s=i.updateQueue,l=s!==null?s.lastEffect:null;if(l!==null){var h=l.next;s=h;do{if((s.tag&e)===e){l=void 0;var p=s.create,b=s.inst;l=p(),b.destroy=l}s=s.next}while(s!==h)}}catch(E){Ft(i,i.return,E)}}function Rn(e,i,s){try{var l=i.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var p=h.next;l=p;do{if((l.tag&e)===e){var b=l.inst,E=b.destroy;if(E!==void 0){b.destroy=void 0,h=i;var R=s,F=E;try{F()}catch(G){Ft(h,R,G)}}}l=l.next}while(l!==p)}}catch(G){Ft(i,i.return,G)}}function ig(e){var i=e.updateQueue;if(i!==null){var s=e.stateNode;try{Id(i,s)}catch(l){Ft(e,e.return,l)}}}function ng(e,i,s){s.props=ds(e.type,e.memoizedProps),s.state=e.memoizedState;try{s.componentWillUnmount()}catch(l){Ft(e,i,l)}}function rr(e,i){try{var s=e.ref;if(s!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof s=="function"?e.refCleanup=s(l):s.current=l}}catch(h){Ft(e,i,h)}}function Ui(e,i){var s=e.ref,l=e.refCleanup;if(s!==null)if(typeof l=="function")try{l()}catch(h){Ft(e,i,h)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(h){Ft(e,i,h)}else s.current=null}function sg(e){var i=e.type,s=e.memoizedProps,l=e.stateNode;try{t:switch(i){case"button":case"input":case"select":case"textarea":s.autoFocus&&l.focus();break t;case"img":s.src?l.src=s.src:s.srcSet&&(l.srcset=s.srcSet)}}catch(h){Ft(e,e.return,h)}}function eu(e,i,s){try{var l=e.stateNode;Zv(l,e.type,s,i),l[ze]=i}catch(h){Ft(e,e.return,h)}}function ag(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&jn(e.type)||e.tag===4}function iu(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||ag(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&jn(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function nu(e,i,s){var l=e.tag;if(l===5||l===6)e=e.stateNode,i?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(e,i):(i=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,i.appendChild(e),s=s._reactRootContainer,s!=null||i.onclick!==null||(i.onclick=Il));else if(l!==4&&(l===27&&jn(e.type)&&(s=e.stateNode,i=null),e=e.child,e!==null))for(nu(e,i,s),e=e.sibling;e!==null;)nu(e,i,s),e=e.sibling}function Ol(e,i,s){var l=e.tag;if(l===5||l===6)e=e.stateNode,i?s.insertBefore(e,i):s.appendChild(e);else if(l!==4&&(l===27&&jn(e.type)&&(s=e.stateNode),e=e.child,e!==null))for(Ol(e,i,s),e=e.sibling;e!==null;)Ol(e,i,s),e=e.sibling}function rg(e){var i=e.stateNode,s=e.memoizedProps;try{for(var l=e.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);_e(i,l,s),i[we]=e,i[ze]=s}catch(p){Ft(e,e.return,p)}}var ln=!1,Qt=!1,su=!1,lg=typeof WeakSet=="function"?WeakSet:Set,me=null;function Lv(e,i){if(e=e.containerInfo,Ru=$l,e=yd(e),ic(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else t:{s=(s=e.ownerDocument)&&s.defaultView||window;var l=s.getSelection&&s.getSelection();if(l&&l.rangeCount!==0){s=l.anchorNode;var h=l.anchorOffset,p=l.focusNode;l=l.focusOffset;try{s.nodeType,p.nodeType}catch{s=null;break t}var b=0,E=-1,R=-1,F=0,G=0,K=e,H=null;e:for(;;){for(var z;K!==s||h!==0&&K.nodeType!==3||(E=b+h),K!==p||l!==0&&K.nodeType!==3||(R=b+l),K.nodeType===3&&(b+=K.nodeValue.length),(z=K.firstChild)!==null;)H=K,K=z;for(;;){if(K===e)break e;if(H===s&&++F===h&&(E=b),H===p&&++G===l&&(R=b),(z=K.nextSibling)!==null)break;K=H,H=K.parentNode}K=z}s=E===-1||R===-1?null:{start:E,end:R}}else s=null}s=s||{start:0,end:0}}else s=null;for(Mu={focusedElem:e,selectionRange:s},$l=!1,me=i;me!==null;)if(i=me,e=i.child,(i.subtreeFlags&1024)!==0&&e!==null)e.return=i,me=e;else for(;me!==null;){switch(i=me,p=i.alternate,e=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&p!==null){e=void 0,s=i,h=p.memoizedProps,p=p.memoizedState,l=s.stateNode;try{var ft=ds(s.type,h,s.elementType===s.type);e=l.getSnapshotBeforeUpdate(ft,p),l.__reactInternalSnapshotBeforeUpdate=e}catch(ut){Ft(s,s.return,ut)}}break;case 3:if((e&1024)!==0){if(e=i.stateNode.containerInfo,s=e.nodeType,s===9)Lu(e);else if(s===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Lu(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(a(163))}if(e=i.sibling,e!==null){e.return=i.return,me=e;break}me=i.return}}function og(e,i,s){var l=s.flags;switch(s.tag){case 0:case 11:case 15:Mn(e,s),l&4&&ar(5,s);break;case 1:if(Mn(e,s),l&4)if(e=s.stateNode,i===null)try{e.componentDidMount()}catch(b){Ft(s,s.return,b)}else{var h=ds(s.type,i.memoizedProps);i=i.memoizedState;try{e.componentDidUpdate(h,i,e.__reactInternalSnapshotBeforeUpdate)}catch(b){Ft(s,s.return,b)}}l&64&&ig(s),l&512&&rr(s,s.return);break;case 3:if(Mn(e,s),l&64&&(e=s.updateQueue,e!==null)){if(i=null,s.child!==null)switch(s.child.tag){case 27:case 5:i=s.child.stateNode;break;case 1:i=s.child.stateNode}try{Id(e,i)}catch(b){Ft(s,s.return,b)}}break;case 27:i===null&&l&4&&rg(s);case 26:case 5:Mn(e,s),i===null&&l&4&&sg(s),l&512&&rr(s,s.return);break;case 12:Mn(e,s);break;case 13:Mn(e,s),l&4&&hg(e,s),l&64&&(e=s.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(s=Bv.bind(null,s),ab(e,s))));break;case 22:if(l=s.memoizedState!==null||ln,!l){i=i!==null&&i.memoizedState!==null||Qt,h=ln;var p=Qt;ln=l,(Qt=i)&&!p?Dn(e,s,(s.subtreeFlags&8772)!==0):Mn(e,s),ln=h,Qt=p}break;case 30:break;default:Mn(e,s)}}function cg(e){var i=e.alternate;i!==null&&(e.alternate=null,cg(i)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(i=e.stateNode,i!==null&&Fo(i)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Bt=null,Ie=!1;function on(e,i,s){for(s=s.child;s!==null;)ug(e,i,s),s=s.sibling}function ug(e,i,s){if(he&&typeof he.onCommitFiberUnmount=="function")try{he.onCommitFiberUnmount(si,s)}catch{}switch(s.tag){case 26:Qt||Ui(s,i),on(e,i,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:Qt||Ui(s,i);var l=Bt,h=Ie;jn(s.type)&&(Bt=s.stateNode,Ie=!1),on(e,i,s),pr(s.stateNode),Bt=l,Ie=h;break;case 5:Qt||Ui(s,i);case 6:if(l=Bt,h=Ie,Bt=null,on(e,i,s),Bt=l,Ie=h,Bt!==null)if(Ie)try{(Bt.nodeType===9?Bt.body:Bt.nodeName==="HTML"?Bt.ownerDocument.body:Bt).removeChild(s.stateNode)}catch(p){Ft(s,i,p)}else try{Bt.removeChild(s.stateNode)}catch(p){Ft(s,i,p)}break;case 18:Bt!==null&&(Ie?(e=Bt,Zg(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,s.stateNode),Er(e)):Zg(Bt,s.stateNode));break;case 4:l=Bt,h=Ie,Bt=s.stateNode.containerInfo,Ie=!0,on(e,i,s),Bt=l,Ie=h;break;case 0:case 11:case 14:case 15:Qt||Rn(2,s,i),Qt||Rn(4,s,i),on(e,i,s);break;case 1:Qt||(Ui(s,i),l=s.stateNode,typeof l.componentWillUnmount=="function"&&ng(s,i,l)),on(e,i,s);break;case 21:on(e,i,s);break;case 22:Qt=(l=Qt)||s.memoizedState!==null,on(e,i,s),Qt=l;break;default:on(e,i,s)}}function hg(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Er(e)}catch(s){Ft(i,i.return,s)}}function kv(e){switch(e.tag){case 13:case 19:var i=e.stateNode;return i===null&&(i=e.stateNode=new lg),i;case 22:return e=e.stateNode,i=e._retryCache,i===null&&(i=e._retryCache=new lg),i;default:throw Error(a(435,e.tag))}}function au(e,i){var s=kv(e);i.forEach(function(l){var h=Iv.bind(null,e,l);s.has(l)||(s.add(l),l.then(h,h))})}function We(e,i){var s=i.deletions;if(s!==null)for(var l=0;l<s.length;l++){var h=s[l],p=e,b=i,E=b;t:for(;E!==null;){switch(E.tag){case 27:if(jn(E.type)){Bt=E.stateNode,Ie=!1;break t}break;case 5:Bt=E.stateNode,Ie=!1;break t;case 3:case 4:Bt=E.stateNode.containerInfo,Ie=!0;break t}E=E.return}if(Bt===null)throw Error(a(160));ug(p,b,h),Bt=null,Ie=!1,p=h.alternate,p!==null&&(p.return=null),h.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)dg(i,e),i=i.sibling}var Ri=null;function dg(e,i){var s=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:We(i,e),Ze(e),l&4&&(Rn(3,e,e.return),ar(3,e),Rn(5,e,e.return));break;case 1:We(i,e),Ze(e),l&512&&(Qt||s===null||Ui(s,s.return)),l&64&&ln&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(s=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=s===null?l:s.concat(l))));break;case 26:var h=Ri;if(We(i,e),Ze(e),l&512&&(Qt||s===null||Ui(s,s.return)),l&4){var p=s!==null?s.memoizedState:null;if(l=e.memoizedState,s===null)if(l===null)if(e.stateNode===null){t:{l=e.type,s=e.memoizedProps,h=h.ownerDocument||h;e:switch(l){case"title":p=h.getElementsByTagName("title")[0],(!p||p[Da]||p[we]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=h.createElement(l),h.head.insertBefore(p,h.querySelector("head > title"))),_e(p,l,s),p[we]=e,ge(p),l=p;break t;case"link":var b=rp("link","href",h).get(l+(s.href||""));if(b){for(var E=0;E<b.length;E++)if(p=b[E],p.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&p.getAttribute("rel")===(s.rel==null?null:s.rel)&&p.getAttribute("title")===(s.title==null?null:s.title)&&p.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){b.splice(E,1);break e}}p=h.createElement(l),_e(p,l,s),h.head.appendChild(p);break;case"meta":if(b=rp("meta","content",h).get(l+(s.content||""))){for(E=0;E<b.length;E++)if(p=b[E],p.getAttribute("content")===(s.content==null?null:""+s.content)&&p.getAttribute("name")===(s.name==null?null:s.name)&&p.getAttribute("property")===(s.property==null?null:s.property)&&p.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&p.getAttribute("charset")===(s.charSet==null?null:s.charSet)){b.splice(E,1);break e}}p=h.createElement(l),_e(p,l,s),h.head.appendChild(p);break;default:throw Error(a(468,l))}p[we]=e,ge(p),l=p}e.stateNode=l}else lp(h,e.type,e.stateNode);else e.stateNode=ap(h,l,e.memoizedProps);else p!==l?(p===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):p.count--,l===null?lp(h,e.type,e.stateNode):ap(h,l,e.memoizedProps)):l===null&&e.stateNode!==null&&eu(e,e.memoizedProps,s.memoizedProps)}break;case 27:We(i,e),Ze(e),l&512&&(Qt||s===null||Ui(s,s.return)),s!==null&&l&4&&eu(e,e.memoizedProps,s.memoizedProps);break;case 5:if(We(i,e),Ze(e),l&512&&(Qt||s===null||Ui(s,s.return)),e.flags&32){h=e.stateNode;try{ks(h,"")}catch(z){Ft(e,e.return,z)}}l&4&&e.stateNode!=null&&(h=e.memoizedProps,eu(e,h,s!==null?s.memoizedProps:h)),l&1024&&(su=!0);break;case 6:if(We(i,e),Ze(e),l&4){if(e.stateNode===null)throw Error(a(162));l=e.memoizedProps,s=e.stateNode;try{s.nodeValue=l}catch(z){Ft(e,e.return,z)}}break;case 3:if(Xl=null,h=Ri,Ri=Gl(i.containerInfo),We(i,e),Ri=h,Ze(e),l&4&&s!==null&&s.memoizedState.isDehydrated)try{Er(i.containerInfo)}catch(z){Ft(e,e.return,z)}su&&(su=!1,fg(e));break;case 4:l=Ri,Ri=Gl(e.stateNode.containerInfo),We(i,e),Ze(e),Ri=l;break;case 12:We(i,e),Ze(e);break;case 13:We(i,e),Ze(e),e.child.flags&8192&&e.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(hu=Kt()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,au(e,l)));break;case 22:h=e.memoizedState!==null;var R=s!==null&&s.memoizedState!==null,F=ln,G=Qt;if(ln=F||h,Qt=G||R,We(i,e),Qt=G,ln=F,Ze(e),l&8192)t:for(i=e.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(s===null||R||ln||Qt||fs(e)),s=null,i=e;;){if(i.tag===5||i.tag===26){if(s===null){R=s=i;try{if(p=R.stateNode,h)b=p.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{E=R.stateNode;var K=R.memoizedProps.style,H=K!=null&&K.hasOwnProperty("display")?K.display:null;E.style.display=H==null||typeof H=="boolean"?"":(""+H).trim()}}catch(z){Ft(R,R.return,z)}}}else if(i.tag===6){if(s===null){R=i;try{R.stateNode.nodeValue=h?"":R.memoizedProps}catch(z){Ft(R,R.return,z)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===e)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break t;for(;i.sibling===null;){if(i.return===null||i.return===e)break t;s===i&&(s=null),i=i.return}s===i&&(s=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=e.updateQueue,l!==null&&(s=l.retryQueue,s!==null&&(l.retryQueue=null,au(e,s))));break;case 19:We(i,e),Ze(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,au(e,l)));break;case 30:break;case 21:break;default:We(i,e),Ze(e)}}function Ze(e){var i=e.flags;if(i&2){try{for(var s,l=e.return;l!==null;){if(ag(l)){s=l;break}l=l.return}if(s==null)throw Error(a(160));switch(s.tag){case 27:var h=s.stateNode,p=iu(e);Ol(e,p,h);break;case 5:var b=s.stateNode;s.flags&32&&(ks(b,""),s.flags&=-33);var E=iu(e);Ol(e,E,b);break;case 3:case 4:var R=s.stateNode.containerInfo,F=iu(e);nu(e,F,R);break;default:throw Error(a(161))}}catch(G){Ft(e,e.return,G)}e.flags&=-3}i&4096&&(e.flags&=-4097)}function fg(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var i=e;fg(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),e=e.sibling}}function Mn(e,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)og(e,i.alternate,i),i=i.sibling}function fs(e){for(e=e.child;e!==null;){var i=e;switch(i.tag){case 0:case 11:case 14:case 15:Rn(4,i,i.return),fs(i);break;case 1:Ui(i,i.return);var s=i.stateNode;typeof s.componentWillUnmount=="function"&&ng(i,i.return,s),fs(i);break;case 27:pr(i.stateNode);case 26:case 5:Ui(i,i.return),fs(i);break;case 22:i.memoizedState===null&&fs(i);break;case 30:fs(i);break;default:fs(i)}e=e.sibling}}function Dn(e,i,s){for(s=s&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,h=e,p=i,b=p.flags;switch(p.tag){case 0:case 11:case 15:Dn(h,p,s),ar(4,p);break;case 1:if(Dn(h,p,s),l=p,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(F){Ft(l,l.return,F)}if(l=p,h=l.updateQueue,h!==null){var E=l.stateNode;try{var R=h.shared.hiddenCallbacks;if(R!==null)for(h.shared.hiddenCallbacks=null,h=0;h<R.length;h++)Bd(R[h],E)}catch(F){Ft(l,l.return,F)}}s&&b&64&&ig(p),rr(p,p.return);break;case 27:rg(p);case 26:case 5:Dn(h,p,s),s&&l===null&&b&4&&sg(p),rr(p,p.return);break;case 12:Dn(h,p,s);break;case 13:Dn(h,p,s),s&&b&4&&hg(h,p);break;case 22:p.memoizedState===null&&Dn(h,p,s),rr(p,p.return);break;case 30:break;default:Dn(h,p,s)}i=i.sibling}}function ru(e,i){var s=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),e=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(e=i.memoizedState.cachePool.pool),e!==s&&(e!=null&&e.refCount++,s!=null&&Va(s))}function lu(e,i){e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&Va(e))}function Bi(e,i,s,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)gg(e,i,s,l),i=i.sibling}function gg(e,i,s,l){var h=i.flags;switch(i.tag){case 0:case 11:case 15:Bi(e,i,s,l),h&2048&&ar(9,i);break;case 1:Bi(e,i,s,l);break;case 3:Bi(e,i,s,l),h&2048&&(e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&Va(e)));break;case 12:if(h&2048){Bi(e,i,s,l),e=i.stateNode;try{var p=i.memoizedProps,b=p.id,E=p.onPostCommit;typeof E=="function"&&E(b,i.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(R){Ft(i,i.return,R)}}else Bi(e,i,s,l);break;case 13:Bi(e,i,s,l);break;case 23:break;case 22:p=i.stateNode,b=i.alternate,i.memoizedState!==null?p._visibility&2?Bi(e,i,s,l):lr(e,i):p._visibility&2?Bi(e,i,s,l):(p._visibility|=2,Zs(e,i,s,l,(i.subtreeFlags&10256)!==0)),h&2048&&ru(b,i);break;case 24:Bi(e,i,s,l),h&2048&&lu(i.alternate,i);break;default:Bi(e,i,s,l)}}function Zs(e,i,s,l,h){for(h=h&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var p=e,b=i,E=s,R=l,F=b.flags;switch(b.tag){case 0:case 11:case 15:Zs(p,b,E,R,h),ar(8,b);break;case 23:break;case 22:var G=b.stateNode;b.memoizedState!==null?G._visibility&2?Zs(p,b,E,R,h):lr(p,b):(G._visibility|=2,Zs(p,b,E,R,h)),h&&F&2048&&ru(b.alternate,b);break;case 24:Zs(p,b,E,R,h),h&&F&2048&&lu(b.alternate,b);break;default:Zs(p,b,E,R,h)}i=i.sibling}}function lr(e,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var s=e,l=i,h=l.flags;switch(l.tag){case 22:lr(s,l),h&2048&&ru(l.alternate,l);break;case 24:lr(s,l),h&2048&&lu(l.alternate,l);break;default:lr(s,l)}i=i.sibling}}var or=8192;function Js(e){if(e.subtreeFlags&or)for(e=e.child;e!==null;)pg(e),e=e.sibling}function pg(e){switch(e.tag){case 26:Js(e),e.flags&or&&e.memoizedState!==null&&vb(Ri,e.memoizedState,e.memoizedProps);break;case 5:Js(e);break;case 3:case 4:var i=Ri;Ri=Gl(e.stateNode.containerInfo),Js(e),Ri=i;break;case 22:e.memoizedState===null&&(i=e.alternate,i!==null&&i.memoizedState!==null?(i=or,or=16777216,Js(e),or=i):Js(e));break;default:Js(e)}}function mg(e){var i=e.alternate;if(i!==null&&(e=i.child,e!==null)){i.child=null;do i=e.sibling,e.sibling=null,e=i;while(e!==null)}}function cr(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var s=0;s<i.length;s++){var l=i[s];me=l,vg(l,e)}mg(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)yg(e),e=e.sibling}function yg(e){switch(e.tag){case 0:case 11:case 15:cr(e),e.flags&2048&&Rn(9,e,e.return);break;case 3:cr(e);break;case 12:cr(e);break;case 22:var i=e.stateNode;e.memoizedState!==null&&i._visibility&2&&(e.return===null||e.return.tag!==13)?(i._visibility&=-3,Ll(e)):cr(e);break;default:cr(e)}}function Ll(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var s=0;s<i.length;s++){var l=i[s];me=l,vg(l,e)}mg(e)}for(e=e.child;e!==null;){switch(i=e,i.tag){case 0:case 11:case 15:Rn(8,i,i.return),Ll(i);break;case 22:s=i.stateNode,s._visibility&2&&(s._visibility&=-3,Ll(i));break;default:Ll(i)}e=e.sibling}}function vg(e,i){for(;me!==null;){var s=me;switch(s.tag){case 0:case 11:case 15:Rn(8,s,i);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var l=s.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Va(s.memoizedState.cache)}if(l=s.child,l!==null)l.return=s,me=l;else t:for(s=e;me!==null;){l=me;var h=l.sibling,p=l.return;if(cg(l),l===s){me=null;break t}if(h!==null){h.return=p,me=h;break t}me=p}}}var Nv={getCacheForType:function(e){var i=Te(se),s=i.data.get(e);return s===void 0&&(s=e(),i.data.set(e,s)),s}},Pv=typeof WeakMap=="function"?WeakMap:Map,Dt=0,Ht=null,Et=null,Ct=0,Ot=0,Je=null,On=!1,ta=!1,ou=!1,cn=0,Yt=0,Ln=0,gs=0,cu=0,pi=0,ea=0,ur=null,qe=null,uu=!1,hu=0,kl=1/0,Nl=null,kn=null,be=0,Nn=null,ia=null,na=0,du=0,fu=null,bg=null,hr=0,gu=null;function ti(){if((Dt&2)!==0&&Ct!==0)return Ct&-Ct;if(k.T!==null){var e=Gs;return e!==0?e:Au()}return Zn()}function _g(){pi===0&&(pi=(Ct&536870912)===0||Mt?Ee():536870912);var e=gi.current;return e!==null&&(e.flags|=32),pi}function ei(e,i,s){(e===Ht&&(Ot===2||Ot===9)||e.cancelPendingCommit!==null)&&(sa(e,0),Pn(e,Ct,pi,!1)),ri(e,s),((Dt&2)===0||e!==Ht)&&(e===Ht&&((Dt&2)===0&&(gs|=s),Yt===4&&Pn(e,Ct,pi,!1)),Ii(e))}function Ag(e,i,s){if((Dt&6)!==0)throw Error(a(327));var l=!s&&(i&124)===0&&(i&e.expiredLanes)===0||Ki(e,i),h=l?Hv(e,i):yu(e,i,!0),p=l;do{if(h===0){ta&&!l&&Pn(e,i,0,!1);break}else{if(s=e.current.alternate,p&&!jv(s)){h=yu(e,i,!1),p=!1;continue}if(h===2){if(p=i,e.errorRecoveryDisabledLanes&p)var b=0;else b=e.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){i=b;t:{var E=e;h=ur;var R=E.current.memoizedState.isDehydrated;if(R&&(sa(E,b).flags|=256),b=yu(E,b,!1),b!==2){if(ou&&!R){E.errorRecoveryDisabledLanes|=p,gs|=p,h=4;break t}p=qe,qe=h,p!==null&&(qe===null?qe=p:qe.push.apply(qe,p))}h=b}if(p=!1,h!==2)continue}}if(h===1){sa(e,0),Pn(e,i,0,!0);break}t:{switch(l=e,p=h,p){case 0:case 1:throw Error(a(345));case 4:if((i&4194048)!==i)break;case 6:Pn(l,i,pi,!On);break t;case 2:qe=null;break;case 3:case 5:break;default:throw Error(a(329))}if((i&62914560)===i&&(h=hu+300-Kt(),10<h)){if(Pn(l,i,pi,!On),fe(l,0,!0)!==0)break t;l.timeoutHandle=Qg(Sg.bind(null,l,s,qe,Nl,uu,i,pi,gs,ea,On,p,2,-0,0),h);break t}Sg(l,s,qe,Nl,uu,i,pi,gs,ea,On,p,0,-0,0)}}break}while(!0);Ii(e)}function Sg(e,i,s,l,h,p,b,E,R,F,G,K,H,z){if(e.timeoutHandle=-1,K=i.subtreeFlags,(K&8192||(K&16785408)===16785408)&&(vr={stylesheets:null,count:0,unsuspend:yb},pg(i),K=bb(),K!==null)){e.cancelPendingCommit=K(Mg.bind(null,e,i,p,s,l,h,b,E,R,G,1,H,z)),Pn(e,p,b,!F);return}Mg(e,i,p,s,l,h,b,E,R)}function jv(e){for(var i=e;;){var s=i.tag;if((s===0||s===11||s===15)&&i.flags&16384&&(s=i.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var l=0;l<s.length;l++){var h=s[l],p=h.getSnapshot;h=h.value;try{if(!$e(p(),h))return!1}catch{return!1}}if(s=i.child,i.subtreeFlags&16384&&s!==null)s.return=i,i=s;else{if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Pn(e,i,s,l){i&=~cu,i&=~gs,e.suspendedLanes|=i,e.pingedLanes&=~i,l&&(e.warmLanes|=i),l=e.expirationTimes;for(var h=i;0<h;){var p=31-Vt(h),b=1<<p;l[p]=-1,h&=~b}s!==0&&Gr(e,s,i)}function Pl(){return(Dt&6)===0?(dr(0),!1):!0}function pu(){if(Et!==null){if(Ot===0)var e=Et.return;else e=Et,tn=os=null,Lc(e),Qs=null,ir=0,e=Et;for(;e!==null;)eg(e.alternate,e),e=e.return;Et=null}}function sa(e,i){var s=e.timeoutHandle;s!==-1&&(e.timeoutHandle=-1,tb(s)),s=e.cancelPendingCommit,s!==null&&(e.cancelPendingCommit=null,s()),pu(),Ht=e,Et=s=Wi(e.current,null),Ct=i,Ot=0,Je=null,On=!1,ta=Ki(e,i),ou=!1,ea=pi=cu=gs=Ln=Yt=0,qe=ur=null,uu=!1,(i&8)!==0&&(i|=i&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=i;0<l;){var h=31-Vt(l),p=1<<h;i|=e[h],l&=~p}return cn=i,nl(),s}function Eg(e,i){_t=null,k.H=Sl,i===Ya||i===dl?(i=zd(),Ot=3):i===jd?(i=zd(),Ot=4):Ot=i===Bf?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Je=i,Et===null&&(Yt=1,Cl(e,ui(i,e.current)))}function wg(){var e=k.H;return k.H=Sl,e===null?Sl:e}function Tg(){var e=k.A;return k.A=Nv,e}function mu(){Yt=4,On||(Ct&4194048)!==Ct&&gi.current!==null||(ta=!0),(Ln&134217727)===0&&(gs&134217727)===0||Ht===null||Pn(Ht,Ct,pi,!1)}function yu(e,i,s){var l=Dt;Dt|=2;var h=wg(),p=Tg();(Ht!==e||Ct!==i)&&(Nl=null,sa(e,i)),i=!1;var b=Yt;t:do try{if(Ot!==0&&Et!==null){var E=Et,R=Je;switch(Ot){case 8:pu(),b=6;break t;case 3:case 2:case 9:case 6:gi.current===null&&(i=!0);var F=Ot;if(Ot=0,Je=null,aa(e,E,R,F),s&&ta){b=0;break t}break;default:F=Ot,Ot=0,Je=null,aa(e,E,R,F)}}Fv(),b=Yt;break}catch(G){Eg(e,G)}while(!0);return i&&e.shellSuspendCounter++,tn=os=null,Dt=l,k.H=h,k.A=p,Et===null&&(Ht=null,Ct=0,nl()),b}function Fv(){for(;Et!==null;)xg(Et)}function Hv(e,i){var s=Dt;Dt|=2;var l=wg(),h=Tg();Ht!==e||Ct!==i?(Nl=null,kl=Kt()+500,sa(e,i)):ta=Ki(e,i);t:do try{if(Ot!==0&&Et!==null){i=Et;var p=Je;e:switch(Ot){case 1:Ot=0,Je=null,aa(e,i,p,1);break;case 2:case 9:if(Fd(p)){Ot=0,Je=null,Cg(i);break}i=function(){Ot!==2&&Ot!==9||Ht!==e||(Ot=7),Ii(e)},p.then(i,i);break t;case 3:Ot=7;break t;case 4:Ot=5;break t;case 7:Fd(p)?(Ot=0,Je=null,Cg(i)):(Ot=0,Je=null,aa(e,i,p,7));break;case 5:var b=null;switch(Et.tag){case 26:b=Et.memoizedState;case 5:case 27:var E=Et;if(!b||op(b)){Ot=0,Je=null;var R=E.sibling;if(R!==null)Et=R;else{var F=E.return;F!==null?(Et=F,jl(F)):Et=null}break e}}Ot=0,Je=null,aa(e,i,p,5);break;case 6:Ot=0,Je=null,aa(e,i,p,6);break;case 8:pu(),Yt=6;break t;default:throw Error(a(462))}}zv();break}catch(G){Eg(e,G)}while(!0);return tn=os=null,k.H=l,k.A=h,Dt=s,Et!==null?0:(Ht=null,Ct=0,nl(),Yt)}function zv(){for(;Et!==null&&!ue();)xg(Et)}function xg(e){var i=Jf(e.alternate,e,cn);e.memoizedProps=e.pendingProps,i===null?jl(e):Et=i}function Cg(e){var i=e,s=i.alternate;switch(i.tag){case 15:case 0:i=Yf(s,i,i.pendingProps,i.type,void 0,Ct);break;case 11:i=Yf(s,i,i.pendingProps,i.type.render,i.ref,Ct);break;case 5:Lc(i);default:eg(s,i),i=Et=Cd(i,cn),i=Jf(s,i,cn)}e.memoizedProps=e.pendingProps,i===null?jl(e):Et=i}function aa(e,i,s,l){tn=os=null,Lc(i),Qs=null,ir=0;var h=i.return;try{if(Rv(e,h,i,s,Ct)){Yt=1,Cl(e,ui(s,e.current)),Et=null;return}}catch(p){if(h!==null)throw Et=h,p;Yt=1,Cl(e,ui(s,e.current)),Et=null;return}i.flags&32768?(Mt||l===1?e=!0:ta||(Ct&536870912)!==0?e=!1:(On=e=!0,(l===2||l===9||l===3||l===6)&&(l=gi.current,l!==null&&l.tag===13&&(l.flags|=16384))),Rg(i,e)):jl(i)}function jl(e){var i=e;do{if((i.flags&32768)!==0){Rg(i,On);return}e=i.return;var s=Dv(i.alternate,i,cn);if(s!==null){Et=s;return}if(i=i.sibling,i!==null){Et=i;return}Et=i=e}while(i!==null);Yt===0&&(Yt=5)}function Rg(e,i){do{var s=Ov(e.alternate,e);if(s!==null){s.flags&=32767,Et=s;return}if(s=e.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!i&&(e=e.sibling,e!==null)){Et=e;return}Et=e=s}while(e!==null);Yt=6,Et=null}function Mg(e,i,s,l,h,p,b,E,R){e.cancelPendingCommit=null;do Fl();while(be!==0);if((Dt&6)!==0)throw Error(a(327));if(i!==null){if(i===e.current)throw Error(a(177));if(p=i.lanes|i.childLanes,p|=lc,Wn(e,s,p,b,E,R),e===Ht&&(Et=Ht=null,Ct=0),ia=i,Nn=e,na=s,du=p,fu=h,bg=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,qv(Ke,function(){return Ng(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=k.T,k.T=null,h=P.p,P.p=2,b=Dt,Dt|=4;try{Lv(e,i,s)}finally{Dt=b,P.p=h,k.T=l}}be=1,Dg(),Og(),Lg()}}function Dg(){if(be===1){be=0;var e=Nn,i=ia,s=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||s){s=k.T,k.T=null;var l=P.p;P.p=2;var h=Dt;Dt|=4;try{dg(i,e);var p=Mu,b=yd(e.containerInfo),E=p.focusedElem,R=p.selectionRange;if(b!==E&&E&&E.ownerDocument&&md(E.ownerDocument.documentElement,E)){if(R!==null&&ic(E)){var F=R.start,G=R.end;if(G===void 0&&(G=F),"selectionStart"in E)E.selectionStart=F,E.selectionEnd=Math.min(G,E.value.length);else{var K=E.ownerDocument||document,H=K&&K.defaultView||window;if(H.getSelection){var z=H.getSelection(),ft=E.textContent.length,ut=Math.min(R.start,ft),jt=R.end===void 0?ut:Math.min(R.end,ft);!z.extend&&ut>jt&&(b=jt,jt=ut,ut=b);var L=pd(E,ut),D=pd(E,jt);if(L&&D&&(z.rangeCount!==1||z.anchorNode!==L.node||z.anchorOffset!==L.offset||z.focusNode!==D.node||z.focusOffset!==D.offset)){var j=K.createRange();j.setStart(L.node,L.offset),z.removeAllRanges(),ut>jt?(z.addRange(j),z.extend(D.node,D.offset)):(j.setEnd(D.node,D.offset),z.addRange(j))}}}}for(K=[],z=E;z=z.parentNode;)z.nodeType===1&&K.push({element:z,left:z.scrollLeft,top:z.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<K.length;E++){var V=K[E];V.element.scrollLeft=V.left,V.element.scrollTop=V.top}}$l=!!Ru,Mu=Ru=null}finally{Dt=h,P.p=l,k.T=s}}e.current=i,be=2}}function Og(){if(be===2){be=0;var e=Nn,i=ia,s=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||s){s=k.T,k.T=null;var l=P.p;P.p=2;var h=Dt;Dt|=4;try{og(e,i.alternate,i)}finally{Dt=h,P.p=l,k.T=s}}be=3}}function Lg(){if(be===4||be===3){be=0,Ti();var e=Nn,i=ia,s=na,l=bg;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?be=5:(be=0,ia=Nn=null,kg(e,e.pendingLanes));var h=e.pendingLanes;if(h===0&&(kn=null),Fi(s),i=i.stateNode,he&&typeof he.onCommitFiberRoot=="function")try{he.onCommitFiberRoot(si,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=k.T,h=P.p,P.p=2,k.T=null;try{for(var p=e.onRecoverableError,b=0;b<l.length;b++){var E=l[b];p(E.value,{componentStack:E.stack})}}finally{k.T=i,P.p=h}}(na&3)!==0&&Fl(),Ii(e),h=e.pendingLanes,(s&4194090)!==0&&(h&42)!==0?e===gu?hr++:(hr=0,gu=e):hr=0,dr(0)}}function kg(e,i){(e.pooledCacheLanes&=i)===0&&(i=e.pooledCache,i!=null&&(e.pooledCache=null,Va(i)))}function Fl(e){return Dg(),Og(),Lg(),Ng()}function Ng(){if(be!==5)return!1;var e=Nn,i=du;du=0;var s=Fi(na),l=k.T,h=P.p;try{P.p=32>s?32:s,k.T=null,s=fu,fu=null;var p=Nn,b=na;if(be=0,ia=Nn=null,na=0,(Dt&6)!==0)throw Error(a(331));var E=Dt;if(Dt|=4,yg(p.current),gg(p,p.current,b,s),Dt=E,dr(0,!1),he&&typeof he.onPostCommitFiberRoot=="function")try{he.onPostCommitFiberRoot(si,p)}catch{}return!0}finally{P.p=h,k.T=l,kg(e,i)}}function Pg(e,i,s){i=ui(s,i),i=Xc(e.stateNode,i,2),e=wn(e,i,2),e!==null&&(ri(e,2),Ii(e))}function Ft(e,i,s){if(e.tag===3)Pg(e,e,s);else for(;i!==null;){if(i.tag===3){Pg(i,e,s);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(kn===null||!kn.has(l))){e=ui(s,e),s=zf(2),l=wn(i,s,2),l!==null&&(Uf(s,l,i,e),ri(l,2),Ii(l));break}}i=i.return}}function vu(e,i,s){var l=e.pingCache;if(l===null){l=e.pingCache=new Pv;var h=new Set;l.set(i,h)}else h=l.get(i),h===void 0&&(h=new Set,l.set(i,h));h.has(s)||(ou=!0,h.add(s),e=Uv.bind(null,e,i,s),i.then(e,e))}function Uv(e,i,s){var l=e.pingCache;l!==null&&l.delete(i),e.pingedLanes|=e.suspendedLanes&s,e.warmLanes&=~s,Ht===e&&(Ct&s)===s&&(Yt===4||Yt===3&&(Ct&62914560)===Ct&&300>Kt()-hu?(Dt&2)===0&&sa(e,0):cu|=s,ea===Ct&&(ea=0)),Ii(e)}function jg(e,i){i===0&&(i=He()),e=Us(e,i),e!==null&&(ri(e,i),Ii(e))}function Bv(e){var i=e.memoizedState,s=0;i!==null&&(s=i.retryLane),jg(e,s)}function Iv(e,i){var s=0;switch(e.tag){case 13:var l=e.stateNode,h=e.memoizedState;h!==null&&(s=h.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(a(314))}l!==null&&l.delete(i),jg(e,s)}function qv(e,i){return ki(e,i)}var Hl=null,ra=null,bu=!1,zl=!1,_u=!1,ps=0;function Ii(e){e!==ra&&e.next===null&&(ra===null?Hl=ra=e:ra=ra.next=e),zl=!0,bu||(bu=!0,Vv())}function dr(e,i){if(!_u&&zl){_u=!0;do for(var s=!1,l=Hl;l!==null;){if(e!==0){var h=l.pendingLanes;if(h===0)var p=0;else{var b=l.suspendedLanes,E=l.pingedLanes;p=(1<<31-Vt(42|e)+1)-1,p&=h&~(b&~E),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(s=!0,Ug(l,p))}else p=Ct,p=fe(l,l===Ht?p:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(p&3)===0||Ki(l,p)||(s=!0,Ug(l,p));l=l.next}while(s);_u=!1}}function Gv(){Fg()}function Fg(){zl=bu=!1;var e=0;ps!==0&&(Jv()&&(e=ps),ps=0);for(var i=Kt(),s=null,l=Hl;l!==null;){var h=l.next,p=Hg(l,i);p===0?(l.next=null,s===null?Hl=h:s.next=h,h===null&&(ra=s)):(s=l,(e!==0||(p&3)!==0)&&(zl=!0)),l=h}dr(e)}function Hg(e,i){for(var s=e.suspendedLanes,l=e.pingedLanes,h=e.expirationTimes,p=e.pendingLanes&-62914561;0<p;){var b=31-Vt(p),E=1<<b,R=h[b];R===-1?((E&s)===0||(E&l)!==0)&&(h[b]=ne(E,i)):R<=i&&(e.expiredLanes|=E),p&=~E}if(i=Ht,s=Ct,s=fe(e,e===i?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,s===0||e===i&&(Ot===2||Ot===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&Oe(l),e.callbackNode=null,e.callbackPriority=0;if((s&3)===0||Ki(e,s)){if(i=s&-s,i===e.callbackPriority)return i;switch(l!==null&&Oe(l),Fi(s)){case 2:case 8:s=Yi;break;case 32:s=Ke;break;case 268435456:s=Pi;break;default:s=Ke}return l=zg.bind(null,e),s=ki(s,l),e.callbackPriority=i,e.callbackNode=s,i}return l!==null&&l!==null&&Oe(l),e.callbackPriority=2,e.callbackNode=null,2}function zg(e,i){if(be!==0&&be!==5)return e.callbackNode=null,e.callbackPriority=0,null;var s=e.callbackNode;if(Fl()&&e.callbackNode!==s)return null;var l=Ct;return l=fe(e,e===Ht?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(Ag(e,l,i),Hg(e,Kt()),e.callbackNode!=null&&e.callbackNode===s?zg.bind(null,e):null)}function Ug(e,i){if(Fl())return null;Ag(e,i,!0)}function Vv(){eb(function(){(Dt&6)!==0?ki(ie,Gv):Fg()})}function Au(){return ps===0&&(ps=Ee()),ps}function Bg(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Qr(""+e)}function Ig(e,i){var s=i.ownerDocument.createElement("input");return s.name=i.name,s.value=i.value,e.id&&s.setAttribute("form",e.id),i.parentNode.insertBefore(s,i),e=new FormData(e),s.parentNode.removeChild(s),e}function Xv(e,i,s,l,h){if(i==="submit"&&s&&s.stateNode===h){var p=Bg((h[ze]||null).action),b=l.submitter;b&&(i=(i=b[ze]||null)?Bg(i.formAction):b.getAttribute("formAction"),i!==null&&(p=i,b=null));var E=new tl("action","action",null,l,h);e.push({event:E,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(ps!==0){var R=b?Ig(h,b):new FormData(h);Bc(s,{pending:!0,data:R,method:h.method,action:p},null,R)}}else typeof p=="function"&&(E.preventDefault(),R=b?Ig(h,b):new FormData(h),Bc(s,{pending:!0,data:R,method:h.method,action:p},p,R))},currentTarget:h}]})}}for(var Su=0;Su<rc.length;Su++){var Eu=rc[Su],Yv=Eu.toLowerCase(),Kv=Eu[0].toUpperCase()+Eu.slice(1);Ci(Yv,"on"+Kv)}Ci(_d,"onAnimationEnd"),Ci(Ad,"onAnimationIteration"),Ci(Sd,"onAnimationStart"),Ci("dblclick","onDoubleClick"),Ci("focusin","onFocus"),Ci("focusout","onBlur"),Ci(hv,"onTransitionRun"),Ci(dv,"onTransitionStart"),Ci(fv,"onTransitionCancel"),Ci(Ed,"onTransitionEnd"),Ds("onMouseEnter",["mouseout","mouseover"]),Ds("onMouseLeave",["mouseout","mouseover"]),Ds("onPointerEnter",["pointerout","pointerover"]),Ds("onPointerLeave",["pointerout","pointerover"]),Jn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Jn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Jn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Jn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Jn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Jn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$v=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(fr));function qg(e,i){i=(i&4)!==0;for(var s=0;s<e.length;s++){var l=e[s],h=l.event;l=l.listeners;t:{var p=void 0;if(i)for(var b=l.length-1;0<=b;b--){var E=l[b],R=E.instance,F=E.currentTarget;if(E=E.listener,R!==p&&h.isPropagationStopped())break t;p=E,h.currentTarget=F;try{p(h)}catch(G){xl(G)}h.currentTarget=null,p=R}else for(b=0;b<l.length;b++){if(E=l[b],R=E.instance,F=E.currentTarget,E=E.listener,R!==p&&h.isPropagationStopped())break t;p=E,h.currentTarget=F;try{p(h)}catch(G){xl(G)}h.currentTarget=null,p=R}}}}function wt(e,i){var s=i[jo];s===void 0&&(s=i[jo]=new Set);var l=e+"__bubble";s.has(l)||(Gg(i,e,2,!1),s.add(l))}function wu(e,i,s){var l=0;i&&(l|=4),Gg(s,e,l,i)}var Ul="_reactListening"+Math.random().toString(36).slice(2);function Tu(e){if(!e[Ul]){e[Ul]=!0,jh.forEach(function(s){s!=="selectionchange"&&($v.has(s)||wu(s,!1,e),wu(s,!0,e))});var i=e.nodeType===9?e:e.ownerDocument;i===null||i[Ul]||(i[Ul]=!0,wu("selectionchange",!1,i))}}function Gg(e,i,s,l){switch(gp(i)){case 2:var h=Sb;break;case 8:h=Eb;break;default:h=zu}s=h.bind(null,i,s,e),h=void 0,!Yo||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),l?h!==void 0?e.addEventListener(i,s,{capture:!0,passive:h}):e.addEventListener(i,s,!0):h!==void 0?e.addEventListener(i,s,{passive:h}):e.addEventListener(i,s,!1)}function xu(e,i,s,l,h){var p=l;if((i&1)===0&&(i&2)===0&&l!==null)t:for(;;){if(l===null)return;var b=l.tag;if(b===3||b===4){var E=l.stateNode.containerInfo;if(E===h)break;if(b===4)for(b=l.return;b!==null;){var R=b.tag;if((R===3||R===4)&&b.stateNode.containerInfo===h)return;b=b.return}for(;E!==null;){if(b=Cs(E),b===null)return;if(R=b.tag,R===5||R===6||R===26||R===27){l=p=b;continue t}E=E.parentNode}}l=l.return}Qh(function(){var F=p,G=Vo(s),K=[];t:{var H=wd.get(e);if(H!==void 0){var z=tl,ft=e;switch(e){case"keypress":if(Zr(s)===0)break t;case"keydown":case"keyup":z=qy;break;case"focusin":ft="focus",z=Wo;break;case"focusout":ft="blur",z=Wo;break;case"beforeblur":case"afterblur":z=Wo;break;case"click":if(s.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":z=Jh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":z=Oy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":z=Xy;break;case _d:case Ad:case Sd:z=Ny;break;case Ed:z=Ky;break;case"scroll":case"scrollend":z=My;break;case"wheel":z=Qy;break;case"copy":case"cut":case"paste":z=jy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":z=ed;break;case"toggle":case"beforetoggle":z=Zy}var ut=(i&4)!==0,jt=!ut&&(e==="scroll"||e==="scrollend"),L=ut?H!==null?H+"Capture":null:H;ut=[];for(var D=F,j;D!==null;){var V=D;if(j=V.stateNode,V=V.tag,V!==5&&V!==26&&V!==27||j===null||L===null||(V=La(D,L),V!=null&&ut.push(gr(D,V,j))),jt)break;D=D.return}0<ut.length&&(H=new z(H,ft,null,s,G),K.push({event:H,listeners:ut}))}}if((i&7)===0){t:{if(H=e==="mouseover"||e==="pointerover",z=e==="mouseout"||e==="pointerout",H&&s!==Go&&(ft=s.relatedTarget||s.fromElement)&&(Cs(ft)||ft[xs]))break t;if((z||H)&&(H=G.window===G?G:(H=G.ownerDocument)?H.defaultView||H.parentWindow:window,z?(ft=s.relatedTarget||s.toElement,z=F,ft=ft?Cs(ft):null,ft!==null&&(jt=o(ft),ut=ft.tag,ft!==jt||ut!==5&&ut!==27&&ut!==6)&&(ft=null)):(z=null,ft=F),z!==ft)){if(ut=Jh,V="onMouseLeave",L="onMouseEnter",D="mouse",(e==="pointerout"||e==="pointerover")&&(ut=ed,V="onPointerLeave",L="onPointerEnter",D="pointer"),jt=z==null?H:Oa(z),j=ft==null?H:Oa(ft),H=new ut(V,D+"leave",z,s,G),H.target=jt,H.relatedTarget=j,V=null,Cs(G)===F&&(ut=new ut(L,D+"enter",ft,s,G),ut.target=j,ut.relatedTarget=jt,V=ut),jt=V,z&&ft)e:{for(ut=z,L=ft,D=0,j=ut;j;j=la(j))D++;for(j=0,V=L;V;V=la(V))j++;for(;0<D-j;)ut=la(ut),D--;for(;0<j-D;)L=la(L),j--;for(;D--;){if(ut===L||L!==null&&ut===L.alternate)break e;ut=la(ut),L=la(L)}ut=null}else ut=null;z!==null&&Vg(K,H,z,ut,!1),ft!==null&&jt!==null&&Vg(K,jt,ft,ut,!0)}}t:{if(H=F?Oa(F):window,z=H.nodeName&&H.nodeName.toLowerCase(),z==="select"||z==="input"&&H.type==="file")var at=cd;else if(ld(H))if(ud)at=ov;else{at=rv;var St=av}else z=H.nodeName,!z||z.toLowerCase()!=="input"||H.type!=="checkbox"&&H.type!=="radio"?F&&qo(F.elementType)&&(at=cd):at=lv;if(at&&(at=at(e,F))){od(K,at,s,G);break t}St&&St(e,H,F),e==="focusout"&&F&&H.type==="number"&&F.memoizedProps.value!=null&&Io(H,"number",H.value)}switch(St=F?Oa(F):window,e){case"focusin":(ld(St)||St.contentEditable==="true")&&(Fs=St,nc=F,Ua=null);break;case"focusout":Ua=nc=Fs=null;break;case"mousedown":sc=!0;break;case"contextmenu":case"mouseup":case"dragend":sc=!1,vd(K,s,G);break;case"selectionchange":if(uv)break;case"keydown":case"keyup":vd(K,s,G)}var rt;if(Jo)t:{switch(e){case"compositionstart":var dt="onCompositionStart";break t;case"compositionend":dt="onCompositionEnd";break t;case"compositionupdate":dt="onCompositionUpdate";break t}dt=void 0}else js?ad(e,s)&&(dt="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(dt="onCompositionStart");dt&&(id&&s.locale!=="ko"&&(js||dt!=="onCompositionStart"?dt==="onCompositionEnd"&&js&&(rt=Wh()):(_n=G,Ko="value"in _n?_n.value:_n.textContent,js=!0)),St=Bl(F,dt),0<St.length&&(dt=new td(dt,e,null,s,G),K.push({event:dt,listeners:St}),rt?dt.data=rt:(rt=rd(s),rt!==null&&(dt.data=rt)))),(rt=tv?ev(e,s):iv(e,s))&&(dt=Bl(F,"onBeforeInput"),0<dt.length&&(St=new td("onBeforeInput","beforeinput",null,s,G),K.push({event:St,listeners:dt}),St.data=rt)),Xv(K,e,F,s,G)}qg(K,i)})}function gr(e,i,s){return{instance:e,listener:i,currentTarget:s}}function Bl(e,i){for(var s=i+"Capture",l=[];e!==null;){var h=e,p=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||p===null||(h=La(e,s),h!=null&&l.unshift(gr(e,h,p)),h=La(e,i),h!=null&&l.push(gr(e,h,p))),e.tag===3)return l;e=e.return}return[]}function la(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Vg(e,i,s,l,h){for(var p=i._reactName,b=[];s!==null&&s!==l;){var E=s,R=E.alternate,F=E.stateNode;if(E=E.tag,R!==null&&R===l)break;E!==5&&E!==26&&E!==27||F===null||(R=F,h?(F=La(s,p),F!=null&&b.unshift(gr(s,F,R))):h||(F=La(s,p),F!=null&&b.push(gr(s,F,R)))),s=s.return}b.length!==0&&e.push({event:i,listeners:b})}var Qv=/\r\n?/g,Wv=/\u0000|\uFFFD/g;function Xg(e){return(typeof e=="string"?e:""+e).replace(Qv,`
`).replace(Wv,"")}function Yg(e,i){return i=Xg(i),Xg(e)===i}function Il(){}function Pt(e,i,s,l,h,p){switch(s){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||ks(e,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&ks(e,""+l);break;case"className":Yr(e,"class",l);break;case"tabIndex":Yr(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Yr(e,s,l);break;case"style":Kh(e,l,p);break;case"data":if(i!=="object"){Yr(e,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||s!=="href")){e.removeAttribute(s);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(s);break}l=Qr(""+l),e.setAttribute(s,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(s==="formAction"?(i!=="input"&&Pt(e,i,"name",h.name,h,null),Pt(e,i,"formEncType",h.formEncType,h,null),Pt(e,i,"formMethod",h.formMethod,h,null),Pt(e,i,"formTarget",h.formTarget,h,null)):(Pt(e,i,"encType",h.encType,h,null),Pt(e,i,"method",h.method,h,null),Pt(e,i,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(s);break}l=Qr(""+l),e.setAttribute(s,l);break;case"onClick":l!=null&&(e.onclick=Il);break;case"onScroll":l!=null&&wt("scroll",e);break;case"onScrollEnd":l!=null&&wt("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(a(61));if(s=l.__html,s!=null){if(h.children!=null)throw Error(a(60));e.innerHTML=s}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}s=Qr(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(s,""+l):e.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(s,""):e.removeAttribute(s);break;case"capture":case"download":l===!0?e.setAttribute(s,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(s,l):e.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(s,l):e.removeAttribute(s);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(s):e.setAttribute(s,l);break;case"popover":wt("beforetoggle",e),wt("toggle",e),Xr(e,"popover",l);break;case"xlinkActuate":$i(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":$i(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":$i(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":$i(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":$i(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":$i(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":$i(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":$i(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":$i(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Xr(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=Cy.get(s)||s,Xr(e,s,l))}}function Cu(e,i,s,l,h,p){switch(s){case"style":Kh(e,l,p);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(a(61));if(s=l.__html,s!=null){if(h.children!=null)throw Error(a(60));e.innerHTML=s}}break;case"children":typeof l=="string"?ks(e,l):(typeof l=="number"||typeof l=="bigint")&&ks(e,""+l);break;case"onScroll":l!=null&&wt("scroll",e);break;case"onScrollEnd":l!=null&&wt("scrollend",e);break;case"onClick":l!=null&&(e.onclick=Il);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Fh.hasOwnProperty(s))t:{if(s[0]==="o"&&s[1]==="n"&&(h=s.endsWith("Capture"),i=s.slice(2,h?s.length-7:void 0),p=e[ze]||null,p=p!=null?p[s]:null,typeof p=="function"&&e.removeEventListener(i,p,h),typeof l=="function")){typeof p!="function"&&p!==null&&(s in e?e[s]=null:e.hasAttribute(s)&&e.removeAttribute(s)),e.addEventListener(i,l,h);break t}s in e?e[s]=l:l===!0?e.setAttribute(s,""):Xr(e,s,l)}}}function _e(e,i,s){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":wt("error",e),wt("load",e);var l=!1,h=!1,p;for(p in s)if(s.hasOwnProperty(p)){var b=s[p];if(b!=null)switch(p){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:Pt(e,i,p,b,s,null)}}h&&Pt(e,i,"srcSet",s.srcSet,s,null),l&&Pt(e,i,"src",s.src,s,null);return;case"input":wt("invalid",e);var E=p=b=h=null,R=null,F=null;for(l in s)if(s.hasOwnProperty(l)){var G=s[l];if(G!=null)switch(l){case"name":h=G;break;case"type":b=G;break;case"checked":R=G;break;case"defaultChecked":F=G;break;case"value":p=G;break;case"defaultValue":E=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(a(137,i));break;default:Pt(e,i,l,G,s,null)}}Gh(e,p,E,R,F,b,h,!1),Kr(e);return;case"select":wt("invalid",e),l=b=p=null;for(h in s)if(s.hasOwnProperty(h)&&(E=s[h],E!=null))switch(h){case"value":p=E;break;case"defaultValue":b=E;break;case"multiple":l=E;default:Pt(e,i,h,E,s,null)}i=p,s=b,e.multiple=!!l,i!=null?Ls(e,!!l,i,!1):s!=null&&Ls(e,!!l,s,!0);return;case"textarea":wt("invalid",e),p=h=l=null;for(b in s)if(s.hasOwnProperty(b)&&(E=s[b],E!=null))switch(b){case"value":l=E;break;case"defaultValue":h=E;break;case"children":p=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(a(91));break;default:Pt(e,i,b,E,s,null)}Xh(e,l,h,p),Kr(e);return;case"option":for(R in s)if(s.hasOwnProperty(R)&&(l=s[R],l!=null))switch(R){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Pt(e,i,R,l,s,null)}return;case"dialog":wt("beforetoggle",e),wt("toggle",e),wt("cancel",e),wt("close",e);break;case"iframe":case"object":wt("load",e);break;case"video":case"audio":for(l=0;l<fr.length;l++)wt(fr[l],e);break;case"image":wt("error",e),wt("load",e);break;case"details":wt("toggle",e);break;case"embed":case"source":case"link":wt("error",e),wt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in s)if(s.hasOwnProperty(F)&&(l=s[F],l!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:Pt(e,i,F,l,s,null)}return;default:if(qo(i)){for(G in s)s.hasOwnProperty(G)&&(l=s[G],l!==void 0&&Cu(e,i,G,l,s,void 0));return}}for(E in s)s.hasOwnProperty(E)&&(l=s[E],l!=null&&Pt(e,i,E,l,s,null))}function Zv(e,i,s,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,p=null,b=null,E=null,R=null,F=null,G=null;for(z in s){var K=s[z];if(s.hasOwnProperty(z)&&K!=null)switch(z){case"checked":break;case"value":break;case"defaultValue":R=K;default:l.hasOwnProperty(z)||Pt(e,i,z,null,l,K)}}for(var H in l){var z=l[H];if(K=s[H],l.hasOwnProperty(H)&&(z!=null||K!=null))switch(H){case"type":p=z;break;case"name":h=z;break;case"checked":F=z;break;case"defaultChecked":G=z;break;case"value":b=z;break;case"defaultValue":E=z;break;case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(a(137,i));break;default:z!==K&&Pt(e,i,H,z,l,K)}}Bo(e,b,E,R,F,G,p,h);return;case"select":z=b=E=H=null;for(p in s)if(R=s[p],s.hasOwnProperty(p)&&R!=null)switch(p){case"value":break;case"multiple":z=R;default:l.hasOwnProperty(p)||Pt(e,i,p,null,l,R)}for(h in l)if(p=l[h],R=s[h],l.hasOwnProperty(h)&&(p!=null||R!=null))switch(h){case"value":H=p;break;case"defaultValue":E=p;break;case"multiple":b=p;default:p!==R&&Pt(e,i,h,p,l,R)}i=E,s=b,l=z,H!=null?Ls(e,!!s,H,!1):!!l!=!!s&&(i!=null?Ls(e,!!s,i,!0):Ls(e,!!s,s?[]:"",!1));return;case"textarea":z=H=null;for(E in s)if(h=s[E],s.hasOwnProperty(E)&&h!=null&&!l.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:Pt(e,i,E,null,l,h)}for(b in l)if(h=l[b],p=s[b],l.hasOwnProperty(b)&&(h!=null||p!=null))switch(b){case"value":H=h;break;case"defaultValue":z=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(a(91));break;default:h!==p&&Pt(e,i,b,h,l,p)}Vh(e,H,z);return;case"option":for(var ft in s)if(H=s[ft],s.hasOwnProperty(ft)&&H!=null&&!l.hasOwnProperty(ft))switch(ft){case"selected":e.selected=!1;break;default:Pt(e,i,ft,null,l,H)}for(R in l)if(H=l[R],z=s[R],l.hasOwnProperty(R)&&H!==z&&(H!=null||z!=null))switch(R){case"selected":e.selected=H&&typeof H!="function"&&typeof H!="symbol";break;default:Pt(e,i,R,H,l,z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ut in s)H=s[ut],s.hasOwnProperty(ut)&&H!=null&&!l.hasOwnProperty(ut)&&Pt(e,i,ut,null,l,H);for(F in l)if(H=l[F],z=s[F],l.hasOwnProperty(F)&&H!==z&&(H!=null||z!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(a(137,i));break;default:Pt(e,i,F,H,l,z)}return;default:if(qo(i)){for(var jt in s)H=s[jt],s.hasOwnProperty(jt)&&H!==void 0&&!l.hasOwnProperty(jt)&&Cu(e,i,jt,void 0,l,H);for(G in l)H=l[G],z=s[G],!l.hasOwnProperty(G)||H===z||H===void 0&&z===void 0||Cu(e,i,G,H,l,z);return}}for(var L in s)H=s[L],s.hasOwnProperty(L)&&H!=null&&!l.hasOwnProperty(L)&&Pt(e,i,L,null,l,H);for(K in l)H=l[K],z=s[K],!l.hasOwnProperty(K)||H===z||H==null&&z==null||Pt(e,i,K,H,l,z)}var Ru=null,Mu=null;function ql(e){return e.nodeType===9?e:e.ownerDocument}function Kg(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function $g(e,i){if(e===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&i==="foreignObject"?0:e}function Du(e,i){return e==="textarea"||e==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Ou=null;function Jv(){var e=window.event;return e&&e.type==="popstate"?e===Ou?!1:(Ou=e,!0):(Ou=null,!1)}var Qg=typeof setTimeout=="function"?setTimeout:void 0,tb=typeof clearTimeout=="function"?clearTimeout:void 0,Wg=typeof Promise=="function"?Promise:void 0,eb=typeof queueMicrotask=="function"?queueMicrotask:typeof Wg<"u"?function(e){return Wg.resolve(null).then(e).catch(ib)}:Qg;function ib(e){setTimeout(function(){throw e})}function jn(e){return e==="head"}function Zg(e,i){var s=i,l=0,h=0;do{var p=s.nextSibling;if(e.removeChild(s),p&&p.nodeType===8)if(s=p.data,s==="/$"){if(0<l&&8>l){s=l;var b=e.ownerDocument;if(s&1&&pr(b.documentElement),s&2&&pr(b.body),s&4)for(s=b.head,pr(s),b=s.firstChild;b;){var E=b.nextSibling,R=b.nodeName;b[Da]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&b.rel.toLowerCase()==="stylesheet"||s.removeChild(b),b=E}}if(h===0){e.removeChild(p),Er(i);return}h--}else s==="$"||s==="$?"||s==="$!"?h++:l=s.charCodeAt(0)-48;else l=0;s=p}while(s);Er(i)}function Lu(e){var i=e.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var s=i;switch(i=i.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":Lu(s),Fo(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}e.removeChild(s)}}function nb(e,i,s,l){for(;e.nodeType===1;){var h=s;if(e.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[Da])switch(i){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(p=e.getAttribute("rel"),p==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(p!==h.rel||e.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||e.getAttribute("title")!==(h.title==null?null:h.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(p=e.getAttribute("src"),(p!==(h.src==null?null:h.src)||e.getAttribute("type")!==(h.type==null?null:h.type)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&p&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(i==="input"&&e.type==="hidden"){var p=h.name==null?null:""+h.name;if(h.type==="hidden"&&e.getAttribute("name")===p)return e}else return e;if(e=Mi(e.nextSibling),e===null)break}return null}function sb(e,i,s){if(i==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!s||(e=Mi(e.nextSibling),e===null))return null;return e}function ku(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function ab(e,i){var s=e.ownerDocument;if(e.data!=="$?"||s.readyState==="complete")i();else{var l=function(){i(),s.removeEventListener("DOMContentLoaded",l)};s.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function Mi(e){for(;e!=null;e=e.nextSibling){var i=e.nodeType;if(i===1||i===3)break;if(i===8){if(i=e.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return e}var Nu=null;function Jg(e){e=e.previousSibling;for(var i=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(i===0)return e;i--}else s==="/$"&&i++}e=e.previousSibling}return null}function tp(e,i,s){switch(i=ql(s),e){case"html":if(e=i.documentElement,!e)throw Error(a(452));return e;case"head":if(e=i.head,!e)throw Error(a(453));return e;case"body":if(e=i.body,!e)throw Error(a(454));return e;default:throw Error(a(451))}}function pr(e){for(var i=e.attributes;i.length;)e.removeAttributeNode(i[0]);Fo(e)}var mi=new Map,ep=new Set;function Gl(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var un=P.d;P.d={f:rb,r:lb,D:ob,C:cb,L:ub,m:hb,X:fb,S:db,M:gb};function rb(){var e=un.f(),i=Pl();return e||i}function lb(e){var i=Rs(e);i!==null&&i.tag===5&&i.type==="form"?Af(i):un.r(e)}var oa=typeof document>"u"?null:document;function ip(e,i,s){var l=oa;if(l&&typeof i=="string"&&i){var h=ci(i);h='link[rel="'+e+'"][href="'+h+'"]',typeof s=="string"&&(h+='[crossorigin="'+s+'"]'),ep.has(h)||(ep.add(h),e={rel:e,crossOrigin:s,href:i},l.querySelector(h)===null&&(i=l.createElement("link"),_e(i,"link",e),ge(i),l.head.appendChild(i)))}}function ob(e){un.D(e),ip("dns-prefetch",e,null)}function cb(e,i){un.C(e,i),ip("preconnect",e,i)}function ub(e,i,s){un.L(e,i,s);var l=oa;if(l&&e&&i){var h='link[rel="preload"][as="'+ci(i)+'"]';i==="image"&&s&&s.imageSrcSet?(h+='[imagesrcset="'+ci(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(h+='[imagesizes="'+ci(s.imageSizes)+'"]')):h+='[href="'+ci(e)+'"]';var p=h;switch(i){case"style":p=ca(e);break;case"script":p=ua(e)}mi.has(p)||(e=m({rel:"preload",href:i==="image"&&s&&s.imageSrcSet?void 0:e,as:i},s),mi.set(p,e),l.querySelector(h)!==null||i==="style"&&l.querySelector(mr(p))||i==="script"&&l.querySelector(yr(p))||(i=l.createElement("link"),_e(i,"link",e),ge(i),l.head.appendChild(i)))}}function hb(e,i){un.m(e,i);var s=oa;if(s&&e){var l=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+ci(l)+'"][href="'+ci(e)+'"]',p=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=ua(e)}if(!mi.has(p)&&(e=m({rel:"modulepreload",href:e},i),mi.set(p,e),s.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(yr(p)))return}l=s.createElement("link"),_e(l,"link",e),ge(l),s.head.appendChild(l)}}}function db(e,i,s){un.S(e,i,s);var l=oa;if(l&&e){var h=Ms(l).hoistableStyles,p=ca(e);i=i||"default";var b=h.get(p);if(!b){var E={loading:0,preload:null};if(b=l.querySelector(mr(p)))E.loading=5;else{e=m({rel:"stylesheet",href:e,"data-precedence":i},s),(s=mi.get(p))&&Pu(e,s);var R=b=l.createElement("link");ge(R),_e(R,"link",e),R._p=new Promise(function(F,G){R.onload=F,R.onerror=G}),R.addEventListener("load",function(){E.loading|=1}),R.addEventListener("error",function(){E.loading|=2}),E.loading|=4,Vl(b,i,l)}b={type:"stylesheet",instance:b,count:1,state:E},h.set(p,b)}}}function fb(e,i){un.X(e,i);var s=oa;if(s&&e){var l=Ms(s).hoistableScripts,h=ua(e),p=l.get(h);p||(p=s.querySelector(yr(h)),p||(e=m({src:e,async:!0},i),(i=mi.get(h))&&ju(e,i),p=s.createElement("script"),ge(p),_e(p,"link",e),s.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},l.set(h,p))}}function gb(e,i){un.M(e,i);var s=oa;if(s&&e){var l=Ms(s).hoistableScripts,h=ua(e),p=l.get(h);p||(p=s.querySelector(yr(h)),p||(e=m({src:e,async:!0,type:"module"},i),(i=mi.get(h))&&ju(e,i),p=s.createElement("script"),ge(p),_e(p,"link",e),s.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},l.set(h,p))}}function np(e,i,s,l){var h=(h=et.current)?Gl(h):null;if(!h)throw Error(a(446));switch(e){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(i=ca(s.href),s=Ms(h).hoistableStyles,l=s.get(i),l||(l={type:"style",instance:null,count:0,state:null},s.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){e=ca(s.href);var p=Ms(h).hoistableStyles,b=p.get(e);if(b||(h=h.ownerDocument||h,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(e,b),(p=h.querySelector(mr(e)))&&!p._p&&(b.instance=p,b.state.loading=5),mi.has(e)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},mi.set(e,s),p||pb(h,e,s,b.state))),i&&l===null)throw Error(a(528,""));return b}if(i&&l!==null)throw Error(a(529,""));return null;case"script":return i=s.async,s=s.src,typeof s=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=ua(s),s=Ms(h).hoistableScripts,l=s.get(i),l||(l={type:"script",instance:null,count:0,state:null},s.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,e))}}function ca(e){return'href="'+ci(e)+'"'}function mr(e){return'link[rel="stylesheet"]['+e+"]"}function sp(e){return m({},e,{"data-precedence":e.precedence,precedence:null})}function pb(e,i,s,l){e.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=e.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),_e(i,"link",s),ge(i),e.head.appendChild(i))}function ua(e){return'[src="'+ci(e)+'"]'}function yr(e){return"script[async]"+e}function ap(e,i,s){if(i.count++,i.instance===null)switch(i.type){case"style":var l=e.querySelector('style[data-href~="'+ci(s.href)+'"]');if(l)return i.instance=l,ge(l),l;var h=m({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),ge(l),_e(l,"style",h),Vl(l,s.precedence,e),i.instance=l;case"stylesheet":h=ca(s.href);var p=e.querySelector(mr(h));if(p)return i.state.loading|=4,i.instance=p,ge(p),p;l=sp(s),(h=mi.get(h))&&Pu(l,h),p=(e.ownerDocument||e).createElement("link"),ge(p);var b=p;return b._p=new Promise(function(E,R){b.onload=E,b.onerror=R}),_e(p,"link",l),i.state.loading|=4,Vl(p,s.precedence,e),i.instance=p;case"script":return p=ua(s.src),(h=e.querySelector(yr(p)))?(i.instance=h,ge(h),h):(l=s,(h=mi.get(p))&&(l=m({},s),ju(l,h)),e=e.ownerDocument||e,h=e.createElement("script"),ge(h),_e(h,"link",l),e.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(a(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,Vl(l,s.precedence,e));return i.instance}function Vl(e,i,s){for(var l=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,p=h,b=0;b<l.length;b++){var E=l[b];if(E.dataset.precedence===i)p=E;else if(p!==h)break}p?p.parentNode.insertBefore(e,p.nextSibling):(i=s.nodeType===9?s.head:s,i.insertBefore(e,i.firstChild))}function Pu(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.title==null&&(e.title=i.title)}function ju(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.integrity==null&&(e.integrity=i.integrity)}var Xl=null;function rp(e,i,s){if(Xl===null){var l=new Map,h=Xl=new Map;h.set(s,l)}else h=Xl,l=h.get(s),l||(l=new Map,h.set(s,l));if(l.has(e))return l;for(l.set(e,null),s=s.getElementsByTagName(e),h=0;h<s.length;h++){var p=s[h];if(!(p[Da]||p[we]||e==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var b=p.getAttribute(i)||"";b=e+b;var E=l.get(b);E?E.push(p):l.set(b,[p])}}return l}function lp(e,i,s){e=e.ownerDocument||e,e.head.insertBefore(s,i==="title"?e.querySelector("head > title"):null)}function mb(e,i,s){if(s===1||i.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return e=i.disabled,typeof i.precedence=="string"&&e==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function op(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var vr=null;function yb(){}function vb(e,i,s){if(vr===null)throw Error(a(475));var l=vr;if(i.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var h=ca(s.href),p=e.querySelector(mr(h));if(p){e=p._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(l.count++,l=Yl.bind(l),e.then(l,l)),i.state.loading|=4,i.instance=p,ge(p);return}p=e.ownerDocument||e,s=sp(s),(h=mi.get(h))&&Pu(s,h),p=p.createElement("link"),ge(p);var b=p;b._p=new Promise(function(E,R){b.onload=E,b.onerror=R}),_e(p,"link",s),i.instance=p}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(i,e),(e=i.state.preload)&&(i.state.loading&3)===0&&(l.count++,i=Yl.bind(l),e.addEventListener("load",i),e.addEventListener("error",i))}}function bb(){if(vr===null)throw Error(a(475));var e=vr;return e.stylesheets&&e.count===0&&Fu(e,e.stylesheets),0<e.count?function(i){var s=setTimeout(function(){if(e.stylesheets&&Fu(e,e.stylesheets),e.unsuspend){var l=e.unsuspend;e.unsuspend=null,l()}},6e4);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(s)}}:null}function Yl(){if(this.count--,this.count===0){if(this.stylesheets)Fu(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Kl=null;function Fu(e,i){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Kl=new Map,i.forEach(_b,e),Kl=null,Yl.call(e))}function _b(e,i){if(!(i.state.loading&4)){var s=Kl.get(e);if(s)var l=s.get(null);else{s=new Map,Kl.set(e,s);for(var h=e.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<h.length;p++){var b=h[p];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(s.set(b.dataset.precedence,b),l=b)}l&&s.set(null,l)}h=i.instance,b=h.getAttribute("data-precedence"),p=s.get(b)||l,p===l&&s.set(null,h),s.set(b,h),this.count++,l=Yl.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),p?p.parentNode.insertBefore(h,p.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(h,e.firstChild)),i.state.loading|=4}}var br={$$typeof:C,Provider:null,Consumer:null,_currentValue:Y,_currentValue2:Y,_threadCount:0};function Ab(e,i,s,l,h,p,b,E){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ke(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ke(0),this.hiddenUpdates=ke(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=p,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map}function cp(e,i,s,l,h,p,b,E,R,F,G,K){return e=new Ab(e,i,s,b,E,R,F,K),i=1,p===!0&&(i|=24),p=Qe(3,null,null,i),e.current=p,p.stateNode=e,i=vc(),i.refCount++,e.pooledCache=i,i.refCount++,p.memoizedState={element:l,isDehydrated:s,cache:i},Sc(p),e}function up(e){return e?(e=Bs,e):Bs}function hp(e,i,s,l,h,p){h=up(h),l.context===null?l.context=h:l.pendingContext=h,l=En(i),l.payload={element:s},p=p===void 0?null:p,p!==null&&(l.callback=p),s=wn(e,l,i),s!==null&&(ei(s,e,i),$a(s,e,i))}function dp(e,i){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<i?s:i}}function Hu(e,i){dp(e,i),(e=e.alternate)&&dp(e,i)}function fp(e){if(e.tag===13){var i=Us(e,67108864);i!==null&&ei(i,e,67108864),Hu(e,67108864)}}var $l=!0;function Sb(e,i,s,l){var h=k.T;k.T=null;var p=P.p;try{P.p=2,zu(e,i,s,l)}finally{P.p=p,k.T=h}}function Eb(e,i,s,l){var h=k.T;k.T=null;var p=P.p;try{P.p=8,zu(e,i,s,l)}finally{P.p=p,k.T=h}}function zu(e,i,s,l){if($l){var h=Uu(l);if(h===null)xu(e,i,l,Ql,s),pp(e,l);else if(Tb(h,e,i,s,l))l.stopPropagation();else if(pp(e,l),i&4&&-1<wb.indexOf(e)){for(;h!==null;){var p=Rs(h);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var b=Se(p.pendingLanes);if(b!==0){var E=p;for(E.pendingLanes|=2,E.entangledLanes|=2;b;){var R=1<<31-Vt(b);E.entanglements[1]|=R,b&=~R}Ii(p),(Dt&6)===0&&(kl=Kt()+500,dr(0))}}break;case 13:E=Us(p,2),E!==null&&ei(E,p,2),Pl(),Hu(p,2)}if(p=Uu(l),p===null&&xu(e,i,l,Ql,s),p===h)break;h=p}h!==null&&l.stopPropagation()}else xu(e,i,l,null,s)}}function Uu(e){return e=Vo(e),Bu(e)}var Ql=null;function Bu(e){if(Ql=null,e=Cs(e),e!==null){var i=o(e);if(i===null)e=null;else{var s=i.tag;if(s===13){if(e=c(i),e!==null)return e;e=null}else if(s===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;e=null}else i!==e&&(e=null)}}return Ql=e,null}function gp(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ni()){case ie:return 2;case Yi:return 8;case Ke:case xi:return 32;case Pi:return 268435456;default:return 32}default:return 32}}var Iu=!1,Fn=null,Hn=null,zn=null,_r=new Map,Ar=new Map,Un=[],wb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function pp(e,i){switch(e){case"focusin":case"focusout":Fn=null;break;case"dragenter":case"dragleave":Hn=null;break;case"mouseover":case"mouseout":zn=null;break;case"pointerover":case"pointerout":_r.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ar.delete(i.pointerId)}}function Sr(e,i,s,l,h,p){return e===null||e.nativeEvent!==p?(e={blockedOn:i,domEventName:s,eventSystemFlags:l,nativeEvent:p,targetContainers:[h]},i!==null&&(i=Rs(i),i!==null&&fp(i)),e):(e.eventSystemFlags|=l,i=e.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),e)}function Tb(e,i,s,l,h){switch(i){case"focusin":return Fn=Sr(Fn,e,i,s,l,h),!0;case"dragenter":return Hn=Sr(Hn,e,i,s,l,h),!0;case"mouseover":return zn=Sr(zn,e,i,s,l,h),!0;case"pointerover":var p=h.pointerId;return _r.set(p,Sr(_r.get(p)||null,e,i,s,l,h)),!0;case"gotpointercapture":return p=h.pointerId,Ar.set(p,Sr(Ar.get(p)||null,e,i,s,l,h)),!0}return!1}function mp(e){var i=Cs(e.target);if(i!==null){var s=o(i);if(s!==null){if(i=s.tag,i===13){if(i=c(s),i!==null){e.blockedOn=i,Ts(e.priority,function(){if(s.tag===13){var l=ti();l=Ma(l);var h=Us(s,l);h!==null&&ei(h,s,l),Hu(s,l)}});return}}else if(i===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Wl(e){if(e.blockedOn!==null)return!1;for(var i=e.targetContainers;0<i.length;){var s=Uu(e.nativeEvent);if(s===null){s=e.nativeEvent;var l=new s.constructor(s.type,s);Go=l,s.target.dispatchEvent(l),Go=null}else return i=Rs(s),i!==null&&fp(i),e.blockedOn=s,!1;i.shift()}return!0}function yp(e,i,s){Wl(e)&&s.delete(i)}function xb(){Iu=!1,Fn!==null&&Wl(Fn)&&(Fn=null),Hn!==null&&Wl(Hn)&&(Hn=null),zn!==null&&Wl(zn)&&(zn=null),_r.forEach(yp),Ar.forEach(yp)}function Zl(e,i){e.blockedOn===i&&(e.blockedOn=null,Iu||(Iu=!0,g.unstable_scheduleCallback(g.unstable_NormalPriority,xb)))}var Jl=null;function vp(e){Jl!==e&&(Jl=e,g.unstable_scheduleCallback(g.unstable_NormalPriority,function(){Jl===e&&(Jl=null);for(var i=0;i<e.length;i+=3){var s=e[i],l=e[i+1],h=e[i+2];if(typeof l!="function"){if(Bu(l||s)===null)continue;break}var p=Rs(s);p!==null&&(e.splice(i,3),i-=3,Bc(p,{pending:!0,data:h,method:s.method,action:l},l,h))}}))}function Er(e){function i(R){return Zl(R,e)}Fn!==null&&Zl(Fn,e),Hn!==null&&Zl(Hn,e),zn!==null&&Zl(zn,e),_r.forEach(i),Ar.forEach(i);for(var s=0;s<Un.length;s++){var l=Un[s];l.blockedOn===e&&(l.blockedOn=null)}for(;0<Un.length&&(s=Un[0],s.blockedOn===null);)mp(s),s.blockedOn===null&&Un.shift();if(s=(e.ownerDocument||e).$$reactFormReplay,s!=null)for(l=0;l<s.length;l+=3){var h=s[l],p=s[l+1],b=h[ze]||null;if(typeof p=="function")b||vp(s);else if(b){var E=null;if(p&&p.hasAttribute("formAction")){if(h=p,b=p[ze]||null)E=b.formAction;else if(Bu(h)!==null)continue}else E=b.action;typeof E=="function"?s[l+1]=E:(s.splice(l,3),l-=3),vp(s)}}}function qu(e){this._internalRoot=e}to.prototype.render=qu.prototype.render=function(e){var i=this._internalRoot;if(i===null)throw Error(a(409));var s=i.current,l=ti();hp(s,l,e,i,null,null)},to.prototype.unmount=qu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var i=e.containerInfo;hp(e.current,2,null,e,null,null),Pl(),i[xs]=null}};function to(e){this._internalRoot=e}to.prototype.unstable_scheduleHydration=function(e){if(e){var i=Zn();e={blockedOn:null,target:e,priority:i};for(var s=0;s<Un.length&&i!==0&&i<Un[s].priority;s++);Un.splice(s,0,e),s===0&&mp(e)}};var bp=t.version;if(bp!=="19.1.1")throw Error(a(527,bp,"19.1.1"));P.findDOMNode=function(e){var i=e._reactInternals;if(i===void 0)throw typeof e.render=="function"?Error(a(188)):(e=Object.keys(e).join(","),Error(a(268,e)));return e=d(i),e=e!==null?f(e):null,e=e===null?null:e.stateNode,e};var Cb={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:k,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var eo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!eo.isDisabled&&eo.supportsFiber)try{si=eo.inject(Cb),he=eo}catch{}}return xr.createRoot=function(e,i){if(!r(e))throw Error(a(299));var s=!1,l="",h=Pf,p=jf,b=Ff,E=null;return i!=null&&(i.unstable_strictMode===!0&&(s=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(p=i.onCaughtError),i.onRecoverableError!==void 0&&(b=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(E=i.unstable_transitionCallbacks)),i=cp(e,1,!1,null,null,s,l,h,p,b,E,null),e[xs]=i.current,Tu(e),new qu(i)},xr.hydrateRoot=function(e,i,s){if(!r(e))throw Error(a(299));var l=!1,h="",p=Pf,b=jf,E=Ff,R=null,F=null;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onUncaughtError!==void 0&&(p=s.onUncaughtError),s.onCaughtError!==void 0&&(b=s.onCaughtError),s.onRecoverableError!==void 0&&(E=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(R=s.unstable_transitionCallbacks),s.formState!==void 0&&(F=s.formState)),i=cp(e,1,!0,i,s??null,l,h,p,b,E,R,F),i.context=up(null),s=i.current,l=ti(),l=Ma(l),h=En(l),h.callback=null,wn(s,h,l),s=l,i.current.lanes=s,ri(i,s),Ii(i),e[xs]=i.current,Tu(e),new to(i)},xr.version="19.1.1",xr}var Op;function Fb(){if(Op)return Yu.exports;Op=1;function g(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(g)}catch(t){console.error(t)}}return g(),Yu.exports=jb(),Yu.exports}var Hb=Fb();const zb=["a","an","the","and","or","but","if","while","of","at","by","for","with","about","against","between","into","through","during","before","after","above","below","to","from","up","down","in","out","on","off","over","under","again","further","then","once","here","there","when","where","why","how","all","any","both","each","few","more","most","other","some","such","no","nor","not","only","own","same","so","than","too","very","can","will","just","don","should","now","you","me","we","us","they","them","your","am","is","are","be","although","because","since","unless","though","even","whereas","while","once","provided","rather","lest","if","until","as","that","after","i","he","she","it","you","we","they","me","him","her","us","them","my","mine","your","yours","his","her","hers","its","our","ours","their","theirs","myself","yourself","himself","herself","itself","ourselves","yourselves","themselves","who","whom","whose","which","that","anyone","everyone","someone","noone","none","each","the","be","to","of","and","a","in","that","have","I","you","do","but","at","by","we","his","from","they","she","one","all","would","there","say","make","can","like","time","no","up","about","who","get","which","go","me","my","when","so","if","out","into","just","over","after","also","how","is","am","will","are","what","was","had","has","this","that","those","one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen","twenty","twenty-one","twenty-two","twenty-three","twenty-four","twenty-five","twenty-six","twenty-seven","twenty-eight","twenty-nine","thirty","thirty-one","thirty-two","thirty-three","thirty-four","thirty-five","thirty-six","thirty-seven","thirty-eight","thirty-nine","forty","forty-one","forty-two","forty-three","forty-four","forty-five","forty-six","forty-seven","forty-eight","forty-nine","fifty","fifty-one","fifty-two","fifty-three","fifty-four","fifty-five","fifty-six","fifty-seven","fifty-eight","fifty-nine","sixty","sixty-one","sixty-two","sixty-three","sixty-four","sixty-five","sixty-six","sixty-seven","sixty-eight","sixty-nine","seventy","seventy-one","seventy-two","seventy-three","seventy-four","seventy-five","seventy-six","seventy-seven","seventy-eight","seventy-nine","eighty","eighty-one","eighty-two","eighty-three","eighty-four","eighty-five","eighty-six","eighty-seven","eighty-eight","eighty-nine","ninety","ninety-one","ninety-two","ninety-three","ninety-four","ninety-five","ninety-six","ninety-seven","ninety-eight","ninety-nine"],Ub={stopwords:zb},Lp=g=>{let t;const n=new Set,a=(f,m)=>{const y=typeof f=="function"?f(t):f;if(!Object.is(y,t)){const v=t;t=m??(typeof y!="object"||y===null)?y:Object.assign({},t,y),n.forEach(_=>_(t,v))}},r=()=>t,u={setState:a,getState:r,getInitialState:()=>d,subscribe:f=>(n.add(f),()=>n.delete(f))},d=t=g(a,r,u);return u},Bb=g=>g?Lp(g):Lp,Ib=g=>g;function qb(g,t=Ib){const n=no.useSyncExternalStore(g.subscribe,no.useCallback(()=>t(g.getState()),[g,t]),no.useCallback(()=>t(g.getInitialState()),[g,t]));return no.useDebugValue(n),n}const kp=g=>{const t=Bb(g),n=a=>qb(t,a);return Object.assign(n,t),n},Gb=g=>g?kp(g):kp;var da={},Lt={};const Vb="modulepreload",Xb=function(g){return"/pdf-analyzer/"+g},Np={},so=function(t,n,a){let r=Promise.resolve();if(n&&n.length>0){let f=function(m){return Promise.all(m.map(y=>Promise.resolve(y).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};var c=f;document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),d=u?.nonce||u?.getAttribute("nonce");r=f(n.map(m=>{if(m=Xb(m),m in Np)return;Np[m]=!0;const y=m.endsWith(".css"),v=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${v}`))return;const _=document.createElement("link");if(_.rel=y?"stylesheet":Vb,y||(_.as="script"),_.crossOrigin="",_.href=m,d&&_.setAttribute("nonce",d),document.head.appendChild(_),y)return new Promise((S,A)=>{_.addEventListener("load",S),_.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${m}`)))})}))}function o(u){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=u,window.dispatchEvent(d),!d.defaultPrevented)throw u}return r.then(u=>{for(const d of u||[])d.status==="rejected"&&o(d.reason);return t().catch(o)})};var Pr={};Pr.d=(g,t)=>{for(var n in t)Pr.o(t,n)&&!Pr.o(g,n)&&Object.defineProperty(g,n,{enumerable:!0,get:t[n]})};Pr.o=(g,t)=>Object.prototype.hasOwnProperty.call(g,t);var mt=globalThis.pdfjsLib={};Pr.d(mt,{AbortException:()=>Es,AnnotationEditorLayer:()=>mn,AnnotationEditorParamsType:()=>pt,AnnotationEditorType:()=>vt,AnnotationEditorUIManager:()=>Xn,AnnotationLayer:()=>G_,AnnotationMode:()=>Vn,ColorPicker:()=>Si,DOMSVGFactory:()=>Oh,DrawLayer:()=>Me,FeatureTest:()=>je,GlobalWorkerOptions:()=>Fr,ImageKind:()=>Eo,InvalidPDFException:()=>jm,MissingPDFException:()=>Ss,OPS:()=>Oi,OutputScale:()=>ch,PDFDataRangeTransport:()=>ty,PDFDateString:()=>Hm,PDFWorker:()=>Aa,PasswordResponses:()=>Qb,PermissionFlag:()=>$b,PixelsPerInch:()=>wa,RenderingCancelledException:()=>bh,TextLayer:()=>gh,UnexpectedResponseException:()=>Oo,Util:()=>lt,VerbosityLevel:()=>Ro,XfaLayer:()=>iy,build:()=>w_,createValidAbsoluteUrl:()=>t0,fetchData:()=>ko,getDocument:()=>p_,getFilenameFromUrl:()=>c0,getPdfFilenameFromUrl:()=>u0,getXfaPageViewport:()=>h0,isDataScheme:()=>No,isPdfFile:()=>_h,noContextMenu:()=>Ei,normalizeUnicode:()=>r0,setLayerDimensions:()=>_s,shadow:()=>xt,version:()=>E_});const De=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),Pm=[1,0,0,1,0,0],rh=[.001,0,0,.001,0,0],Yb=1e7,Wu=1.35,ni={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Vn={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Kb="pdfjs_internal_editor_",vt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},pt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},$b={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Re={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Eo={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},re={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,WIDGET:20},Cr={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Ro={ERRORS:0,WARNINGS:1,INFOS:5},Oi={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},Qb={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Mo=Ro.WARNINGS;function Wb(g){Number.isInteger(g)&&(Mo=g)}function Zb(){return Mo}function Do(g){Mo>=Ro.INFOS&&console.log(`Info: ${g}`)}function At(g){Mo>=Ro.WARNINGS&&console.log(`Warning: ${g}`)}function zt(g){throw new Error(g)}function oe(g,t){g||zt(t)}function Jb(g){switch(g?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function t0(g,t=null,n=null){if(!g)return null;try{if(n&&typeof g=="string"&&(n.addDefaultProtocol&&g.startsWith("www.")&&g.match(/\./g)?.length>=2&&(g=`http://${g}`),n.tryConvertEncoding))try{g=a0(g)}catch{}const a=t?new URL(g,t):new URL(g);if(Jb(a))return a}catch{}return null}function xt(g,t,n,a=!1){return Object.defineProperty(g,t,{value:n,enumerable:!a,configurable:!0,writable:!1}),n}const Kn=function(){function t(n,a){this.message=n,this.name=a}return t.prototype=new Error,t.constructor=t,t}();class lh extends Kn{constructor(t,n){super(t,"PasswordException"),this.code=n}}class oh extends Kn{constructor(t,n){super(t,"UnknownErrorException"),this.details=n}}class jm extends Kn{constructor(t){super(t,"InvalidPDFException")}}class Ss extends Kn{constructor(t){super(t,"MissingPDFException")}}class Oo extends Kn{constructor(t,n){super(t,"UnexpectedResponseException"),this.status=n}}class e0 extends Kn{constructor(t){super(t,"FormatError")}}class Es extends Kn{constructor(t){super(t,"AbortException")}}function Fm(g){(typeof g!="object"||g?.length===void 0)&&zt("Invalid argument for bytesToString");const t=g.length,n=8192;if(t<n)return String.fromCharCode.apply(null,g);const a=[];for(let r=0;r<t;r+=n){const o=Math.min(r+n,t),c=g.subarray(r,o);a.push(String.fromCharCode.apply(null,c))}return a.join("")}function Lo(g){typeof g!="string"&&zt("Invalid argument for stringToBytes");const t=g.length,n=new Uint8Array(t);for(let a=0;a<t;++a)n[a]=g.charCodeAt(a)&255;return n}function i0(g){return String.fromCharCode(g>>24&255,g>>16&255,g>>8&255,g&255)}function yh(g){const t=Object.create(null);for(const[n,a]of g)t[n]=a;return t}function n0(){const g=new Uint8Array(4);return g[0]=1,new Uint32Array(g.buffer,0,1)[0]===1}function s0(){try{return new Function(""),!0}catch{return!1}}class je{static get isLittleEndian(){return xt(this,"isLittleEndian",n0())}static get isEvalSupported(){return xt(this,"isEvalSupported",s0())}static get isOffscreenCanvasSupported(){return xt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof navigator?.platform=="string"?xt(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof navigator?.userAgent=="string"&&navigator.userAgent.includes("Firefox")}):xt(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){return xt(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const Zu=Array.from(Array(256).keys(),g=>g.toString(16).padStart(2,"0"));class lt{static makeHexColor(t,n,a){return`#${Zu[t]}${Zu[n]}${Zu[a]}`}static scaleMinMax(t,n){let a;t[0]?(t[0]<0&&(a=n[0],n[0]=n[2],n[2]=a),n[0]*=t[0],n[2]*=t[0],t[3]<0&&(a=n[1],n[1]=n[3],n[3]=a),n[1]*=t[3],n[3]*=t[3]):(a=n[0],n[0]=n[1],n[1]=a,a=n[2],n[2]=n[3],n[3]=a,t[1]<0&&(a=n[1],n[1]=n[3],n[3]=a),n[1]*=t[1],n[3]*=t[1],t[2]<0&&(a=n[0],n[0]=n[2],n[2]=a),n[0]*=t[2],n[2]*=t[2]),n[0]+=t[4],n[1]+=t[5],n[2]+=t[4],n[3]+=t[5]}static transform(t,n){return[t[0]*n[0]+t[2]*n[1],t[1]*n[0]+t[3]*n[1],t[0]*n[2]+t[2]*n[3],t[1]*n[2]+t[3]*n[3],t[0]*n[4]+t[2]*n[5]+t[4],t[1]*n[4]+t[3]*n[5]+t[5]]}static applyTransform(t,n){const a=t[0]*n[0]+t[1]*n[2]+n[4],r=t[0]*n[1]+t[1]*n[3]+n[5];return[a,r]}static applyInverseTransform(t,n){const a=n[0]*n[3]-n[1]*n[2],r=(t[0]*n[3]-t[1]*n[2]+n[2]*n[5]-n[4]*n[3])/a,o=(-t[0]*n[1]+t[1]*n[0]+n[4]*n[1]-n[5]*n[0])/a;return[r,o]}static getAxialAlignedBoundingBox(t,n){const a=this.applyTransform(t,n),r=this.applyTransform(t.slice(2,4),n),o=this.applyTransform([t[0],t[3]],n),c=this.applyTransform([t[2],t[1]],n);return[Math.min(a[0],r[0],o[0],c[0]),Math.min(a[1],r[1],o[1],c[1]),Math.max(a[0],r[0],o[0],c[0]),Math.max(a[1],r[1],o[1],c[1])]}static inverseTransform(t){const n=t[0]*t[3]-t[1]*t[2];return[t[3]/n,-t[1]/n,-t[2]/n,t[0]/n,(t[2]*t[5]-t[4]*t[3])/n,(t[4]*t[1]-t[5]*t[0])/n]}static singularValueDecompose2dScale(t){const n=[t[0],t[2],t[1],t[3]],a=t[0]*n[0]+t[1]*n[2],r=t[0]*n[1]+t[1]*n[3],o=t[2]*n[0]+t[3]*n[2],c=t[2]*n[1]+t[3]*n[3],u=(a+c)/2,d=Math.sqrt((a+c)**2-4*(a*c-o*r))/2,f=u+d||1,m=u-d||1;return[Math.sqrt(f),Math.sqrt(m)]}static normalizeRect(t){const n=t.slice(0);return t[0]>t[2]&&(n[0]=t[2],n[2]=t[0]),t[1]>t[3]&&(n[1]=t[3],n[3]=t[1]),n}static intersect(t,n){const a=Math.max(Math.min(t[0],t[2]),Math.min(n[0],n[2])),r=Math.min(Math.max(t[0],t[2]),Math.max(n[0],n[2]));if(a>r)return null;const o=Math.max(Math.min(t[1],t[3]),Math.min(n[1],n[3])),c=Math.min(Math.max(t[1],t[3]),Math.max(n[1],n[3]));return o>c?null:[a,o,r,c]}static#t(t,n,a,r,o,c,u,d,f,m){if(f<=0||f>=1)return;const y=1-f,v=f*f,_=v*f,S=y*(y*(y*t+3*f*n)+3*v*a)+_*r,A=y*(y*(y*o+3*f*c)+3*v*u)+_*d;m[0]=Math.min(m[0],S),m[1]=Math.min(m[1],A),m[2]=Math.max(m[2],S),m[3]=Math.max(m[3],A)}static#e(t,n,a,r,o,c,u,d,f,m,y,v){if(Math.abs(f)<1e-12){Math.abs(m)>=1e-12&&this.#t(t,n,a,r,o,c,u,d,-y/m,v);return}const _=m**2-4*y*f;if(_<0)return;const S=Math.sqrt(_),A=2*f;this.#t(t,n,a,r,o,c,u,d,(-m+S)/A,v),this.#t(t,n,a,r,o,c,u,d,(-m-S)/A,v)}static bezierBoundingBox(t,n,a,r,o,c,u,d,f){return f?(f[0]=Math.min(f[0],t,u),f[1]=Math.min(f[1],n,d),f[2]=Math.max(f[2],t,u),f[3]=Math.max(f[3],n,d)):f=[Math.min(t,u),Math.min(n,d),Math.max(t,u),Math.max(n,d)],this.#e(t,a,o,u,n,r,c,d,3*(-t+3*(a-o)+u),6*(t-2*a+o),3*(a-t),f),this.#e(t,a,o,u,n,r,c,d,3*(-n+3*(r-c)+d),6*(n-2*r+c),3*(r-n),f),f}}function a0(g){return decodeURIComponent(escape(g))}let Ju=null,Pp=null;function r0(g){return Ju||(Ju=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Pp=new Map([["","t"]])),g.replaceAll(Ju,(t,n,a)=>n?n.normalize("NFKC"):Pp.get(a))}function l0(){if(typeof crypto<"u"&&typeof crypto?.randomUUID=="function")return crypto.randomUUID();const g=new Uint8Array(32);if(typeof crypto<"u"&&typeof crypto?.getRandomValues=="function")crypto.getRandomValues(g);else for(let t=0;t<32;t++)g[t]=Math.floor(Math.random()*255);return Fm(g)}const vh="pdfjs_internal_id_",hn={BEZIER_CURVE_TO:0,MOVE_TO:1,LINE_TO:2,QUADRATIC_CURVE_TO:3,RESTORE:4,SAVE:5,SCALE:6,TRANSFORM:7,TRANSLATE:8};function o0(g){return Uint8Array.prototype.toBase64?g.toBase64():btoa(Fm(g))}const pn="http://www.w3.org/2000/svg";class wa{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function ko(g,t="text"){if(Lr(g,document.baseURI)){const n=await fetch(g);if(!n.ok)throw new Error(n.statusText);switch(t){case"arraybuffer":return n.arrayBuffer();case"blob":return n.blob();case"json":return n.json()}return n.text()}return new Promise((n,a)=>{const r=new XMLHttpRequest;r.open("GET",g,!0),r.responseType=t,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(t){case"arraybuffer":case"blob":case"json":n(r.response);return}n(r.responseText);return}a(new Error(r.statusText))}},r.send(null)})}class zr{constructor({viewBox:t,scale:n,rotation:a,offsetX:r=0,offsetY:o=0,dontFlip:c=!1}){this.viewBox=t,this.scale=n,this.rotation=a,this.offsetX=r,this.offsetY=o;const u=(t[2]+t[0])/2,d=(t[3]+t[1])/2;let f,m,y,v;switch(a%=360,a<0&&(a+=360),a){case 180:f=-1,m=0,y=0,v=1;break;case 90:f=0,m=1,y=1,v=0;break;case 270:f=0,m=-1,y=-1,v=0;break;case 0:f=1,m=0,y=0,v=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}c&&(y=-y,v=-v);let _,S,A,w;f===0?(_=Math.abs(d-t[1])*n+r,S=Math.abs(u-t[0])*n+o,A=(t[3]-t[1])*n,w=(t[2]-t[0])*n):(_=Math.abs(u-t[0])*n+r,S=Math.abs(d-t[1])*n+o,A=(t[2]-t[0])*n,w=(t[3]-t[1])*n),this.transform=[f*n,m*n,y*n,v*n,_-f*n*u-y*n*d,S-m*n*u-v*n*d],this.width=A,this.height=w}get rawDims(){const{viewBox:t}=this;return xt(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:n=this.rotation,offsetX:a=this.offsetX,offsetY:r=this.offsetY,dontFlip:o=!1}={}){return new zr({viewBox:this.viewBox.slice(),scale:t,rotation:n,offsetX:a,offsetY:r,dontFlip:o})}convertToViewportPoint(t,n){return lt.applyTransform([t,n],this.transform)}convertToViewportRectangle(t){const n=lt.applyTransform([t[0],t[1]],this.transform),a=lt.applyTransform([t[2],t[3]],this.transform);return[n[0],n[1],a[0],a[1]]}convertToPdfPoint(t,n){return lt.applyInverseTransform([t,n],this.transform)}}class bh extends Kn{constructor(t,n=0){super(t,"RenderingCancelledException"),this.extraDelay=n}}function No(g){const t=g.length;let n=0;for(;n<t&&g[n].trim()==="";)n++;return g.substring(n,n+5).toLowerCase()==="data:"}function _h(g){return typeof g=="string"&&/\.pdf$/i.test(g)}function c0(g){return[g]=g.split(/[#?]/,1),g.substring(g.lastIndexOf("/")+1)}function u0(g,t="document.pdf"){if(typeof g!="string")return t;if(No(g))return At('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const n=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,a=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,r=n.exec(g);let o=a.exec(r[1])||a.exec(r[2])||a.exec(r[3]);if(o&&(o=o[0],o.includes("%")))try{o=a.exec(decodeURIComponent(o))[0]}catch{}return o||t}class jp{started=Object.create(null);times=[];time(t){t in this.started&&At(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||At(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let n=0;for(const{name:a}of this.times)n=Math.max(a.length,n);for(const{name:a,start:r,end:o}of this.times)t.push(`${a.padEnd(n)} ${o-r}ms
`);return t.join("")}}function Lr(g,t){try{const{protocol:n}=t?new URL(g,t):new URL(g);return n==="http:"||n==="https:"}catch{return!1}}function Ei(g){g.preventDefault()}function Fp(g){console.log("Deprecated API usage: "+g)}class Hm{static#t;static toDateObject(t){if(!t||typeof t!="string")return null;this.#t||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const n=this.#t.exec(t);if(!n)return null;const a=parseInt(n[1],10);let r=parseInt(n[2],10);r=r>=1&&r<=12?r-1:0;let o=parseInt(n[3],10);o=o>=1&&o<=31?o:1;let c=parseInt(n[4],10);c=c>=0&&c<=23?c:0;let u=parseInt(n[5],10);u=u>=0&&u<=59?u:0;let d=parseInt(n[6],10);d=d>=0&&d<=59?d:0;const f=n[7]||"Z";let m=parseInt(n[8],10);m=m>=0&&m<=23?m:0;let y=parseInt(n[9],10)||0;return y=y>=0&&y<=59?y:0,f==="-"?(c+=m,u+=y):f==="+"&&(c-=m,u-=y),new Date(Date.UTC(a,r,o,c,u,d))}}function h0(g,{scale:t=1,rotation:n=0}){const{width:a,height:r}=g.attributes.style,o=[0,0,parseInt(a),parseInt(r)];return new zr({viewBox:o,scale:t,rotation:n})}function Ah(g){if(g.startsWith("#")){const t=parseInt(g.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return g.startsWith("rgb(")?g.slice(4,-1).split(",").map(t=>parseInt(t)):g.startsWith("rgba(")?g.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(At(`Not a valid color format: "${g}"`),[0,0,0])}function d0(g){const t=document.createElement("span");t.style.visibility="hidden",document.body.append(t);for(const n of g.keys()){t.style.color=n;const a=window.getComputedStyle(t).color;g.set(n,Ah(a))}t.remove()}function Gt(g){const{a:t,b:n,c:a,d:r,e:o,f:c}=g.getTransform();return[t,n,a,r,o,c]}function dn(g){const{a:t,b:n,c:a,d:r,e:o,f:c}=g.getTransform().invertSelf();return[t,n,a,r,o,c]}function _s(g,t,n=!1,a=!0){if(t instanceof zr){const{pageWidth:r,pageHeight:o}=t.rawDims,{style:c}=g,u=je.isCSSRoundSupported,d=`var(--scale-factor) * ${r}px`,f=`var(--scale-factor) * ${o}px`,m=u?`round(down, ${d}, var(--scale-round-x, 1px))`:`calc(${d})`,y=u?`round(down, ${f}, var(--scale-round-y, 1px))`:`calc(${f})`;!n||t.rotation%180===0?(c.width=m,c.height=y):(c.width=y,c.height=m)}a&&g.setAttribute("data-main-rotation",t.rotation)}class ch{constructor(){const t=window.devicePixelRatio||1;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}class jr{#t=null;#e=null;#i;#s=null;#a=null;static#n=null;constructor(t){this.#i=t,jr.#n||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"})}render(){const t=this.#t=document.createElement("div");t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const n=this.#i._uiManager._signal;t.addEventListener("contextmenu",Ei,{signal:n}),t.addEventListener("pointerdown",jr.#o,{signal:n});const a=this.#s=document.createElement("div");a.className="buttons",t.append(a);const r=this.#i.toolbarPosition;if(r){const{style:o}=t,c=this.#i._uiManager.direction==="ltr"?1-r[0]:r[0];o.insetInlineEnd=`${100*c}%`,o.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return this.#h(),t}get div(){return this.#t}static#o(t){t.stopPropagation()}#c(t){this.#i._focusEventsAllowed=!1,t.preventDefault(),t.stopPropagation()}#u(t){this.#i._focusEventsAllowed=!0,t.preventDefault(),t.stopPropagation()}#l(t){const n=this.#i._uiManager._signal;t.addEventListener("focusin",this.#c.bind(this),{capture:!0,signal:n}),t.addEventListener("focusout",this.#u.bind(this),{capture:!0,signal:n}),t.addEventListener("contextmenu",Ei,{signal:n})}hide(){this.#t.classList.add("hidden"),this.#e?.hideDropdown()}show(){this.#t.classList.remove("hidden"),this.#a?.shown()}#h(){const{editorType:t,_uiManager:n}=this.#i,a=document.createElement("button");a.className="delete",a.tabIndex=0,a.setAttribute("data-l10n-id",jr.#n[t]),this.#l(a),a.addEventListener("click",r=>{n.delete()},{signal:n._signal}),this.#s.append(a)}get#r(){const t=document.createElement("div");return t.className="divider",t}async addAltText(t){const n=await t.render();this.#l(n),this.#s.prepend(n,this.#r),this.#a=t}addColorPicker(t){this.#e=t;const n=t.renderButton();this.#l(n),this.#s.prepend(n,this.#r)}remove(){this.#t.remove(),this.#e?.destroy(),this.#e=null}}class f0{#t=null;#e=null;#i;constructor(t){this.#i=t}#s(){const t=this.#e=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",Ei,{signal:this.#i._signal});const n=this.#t=document.createElement("div");return n.className="buttons",t.append(n),this.#n(),t}#a(t,n){let a=0,r=0;for(const o of t){const c=o.y+o.height;if(c<a)continue;const u=o.x+(n?o.width:0);if(c>a){r=u,a=c;continue}n?u>r&&(r=u):u<r&&(r=u)}return[n?1-r:r,a]}show(t,n,a){const[r,o]=this.#a(n,a),{style:c}=this.#e||=this.#s();t.append(this.#e),c.insetInlineEnd=`${100*r}%`,c.top=`calc(${100*o}% + var(--editor-toolbar-vert-offset))`}hide(){this.#e.remove()}#n(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const n=document.createElement("span");t.append(n),n.className="visuallyHidden",n.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const a=this.#i._signal;t.addEventListener("contextmenu",Ei,{signal:a}),t.addEventListener("click",()=>{this.#i.highlightSelection("floating_button")},{signal:a}),this.#t.append(t)}}function xo(g,t,n){for(const a of n)t.addEventListener(a,g[a].bind(g))}function g0(g){return Math.round(Math.min(255,Math.max(1,255*g))).toString(16).padStart(2,"0")}class p0{#t=0;get id(){return`${Kb}${this.#t++}`}}class Sh{#t=l0();#e=0;#i=null;static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',a=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=t;const o=r.decode().then(()=>(a.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(a.getImageData(0,0,1,1).data.buffer)[0]===0));return xt(this,"_isSVGFittingCanvas",o)}async#s(t,n){this.#i||=new Map;let a=this.#i.get(t);if(a===null)return null;if(a?.bitmap)return a.refCounter+=1,a;try{a||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let r;if(typeof n=="string"?(a.url=n,r=await ko(n,"blob")):n instanceof File?r=a.file=n:n instanceof Blob&&(r=n),r.type==="image/svg+xml"){const o=Sh._isSVGFittingCanvas,c=new FileReader,u=new Image,d=new Promise((f,m)=>{u.onload=()=>{a.bitmap=u,a.isSvg=!0,f()},c.onload=async()=>{const y=a.svgUrl=c.result;u.src=await o?`${y}#svgView(preserveAspectRatio(none))`:y},u.onerror=c.onerror=m});c.readAsDataURL(r),await d}else a.bitmap=await createImageBitmap(r);a.refCounter=1}catch(r){console.error(r),a=null}return this.#i.set(t,a),a&&this.#i.set(a.id,a),a}async getFromFile(t){const{lastModified:n,name:a,size:r,type:o}=t;return this.#s(`${n}_${a}_${r}_${o}`,t)}async getFromUrl(t){return this.#s(t,t)}async getFromBlob(t,n){const a=await n;return this.#s(t,a)}async getFromId(t){this.#i||=new Map;const n=this.#i.get(t);if(!n)return null;if(n.bitmap)return n.refCounter+=1,n;if(n.file)return this.getFromFile(n.file);if(n.blobPromise){const{blobPromise:a}=n;return delete n.blobPromise,this.getFromBlob(n.id,a)}return this.getFromUrl(n.url)}getFromCanvas(t,n){this.#i||=new Map;let a=this.#i.get(t);if(a?.bitmap)return a.refCounter+=1,a;const r=new OffscreenCanvas(n.width,n.height);return r.getContext("2d").drawImage(n,0,0),a={bitmap:r.transferToImageBitmap(),id:`image_${this.#t}_${this.#e++}`,refCounter:1,isSvg:!1},this.#i.set(t,a),this.#i.set(a.id,a),a}getSvgUrl(t){const n=this.#i.get(t);return n?.isSvg?n.svgUrl:null}deleteId(t){this.#i||=new Map;const n=this.#i.get(t);if(!n||(n.refCounter-=1,n.refCounter!==0))return;const{bitmap:a}=n;if(!n.url&&!n.file){const r=new OffscreenCanvas(a.width,a.height);r.getContext("bitmaprenderer").transferFromImageBitmap(a),n.blobPromise=r.convertToBlob()}a.close?.(),n.bitmap=null}isValidId(t){return t.startsWith(`image_${this.#t}_`)}}class m0{#t=[];#e=!1;#i;#s=-1;constructor(t=128){this.#i=t}add({cmd:t,undo:n,post:a,mustExec:r,type:o=NaN,overwriteIfSameType:c=!1,keepUndo:u=!1}){if(r&&t(),this.#e)return;const d={cmd:t,undo:n,post:a,type:o};if(this.#s===-1){this.#t.length>0&&(this.#t.length=0),this.#s=0,this.#t.push(d);return}if(c&&this.#t[this.#s].type===o){u&&(d.undo=this.#t[this.#s].undo),this.#t[this.#s]=d;return}const f=this.#s+1;f===this.#i?this.#t.splice(0,1):(this.#s=f,f<this.#t.length&&this.#t.splice(f)),this.#t.push(d)}undo(){if(this.#s===-1)return;this.#e=!0;const{undo:t,post:n}=this.#t[this.#s];t(),n?.(),this.#e=!1,this.#s-=1}redo(){if(this.#s<this.#t.length-1){this.#s+=1,this.#e=!0;const{cmd:t,post:n}=this.#t[this.#s];t(),n?.(),this.#e=!1}}hasSomethingToUndo(){return this.#s!==-1}hasSomethingToRedo(){return this.#s<this.#t.length-1}destroy(){this.#t=null}}class Ur{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:n}=je.platform;for(const[a,r,o={}]of t)for(const c of a){const u=c.startsWith("mac+");n&&u?(this.callbacks.set(c.slice(4),{callback:r,options:o}),this.allKeys.add(c.split("+").at(-1))):!n&&!u&&(this.callbacks.set(c,{callback:r,options:o}),this.allKeys.add(c.split("+").at(-1)))}}#t(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const n=this.buffer.join("+");return this.buffer.length=0,n}exec(t,n){if(!this.allKeys.has(n.key))return;const a=this.callbacks.get(this.#t(n));if(!a)return;const{callback:r,options:{bubbles:o=!1,args:c=[],checker:u=null}}=a;u&&!u(t,n)||(r.bind(t,...c,n)(),o||(n.stopPropagation(),n.preventDefault()))}}class Eh{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return d0(t),xt(this,"_colors",t)}convert(t){const n=Ah(t);if(!window.matchMedia("(forced-colors: active)").matches)return n;for(const[a,r]of this._colors)if(r.every((o,c)=>o===n[c]))return Eh._colorsMapping.get(a);return n}getHexCode(t){const n=this._colors.get(t);return n?lt.makeHexColor(...n):t}}class Xn{#t=new AbortController;#e=null;#i=new Map;#s=new Map;#a=null;#n=null;#o=null;#c=new m0;#u=null;#l=0;#h=new Set;#r=null;#d=null;#g=new Set;#f=!1;#y=!1;#m=!1;#p=null;#v=null;#_=null;#x=null;#E=!1;#w=null;#P=new p0;#C=!1;#A=!1;#T=null;#R=null;#M=null;#L=null;#S=vt.NONE;#b=new Set;#k=null;#N=null;#j=null;#I={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#z=[0,0];#F=null;#H=null;#B=null;#D=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const t=Xn.prototype,n=c=>c.#H.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&c.hasSomethingToControl(),a=(c,{target:u})=>{if(u instanceof HTMLInputElement){const{type:d}=u;return d!=="text"&&d!=="number"}return!0},r=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return xt(this,"_keyboardManager",new Ur([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:a}],[["ctrl+z","mac+meta+z"],t.undo,{checker:a}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:a}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:a}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(c,{target:u})=>!(u instanceof HTMLButtonElement)&&c.#H.contains(u)&&!c.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(c,{target:u})=>!(u instanceof HTMLButtonElement)&&c.#H.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-o,0],checker:n}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[o,0],checker:n}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-o],checker:n}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,o],checker:n}]]))}constructor(t,n,a,r,o,c,u,d,f,m,y){const v=this._signal=this.#t.signal;this.#H=t,this.#B=n,this.#a=a,this._eventBus=r,r._on("editingaction",this.onEditingAction.bind(this),{signal:v}),r._on("pagechanging",this.onPageChanging.bind(this),{signal:v}),r._on("scalechanging",this.onScaleChanging.bind(this),{signal:v}),r._on("rotationchanging",this.onRotationChanging.bind(this),{signal:v}),r._on("setpreference",this.onSetPreference.bind(this),{signal:v}),r._on("switchannotationeditorparams",_=>this.updateParams(_.type,_.value),{signal:v}),this.#tt(),this.#st(),this.#Y(),this.#n=o.annotationStorage,this.#p=o.filterFactory,this.#N=c,this.#x=u||null,this.#f=d,this.#y=f,this.#m=m,this.#L=y||null,this.viewParameters={realScale:wa.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}destroy(){this.#D?.resolve(),this.#D=null,this.#t?.abort(),this.#t=null,this._signal=null;for(const t of this.#s.values())t.destroy();this.#s.clear(),this.#i.clear(),this.#g.clear(),this.#e=null,this.#b.clear(),this.#c.destroy(),this.#a?.destroy(),this.#w?.hide(),this.#w=null,this.#v&&(clearTimeout(this.#v),this.#v=null),this.#F&&(clearTimeout(this.#F),this.#F=null)}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return this.#L}get useNewAltTextFlow(){return this.#y}get useNewAltTextWhenAddingImage(){return this.#m}get hcmFilter(){return xt(this,"hcmFilter",this.#N?this.#p.addHCMFilter(this.#N.foreground,this.#N.background):"none")}get direction(){return xt(this,"direction",getComputedStyle(this.#H).direction)}get highlightColors(){return xt(this,"highlightColors",this.#x?new Map(this.#x.split(",").map(t=>t.split("=").map(n=>n.trim()))):null)}get highlightColorNames(){return xt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setMainHighlightColorPicker(t){this.#M=t}editAltText(t,n=!1){this.#a?.editAltText(this,t,n)}switchToMode(t,n){this._eventBus.on("annotationeditormodechanged",n,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,n){this._eventBus.dispatch("setpreference",{source:this,name:t,value:n})}onSetPreference({name:t,value:n}){switch(t){case"enableNewAltTextWhenAddingImage":this.#m=n;break}}onPageChanging({pageNumber:t}){this.#l=t-1}focusMainContainer(){this.#H.focus()}findParent(t,n){for(const a of this.#s.values()){const{x:r,y:o,width:c,height:u}=a.div.getBoundingClientRect();if(t>=r&&t<=r+c&&n>=o&&n<=o+u)return a}return null}disableUserSelect(t=!1){this.#B.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#g.add(t)}removeShouldRescale(t){this.#g.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*wa.PDF_TO_CSS_UNITS;for(const n of this.#g)n.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#G({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}#X(t){const{currentLayer:n}=this;if(n.hasTextLayer(t))return n;for(const a of this.#s.values())if(a.hasTextLayer(t))return a;return null}highlightSelection(t=""){const n=document.getSelection();if(!n||n.isCollapsed)return;const{anchorNode:a,anchorOffset:r,focusNode:o,focusOffset:c}=n,u=n.toString(),f=this.#G(n).closest(".textLayer"),m=this.getSelectionBoxes(f);if(!m)return;n.empty();const y=this.#X(f),v=this.#S===vt.NONE,_=()=>{y?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:m,anchorNode:a,anchorOffset:r,focusNode:o,focusOffset:c,text:u}),v&&this.showAllEditors("highlight",!0,!0)};if(v){this.switchToMode(vt.HIGHLIGHT,_);return}_()}#Z(){const t=document.getSelection();if(!t||t.isCollapsed)return;const a=this.#G(t).closest(".textLayer"),r=this.getSelectionBoxes(a);r&&(this.#w||=new f0(this),this.#w.show(a,r,this.direction==="ltr"))}addToAnnotationStorage(t){!t.isEmpty()&&this.#n&&!this.#n.has(t.id)&&this.#n.setValue(t.id,t)}#J(){const t=document.getSelection();if(!t||t.isCollapsed){this.#k&&(this.#w?.hide(),this.#k=null,this.#O({hasSelectedText:!1}));return}const{anchorNode:n}=t;if(n===this.#k)return;const r=this.#G(t).closest(".textLayer");if(!r){this.#k&&(this.#w?.hide(),this.#k=null,this.#O({hasSelectedText:!1}));return}if(this.#w?.hide(),this.#k=n,this.#O({hasSelectedText:!0}),!(this.#S!==vt.HIGHLIGHT&&this.#S!==vt.NONE)&&(this.#S===vt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#E=this.isShiftKeyDown,!this.isShiftKeyDown)){const o=this.#S===vt.HIGHLIGHT?this.#X(r):null;o?.toggleDrawing();const c=new AbortController,u=this.combinedSignal(c),d=f=>{f.type==="pointerup"&&f.button!==0||(c.abort(),o?.toggleDrawing(!0),f.type==="pointerup"&&this.#V("main_toolbar"))};window.addEventListener("pointerup",d,{signal:u}),window.addEventListener("blur",d,{signal:u})}}#V(t=""){this.#S===vt.HIGHLIGHT?this.highlightSelection(t):this.#f&&this.#Z()}#tt(){document.addEventListener("selectionchange",this.#J.bind(this),{signal:this._signal})}#et(){if(this.#_)return;this.#_=new AbortController;const t=this.combinedSignal(this.#_);window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}#it(){this.#_?.abort(),this.#_=null}blur(){if(this.isShiftKeyDown=!1,this.#E&&(this.#E=!1,this.#V("main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const n of this.#b)if(n.div.contains(t)){this.#R=[n,t],n._focusEventsAllowed=!1;break}}focus(){if(!this.#R)return;const[t,n]=this.#R;this.#R=null,n.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),n.focus()}#Y(){if(this.#T)return;this.#T=new AbortController;const t=this.combinedSignal(this.#T);window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}#nt(){this.#T?.abort(),this.#T=null}#K(){if(this.#u)return;this.#u=new AbortController;const t=this.combinedSignal(this.#u);document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}#$(){this.#u?.abort(),this.#u=null}#st(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#Y(),this.#K()}removeEditListeners(){this.#nt(),this.#$()}dragOver(t){for(const{type:n}of t.dataTransfer.items)for(const a of this.#d)if(a.isHandlingMimeForPasting(n)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const n of t.dataTransfer.items)for(const a of this.#d)if(a.isHandlingMimeForPasting(n.type)){a.paste(n,this.currentLayer),t.preventDefault();return}}copy(t){if(t.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;const n=[];for(const a of this.#b){const r=a.serialize(!0);r&&n.push(r)}n.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(n))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:n}=t;for(const o of n.items)for(const c of this.#d)if(c.isHandlingMimeForPasting(o.type)){c.paste(o,this.currentLayer);return}let a=n.getData("application/pdfjs");if(!a)return;try{a=JSON.parse(a)}catch(o){At(`paste: "${o.message}".`);return}if(!Array.isArray(a))return;this.unselectAll();const r=this.currentLayer;try{const o=[];for(const d of a){const f=await r.deserialize(d);if(!f)return;o.push(f)}const c=()=>{for(const d of o)this.#Q(d);this.#W(o)},u=()=>{for(const d of o)d.remove()};this.addCommands({cmd:c,undo:u,mustExec:!0})}catch(o){At(`paste: "${o.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),this.#S!==vt.NONE&&!this.isEditorHandlingKeyboard&&Xn._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,this.#E&&(this.#E=!1,this.#V("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}#O(t){Object.entries(t).some(([a,r])=>this.#I[a]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#I,t)}),this.#S===vt.HIGHLIGHT&&t.hasSelectedEditor===!1&&this.#U([[pt.HIGHLIGHT_FREE,!0]]))}#U(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#et(),this.#K(),this.#O({isEditing:this.#S!==vt.NONE,isEmpty:this.#q(),hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:this.#c.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#it(),this.#$(),this.#O({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#d){this.#d=t;for(const n of this.#d)this.#U(n.defaultPropertiesToUpdate)}}getId(){return this.#P.id}get currentLayer(){return this.#s.get(this.#l)}getLayer(t){return this.#s.get(t)}get currentPageIndex(){return this.#l}addLayer(t){this.#s.set(t.pageIndex,t),this.#C?t.enable():t.disable()}removeLayer(t){this.#s.delete(t.pageIndex)}async updateMode(t,n=null,a=!1){if(this.#S!==t&&!(this.#D&&(await this.#D.promise,!this.#D))){if(this.#D=Promise.withResolvers(),this.#S=t,t===vt.NONE){this.setEditingState(!1),this.#rt(),this.#D.resolve();return}this.setEditingState(!0),await this.#at(),this.unselectAll();for(const r of this.#s.values())r.updateMode(t);if(!n){a&&this.addNewEditorFromKeyboard(),this.#D.resolve();return}for(const r of this.#i.values())r.annotationElementId===n?(this.setSelected(r),r.enterInEditMode()):r.unselect();this.#D.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t!==this.#S&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:t})}updateParams(t,n){if(this.#d){switch(t){case pt.CREATE:this.currentLayer.addNewEditor();return;case pt.HIGHLIGHT_DEFAULT_COLOR:this.#M?.updateColor(n);break;case pt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#j||=new Map).set(t,n),this.showAllEditors("highlight",n);break}for(const a of this.#b)a.updateParams(t,n);for(const a of this.#d)a.updateDefaultParams(t,n)}}showAllEditors(t,n,a=!1){for(const o of this.#i.values())o.editorType===t&&o.show(n);(this.#j?.get(pt.HIGHLIGHT_SHOW_ALL)??!0)!==n&&this.#U([[pt.HIGHLIGHT_SHOW_ALL,n]])}enableWaiting(t=!1){if(this.#A!==t){this.#A=t;for(const n of this.#s.values())t?n.disableClick():n.enableClick(),n.div.classList.toggle("waiting",t)}}async#at(){if(!this.#C){this.#C=!0;const t=[];for(const n of this.#s.values())t.push(n.enable());await Promise.all(t);for(const n of this.#i.values())n.enable()}}#rt(){if(this.unselectAll(),this.#C){this.#C=!1;for(const t of this.#s.values())t.disable();for(const t of this.#i.values())t.disable()}}getEditors(t){const n=[];for(const a of this.#i.values())a.pageIndex===t&&n.push(a);return n}getEditor(t){return this.#i.get(t)}addEditor(t){this.#i.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#v&&clearTimeout(this.#v),this.#v=setTimeout(()=>{this.focusMainContainer(),this.#v=null},0)),this.#i.delete(t.id),this.unselect(t),(!t.annotationElementId||!this.#h.has(t.annotationElementId))&&this.#n?.remove(t.id)}addDeletedAnnotationElement(t){this.#h.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#h.has(t)}removeDeletedAnnotationElement(t){this.#h.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#Q(t){const n=this.#s.get(t.pageIndex);n?n.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#e!==t&&(this.#e=t,t&&this.#U(t.propertiesToUpdate))}get#lt(){let t=null;for(t of this.#b);return t}updateUI(t){this.#lt===t&&this.#U(t.propertiesToUpdate)}toggleSelected(t){if(this.#b.has(t)){this.#b.delete(t),t.unselect(),this.#O({hasSelectedEditor:this.hasSelection});return}this.#b.add(t),t.select(),this.#U(t.propertiesToUpdate),this.#O({hasSelectedEditor:!0})}setSelected(t){for(const n of this.#b)n!==t&&n.unselect();this.#b.clear(),this.#b.add(t),t.select(),this.#U(t.propertiesToUpdate),this.#O({hasSelectedEditor:!0})}isSelected(t){return this.#b.has(t)}get firstSelectedEditor(){return this.#b.values().next().value}unselect(t){t.unselect(),this.#b.delete(t),this.#O({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#b.size!==0}get isEnterHandled(){return this.#b.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#c.undo(),this.#O({hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#q()})}redo(){this.#c.redo(),this.#O({hasSomethingToUndo:!0,hasSomethingToRedo:this.#c.hasSomethingToRedo(),isEmpty:this.#q()})}addCommands(t){this.#c.add(t),this.#O({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#q()})}#q(){if(this.#i.size===0)return!0;if(this.#i.size===1)for(const t of this.#i.values())return t.isEmpty();return!1}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const t=[...this.#b],n=()=>{for(const r of t)r.remove()},a=()=>{for(const r of t)this.#Q(r)};this.addCommands({cmd:n,undo:a,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#W(t){for(const n of this.#b)n.unselect();this.#b.clear();for(const n of t)n.isEmpty()||(this.#b.add(n),n.select());this.#O({hasSelectedEditor:this.hasSelection})}selectAll(){for(const t of this.#b)t.commit();this.#W(this.#i.values())}unselectAll(){if(!(this.#e&&(this.#e.commitOrRemove(),this.#S!==vt.NONE))&&this.hasSelection){for(const t of this.#b)t.unselect();this.#b.clear(),this.#O({hasSelectedEditor:!1})}}translateSelectedEditors(t,n,a=!1){if(a||this.commitOrRemove(),!this.hasSelection)return;this.#z[0]+=t,this.#z[1]+=n;const[r,o]=this.#z,c=[...this.#b],u=1e3;this.#F&&clearTimeout(this.#F),this.#F=setTimeout(()=>{this.#F=null,this.#z[0]=this.#z[1]=0,this.addCommands({cmd:()=>{for(const d of c)this.#i.has(d.id)&&d.translateInPage(r,o)},undo:()=>{for(const d of c)this.#i.has(d.id)&&d.translateInPage(-r,-o)},mustExec:!1})},u);for(const d of c)d.translateInPage(t,n)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#r=new Map;for(const t of this.#b)this.#r.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#r)return!1;this.disableUserSelect(!1);const t=this.#r;this.#r=null;let n=!1;for(const[{x:r,y:o,pageIndex:c},u]of t)u.newX=r,u.newY=o,u.newPageIndex=c,n||=r!==u.savedX||o!==u.savedY||c!==u.savedPageIndex;if(!n)return!1;const a=(r,o,c,u)=>{if(this.#i.has(r.id)){const d=this.#s.get(u);d?r._setParentAndPosition(d,o,c):(r.pageIndex=u,r.x=o,r.y=c)}};return this.addCommands({cmd:()=>{for(const[r,{newX:o,newY:c,newPageIndex:u}]of t)a(r,o,c,u)},undo:()=>{for(const[r,{savedX:o,savedY:c,savedPageIndex:u}]of t)a(r,o,c,u)},mustExec:!0}),!0}dragSelectedEditors(t,n){if(this.#r)for(const a of this.#r.keys())a.drag(t,n)}rebuild(t){if(t.parent===null){const n=this.getLayer(t.pageIndex);n?(n.changeParent(t),n.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#b.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#e===t}getActive(){return this.#e}getMode(){return this.#S}get imageManager(){return xt(this,"imageManager",new Sh)}getSelectionBoxes(t){if(!t)return null;const n=document.getSelection();for(let f=0,m=n.rangeCount;f<m;f++)if(!t.contains(n.getRangeAt(f).commonAncestorContainer))return null;const{x:a,y:r,width:o,height:c}=t.getBoundingClientRect();let u;switch(t.getAttribute("data-main-rotation")){case"90":u=(f,m,y,v)=>({x:(m-r)/c,y:1-(f+y-a)/o,width:v/c,height:y/o});break;case"180":u=(f,m,y,v)=>({x:1-(f+y-a)/o,y:1-(m+v-r)/c,width:y/o,height:v/c});break;case"270":u=(f,m,y,v)=>({x:1-(m+v-r)/c,y:(f-a)/o,width:v/c,height:y/o});break;default:u=(f,m,y,v)=>({x:(f-a)/o,y:(m-r)/c,width:y/o,height:v/c});break}const d=[];for(let f=0,m=n.rangeCount;f<m;f++){const y=n.getRangeAt(f);if(!y.collapsed)for(const{x:v,y:_,width:S,height:A}of y.getClientRects())S===0||A===0||d.push(u(v,_,S,A))}return d.length===0?null:d}addChangedExistingAnnotation({annotationElementId:t,id:n}){(this.#o||=new Map).set(t,n)}removeChangedExistingAnnotation({annotationElementId:t}){this.#o?.delete(t)}renderAnnotationElement(t){const n=this.#o?.get(t.data.id);if(!n)return;const a=this.#n.getRawValue(n);a&&(this.#S===vt.NONE&&!a.hasBeenModified||a.renderAnnotationElement(t))}}class Vi{#t=null;#e=!1;#i=null;#s=null;#a=null;#n=null;#o=!1;#c=null;#u=null;#l=null;#h=null;#r=!1;static#d=null;static _l10n=null;constructor(t){this.#u=t,this.#r=t._uiManager.useNewAltTextFlow,Vi.#d||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(t){Vi._l10n??=t}async render(){const t=this.#i=document.createElement("button");t.className="altText",t.tabIndex="0";const n=this.#s=document.createElement("span");t.append(n),this.#r?(t.classList.add("new"),t.setAttribute("data-l10n-id",Vi.#d.missing),n.setAttribute("data-l10n-id",Vi.#d["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),n.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const a=this.#u._uiManager._signal;t.addEventListener("contextmenu",Ei,{signal:a}),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:a});const r=o=>{o.preventDefault(),this.#u._uiManager.editAltText(this.#u),this.#r&&this.#u._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#g}})};return t.addEventListener("click",r,{capture:!0,signal:a}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(this.#o=!0,r(o))},{signal:a}),await this.#f(),t}get#g(){return this.#t&&"added"||this.#t===null&&this.guessedText&&"review"||"missing"}finish(){this.#i&&(this.#i.focus({focusVisible:this.#o}),this.#o=!1)}isEmpty(){return this.#r?this.#t===null:!this.#t&&!this.#e}hasData(){return this.#r?this.#t!==null||!!this.#l:this.isEmpty()}get guessedText(){return this.#l}async setGuessedText(t){this.#t===null&&(this.#l=t,this.#h=await Vi._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t}),this.#f())}toggleAltTextBadge(t=!1){if(!this.#r||this.#t){this.#c?.remove(),this.#c=null;return}if(!this.#c){const n=this.#c=document.createElement("div");n.className="noAltTextBadge",this.#u.div.append(n)}this.#c.classList.toggle("hidden",!t)}serialize(t){let n=this.#t;return!t&&this.#l===n&&(n=this.#h),{altText:n,decorative:this.#e,guessedText:this.#l,textWithDisclaimer:this.#h}}get data(){return{altText:this.#t,decorative:this.#e}}set data({altText:t,decorative:n,guessedText:a,textWithDisclaimer:r,cancel:o=!1}){a&&(this.#l=a,this.#h=r),!(this.#t===t&&this.#e===n)&&(o||(this.#t=t,this.#e=n),this.#f())}toggle(t=!1){this.#i&&(!t&&this.#n&&(clearTimeout(this.#n),this.#n=null),this.#i.disabled=!t)}shown(){this.#u._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#g}})}destroy(){this.#i?.remove(),this.#i=null,this.#s=null,this.#a=null,this.#c?.remove(),this.#c=null}async#f(){const t=this.#i;if(!t)return;if(this.#r){if(t.classList.toggle("done",!!this.#t),t.setAttribute("data-l10n-id",Vi.#d[this.#g]),this.#s?.setAttribute("data-l10n-id",Vi.#d[`${this.#g}-label`]),!this.#t){this.#a?.remove();return}}else{if(!this.#t&&!this.#e){t.classList.remove("done"),this.#a?.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let n=this.#a;if(!n){this.#a=n=document.createElement("span"),n.className="tooltip",n.setAttribute("role","tooltip"),n.id=`alt-text-tooltip-${this.#u.id}`;const r=100,o=this.#u._uiManager._signal;o.addEventListener("abort",()=>{clearTimeout(this.#n),this.#n=null},{once:!0}),t.addEventListener("mouseenter",()=>{this.#n=setTimeout(()=>{this.#n=null,this.#a.classList.add("show"),this.#u._reportTelemetry({action:"alt_text_tooltip"})},r)},{signal:o}),t.addEventListener("mouseleave",()=>{this.#n&&(clearTimeout(this.#n),this.#n=null),this.#a?.classList.remove("show")},{signal:o})}this.#e?n.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(n.removeAttribute("data-l10n-id"),n.textContent=this.#t),n.parentNode||t.append(n),this.#u.getImageForAltText()?.setAttribute("aria-describedby",n.id)}}class gt{#t=null;#e=null;#i=null;#s=!1;#a=!1;#n=null;#o=null;#c=null;#u="";#l=!1;#h=null;#r=!1;#d=!1;#g=!1;#f=null;#y=0;#m=0;#p=null;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#v=!1;#_=gt._zIndex++;static _borderLineWidth=-1;static _colorManager=new Eh;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const t=gt.prototype._resizeWithKeyboard,n=Xn.TRANSLATE_SMALL,a=Xn.TRANSLATE_BIG;return xt(this,"_resizerKeyboardManager",new Ur([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-n,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-a,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[n,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[a,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-n]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-a]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,n]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,a]}],[["Escape","mac+Escape"],gt.prototype._stopResizingWithKeyboard]]))}constructor(t){this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null;const{rotation:n,rawDims:{pageWidth:a,pageHeight:r,pageX:o,pageY:c}}=this.parent.viewport;this.rotation=n,this.pageRotation=(360+n-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[a,r],this.pageTranslation=[o,c];const[u,d]=this.parentDimensions;this.x=t.x/u,this.y=t.y/d,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return xt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const n=new y0({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});n.annotationElementId=t.annotationElementId,n.deleted=!0,n._uiManager.addToAnnotationStorage(n)}static initialize(t,n){if(gt._l10n??=t,gt._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),gt._borderLineWidth!==-1)return;const a=getComputedStyle(document.documentElement);gt._borderLineWidth=parseFloat(a.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,n){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,n){zt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#v}set _isDraggable(t){this.#v=t,this.div?.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,n]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*n/(t*2),this.y+=this.width*t/(n*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*n/(t*2),this.y-=this.width*t/(n*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#_}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):this.#j(),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#l?this.#l=!1:this.parent.setSelected(this))}focusout(t){!this._focusEventsAllowed||!this.isAttachedToDOM||t.relatedTarget?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,n,a,r){const[o,c]=this.parentDimensions;[a,r]=this.screenToPageTranslation(a,r),this.x=(t+a)/o,this.y=(n+r)/c,this.fixAndSetPosition()}#x([t,n],a,r){[a,r]=this.screenToPageTranslation(a,r),this.x+=a/t,this.y+=r/n,this.fixAndSetPosition()}translate(t,n){this.#x(this.parentDimensions,t,n)}translateInPage(t,n){this.#h||=[this.x,this.y],this.#x(this.pageDimensions,t,n),this.div.scrollIntoView({block:"nearest"})}drag(t,n){this.#h||=[this.x,this.y];const[a,r]=this.parentDimensions;if(this.x+=t/a,this.y+=n/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:f,y:m}=this.div.getBoundingClientRect();this.parent.findNewParent(this,f,m)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:c}=this;const[u,d]=this.getBaseTranslation();o+=u,c+=d,this.div.style.left=`${(100*o).toFixed(2)}%`,this.div.style.top=`${(100*c).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!this.#h&&(this.#h[0]!==this.x||this.#h[1]!==this.y)}getBaseTranslation(){const[t,n]=this.parentDimensions,{_borderLineWidth:a}=gt,r=a/t,o=a/n;switch(this.rotation){case 90:return[-r,o];case 180:return[r,o];case 270:return[r,-o];default:return[-r,-o]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const[n,a]=this.pageDimensions;let{x:r,y:o,width:c,height:u}=this;if(c*=n,u*=a,r*=n,o*=a,this._mustFixPosition)switch(t){case 0:r=Math.max(0,Math.min(n-c,r)),o=Math.max(0,Math.min(a-u,o));break;case 90:r=Math.max(0,Math.min(n-u,r)),o=Math.min(a,Math.max(c,o));break;case 180:r=Math.min(n,Math.max(c,r)),o=Math.min(a,Math.max(u,o));break;case 270:r=Math.min(n,Math.max(u,r)),o=Math.max(0,Math.min(a-c,o));break}this.x=r/=n,this.y=o/=a;const[d,f]=this.getBaseTranslation();r+=d,o+=f;const{style:m}=this.div;m.left=`${(100*r).toFixed(2)}%`,m.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}static#E(t,n,a){switch(a){case 90:return[n,-t];case 180:return[-t,-n];case 270:return[-n,t];default:return[t,n]}}screenToPageTranslation(t,n){return gt.#E(t,n,this.parentRotation)}pageTranslationToScreen(t,n){return gt.#E(t,n,360-this.parentRotation)}#w(t){switch(t){case 90:{const[n,a]=this.pageDimensions;return[0,-n/a,a/n,0]}case 180:return[-1,0,0,-1];case 270:{const[n,a]=this.pageDimensions;return[0,n/a,-a/n,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[n,a]}=this;return[n*t,a*t]}setDims(t,n){const[a,r]=this.parentDimensions;this.div.style.width=`${(100*t/a).toFixed(2)}%`,this.#a||(this.div.style.height=`${(100*n/r).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:n,width:a}=t,r=a.endsWith("%"),o=!this.#a&&n.endsWith("%");if(r&&o)return;const[c,u]=this.parentDimensions;r||(t.width=`${(100*parseFloat(a)/c).toFixed(2)}%`),!this.#a&&!o&&(t.height=`${(100*parseFloat(n)/u).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#P(){if(this.#n)return;this.#n=document.createElement("div"),this.#n.classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],n=this._uiManager._signal;for(const a of t){const r=document.createElement("div");this.#n.append(r),r.classList.add("resizer",a),r.setAttribute("data-resizer-name",a),r.addEventListener("pointerdown",this.#C.bind(this,a),{signal:n}),r.addEventListener("contextmenu",Ei,{signal:n}),r.tabIndex=-1}this.div.prepend(this.#n)}#C(t,n){n.preventDefault();const{isMac:a}=je.platform;if(n.button!==0||n.ctrlKey&&a)return;this.#i?.toggle(!1);const r=this._isDraggable;this._isDraggable=!1;const o=new AbortController,c=this._uiManager.combinedSignal(o);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#T.bind(this,t),{passive:!0,capture:!0,signal:c}),window.addEventListener("contextmenu",Ei,{signal:c});const u=this.x,d=this.y,f=this.width,m=this.height,y=this.parent.div.style.cursor,v=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(n.target).cursor;const _=()=>{o.abort(),this.parent.togglePointerEvents(!0),this.#i?.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=y,this.div.style.cursor=v,this.#A(u,d,f,m)};window.addEventListener("pointerup",_,{signal:c}),window.addEventListener("blur",_,{signal:c})}#A(t,n,a,r){const o=this.x,c=this.y,u=this.width,d=this.height;o===t&&c===n&&u===a&&d===r||this.addCommands({cmd:()=>{this.width=u,this.height=d,this.x=o,this.y=c;const[f,m]=this.parentDimensions;this.setDims(f*u,m*d),this.fixAndSetPosition()},undo:()=>{this.width=a,this.height=r,this.x=t,this.y=n;const[f,m]=this.parentDimensions;this.setDims(f*a,m*r),this.fixAndSetPosition()},mustExec:!0})}#T(t,n){const[a,r]=this.parentDimensions,o=this.x,c=this.y,u=this.width,d=this.height,f=gt.MIN_SIZE/a,m=gt.MIN_SIZE/r,y=P=>Math.round(P*1e4)/1e4,v=this.#w(this.rotation),_=(P,Y)=>[v[0]*P+v[2]*Y,v[1]*P+v[3]*Y],S=this.#w(360-this.rotation),A=(P,Y)=>[S[0]*P+S[2]*Y,S[1]*P+S[3]*Y];let w,T,M=!1,C=!1;switch(t){case"topLeft":M=!0,w=(P,Y)=>[0,0],T=(P,Y)=>[P,Y];break;case"topMiddle":w=(P,Y)=>[P/2,0],T=(P,Y)=>[P/2,Y];break;case"topRight":M=!0,w=(P,Y)=>[P,0],T=(P,Y)=>[0,Y];break;case"middleRight":C=!0,w=(P,Y)=>[P,Y/2],T=(P,Y)=>[0,Y/2];break;case"bottomRight":M=!0,w=(P,Y)=>[P,Y],T=(P,Y)=>[0,0];break;case"bottomMiddle":w=(P,Y)=>[P/2,Y],T=(P,Y)=>[P/2,0];break;case"bottomLeft":M=!0,w=(P,Y)=>[0,Y],T=(P,Y)=>[P,0];break;case"middleLeft":C=!0,w=(P,Y)=>[0,Y/2],T=(P,Y)=>[P,Y/2];break}const O=w(u,d),N=T(u,d);let U=_(...N);const q=y(o+U[0]),Q=y(c+U[1]);let B=1,Z=1,[$,J]=this.screenToPageTranslation(n.movementX,n.movementY);if([$,J]=A($/a,J/r),M){const P=Math.hypot(u,d);B=Z=Math.max(Math.min(Math.hypot(N[0]-O[0]-$,N[1]-O[1]-J)/P,1/u,1/d),f/u,m/d)}else C?B=Math.max(f,Math.min(1,Math.abs(N[0]-O[0]-$)))/u:Z=Math.max(m,Math.min(1,Math.abs(N[1]-O[1]-J)))/d;const it=y(u*B),ht=y(d*Z);U=_(...T(it,ht));const st=q-U[0],k=Q-U[1];this.width=it,this.height=ht,this.x=st,this.y=k,this.setDims(a*it,r*ht),this.fixAndSetPosition()}altTextFinish(){this.#i?.finish()}async addEditToolbar(){return this._editToolbar||this.#d?this._editToolbar:(this._editToolbar=new jr(this),this.div.append(this._editToolbar.render()),this.#i&&await this._editToolbar.addAltText(this.#i),this._editToolbar)}removeEditToolbar(){this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,this.#i?.destroy())}addContainer(t){const n=this._editToolbar?.div;n?n.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){this.#i||(Vi.initialize(gt._l10n),this.#i=new Vi(this),this.#t&&(this.#i.data=this.#t,this.#t=null),await this.addEditToolbar())}get altTextData(){return this.#i?.data}set altTextData(t){this.#i&&(this.#i.data=t)}get guessedAltText(){return this.#i?.guessedText}async setGuessedAltText(t){await this.#i?.setGuessedText(t)}serializeAltText(t){return this.#i?.serialize(t)}hasAltText(){return!!this.#i&&!this.#i.isEmpty()}hasAltTextData(){return this.#i?.hasData()??!1}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=this.#s?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),this.#L();const[t,n]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*n/t).toFixed(2)}%`,this.div.style.maxHeight=`${(100*t/n).toFixed(2)}%`);const[a,r]=this.getInitialTranslation();return this.translate(a,r),xo(this,this.div,["pointerdown"]),this.div}pointerdown(t){const{isMac:n}=je.platform;if(t.button!==0||t.ctrlKey&&n){t.preventDefault();return}if(this.#l=!0,this._isDraggable){this.#M(t);return}this.#R(t)}get isSelected(){return this._uiManager.isSelected(this)}#R(t){const{isMac:n}=je.platform;t.ctrlKey&&!n||t.shiftKey||t.metaKey&&n?this.parent.toggleSelected(this):this.parent.setSelected(this)}#M(t){const{isSelected:n}=this;this._uiManager.setUpDragSession();const a=new AbortController,r=this._uiManager.combinedSignal(a);if(n){this.div.classList.add("moving"),this.#y=t.clientX,this.#m=t.clientY;const c=u=>{const{clientX:d,clientY:f}=u,[m,y]=this.screenToPageTranslation(d-this.#y,f-this.#m);this.#y=d,this.#m=f,this._uiManager.dragSelectedEditors(m,y)};window.addEventListener("pointermove",c,{passive:!0,capture:!0,signal:r})}const o=()=>{a.abort(),n&&this.div.classList.remove("moving"),this.#l=!1,this._uiManager.endDragSession()||this.#R(t)};window.addEventListener("pointerup",o,{signal:r}),window.addEventListener("blur",o,{signal:r})}moveInDOM(){this.#f&&clearTimeout(this.#f),this.#f=setTimeout(()=>{this.#f=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(t,n,a){t.changeParent(this),this.x=n,this.y=a,this.fixAndSetPosition()}getRect(t,n,a=this.rotation){const r=this.parentScale,[o,c]=this.pageDimensions,[u,d]=this.pageTranslation,f=t/r,m=n/r,y=this.x*o,v=this.y*c,_=this.width*o,S=this.height*c;switch(a){case 0:return[y+f+u,c-v-m-S+d,y+f+_+u,c-v-m+d];case 90:return[y+m+u,c-v+f+d,y+m+S+u,c-v+f+_+d];case 180:return[y-f-_+u,c-v+m+d,y-f+u,c-v+m+S+d];case 270:return[y-m-S+u,c-v-f-_+d,y-m+u,c-v-f+d];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,n){const[a,r,o,c]=t,u=o-a,d=c-r;switch(this.rotation){case 0:return[a,n-c,u,d];case 90:return[a,n-r,d,u];case 180:return[o,n-r,u,d];case 270:return[o,n-c,d,u];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){this.#d=!0}disableEditMode(){this.#d=!1}isInEditMode(){return this.#d}shouldGetKeyboardEvents(){return this.#g}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}#L(){if(this.#c||!this.div)return;this.#c=new AbortController;const t=this._uiManager.combinedSignal(this.#c);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})}rebuild(){this.#L()}rotate(t){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(t=!1,n=null){zt("An editor must be serializable")}static async deserialize(t,n,a){const r=new this.prototype.constructor({parent:n,id:n.getNextId(),uiManager:a});r.rotation=t.rotation,r.#t=t.accessibilityData;const[o,c]=r.pageDimensions,[u,d,f,m]=r.getRectInCurrentCoords(t.rect,c);return r.x=u/o,r.y=d/c,r.width=f/o,r.height=m/c,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#c?.abort(),this.#c=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#f&&(clearTimeout(this.#f),this.#f=null),this.#j(),this.removeEditToolbar(),this.#p){for(const t of this.#p.values())clearTimeout(t);this.#p=null}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#P(),this.#n.classList.remove("hidden"),xo(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),this.#o={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const n=this.#n.children;if(!this.#e){this.#e=Array.from(n);const c=this.#S.bind(this),u=this.#b.bind(this),d=this._uiManager._signal;for(const f of this.#e){const m=f.getAttribute("data-resizer-name");f.setAttribute("role","spinbutton"),f.addEventListener("keydown",c,{signal:d}),f.addEventListener("blur",u,{signal:d}),f.addEventListener("focus",this.#k.bind(this,m),{signal:d}),f.setAttribute("data-l10n-id",gt._l10nResizer[m])}}const a=this.#e[0];let r=0;for(const c of n){if(c===a)break;r++}const o=(360-this.rotation+this.parentRotation)%360/90*(this.#e.length/4);if(o!==r){if(o<r)for(let u=0;u<r-o;u++)this.#n.append(this.#n.firstChild);else if(o>r)for(let u=0;u<o-r;u++)this.#n.firstChild.before(this.#n.lastChild);let c=0;for(const u of n){const f=this.#e[c++].getAttribute("data-resizer-name");u.setAttribute("data-l10n-id",gt._l10nResizer[f])}}this.#N(0),this.#g=!0,this.#n.firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}#S(t){gt._resizerKeyboardManager.exec(this,t)}#b(t){this.#g&&t.relatedTarget?.parentNode!==this.#n&&this.#j()}#k(t){this.#u=this.#g?t:""}#N(t){if(this.#e)for(const n of this.#e)n.tabIndex=t}_resizeWithKeyboard(t,n){this.#g&&this.#T(this.#u,{movementX:t,movementY:n})}#j(){if(this.#g=!1,this.#N(-1),this.#o){const{savedX:t,savedY:n,savedWidth:a,savedHeight:r}=this.#o;this.#A(t,n,a,r),this.#o=null}}_stopResizingWithKeyboard(){this.#j(),this.div.focus()}select(){if(this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#i?.toggleAltTextBadge(!1)}unselect(){this.#n?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#i?.toggleAltTextBadge(!0)}updateParams(t,n){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return this.#r}set isEditing(t){this.#r=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,n){this.#a=!0;const a=t/n,{style:r}=this.div;r.aspectRatio=a,r.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,n=!1){if(n){this.#p||=new Map;const{action:a}=t;let r=this.#p.get(a);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(t),this.#p.delete(a),this.#p.size===0&&(this.#p=null)},gt._telemetryTimeout),this.#p.set(a,r);return}t.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),this.#s=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#s=!0}renderAnnotationElement(t){let n=t.container.querySelector(".annotationContent");if(!n)n=document.createElement("div"),n.classList.add("annotationContent",this.editorType),t.container.prepend(n);else if(n.nodeName==="CANVAS"){const a=n;n=document.createElement("div"),n.classList.add("annotationContent",this.editorType),a.before(n)}return n}resetAnnotationElement(t){const{firstChild:n}=t.container;n?.nodeName==="DIV"&&n.classList.contains("annotationContent")&&n.remove()}}class y0 extends gt{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const Hp=3285377520,yi=4294901760,qi=65535;class zm{constructor(t){this.h1=t?t&4294967295:Hp,this.h2=t?t&4294967295:Hp}update(t){let n,a;if(typeof t=="string"){n=new Uint8Array(t.length*2),a=0;for(let A=0,w=t.length;A<w;A++){const T=t.charCodeAt(A);T<=255?n[a++]=T:(n[a++]=T>>>8,n[a++]=T&255)}}else if(ArrayBuffer.isView(t))n=t.slice(),a=n.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=a>>2,o=a-r*4,c=new Uint32Array(n.buffer,0,r);let u=0,d=0,f=this.h1,m=this.h2;const y=3432918353,v=461845907,_=y&qi,S=v&qi;for(let A=0;A<r;A++)A&1?(u=c[A],u=u*y&yi|u*_&qi,u=u<<15|u>>>17,u=u*v&yi|u*S&qi,f^=u,f=f<<13|f>>>19,f=f*5+3864292196):(d=c[A],d=d*y&yi|d*_&qi,d=d<<15|d>>>17,d=d*v&yi|d*S&qi,m^=d,m=m<<13|m>>>19,m=m*5+3864292196);switch(u=0,o){case 3:u^=n[r*4+2]<<16;case 2:u^=n[r*4+1]<<8;case 1:u^=n[r*4],u=u*y&yi|u*_&qi,u=u<<15|u>>>17,u=u*v&yi|u*S&qi,r&1?f^=u:m^=u}this.h1=f,this.h2=m}hexdigest(){let t=this.h1,n=this.h2;return t^=n>>>1,t=t*3981806797&yi|t*36045&qi,n=n*4283543511&yi|((n<<16|t>>>16)*2950163797&yi)>>>16,t^=n>>>1,t=t*444984403&yi|t*60499&qi,n=n*3301882366&yi|((n<<16|t>>>16)*3120437893&yi)>>>16,t^=n>>>1,(t>>>0).toString(16).padStart(8,"0")+(n>>>0).toString(16).padStart(8,"0")}}const uh=Object.freeze({map:null,hash:"",transfer:void 0});class wh{#t=!1;#e=null;#i=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,n){const a=this.#i.get(t);return a===void 0?n:Object.assign(n,a)}getRawValue(t){return this.#i.get(t)}remove(t){if(this.#i.delete(t),this.#i.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const n of this.#i.values())if(n instanceof gt)return;this.onAnnotationEditor(null)}}setValue(t,n){const a=this.#i.get(t);let r=!1;if(a!==void 0)for(const[o,c]of Object.entries(n))a[o]!==c&&(r=!0,a[o]=c);else r=!0,this.#i.set(t,n);r&&this.#s(),n instanceof gt&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(n.constructor._type)}has(t){return this.#i.has(t)}getAll(){return this.#i.size>0?yh(this.#i):null}setAll(t){for(const[n,a]of Object.entries(t))this.setValue(n,a)}get size(){return this.#i.size}#s(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new Um(this)}get serializable(){if(this.#i.size===0)return uh;const t=new Map,n=new zm,a=[],r=Object.create(null);let o=!1;for(const[c,u]of this.#i){const d=u instanceof gt?u.serialize(!1,r):u;d&&(t.set(c,d),n.update(`${c}:${JSON.stringify(d)}`),o||=!!d.bitmap)}if(o)for(const c of t.values())c.bitmap&&a.push(c.bitmap);return t.size>0?{map:t,hash:n.hexdigest(),transfer:a}:uh}get editorStats(){let t=null;const n=new Map;for(const a of this.#i.values()){if(!(a instanceof gt))continue;const r=a.telemetryFinalData;if(!r)continue;const{type:o}=r;n.has(o)||n.set(o,Object.getPrototypeOf(a).constructor),t||=Object.create(null);const c=t[o]||=new Map;for(const[u,d]of Object.entries(r)){if(u==="type")continue;let f=c.get(u);f||(f=new Map,c.set(u,f));const m=f.get(d)??0;f.set(d,m+1)}}for(const[a,r]of n)t[a]=r.computeTelemetryFinalData(t[a]);return t}resetModifiedIds(){this.#e=null}get modifiedIds(){if(this.#e)return this.#e;const t=[];for(const n of this.#i.values())!(n instanceof gt)||!n.annotationElementId||!n.serialize()||t.push(n.annotationElementId);return this.#e={ids:new Set(t),hash:t.join(",")}}}class Um extends wh{#t;constructor(t){super();const{map:n,hash:a,transfer:r}=t.serializable,o=structuredClone(n,r?{transfer:r}:null);this.#t={map:o,hash:a,transfer:r}}get print(){zt("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}get modifiedIds(){return xt(this,"modifiedIds",{ids:new Set,hash:""})}}class v0{#t=new Set;constructor({ownerDocument:t=globalThis.document,styleElement:n=null}){this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const n=this.styleElement.sheet;n.insertRule(t,n.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,_inspectFont:n}){if(!(!t||this.#t.has(t.loadedName))){if(oe(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:a,src:r,style:o}=t,c=new FontFace(a,r,o);this.addNativeFontFace(c);try{await c.load(),this.#t.add(a),n?.(t)}catch{At(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(c)}return}zt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const a=t.createNativeFontFace();if(a){this.addNativeFontFace(a);try{await a.loaded}catch(r){throw At(`Failed to load font '${a.family}': '${r}'.`),t.disableFontFace=!0,r}}return}const n=t.createFontFaceRule();if(n){if(this.insertRule(n),this.isSyncFontLoadingSupported)return;await new Promise(a=>{const r=this._queueLoadingCallback(a);this._prepareFontLoadEvent(t,r)})}}get isFontLoadingAPISupported(){const t=!!this._document?.fonts;return xt(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){let t=!1;return(De||typeof navigator<"u"&&typeof navigator?.userAgent=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(t=!0),xt(this,"isSyncFontLoadingSupported",t)}_queueLoadingCallback(t){function n(){for(oe(!r.done,"completeRequest() cannot be called twice."),r.done=!0;a.length>0&&a[0].done;){const o=a.shift();setTimeout(o.callback,0)}}const{loadingRequests:a}=this,r={done:!1,complete:n,callback:t};return a.push(r),r}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return xt(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,n){function a(O,N){return O.charCodeAt(N)<<24|O.charCodeAt(N+1)<<16|O.charCodeAt(N+2)<<8|O.charCodeAt(N+3)&255}function r(O,N,U,q){const Q=O.substring(0,N),B=O.substring(N+U);return Q+q+B}let o,c;const u=this._document.createElement("canvas");u.width=1,u.height=1;const d=u.getContext("2d");let f=0;function m(O,N){if(++f>30){At("Load test font never loaded."),N();return}if(d.font="30px "+O,d.fillText(".",0,20),d.getImageData(0,0,1,1).data[3]>0){N();return}setTimeout(m.bind(null,O,N))}const y=`lt${Date.now()}${this.loadTestFontId++}`;let v=this._loadTestFont;v=r(v,976,y.length,y);const S=16,A=1482184792;let w=a(v,S);for(o=0,c=y.length-3;o<c;o+=4)w=w-A+a(y,o)|0;o<y.length&&(w=w-A+a(y+"XXX",o)|0),v=r(v,S,4,i0(w));const T=`url(data:font/opentype;base64,${btoa(v)});`,M=`@font-face {font-family:"${y}";src:${T}}`;this.insertRule(M);const C=this._document.createElement("div");C.style.visibility="hidden",C.style.width=C.style.height="10px",C.style.position="absolute",C.style.top=C.style.left="0px";for(const O of[t.loadedName,y]){const N=this._document.createElement("span");N.textContent="Hi",N.style.fontFamily=O,C.append(N)}this._document.body.append(C),m(y,()=>{C.remove(),n.complete()})}}class b0{constructor(t,{disableFontFace:n=!1,inspectFont:a=null}){this.compiledGlyphs=Object.create(null);for(const r in t)this[r]=t[r];this.disableFontFace=n===!0,this._inspectFont=a}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${o0(this.data)});`;let n;if(!this.cssFontInfo)n=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let a=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(a+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),n=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${a}src:${t}}`}return this._inspectFont?.(this,t),n}getPathGenerator(t,n){if(this.compiledGlyphs[n]!==void 0)return this.compiledGlyphs[n];let a;try{a=t.get(this.loadedName+"_path_"+n)}catch(o){At(`getPathGenerator - ignoring character: "${o}".`)}if(!Array.isArray(a)||a.length===0)return this.compiledGlyphs[n]=function(o,c){};const r=[];for(let o=0,c=a.length;o<c;)switch(a[o++]){case hn.BEZIER_CURVE_TO:{const[u,d,f,m,y,v]=a.slice(o,o+6);r.push(_=>_.bezierCurveTo(u,d,f,m,y,v)),o+=6}break;case hn.MOVE_TO:{const[u,d]=a.slice(o,o+2);r.push(f=>f.moveTo(u,d)),o+=2}break;case hn.LINE_TO:{const[u,d]=a.slice(o,o+2);r.push(f=>f.lineTo(u,d)),o+=2}break;case hn.QUADRATIC_CURVE_TO:{const[u,d,f,m]=a.slice(o,o+4);r.push(y=>y.quadraticCurveTo(u,d,f,m)),o+=4}break;case hn.RESTORE:r.push(u=>u.restore());break;case hn.SAVE:r.push(u=>u.save());break;case hn.SCALE:oe(r.length===2,"Scale command is only valid at the third position.");break;case hn.TRANSFORM:{const[u,d,f,m,y,v]=a.slice(o,o+6);r.push(_=>_.transform(u,d,f,m,y,v)),o+=6}break;case hn.TRANSLATE:{const[u,d]=a.slice(o,o+2);r.push(f=>f.translate(u,d)),o+=2}break}return this.compiledGlyphs[n]=function(c,u){r[0](c),r[1](c),c.scale(u,-u);for(let d=2,f=r.length;d<f;d++)r[d](c)}}}class Bm{#t=!1;constructor({enableHWA:t=!1}){this.#t=t}create(t,n){if(t<=0||n<=0)throw new Error("Invalid canvas size");const a=this._createCanvas(t,n);return{canvas:a,context:a.getContext("2d",{willReadFrequently:!this.#t})}}reset(t,n,a){if(!t.canvas)throw new Error("Canvas is not specified");if(n<=0||a<=0)throw new Error("Invalid canvas size");t.canvas.width=n,t.canvas.height=a}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,n){zt("Abstract method `_createCanvas` called.")}}class _0 extends Bm{constructor({ownerDocument:t=globalThis.document,enableHWA:n=!1}){super({enableHWA:n}),this._document=t}_createCanvas(t,n){const a=this._document.createElement("canvas");return a.width=t,a.height=n,a}}class Im{constructor({baseUrl:t=null,isCompressed:n=!0}){this.baseUrl=t,this.isCompressed=n}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const n=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(n).then(a=>({cMapData:a,isCompressed:this.isCompressed})).catch(a=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${n}`)})}async _fetch(t){zt("Abstract method `_fetch` called.")}}class qm extends Im{async _fetch(t){const n=await ko(t,this.isCompressed?"arraybuffer":"text");return n instanceof ArrayBuffer?new Uint8Array(n):Lo(n)}}class Gm{addFilter(t){return"none"}addHCMFilter(t,n){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,n,a,r,o){return"none"}destroy(t=!1){}}class A0 extends Gm{#t;#e;#i;#s;#a;#n;#o=0;constructor({docId:t,ownerDocument:n=globalThis.document}){super(),this.#s=t,this.#a=n}get#c(){return this.#e||=new Map}get#u(){return this.#n||=new Map}get#l(){if(!this.#i){const t=this.#a.createElement("div"),{style:n}=t;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const a=this.#a.createElementNS(pn,"svg");a.setAttribute("width",0),a.setAttribute("height",0),this.#i=this.#a.createElementNS(pn,"defs"),t.append(a),a.append(this.#i),this.#a.body.append(t)}return this.#i}#h(t){if(t.length===1){const d=t[0],f=new Array(256);for(let y=0;y<256;y++)f[y]=d[y]/255;const m=f.join(",");return[m,m,m]}const[n,a,r]=t,o=new Array(256),c=new Array(256),u=new Array(256);for(let d=0;d<256;d++)o[d]=n[d]/255,c[d]=a[d]/255,u[d]=r[d]/255;return[o.join(","),c.join(","),u.join(",")]}#r(t){if(this.#t===void 0){this.#t="";const n=this.#a.URL;n!==this.#a.baseURI&&(No(n)?At('#createUrl: ignore "data:"-URL for performance reasons.'):this.#t=n.split("#",1)[0])}return`url(${this.#t}#${t})`}addFilter(t){if(!t)return"none";let n=this.#c.get(t);if(n)return n;const[a,r,o]=this.#h(t),c=t.length===1?a:`${a}${r}${o}`;if(n=this.#c.get(c),n)return this.#c.set(t,n),n;const u=`g_${this.#s}_transfer_map_${this.#o++}`,d=this.#r(u);this.#c.set(t,d),this.#c.set(c,d);const f=this.#f(u);return this.#m(a,r,o,f),d}addHCMFilter(t,n){const a=`${t}-${n}`,r="base";let o=this.#u.get(r);if(o?.key===a||(o?(o.filter?.remove(),o.key=a,o.url="none",o.filter=null):(o={key:a,url:"none",filter:null},this.#u.set(r,o)),!t||!n))return o.url;const c=this.#v(t);t=lt.makeHexColor(...c);const u=this.#v(n);if(n=lt.makeHexColor(...u),this.#l.style.color="",t==="#000000"&&n==="#ffffff"||t===n)return o.url;const d=new Array(256);for(let _=0;_<=255;_++){const S=_/255;d[_]=S<=.03928?S/12.92:((S+.055)/1.055)**2.4}const f=d.join(","),m=`g_${this.#s}_hcm_filter`,y=o.filter=this.#f(m);this.#m(f,f,f,y),this.#g(y);const v=(_,S)=>{const A=c[_]/255,w=u[_]/255,T=new Array(S+1);for(let M=0;M<=S;M++)T[M]=A+M/S*(w-A);return T.join(",")};return this.#m(v(0,5),v(1,5),v(2,5),y),o.url=this.#r(m),o.url}addAlphaFilter(t){let n=this.#c.get(t);if(n)return n;const[a]=this.#h([t]),r=`alpha_${a}`;if(n=this.#c.get(r),n)return this.#c.set(t,n),n;const o=`g_${this.#s}_alpha_map_${this.#o++}`,c=this.#r(o);this.#c.set(t,c),this.#c.set(r,c);const u=this.#f(o);return this.#p(a,u),c}addLuminosityFilter(t){let n=this.#c.get(t||"luminosity");if(n)return n;let a,r;if(t?([a]=this.#h([t]),r=`luminosity_${a}`):r="luminosity",n=this.#c.get(r),n)return this.#c.set(t,n),n;const o=`g_${this.#s}_luminosity_map_${this.#o++}`,c=this.#r(o);this.#c.set(t,c),this.#c.set(r,c);const u=this.#f(o);return this.#d(u),t&&this.#p(a,u),c}addHighlightHCMFilter(t,n,a,r,o){const c=`${n}-${a}-${r}-${o}`;let u=this.#u.get(t);if(u?.key===c||(u?(u.filter?.remove(),u.key=c,u.url="none",u.filter=null):(u={key:c,url:"none",filter:null},this.#u.set(t,u)),!n||!a))return u.url;const[d,f]=[n,a].map(this.#v.bind(this));let m=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),y=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),[v,_]=[r,o].map(this.#v.bind(this));y<m&&([m,y,v,_]=[y,m,_,v]),this.#l.style.color="";const S=(T,M,C)=>{const O=new Array(256),N=(y-m)/C,U=T/255,q=(M-T)/(255*C);let Q=0;for(let B=0;B<=C;B++){const Z=Math.round(m+B*N),$=U+B*q;for(let J=Q;J<=Z;J++)O[J]=$;Q=Z+1}for(let B=Q;B<256;B++)O[B]=O[Q-1];return O.join(",")},A=`g_${this.#s}_hcm_${t}_filter`,w=u.filter=this.#f(A);return this.#g(w),this.#m(S(v[0],_[0],5),S(v[1],_[1],5),S(v[2],_[2],5),w),u.url=this.#r(A),u.url}destroy(t=!1){t&&this.#u.size!==0||(this.#i&&(this.#i.parentNode.parentNode.remove(),this.#i=null),this.#e&&(this.#e.clear(),this.#e=null),this.#o=0)}#d(t){const n=this.#a.createElementNS(pn,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(n)}#g(t){const n=this.#a.createElementNS(pn,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(n)}#f(t){const n=this.#a.createElementNS(pn,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",t),this.#l.append(n),n}#y(t,n,a){const r=this.#a.createElementNS(pn,n);r.setAttribute("type","discrete"),r.setAttribute("tableValues",a),t.append(r)}#m(t,n,a,r){const o=this.#a.createElementNS(pn,"feComponentTransfer");r.append(o),this.#y(o,"feFuncR",t),this.#y(o,"feFuncG",n),this.#y(o,"feFuncB",a)}#p(t,n){const a=this.#a.createElementNS(pn,"feComponentTransfer");n.append(a),this.#y(a,"feFuncA",t)}#v(t){return this.#l.style.color=t,Ah(getComputedStyle(this.#l).getPropertyValue("color"))}}class Vm{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const n=`${this.baseUrl}${t}`;return this._fetch(n).catch(a=>{throw new Error(`Unable to load font data at: ${n}`)})}async _fetch(t){zt("Abstract method `_fetch` called.")}}class Xm extends Vm{async _fetch(t){const n=await ko(t,"arraybuffer");return new Uint8Array(n)}}if(De){var hh=Promise.withResolvers(),dh=null;(async()=>{const t=await so(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),n=await so(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),a=await so(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),r=await so(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]);let o,c;return new Map(Object.entries({fs:t,http:n,https:a,url:r,canvas:o,path2d:c}))})().then(t=>{dh=t,hh.resolve()},t=>{At(`loadPackages: ${t}`),dh=new Map,hh.resolve()})}class Yn{static get promise(){return hh.promise}static get(t){return dh?.get(t)}}async function Ym(g){const n=await Yn.get("fs").promises.readFile(g);return new Uint8Array(n)}class S0 extends Gm{}class E0 extends Bm{_createCanvas(t,n){return Yn.get("canvas").createCanvas(t,n)}}class w0 extends Im{async _fetch(t){return Ym(t)}}class T0 extends Vm{async _fetch(t){return Ym(t)}}const Pe={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function fh(g,t){if(!t)return;const n=t[2]-t[0],a=t[3]-t[1],r=new Path2D;r.rect(t[0],t[1],n,a),g.clip(r)}class Th{getPattern(){zt("Abstract method `getPattern` called.")}}class x0 extends Th{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let n;this._type==="axial"?n=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(n=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const a of this._colorStops)n.addColorStop(a[0],a[1]);return n}getPattern(t,n,a,r){let o;if(r===Pe.STROKE||r===Pe.FILL){const c=n.current.getClippedPathBoundingBox(r,Gt(t))||[0,0,0,0],u=Math.ceil(c[2]-c[0])||1,d=Math.ceil(c[3]-c[1])||1,f=n.cachedCanvases.getCanvas("pattern",u,d),m=f.context;m.clearRect(0,0,m.canvas.width,m.canvas.height),m.beginPath(),m.rect(0,0,m.canvas.width,m.canvas.height),m.translate(-c[0],-c[1]),a=lt.transform(a,[1,0,0,1,c[0],c[1]]),m.transform(...n.baseTransform),this.matrix&&m.transform(...this.matrix),fh(m,this._bbox),m.fillStyle=this._createGradient(m),m.fill(),o=t.createPattern(f.canvas,"no-repeat");const y=new DOMMatrix(a);o.setTransform(y)}else fh(t,this._bbox),o=this._createGradient(t);return o}}function th(g,t,n,a,r,o,c,u){const d=t.coords,f=t.colors,m=g.data,y=g.width*4;let v;d[n+1]>d[a+1]&&(v=n,n=a,a=v,v=o,o=c,c=v),d[a+1]>d[r+1]&&(v=a,a=r,r=v,v=c,c=u,u=v),d[n+1]>d[a+1]&&(v=n,n=a,a=v,v=o,o=c,c=v);const _=(d[n]+t.offsetX)*t.scaleX,S=(d[n+1]+t.offsetY)*t.scaleY,A=(d[a]+t.offsetX)*t.scaleX,w=(d[a+1]+t.offsetY)*t.scaleY,T=(d[r]+t.offsetX)*t.scaleX,M=(d[r+1]+t.offsetY)*t.scaleY;if(S>=M)return;const C=f[o],O=f[o+1],N=f[o+2],U=f[c],q=f[c+1],Q=f[c+2],B=f[u],Z=f[u+1],$=f[u+2],J=Math.round(S),it=Math.round(M);let ht,st,k,P,Y,nt,x,I;for(let W=J;W<=it;W++){if(W<w){const ct=W<S?0:(S-W)/(S-w);ht=_-(_-A)*ct,st=C-(C-U)*ct,k=O-(O-q)*ct,P=N-(N-Q)*ct}else{let ct;W>M?ct=1:w===M?ct=0:ct=(w-W)/(w-M),ht=A-(A-T)*ct,st=U-(U-B)*ct,k=q-(q-Z)*ct,P=Q-(Q-$)*ct}let X;W<S?X=0:W>M?X=1:X=(S-W)/(S-M),Y=_-(_-T)*X,nt=C-(C-B)*X,x=O-(O-Z)*X,I=N-(N-$)*X;const tt=Math.round(Math.min(ht,Y)),ot=Math.round(Math.max(ht,Y));let et=y*W+tt*4;for(let ct=tt;ct<=ot;ct++)X=(ht-ct)/(ht-Y),X<0?X=0:X>1&&(X=1),m[et++]=st-(st-nt)*X|0,m[et++]=k-(k-x)*X|0,m[et++]=P-(P-I)*X|0,m[et++]=255}}function C0(g,t,n){const a=t.coords,r=t.colors;let o,c;switch(t.type){case"lattice":const u=t.verticesPerRow,d=Math.floor(a.length/u)-1,f=u-1;for(o=0;o<d;o++){let m=o*u;for(let y=0;y<f;y++,m++)th(g,n,a[m],a[m+1],a[m+u],r[m],r[m+1],r[m+u]),th(g,n,a[m+u+1],a[m+1],a[m+u],r[m+u+1],r[m+1],r[m+u])}break;case"triangles":for(o=0,c=a.length;o<c;o+=3)th(g,n,a[o],a[o+1],a[o+2],r[o],r[o+1],r[o+2]);break;default:throw new Error("illegal figure")}}class R0 extends Th{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[7],this._background=t[8],this.matrix=null}_createMeshCanvas(t,n,a){const u=Math.floor(this._bounds[0]),d=Math.floor(this._bounds[1]),f=Math.ceil(this._bounds[2])-u,m=Math.ceil(this._bounds[3])-d,y=Math.min(Math.ceil(Math.abs(f*t[0]*1.1)),3e3),v=Math.min(Math.ceil(Math.abs(m*t[1]*1.1)),3e3),_=f/y,S=m/v,A={coords:this._coords,colors:this._colors,offsetX:-u,offsetY:-d,scaleX:1/_,scaleY:1/S},w=y+4,T=v+4,M=a.getCanvas("mesh",w,T),C=M.context,O=C.createImageData(y,v);if(n){const U=O.data;for(let q=0,Q=U.length;q<Q;q+=4)U[q]=n[0],U[q+1]=n[1],U[q+2]=n[2],U[q+3]=255}for(const U of this._figures)C0(O,U,A);return C.putImageData(O,2,2),{canvas:M.canvas,offsetX:u-2*_,offsetY:d-2*S,scaleX:_,scaleY:S}}getPattern(t,n,a,r){fh(t,this._bbox);let o;if(r===Pe.SHADING)o=lt.singularValueDecompose2dScale(Gt(t));else if(o=lt.singularValueDecompose2dScale(n.baseTransform),this.matrix){const u=lt.singularValueDecompose2dScale(this.matrix);o=[o[0]*u[0],o[1]*u[1]]}const c=this._createMeshCanvas(o,r===Pe.SHADING?null:this._background,n.cachedCanvases);return r!==Pe.SHADING&&(t.setTransform(...n.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(c.offsetX,c.offsetY),t.scale(c.scaleX,c.scaleY),t.createPattern(c.canvas,"no-repeat")}}class M0 extends Th{getPattern(){return"hotpink"}}function D0(g){switch(g[0]){case"RadialAxial":return new x0(g);case"Mesh":return new R0(g);case"Dummy":return new M0}throw new Error(`Unknown IR type: ${g[0]}`)}const zp={COLORED:1,UNCOLORED:2};class xh{static MAX_PATTERN_SIZE=3e3;constructor(t,n,a,r,o){this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.color=n,this.ctx=a,this.canvasGraphicsFactory=r,this.baseTransform=o}createPatternCanvas(t){const{bbox:n,operatorList:a,paintType:r,tilingType:o,color:c,canvasGraphicsFactory:u}=this;let{xstep:d,ystep:f}=this;d=Math.abs(d),f=Math.abs(f),Do("TilingType: "+o);const m=n[0],y=n[1],v=n[2],_=n[3],S=v-m,A=_-y,w=lt.singularValueDecompose2dScale(this.matrix),T=lt.singularValueDecompose2dScale(this.baseTransform),M=w[0]*T[0],C=w[1]*T[1];let O=S,N=A,U=!1,q=!1;const Q=Math.ceil(d*M),B=Math.ceil(f*C),Z=Math.ceil(S*M),$=Math.ceil(A*C);Q>=Z?O=d:U=!0,B>=$?N=f:q=!0;const J=this.getSizeAndScale(O,this.ctx.canvas.width,M),it=this.getSizeAndScale(N,this.ctx.canvas.height,C),ht=t.cachedCanvases.getCanvas("pattern",J.size,it.size),st=ht.context,k=u.createCanvasGraphics(st);if(k.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(k,r,c),st.translate(-J.scale*m,-it.scale*y),k.transform(J.scale,0,0,it.scale,0,0),st.save(),this.clipBbox(k,m,y,v,_),k.baseTransform=Gt(k.ctx),k.executeOperatorList(a),k.endDrawing(),st.restore(),U||q){const P=ht.canvas;U&&(O=d),q&&(N=f);const Y=this.getSizeAndScale(O,this.ctx.canvas.width,M),nt=this.getSizeAndScale(N,this.ctx.canvas.height,C),x=Y.size,I=nt.size,W=t.cachedCanvases.getCanvas("pattern-workaround",x,I),X=W.context,tt=U?Math.floor(S/d):0,ot=q?Math.floor(A/f):0;for(let et=0;et<=tt;et++)for(let ct=0;ct<=ot;ct++)X.drawImage(P,x*et,I*ct,x,I,0,0,x,I);return{canvas:W.canvas,scaleX:Y.scale,scaleY:nt.scale,offsetX:m,offsetY:y}}return{canvas:ht.canvas,scaleX:J.scale,scaleY:it.scale,offsetX:m,offsetY:y}}getSizeAndScale(t,n,a){const r=Math.max(xh.MAX_PATTERN_SIZE,n);let o=Math.ceil(t*a);return o>=r?o=r:a=o/t,{scale:a,size:o}}clipBbox(t,n,a,r,o){const c=r-n,u=o-a;t.ctx.rect(n,a,c,u),t.current.updateRectMinMax(Gt(t.ctx),[n,a,r,o]),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,n,a){const r=t.ctx,o=t.current;switch(n){case zp.COLORED:const c=this.ctx;r.fillStyle=c.fillStyle,r.strokeStyle=c.strokeStyle,o.fillColor=c.fillStyle,o.strokeColor=c.strokeStyle;break;case zp.UNCOLORED:const u=lt.makeHexColor(a[0],a[1],a[2]);r.fillStyle=u,r.strokeStyle=u,o.fillColor=u,o.strokeColor=u;break;default:throw new e0(`Unsupported paint type: ${n}`)}}getPattern(t,n,a,r){let o=a;r!==Pe.SHADING&&(o=lt.transform(o,n.baseTransform),this.matrix&&(o=lt.transform(o,this.matrix)));const c=this.createPatternCanvas(n);let u=new DOMMatrix(o);u=u.translate(c.offsetX,c.offsetY),u=u.scale(1/c.scaleX,1/c.scaleY);const d=t.createPattern(c.canvas,"repeat");return d.setTransform(u),d}}function O0({src:g,srcPos:t=0,dest:n,width:a,height:r,nonBlackColor:o=4294967295,inverseDecode:c=!1}){const u=je.isLittleEndian?4278190080:255,[d,f]=c?[o,u]:[u,o],m=a>>3,y=a&7,v=g.length;n=new Uint32Array(n.buffer);let _=0;for(let S=0;S<r;S++){for(const w=t+m;t<w;t++){const T=t<v?g[t]:255;n[_++]=T&128?f:d,n[_++]=T&64?f:d,n[_++]=T&32?f:d,n[_++]=T&16?f:d,n[_++]=T&8?f:d,n[_++]=T&4?f:d,n[_++]=T&2?f:d,n[_++]=T&1?f:d}if(y===0)continue;const A=t<v?g[t++]:255;for(let w=0;w<y;w++)n[_++]=A&1<<7-w?f:d}return{srcPos:t,destPos:_}}const Up=16,Bp=100,L0=15,Ip=10,qp=1e3,Ve=16;function k0(g,t){if(g._removeMirroring)throw new Error("Context is already forwarding operations.");g.__originalSave=g.save,g.__originalRestore=g.restore,g.__originalRotate=g.rotate,g.__originalScale=g.scale,g.__originalTranslate=g.translate,g.__originalTransform=g.transform,g.__originalSetTransform=g.setTransform,g.__originalResetTransform=g.resetTransform,g.__originalClip=g.clip,g.__originalMoveTo=g.moveTo,g.__originalLineTo=g.lineTo,g.__originalBezierCurveTo=g.bezierCurveTo,g.__originalRect=g.rect,g.__originalClosePath=g.closePath,g.__originalBeginPath=g.beginPath,g._removeMirroring=()=>{g.save=g.__originalSave,g.restore=g.__originalRestore,g.rotate=g.__originalRotate,g.scale=g.__originalScale,g.translate=g.__originalTranslate,g.transform=g.__originalTransform,g.setTransform=g.__originalSetTransform,g.resetTransform=g.__originalResetTransform,g.clip=g.__originalClip,g.moveTo=g.__originalMoveTo,g.lineTo=g.__originalLineTo,g.bezierCurveTo=g.__originalBezierCurveTo,g.rect=g.__originalRect,g.closePath=g.__originalClosePath,g.beginPath=g.__originalBeginPath,delete g._removeMirroring},g.save=function(){t.save(),this.__originalSave()},g.restore=function(){t.restore(),this.__originalRestore()},g.translate=function(a,r){t.translate(a,r),this.__originalTranslate(a,r)},g.scale=function(a,r){t.scale(a,r),this.__originalScale(a,r)},g.transform=function(a,r,o,c,u,d){t.transform(a,r,o,c,u,d),this.__originalTransform(a,r,o,c,u,d)},g.setTransform=function(a,r,o,c,u,d){t.setTransform(a,r,o,c,u,d),this.__originalSetTransform(a,r,o,c,u,d)},g.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},g.rotate=function(a){t.rotate(a),this.__originalRotate(a)},g.clip=function(a){t.clip(a),this.__originalClip(a)},g.moveTo=function(n,a){t.moveTo(n,a),this.__originalMoveTo(n,a)},g.lineTo=function(n,a){t.lineTo(n,a),this.__originalLineTo(n,a)},g.bezierCurveTo=function(n,a,r,o,c,u){t.bezierCurveTo(n,a,r,o,c,u),this.__originalBezierCurveTo(n,a,r,o,c,u)},g.rect=function(n,a,r,o){t.rect(n,a,r,o),this.__originalRect(n,a,r,o)},g.closePath=function(){t.closePath(),this.__originalClosePath()},g.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class N0{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,n,a){let r;return this.cache[t]!==void 0?(r=this.cache[t],this.canvasFactory.reset(r,n,a)):(r=this.canvasFactory.create(n,a),this.cache[t]=r),r}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const n=this.cache[t];this.canvasFactory.destroy(n),delete this.cache[t]}}}function ao(g,t,n,a,r,o,c,u,d,f){const[m,y,v,_,S,A]=Gt(g);if(y===0&&v===0){const M=c*m+S,C=Math.round(M),O=u*_+A,N=Math.round(O),U=(c+d)*m+S,q=Math.abs(Math.round(U)-C)||1,Q=(u+f)*_+A,B=Math.abs(Math.round(Q)-N)||1;return g.setTransform(Math.sign(m),0,0,Math.sign(_),C,N),g.drawImage(t,n,a,r,o,0,0,q,B),g.setTransform(m,y,v,_,S,A),[q,B]}if(m===0&&_===0){const M=u*v+S,C=Math.round(M),O=c*y+A,N=Math.round(O),U=(u+f)*v+S,q=Math.abs(Math.round(U)-C)||1,Q=(c+d)*y+A,B=Math.abs(Math.round(Q)-N)||1;return g.setTransform(0,Math.sign(y),Math.sign(v),0,C,N),g.drawImage(t,n,a,r,o,0,0,B,q),g.setTransform(m,y,v,_,S,A),[B,q]}g.drawImage(t,n,a,r,o,c,u,d,f);const w=Math.hypot(m,y),T=Math.hypot(v,_);return[w*d,T*f]}function P0(g){const{width:t,height:n}=g;if(t>qp||n>qp)return null;const a=1e3,r=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),o=t+1;let c=new Uint8Array(o*(n+1)),u,d,f;const m=t+7&-8;let y=new Uint8Array(m*n),v=0;for(const T of g.data){let M=128;for(;M>0;)y[v++]=T&M?0:255,M>>=1}let _=0;for(v=0,y[v]!==0&&(c[0]=1,++_),d=1;d<t;d++)y[v]!==y[v+1]&&(c[d]=y[v]?2:1,++_),v++;for(y[v]!==0&&(c[d]=2,++_),u=1;u<n;u++){v=u*m,f=u*o,y[v-m]!==y[v]&&(c[f]=y[v]?1:8,++_);let T=(y[v]?4:0)+(y[v-m]?8:0);for(d=1;d<t;d++)T=(T>>2)+(y[v+1]?4:0)+(y[v-m+1]?8:0),r[T]&&(c[f+d]=r[T],++_),v++;if(y[v-m]!==y[v]&&(c[f+d]=y[v]?2:4,++_),_>a)return null}for(v=m*(n-1),f=u*o,y[v]!==0&&(c[f]=8,++_),d=1;d<t;d++)y[v]!==y[v+1]&&(c[f+d]=y[v]?4:8,++_),v++;if(y[v]!==0&&(c[f+d]=4,++_),_>a)return null;const S=new Int32Array([0,o,-1,0,-o,0,0,0,1]),A=new Path2D;for(u=0;_&&u<=n;u++){let T=u*o;const M=T+t;for(;T<M&&!c[T];)T++;if(T===M)continue;A.moveTo(T%o,u);const C=T;let O=c[T];do{const N=S[O];do T+=N;while(!c[T]);const U=c[T];U!==5&&U!==10?(O=U,c[T]=0):(O=U&51*O>>4,c[T]&=O>>2|O<<2),A.lineTo(T%o,T/o|0),c[T]||--_}while(C!==T);--u}return y=null,c=null,function(T){T.save(),T.scale(1/t,-1/n),T.translate(0,-n),T.fill(A),T.beginPath(),T.restore()}}class Gp{constructor(t,n){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=Pm,this.textMatrixScale=1,this.fontMatrix=rh,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=Re.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,t,n])}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t}setCurrentPoint(t,n){this.x=t,this.y=n}updatePathMinMax(t,n,a){[n,a]=lt.applyTransform([n,a],t),this.minX=Math.min(this.minX,n),this.minY=Math.min(this.minY,a),this.maxX=Math.max(this.maxX,n),this.maxY=Math.max(this.maxY,a)}updateRectMinMax(t,n){const a=lt.applyTransform(n,t),r=lt.applyTransform(n.slice(2),t),o=lt.applyTransform([n[0],n[3]],t),c=lt.applyTransform([n[2],n[1]],t);this.minX=Math.min(this.minX,a[0],r[0],o[0],c[0]),this.minY=Math.min(this.minY,a[1],r[1],o[1],c[1]),this.maxX=Math.max(this.maxX,a[0],r[0],o[0],c[0]),this.maxY=Math.max(this.maxY,a[1],r[1],o[1],c[1])}updateScalingPathMinMax(t,n){lt.scaleMinMax(t,n),this.minX=Math.min(this.minX,n[0]),this.minY=Math.min(this.minY,n[1]),this.maxX=Math.max(this.maxX,n[2]),this.maxY=Math.max(this.maxY,n[3])}updateCurvePathMinMax(t,n,a,r,o,c,u,d,f,m){const y=lt.bezierBoundingBox(n,a,r,o,c,u,d,f,m);m||this.updateRectMinMax(t,y)}getPathBoundingBox(t=Pe.FILL,n=null){const a=[this.minX,this.minY,this.maxX,this.maxY];if(t===Pe.STROKE){n||zt("Stroke bounding box must include transform.");const r=lt.singularValueDecompose2dScale(n),o=r[0]*this.lineWidth/2,c=r[1]*this.lineWidth/2;a[0]-=o,a[1]-=c,a[2]+=o,a[3]+=c}return a}updateClipFromPath(){const t=lt.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(t){this.clipBox=t,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(t=Pe.FILL,n=null){return lt.intersect(this.clipBox,this.getPathBoundingBox(t,n))}}function Vp(g,t){if(typeof ImageData<"u"&&t instanceof ImageData){g.putImageData(t,0,0);return}const n=t.height,a=t.width,r=n%Ve,o=(n-r)/Ve,c=r===0?o:o+1,u=g.createImageData(a,Ve);let d=0,f;const m=t.data,y=u.data;let v,_,S,A;if(t.kind===Eo.GRAYSCALE_1BPP){const w=m.byteLength,T=new Uint32Array(y.buffer,0,y.byteLength>>2),M=T.length,C=a+7>>3,O=4294967295,N=je.isLittleEndian?4278190080:255;for(v=0;v<c;v++){for(S=v<o?Ve:r,f=0,_=0;_<S;_++){const U=w-d;let q=0;const Q=U>C?a:U*8-7,B=Q&-8;let Z=0,$=0;for(;q<B;q+=8)$=m[d++],T[f++]=$&128?O:N,T[f++]=$&64?O:N,T[f++]=$&32?O:N,T[f++]=$&16?O:N,T[f++]=$&8?O:N,T[f++]=$&4?O:N,T[f++]=$&2?O:N,T[f++]=$&1?O:N;for(;q<Q;q++)Z===0&&($=m[d++],Z=128),T[f++]=$&Z?O:N,Z>>=1}for(;f<M;)T[f++]=0;g.putImageData(u,0,v*Ve)}}else if(t.kind===Eo.RGBA_32BPP){for(_=0,A=a*Ve*4,v=0;v<o;v++)y.set(m.subarray(d,d+A)),d+=A,g.putImageData(u,0,_),_+=Ve;v<c&&(A=a*r*4,y.set(m.subarray(d,d+A)),g.putImageData(u,0,_))}else if(t.kind===Eo.RGB_24BPP)for(S=Ve,A=a*S,v=0;v<c;v++){for(v>=o&&(S=r,A=a*S),f=0,_=A;_--;)y[f++]=m[d++],y[f++]=m[d++],y[f++]=m[d++],y[f++]=255;g.putImageData(u,0,v*Ve)}else throw new Error(`bad image kind: ${t.kind}`)}function Xp(g,t){if(t.bitmap){g.drawImage(t.bitmap,0,0);return}const n=t.height,a=t.width,r=n%Ve,o=(n-r)/Ve,c=r===0?o:o+1,u=g.createImageData(a,Ve);let d=0;const f=t.data,m=u.data;for(let y=0;y<c;y++){const v=y<o?Ve:r;({srcPos:d}=O0({src:f,srcPos:d,dest:m,width:a,height:v,nonBlackColor:0})),g.putImageData(u,0,y*Ve)}}function Rr(g,t){const n=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const a of n)g[a]!==void 0&&(t[a]=g[a]);g.setLineDash!==void 0&&(t.setLineDash(g.getLineDash()),t.lineDashOffset=g.lineDashOffset)}function ro(g){if(g.strokeStyle=g.fillStyle="#000000",g.fillRule="nonzero",g.globalAlpha=1,g.lineWidth=1,g.lineCap="butt",g.lineJoin="miter",g.miterLimit=10,g.globalCompositeOperation="source-over",g.font="10px sans-serif",g.setLineDash!==void 0&&(g.setLineDash([]),g.lineDashOffset=0),!De){const{filter:t}=g;t!=="none"&&t!==""&&(g.filter="none")}}function Yp(g,t){if(t)return!0;const n=lt.singularValueDecompose2dScale(g);n[0]=Math.fround(n[0]),n[1]=Math.fround(n[1]);const a=Math.fround((globalThis.devicePixelRatio||1)*wa.PDF_TO_CSS_UNITS);return n[0]<=a&&n[1]<=a}const j0=["butt","round","square"],F0=["miter","round","bevel"],H0={},Kp={};class _a{constructor(t,n,a,r,o,{optionalContentConfig:c,markedContentStack:u=null},d,f){this.ctx=t,this.current=new Gp(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=n,this.objs=a,this.canvasFactory=r,this.filterFactory=o,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=u||[],this.optionalContentConfig=c,this.cachedCanvases=new N0(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=d,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=f,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,n=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):n}beginDrawing({transform:t,viewport:n,transparency:a=!1,background:r=null}){const o=this.ctx.canvas.width,c=this.ctx.canvas.height,u=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,o,c),this.ctx.fillStyle=u,a){const d=this.cachedCanvases.getCanvas("transparent",o,c);this.compositeCtx=this.ctx,this.transparentCanvas=d.canvas,this.ctx=d.context,this.ctx.save(),this.ctx.transform(...Gt(this.compositeCtx))}this.ctx.save(),ro(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...n.transform),this.viewportScale=n.scale,this.baseTransform=Gt(this.ctx)}executeOperatorList(t,n,a,r){const o=t.argsArray,c=t.fnArray;let u=n||0;const d=o.length;if(d===u)return u;const f=d-u>Ip&&typeof a=="function",m=f?Date.now()+L0:0;let y=0;const v=this.commonObjs,_=this.objs;let S;for(;;){if(r!==void 0&&u===r.nextBreakPoint)return r.breakIt(u,a),u;if(S=c[u],S!==Oi.dependency)this[S].apply(this,o[u]);else for(const A of o[u]){const w=A.startsWith("g_")?v:_;if(!w.has(A))return w.get(A,a),u}if(u++,u===d)return u;if(f&&++y>Ip){if(Date.now()>m)return a(),u;y=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const n of t.values())typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&(n.width=n.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const n=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=n}}}_scaleImage(t,n){const a=t.width??t.displayWidth,r=t.height??t.displayHeight;let o=Math.max(Math.hypot(n[0],n[1]),1),c=Math.max(Math.hypot(n[2],n[3]),1),u=a,d=r,f="prescale1",m,y;for(;o>2&&u>1||c>2&&d>1;){let v=u,_=d;o>2&&u>1&&(v=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u/2),o/=u/v),c>2&&d>1&&(_=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d)/2,c/=d/_),m=this.cachedCanvases.getCanvas(f,v,_),y=m.context,y.clearRect(0,0,v,_),y.drawImage(t,0,0,u,d,0,0,v,_),t=m.canvas,u=v,d=_,f=f==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:u,paintHeight:d}}_createMaskCanvas(t){const n=this.ctx,{width:a,height:r}=t,o=this.current.fillColor,c=this.current.patternFill,u=Gt(n);let d,f,m,y;if((t.bitmap||t.data)&&t.count>1){const Q=t.bitmap||t.data.buffer;f=JSON.stringify(c?u:[u.slice(0,4),o]),d=this._cachedBitmapsMap.get(Q),d||(d=new Map,this._cachedBitmapsMap.set(Q,d));const B=d.get(f);if(B&&!c){const Z=Math.round(Math.min(u[0],u[2])+u[4]),$=Math.round(Math.min(u[1],u[3])+u[5]);return{canvas:B,offsetX:Z,offsetY:$}}m=B}m||(y=this.cachedCanvases.getCanvas("maskCanvas",a,r),Xp(y.context,t));let v=lt.transform(u,[1/a,0,0,-1/r,0,0]);v=lt.transform(v,[1,0,0,1,0,-r]);const[_,S,A,w]=lt.getAxialAlignedBoundingBox([0,0,a,r],v),T=Math.round(A-_)||1,M=Math.round(w-S)||1,C=this.cachedCanvases.getCanvas("fillCanvas",T,M),O=C.context,N=_,U=S;O.translate(-N,-U),O.transform(...v),m||(m=this._scaleImage(y.canvas,dn(O)),m=m.img,d&&c&&d.set(f,m)),O.imageSmoothingEnabled=Yp(Gt(O),t.interpolate),ao(O,m,0,0,m.width,m.height,0,0,a,r),O.globalCompositeOperation="source-in";const q=lt.transform(dn(O),[1,0,0,1,-N,-U]);return O.fillStyle=c?o.getPattern(n,this,q,Pe.FILL):o,O.fillRect(0,0,a,r),d&&!c&&(this.cachedCanvases.delete("fillCanvas"),d.set(f,C.canvas)),{canvas:C.canvas,offsetX:Math.round(N),offsetY:Math.round(U)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=j0[t]}setLineJoin(t){this.ctx.lineJoin=F0[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,n){const a=this.ctx;a.setLineDash!==void 0&&(a.setLineDash(t),a.lineDashOffset=n)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[n,a]of t)switch(n){case"LW":this.setLineWidth(a);break;case"LC":this.setLineCap(a);break;case"LJ":this.setLineJoin(a);break;case"ML":this.setMiterLimit(a);break;case"D":this.setDash(a[0],a[1]);break;case"RI":this.setRenderingIntent(a);break;case"FL":this.setFlatness(a);break;case"Font":this.setFont(a[0],a[1]);break;case"CA":this.current.strokeAlpha=a;break;case"ca":this.current.fillAlpha=a,this.ctx.globalAlpha=a;break;case"BM":this.ctx.globalCompositeOperation=a;break;case"SMask":this.current.activeSMask=a?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(a);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,n=this.ctx.canvas.height,a="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(a,t,n);this.suspendedCtx=this.ctx,this.ctx=r.context;const o=this.ctx;o.setTransform(...Gt(this.suspendedCtx)),Rr(this.suspendedCtx,o),k0(o,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Rr(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const n=this.current.activeSMask,a=this.suspendedCtx;this.composeSMask(a,n,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,n,a,r){const o=r[0],c=r[1],u=r[2]-o,d=r[3]-c;u===0||d===0||(this.genericComposeSMask(n.context,a,u,d,n.subtype,n.backdrop,n.transferMap,o,c,n.offsetX,n.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(a.canvas,0,0),t.restore())}genericComposeSMask(t,n,a,r,o,c,u,d,f,m,y){let v=t.canvas,_=d-m,S=f-y;if(c){const w=lt.makeHexColor(...c);if(_<0||S<0||_+a>v.width||S+r>v.height){const T=this.cachedCanvases.getCanvas("maskExtension",a,r),M=T.context;M.drawImage(v,-_,-S),M.globalCompositeOperation="destination-atop",M.fillStyle=w,M.fillRect(0,0,a,r),M.globalCompositeOperation="source-over",v=T.canvas,_=S=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const T=new Path2D;T.rect(_,S,a,r),t.clip(T),t.globalCompositeOperation="destination-atop",t.fillStyle=w,t.fillRect(_,S,a,r),t.restore()}}n.save(),n.globalAlpha=1,n.setTransform(1,0,0,1,0,0),o==="Alpha"&&u?n.filter=this.filterFactory.addAlphaFilter(u):o==="Luminosity"&&(n.filter=this.filterFactory.addLuminosityFilter(u));const A=new Path2D;A.rect(d,f,a,r),n.clip(A),n.globalCompositeOperation="destination-in",n.drawImage(v,_,S,a,r,d,f,a,r),n.restore()}save(){this.inSMaskMode?(Rr(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),Rr(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(t,n,a,r,o,c){this.ctx.transform(t,n,a,r,o,c),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,n,a){const r=this.ctx,o=this.current;let c=o.x,u=o.y,d,f;const m=Gt(r),y=m[0]===0&&m[3]===0||m[1]===0&&m[2]===0,v=y?a.slice(0):null;for(let _=0,S=0,A=t.length;_<A;_++)switch(t[_]|0){case Oi.rectangle:c=n[S++],u=n[S++];const w=n[S++],T=n[S++],M=c+w,C=u+T;r.moveTo(c,u),w===0||T===0?r.lineTo(M,C):(r.lineTo(M,u),r.lineTo(M,C),r.lineTo(c,C)),y||o.updateRectMinMax(m,[c,u,M,C]),r.closePath();break;case Oi.moveTo:c=n[S++],u=n[S++],r.moveTo(c,u),y||o.updatePathMinMax(m,c,u);break;case Oi.lineTo:c=n[S++],u=n[S++],r.lineTo(c,u),y||o.updatePathMinMax(m,c,u);break;case Oi.curveTo:d=c,f=u,c=n[S+4],u=n[S+5],r.bezierCurveTo(n[S],n[S+1],n[S+2],n[S+3],c,u),o.updateCurvePathMinMax(m,d,f,n[S],n[S+1],n[S+2],n[S+3],c,u,v),S+=6;break;case Oi.curveTo2:d=c,f=u,r.bezierCurveTo(c,u,n[S],n[S+1],n[S+2],n[S+3]),o.updateCurvePathMinMax(m,d,f,c,u,n[S],n[S+1],n[S+2],n[S+3],v),c=n[S+2],u=n[S+3],S+=4;break;case Oi.curveTo3:d=c,f=u,c=n[S+2],u=n[S+3],r.bezierCurveTo(n[S],n[S+1],c,u,c,u),o.updateCurvePathMinMax(m,d,f,n[S],n[S+1],c,u,c,u,v),S+=4;break;case Oi.closePath:r.closePath();break}y&&o.updateScalingPathMinMax(m,v),o.setCurrentPoint(c,u)}closePath(){this.ctx.closePath()}stroke(t=!0){const n=this.ctx,a=this.current.strokeColor;n.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof a=="object"&&a?.getPattern?(n.save(),n.strokeStyle=a.getPattern(n,this,dn(n),Pe.STROKE),this.rescaleAndStroke(!1),n.restore()):this.rescaleAndStroke(!0)),t&&this.consumePath(this.current.getClippedPathBoundingBox()),n.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(t=!0){const n=this.ctx,a=this.current.fillColor,r=this.current.patternFill;let o=!1;r&&(n.save(),n.fillStyle=a.getPattern(n,this,dn(n),Pe.FILL),o=!0);const c=this.current.getClippedPathBoundingBox();this.contentVisible&&c!==null&&(this.pendingEOFill?(n.fill("evenodd"),this.pendingEOFill=!1):n.fill()),o&&n.restore(),t&&this.consumePath(c)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=H0}eoClip(){this.pendingClip=Kp}beginText(){this.current.textMatrix=Pm,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,n=this.ctx;if(t===void 0){n.beginPath();return}n.save(),n.beginPath();for(const a of t)n.setTransform(...a.transform),n.translate(a.x,a.y),a.addToPath(n,a.fontSize);n.restore(),n.clip(),n.beginPath(),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,n){const a=this.commonObjs.get(t),r=this.current;if(!a)throw new Error(`Can't find font for ${t}`);if(r.fontMatrix=a.fontMatrix||rh,(r.fontMatrix[0]===0||r.fontMatrix[3]===0)&&At("Invalid font matrix for font "+t),n<0?(n=-n,r.fontDirection=-1):r.fontDirection=1,this.current.font=a,this.current.fontSize=n,a.isType3Font)return;const o=a.loadedName||"sans-serif",c=a.systemFontInfo?.css||`"${o}", ${a.fallbackName}`;let u="normal";a.black?u="900":a.bold&&(u="bold");const d=a.italic?"italic":"normal";let f=n;n<Up?f=Up:n>Bp&&(f=Bp),this.current.fontSizeScale=n/f,this.ctx.font=`${d} ${u} ${f}px ${c}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,n){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=n}setLeadingMoveText(t,n){this.setLeading(-n),this.moveText(t,n)}setTextMatrix(t,n,a,r,o,c){this.current.textMatrix=[t,n,a,r,o,c],this.current.textMatrixScale=Math.hypot(t,n),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,n,a,r){const o=this.ctx,c=this.current,u=c.font,d=c.textRenderingMode,f=c.fontSize/c.fontSizeScale,m=d&Re.FILL_STROKE_MASK,y=!!(d&Re.ADD_TO_PATH_FLAG),v=c.patternFill&&!u.missingFile;let _;(u.disableFontFace||y||v)&&(_=u.getPathGenerator(this.commonObjs,t)),u.disableFontFace||v?(o.save(),o.translate(n,a),o.beginPath(),_(o,f),r&&o.setTransform(...r),(m===Re.FILL||m===Re.FILL_STROKE)&&o.fill(),(m===Re.STROKE||m===Re.FILL_STROKE)&&o.stroke(),o.restore()):((m===Re.FILL||m===Re.FILL_STROKE)&&o.fillText(t,n,a),(m===Re.STROKE||m===Re.FILL_STROKE)&&o.strokeText(t,n,a)),y&&(this.pendingTextPaths||=[]).push({transform:Gt(o),x:n,y:a,fontSize:f,addToPath:_})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const n=t.getImageData(0,0,10,10).data;let a=!1;for(let r=3;r<n.length;r+=4)if(n[r]>0&&n[r]<255){a=!0;break}return xt(this,"isFontSubpixelAAEnabled",a)}showText(t){const n=this.current,a=n.font;if(a.isType3Font)return this.showType3Text(t);const r=n.fontSize;if(r===0)return;const o=this.ctx,c=n.fontSizeScale,u=n.charSpacing,d=n.wordSpacing,f=n.fontDirection,m=n.textHScale*f,y=t.length,v=a.vertical,_=v?1:-1,S=a.defaultVMetrics,A=r*n.fontMatrix[0],w=n.textRenderingMode===Re.FILL&&!a.disableFontFace&&!n.patternFill;o.save(),o.transform(...n.textMatrix),o.translate(n.x,n.y+n.textRise),f>0?o.scale(m,-1):o.scale(m,1);let T;if(n.patternFill){o.save();const U=n.fillColor.getPattern(o,this,dn(o),Pe.FILL);T=Gt(o),o.restore(),o.fillStyle=U}let M=n.lineWidth;const C=n.textMatrixScale;if(C===0||M===0){const U=n.textRenderingMode&Re.FILL_STROKE_MASK;(U===Re.STROKE||U===Re.FILL_STROKE)&&(M=this.getSinglePixelWidth())}else M/=C;if(c!==1&&(o.scale(c,c),M/=c),o.lineWidth=M,a.isInvalidPDFjsFont){const U=[];let q=0;for(const Q of t)U.push(Q.unicode),q+=Q.width;o.fillText(U.join(""),0,0),n.x+=q*A*m,o.restore(),this.compose();return}let O=0,N;for(N=0;N<y;++N){const U=t[N];if(typeof U=="number"){O+=_*U*r/1e3;continue}let q=!1;const Q=(U.isSpace?d:0)+u,B=U.fontChar,Z=U.accent;let $,J,it=U.width;if(v){const st=U.vmetric||S,k=-(U.vmetric?st[1]:it*.5)*A,P=st[2]*A;it=st?-st[0]:it,$=k/c,J=(O+P)/c}else $=O/c,J=0;if(a.remeasure&&it>0){const st=o.measureText(B).width*1e3/r*c;if(it<st&&this.isFontSubpixelAAEnabled){const k=it/st;q=!0,o.save(),o.scale(k,1),$/=k}else it!==st&&($+=(it-st)/2e3*r/c)}if(this.contentVisible&&(U.isInFont||a.missingFile)){if(w&&!Z)o.fillText(B,$,J);else if(this.paintChar(B,$,J,T),Z){const st=$+r*Z.offset.x/c,k=J-r*Z.offset.y/c;this.paintChar(Z.fontChar,st,k,T)}}const ht=v?it*A-Q*f:it*A+Q*f;O+=ht,q&&o.restore()}v?n.y-=O:n.x+=O*m,o.restore(),this.compose()}showType3Text(t){const n=this.ctx,a=this.current,r=a.font,o=a.fontSize,c=a.fontDirection,u=r.vertical?1:-1,d=a.charSpacing,f=a.wordSpacing,m=a.textHScale*c,y=a.fontMatrix||rh,v=t.length,_=a.textRenderingMode===Re.INVISIBLE;let S,A,w,T;if(!(_||o===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,n.save(),n.transform(...a.textMatrix),n.translate(a.x,a.y),n.scale(m,c),S=0;S<v;++S){if(A=t[S],typeof A=="number"){T=u*A*o/1e3,this.ctx.translate(T,0),a.x+=T*m;continue}const M=(A.isSpace?f:0)+d,C=r.charProcOperatorList[A.operatorListId];if(!C){At(`Type3 character "${A.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=A,this.save(),n.scale(o,o),n.transform(...y),this.executeOperatorList(C),this.restore()),w=lt.applyTransform([A.width,0],y)[0]*o+M,n.translate(w,0),a.x+=w*m}n.restore(),this.processingType3=null}}setCharWidth(t,n){}setCharWidthAndBounds(t,n,a,r,o,c){this.ctx.rect(a,r,o-a,c-r),this.ctx.clip(),this.endPath()}getColorN_Pattern(t){let n;if(t[0]==="TilingPattern"){const a=t[1],r=this.baseTransform||Gt(this.ctx),o={createCanvasGraphics:c=>new _a(c,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};n=new xh(t,a,this.ctx,o,r)}else n=this._getPattern(t[1],t[2]);return n}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t,n,a){this.ctx.strokeStyle=this.current.strokeColor=lt.makeHexColor(t,n,a)}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent"}setFillRGBColor(t,n,a){this.ctx.fillStyle=this.current.fillColor=lt.makeHexColor(t,n,a),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,n=null){let a;return this.cachedPatterns.has(t)?a=this.cachedPatterns.get(t):(a=D0(this.getObject(t)),this.cachedPatterns.set(t,a)),n&&(a.matrix=n),a}shadingFill(t){if(!this.contentVisible)return;const n=this.ctx;this.save();const a=this._getPattern(t);n.fillStyle=a.getPattern(n,this,dn(n),Pe.SHADING);const r=dn(n);if(r){const{width:o,height:c}=n.canvas,[u,d,f,m]=lt.getAxialAlignedBoundingBox([0,0,o,c],r);this.ctx.fillRect(u,d,f-u,m-d)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){zt("Should not call beginInlineImage")}beginImageData(){zt("Should not call beginImageData")}paintFormXObjectBegin(t,n){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=Gt(this.ctx),n)){const a=n[2]-n[0],r=n[3]-n[1];this.ctx.rect(n[0],n[1],a,r),this.current.updateRectMinMax(Gt(this.ctx),n),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const n=this.ctx;t.isolated||Do("TODO: Support non-isolated groups."),t.knockout&&At("Knockout groups not supported.");const a=Gt(n);if(t.matrix&&n.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let r=lt.getAxialAlignedBoundingBox(t.bbox,Gt(n));const o=[0,0,n.canvas.width,n.canvas.height];r=lt.intersect(r,o)||[0,0,0,0];const c=Math.floor(r[0]),u=Math.floor(r[1]),d=Math.max(Math.ceil(r[2])-c,1),f=Math.max(Math.ceil(r[3])-u,1);this.current.startNewPathAndClipBox([0,0,d,f]);let m="groupAt"+this.groupLevel;t.smask&&(m+="_smask_"+this.smaskCounter++%2);const y=this.cachedCanvases.getCanvas(m,d,f),v=y.context;v.translate(-c,-u),v.transform(...a),t.smask?this.smaskStack.push({canvas:y.canvas,context:v,offsetX:c,offsetY:u,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(n.setTransform(1,0,0,1,0,0),n.translate(c,u),n.save()),Rr(n,v),this.ctx=v,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(n),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const n=this.ctx,a=this.groupStack.pop();if(this.ctx=a,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const r=Gt(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...r);const o=lt.getAxialAlignedBoundingBox([0,0,n.canvas.width,n.canvas.height],r);this.ctx.drawImage(n.canvas,0,0),this.ctx.restore(),this.compose(o)}}beginAnnotation(t,n,a,r,o){if(this.#t(),ro(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),n){const c=n[2]-n[0],u=n[3]-n[1];if(o&&this.annotationCanvasMap){a=a.slice(),a[4]-=n[0],a[5]-=n[1],n=n.slice(),n[0]=n[1]=0,n[2]=c,n[3]=u;const[d,f]=lt.singularValueDecompose2dScale(Gt(this.ctx)),{viewportScale:m}=this,y=Math.ceil(c*this.outputScaleX*m),v=Math.ceil(u*this.outputScaleY*m);this.annotationCanvas=this.canvasFactory.create(y,v);const{canvas:_,context:S}=this.annotationCanvas;this.annotationCanvasMap.set(t,_),this.annotationCanvas.savedCtx=this.ctx,this.ctx=S,this.ctx.save(),this.ctx.setTransform(d,0,0,-f,0,u*f),ro(this.ctx)}else ro(this.ctx),this.endPath(),this.ctx.rect(n[0],n[1],c,u),this.ctx.clip(),this.ctx.beginPath()}this.current=new Gp(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...a),this.transform(...r)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const n=t.count;t=this.getObject(t.data,t),t.count=n;const a=this.ctx,r=this.processingType3;if(r&&(r.compiled===void 0&&(r.compiled=P0(t)),r.compiled)){r.compiled(a);return}const o=this._createMaskCanvas(t),c=o.canvas;a.save(),a.setTransform(1,0,0,1,0,0),a.drawImage(c,o.offsetX,o.offsetY),a.restore(),this.compose()}paintImageMaskXObjectRepeat(t,n,a=0,r=0,o,c){if(!this.contentVisible)return;t=this.getObject(t.data,t);const u=this.ctx;u.save();const d=Gt(u);u.transform(n,a,r,o,0,0);const f=this._createMaskCanvas(t);u.setTransform(1,0,0,1,f.offsetX-d[4],f.offsetY-d[5]);for(let m=0,y=c.length;m<y;m+=2){const v=lt.transform(d,[n,a,r,o,c[m],c[m+1]]),[_,S]=lt.applyTransform([0,0],v);u.drawImage(f.canvas,_,S)}u.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const n=this.ctx,a=this.current.fillColor,r=this.current.patternFill;for(const o of t){const{data:c,width:u,height:d,transform:f}=o,m=this.cachedCanvases.getCanvas("maskCanvas",u,d),y=m.context;y.save();const v=this.getObject(c,o);Xp(y,v),y.globalCompositeOperation="source-in",y.fillStyle=r?a.getPattern(y,this,dn(n),Pe.FILL):a,y.fillRect(0,0,u,d),y.restore(),n.save(),n.transform(...f),n.scale(1,-1),ao(n,m.canvas,0,0,u,d,0,-1,1,1),n.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const n=this.getObject(t);if(!n){At("Dependent image isn't ready yet");return}this.paintInlineImageXObject(n)}paintImageXObjectRepeat(t,n,a,r){if(!this.contentVisible)return;const o=this.getObject(t);if(!o){At("Dependent image isn't ready yet");return}const c=o.width,u=o.height,d=[];for(let f=0,m=r.length;f<m;f+=2)d.push({transform:[n,0,0,a,r[f],r[f+1]],x:0,y:0,w:c,h:u});this.paintInlineImageXObjectGroup(o,d)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:n,width:a,height:r}=t,o=this.cachedCanvases.getCanvas("inlineImage",a,r),c=o.context;return c.filter=this.current.transferMaps,c.drawImage(n,0,0),c.filter="none",o.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const n=t.width,a=t.height,r=this.ctx;if(this.save(),!De){const{filter:u}=r;u!=="none"&&u!==""&&(r.filter="none")}r.scale(1/n,-1/a);let o;if(t.bitmap)o=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)o=t;else{const d=this.cachedCanvases.getCanvas("inlineImage",n,a).context;Vp(d,t),o=this.applyTransferMapsToCanvas(d)}const c=this._scaleImage(o,dn(r));r.imageSmoothingEnabled=Yp(Gt(r),t.interpolate),ao(r,c.img,0,0,c.paintWidth,c.paintHeight,0,-a,n,a),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,n){if(!this.contentVisible)return;const a=this.ctx;let r;if(t.bitmap)r=t.bitmap;else{const o=t.width,c=t.height,d=this.cachedCanvases.getCanvas("inlineImage",o,c).context;Vp(d,t),r=this.applyTransferMapsToCanvas(d)}for(const o of n)a.save(),a.transform(...o.transform),a.scale(1,-1),ao(a,r,o.x,o.y,o.w,o.h,0,-1,1,1),a.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,n){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,n){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(n)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t){const n=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const a=this.ctx;this.pendingClip&&(n||(this.pendingClip===Kp?a.clip("evenodd"):a.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),a.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Gt(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const n=Math.abs(t[0]*t[3]-t[2]*t[1]),a=Math.hypot(t[0],t[2]),r=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(a,r)/n}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:n,b:a,c:r,d:o}=this.ctx.getTransform();let c,u;if(a===0&&r===0){const d=Math.abs(n),f=Math.abs(o);if(d===f)if(t===0)c=u=1/d;else{const m=d*t;c=u=m<1?1/m:1}else if(t===0)c=1/d,u=1/f;else{const m=d*t,y=f*t;c=m<1?1/m:1,u=y<1?1/y:1}}else{const d=Math.abs(n*o-a*r),f=Math.hypot(n,a),m=Math.hypot(r,o);if(t===0)c=m/d,u=f/d;else{const y=t*d;c=m>y?m/y:1,u=f>y?f/y:1}}this._cachedScaleForStroking[0]=c,this._cachedScaleForStroking[1]=u}return this._cachedScaleForStroking}rescaleAndStroke(t){const{ctx:n}=this,{lineWidth:a}=this.current,[r,o]=this.getScaleForStroking();if(n.lineWidth=a||1,r===1&&o===1){n.stroke();return}const c=n.getLineDash();if(t&&n.save(),n.scale(r,o),c.length>0){const u=Math.max(r,o);n.setLineDash(c.map(d=>d/u)),n.lineDashOffset/=u}n.stroke(),t&&n.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}for(const g in Oi)_a.prototype[g]!==void 0&&(_a.prototype[Oi[g]]=_a.prototype[g]);class Fr{static#t=null;static#e="";static get workerPort(){return this.#t}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");this.#t=t}static get workerSrc(){return this.#e}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");this.#e=t}}const lo={DATA:1,ERROR:2},ee={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function ii(g){switch(g instanceof Error||typeof g=="object"&&g!==null||zt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),g.name){case"AbortException":return new Es(g.message);case"MissingPDFException":return new Ss(g.message);case"PasswordException":return new lh(g.message,g.code);case"UnexpectedResponseException":return new Oo(g.message,g.status);case"UnknownErrorException":return new oh(g.message,g.details);default:return new oh(g.message,g.toString())}}class kr{#t=new AbortController;constructor(t,n,a){this.sourceName=t,this.targetName=n,this.comObj=a,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),a.addEventListener("message",this.#e.bind(this),{signal:this.#t.signal})}#e({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){this.#s(t);return}if(t.callback){const a=t.callbackId,r=this.callbackCapabilities[a];if(!r)throw new Error(`Cannot resolve callback ${a}`);if(delete this.callbackCapabilities[a],t.callback===lo.DATA)r.resolve(t.data);else if(t.callback===lo.ERROR)r.reject(ii(t.reason));else throw new Error("Unexpected callback case");return}const n=this.actionHandler[t.action];if(!n)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const a=this.sourceName,r=t.sourceName,o=this.comObj;new Promise(function(c){c(n(t.data))}).then(function(c){o.postMessage({sourceName:a,targetName:r,callback:lo.DATA,callbackId:t.callbackId,data:c})},function(c){o.postMessage({sourceName:a,targetName:r,callback:lo.ERROR,callbackId:t.callbackId,reason:ii(c)})});return}if(t.streamId){this.#i(t);return}n(t.data)}on(t,n){const a=this.actionHandler;if(a[t])throw new Error(`There is already an actionName called "${t}"`);a[t]=n}send(t,n,a){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:n},a)}sendWithPromise(t,n,a){const r=this.callbackId++,o=Promise.withResolvers();this.callbackCapabilities[r]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:r,data:n},a)}catch(c){o.reject(c)}return o.promise}sendWithStream(t,n,a,r){const o=this.streamId++,c=this.sourceName,u=this.targetName,d=this.comObj;return new ReadableStream({start:f=>{const m=Promise.withResolvers();return this.streamControllers[o]={controller:f,startCall:m,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:c,targetName:u,action:t,streamId:o,data:n,desiredSize:f.desiredSize},r),m.promise},pull:f=>{const m=Promise.withResolvers();return this.streamControllers[o].pullCall=m,d.postMessage({sourceName:c,targetName:u,stream:ee.PULL,streamId:o,desiredSize:f.desiredSize}),m.promise},cancel:f=>{oe(f instanceof Error,"cancel must have a valid reason");const m=Promise.withResolvers();return this.streamControllers[o].cancelCall=m,this.streamControllers[o].isClosed=!0,d.postMessage({sourceName:c,targetName:u,stream:ee.CANCEL,streamId:o,reason:ii(f)}),m.promise}},a)}#i(t){const n=t.streamId,a=this.sourceName,r=t.sourceName,o=this.comObj,c=this,u=this.actionHandler[t.action],d={enqueue(f,m=1,y){if(this.isCancelled)return;const v=this.desiredSize;this.desiredSize-=m,v>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),o.postMessage({sourceName:a,targetName:r,stream:ee.ENQUEUE,streamId:n,chunk:f},y)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:a,targetName:r,stream:ee.CLOSE,streamId:n}),delete c.streamSinks[n])},error(f){oe(f instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,o.postMessage({sourceName:a,targetName:r,stream:ee.ERROR,streamId:n,reason:ii(f)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[n]=d,new Promise(function(f){f(u(t.data,d))}).then(function(){o.postMessage({sourceName:a,targetName:r,stream:ee.START_COMPLETE,streamId:n,success:!0})},function(f){o.postMessage({sourceName:a,targetName:r,stream:ee.START_COMPLETE,streamId:n,reason:ii(f)})})}#s(t){const n=t.streamId,a=this.sourceName,r=t.sourceName,o=this.comObj,c=this.streamControllers[n],u=this.streamSinks[n];switch(t.stream){case ee.START_COMPLETE:t.success?c.startCall.resolve():c.startCall.reject(ii(t.reason));break;case ee.PULL_COMPLETE:t.success?c.pullCall.resolve():c.pullCall.reject(ii(t.reason));break;case ee.PULL:if(!u){o.postMessage({sourceName:a,targetName:r,stream:ee.PULL_COMPLETE,streamId:n,success:!0});break}u.desiredSize<=0&&t.desiredSize>0&&u.sinkCapability.resolve(),u.desiredSize=t.desiredSize,new Promise(function(d){d(u.onPull?.())}).then(function(){o.postMessage({sourceName:a,targetName:r,stream:ee.PULL_COMPLETE,streamId:n,success:!0})},function(d){o.postMessage({sourceName:a,targetName:r,stream:ee.PULL_COMPLETE,streamId:n,reason:ii(d)})});break;case ee.ENQUEUE:if(oe(c,"enqueue should have stream controller"),c.isClosed)break;c.controller.enqueue(t.chunk);break;case ee.CLOSE:if(oe(c,"close should have stream controller"),c.isClosed)break;c.isClosed=!0,c.controller.close(),this.#a(c,n);break;case ee.ERROR:oe(c,"error should have stream controller"),c.controller.error(ii(t.reason)),this.#a(c,n);break;case ee.CANCEL_COMPLETE:t.success?c.cancelCall.resolve():c.cancelCall.reject(ii(t.reason)),this.#a(c,n);break;case ee.CANCEL:if(!u)break;new Promise(function(d){d(u.onCancel?.(ii(t.reason)))}).then(function(){o.postMessage({sourceName:a,targetName:r,stream:ee.CANCEL_COMPLETE,streamId:n,success:!0})},function(d){o.postMessage({sourceName:a,targetName:r,stream:ee.CANCEL_COMPLETE,streamId:n,reason:ii(d)})}),u.sinkCapability.reject(ii(t.reason)),u.isCancelled=!0,delete this.streamSinks[n];break;default:throw new Error("Unexpected stream case")}}async#a(t,n){await Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[n]}destroy(){this.#t?.abort(),this.#t=null}}class z0{#t;#e;constructor({parsedData:t,rawData:n}){this.#t=t,this.#e=n}getRaw(){return this.#e}get(t){return this.#t.get(t)??null}getAll(){return yh(this.#t)}has(t){return this.#t.has(t)}}const va=Symbol("INTERNAL");class U0{#t=!1;#e=!1;#i=!1;#s=!0;constructor(t,{name:n,intent:a,usage:r,rbGroups:o}){this.#t=!!(t&ni.DISPLAY),this.#e=!!(t&ni.PRINT),this.name=n,this.intent=a,this.usage=r,this.rbGroups=o}get visible(){if(this.#i)return this.#s;if(!this.#s)return!1;const{print:t,view:n}=this.usage;return this.#t?n?.viewState!=="OFF":this.#e?t?.printState!=="OFF":!0}_setVisible(t,n,a=!1){t!==va&&zt("Internal method `_setVisible` called."),this.#i=a,this.#s=n}}class B0{#t=null;#e=new Map;#i=null;#s=null;constructor(t,n=ni.DISPLAY){if(this.renderingIntent=n,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,this.#s=t.order;for(const a of t.groups)this.#e.set(a.id,new U0(n,a));if(t.baseState==="OFF")for(const a of this.#e.values())a._setVisible(va,!1);for(const a of t.on)this.#e.get(a)._setVisible(va,!0);for(const a of t.off)this.#e.get(a)._setVisible(va,!1);this.#i=this.getHash()}}#a(t){const n=t.length;if(n<2)return!0;const a=t[0];for(let r=1;r<n;r++){const o=t[r];let c;if(Array.isArray(o))c=this.#a(o);else if(this.#e.has(o))c=this.#e.get(o).visible;else return At(`Optional content group not found: ${o}`),!0;switch(a){case"And":if(!c)return!1;break;case"Or":if(c)return!0;break;case"Not":return!c;default:return!0}}return a==="And"}isVisible(t){if(this.#e.size===0)return!0;if(!t)return Do("Optional content group not defined."),!0;if(t.type==="OCG")return this.#e.has(t.id)?this.#e.get(t.id).visible:(At(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return this.#a(t.expression);if(!t.policy||t.policy==="AnyOn"){for(const n of t.ids){if(!this.#e.has(n))return At(`Optional content group not found: ${n}`),!0;if(this.#e.get(n).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const n of t.ids){if(!this.#e.has(n))return At(`Optional content group not found: ${n}`),!0;if(!this.#e.get(n).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const n of t.ids){if(!this.#e.has(n))return At(`Optional content group not found: ${n}`),!0;if(!this.#e.get(n).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const n of t.ids){if(!this.#e.has(n))return At(`Optional content group not found: ${n}`),!0;if(this.#e.get(n).visible)return!1}return!0}return At(`Unknown optional content policy ${t.policy}.`),!0}return At(`Unknown group type ${t.type}.`),!0}setVisibility(t,n=!0,a=!0){const r=this.#e.get(t);if(!r){At(`Optional content group not found: ${t}`);return}if(a&&n&&r.rbGroups.length)for(const o of r.rbGroups)for(const c of o)c!==t&&this.#e.get(c)?._setVisible(va,!1,!0);r._setVisible(va,!!n,!0),this.#t=null}setOCGState({state:t,preserveRB:n}){let a;for(const r of t){switch(r){case"ON":case"OFF":case"Toggle":a=r;continue}const o=this.#e.get(r);if(o)switch(a){case"ON":this.setVisibility(r,!0,n);break;case"OFF":this.setVisibility(r,!1,n);break;case"Toggle":this.setVisibility(r,!o.visible,n);break}}this.#t=null}get hasInitialVisibility(){return this.#i===null||this.getHash()===this.#i}getOrder(){return this.#e.size?this.#s?this.#s.slice():[...this.#e.keys()]:null}getGroups(){return this.#e.size>0?yh(this.#e):null}getGroup(t){return this.#e.get(t)||null}getHash(){if(this.#t!==null)return this.#t;const t=new zm;for(const[n,a]of this.#e)t.update(`${n}:${a.visible}`);return this.#t=t.hexdigest()}}class I0{constructor(t,{disableRange:n=!1,disableStream:a=!1}){oe(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:o,progressiveDone:c,contentDispositionFilename:u}=t;if(this._queuedChunks=[],this._progressiveDone=c,this._contentDispositionFilename=u,o?.length>0){const d=o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength?o.buffer:new Uint8Array(o).buffer;this._queuedChunks.push(d)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!a,this._isRangeSupported=!n,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((d,f)=>{this._onReceiveData({begin:d,chunk:f})}),t.addProgressListener((d,f)=>{this._onProgress({loaded:d,total:f})}),t.addProgressiveReadListener(d=>{this._onReceiveData({chunk:d})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:n}){const a=n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength?n.buffer:new Uint8Array(n).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(a):this._queuedChunks.push(a);else{const r=this._rangeReaders.some(function(o){return o._begin!==t?!1:(o._enqueue(a),!0)});oe(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(t){t.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:t.loaded}):this._fullRequestReader?.onProgress?.({loaded:t.loaded,total:t.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const n=this._rangeReaders.indexOf(t);n>=0&&this._rangeReaders.splice(n,1)}getFullReader(){oe(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new q0(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,n){if(n<=this._progressiveDataLength)return null;const a=new G0(this,t,n);return this._pdfDataRangeTransport.requestDataRange(t,n),this._rangeReaders.push(a),a}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const n of this._rangeReaders.slice(0))n.cancel(t);this._pdfDataRangeTransport.abort()}}class q0{constructor(t,n,a=!1,r=null){this._stream=t,this._done=a||!1,this._filename=_h(r)?r:null,this._queuedChunks=n||[],this._loaded=0;for(const o of this._queuedChunks)this._loaded+=o.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class G0{constructor(t,n,a){this._stream=t,this._begin=n,this._end=a,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const a of this._requests)a.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const n=this._queuedChunk;return this._queuedChunk=null,{value:n,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function V0(g){let t=!0,n=a("filename\\*","i").exec(g);if(n){n=n[1];let m=u(n);return m=unescape(m),m=d(m),m=f(m),o(m)}if(n=c(g),n){const m=f(n);return o(m)}if(n=a("filename","i").exec(g),n){n=n[1];let m=u(n);return m=f(m),o(m)}function a(m,y){return new RegExp("(?:^|;)\\s*"+m+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',y)}function r(m,y){if(m){if(!/^[\x00-\xFF]+$/.test(y))return y;try{const v=new TextDecoder(m,{fatal:!0}),_=Lo(y);y=v.decode(_),t=!1}catch{}}return y}function o(m){return t&&/[\x80-\xff]/.test(m)&&(m=r("utf-8",m),t&&(m=r("iso-8859-1",m))),m}function c(m){const y=[];let v;const _=a("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(v=_.exec(m))!==null;){let[,A,w,T]=v;if(A=parseInt(A,10),A in y){if(A===0)break;continue}y[A]=[w,T]}const S=[];for(let A=0;A<y.length&&A in y;++A){let[w,T]=y[A];T=u(T),w&&(T=unescape(T),A===0&&(T=d(T))),S.push(T)}return S.join("")}function u(m){if(m.startsWith('"')){const y=m.slice(1).split('\\"');for(let v=0;v<y.length;++v){const _=y[v].indexOf('"');_!==-1&&(y[v]=y[v].slice(0,_),y.length=v+1),y[v]=y[v].replaceAll(/\\(.)/g,"$1")}m=y.join('"')}return m}function d(m){const y=m.indexOf("'");if(y===-1)return m;const v=m.slice(0,y),S=m.slice(y+1).replace(/^[^']*'/,"");return r(v,S)}function f(m){return!m.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(m)?m:m.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(y,v,_,S){if(_==="q"||_==="Q")return S=S.replaceAll("_"," "),S=S.replaceAll(/=([0-9a-fA-F]{2})/g,function(A,w){return String.fromCharCode(parseInt(w,16))}),r(v,S);try{S=atob(S)}catch{}return r(v,S)})}return""}function Ch(g,t){const n=new Headers;if(!g||!t||typeof t!="object")return n;for(const a in t){const r=t[a];r!==void 0&&n.append(a,r)}return n}function Rh({responseHeaders:g,isHttp:t,rangeChunkSize:n,disableRange:a}){const r={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(g.get("Content-Length"),10);return!Number.isInteger(o)||(r.suggestedLength=o,o<=2*n)||a||!t||g.get("Accept-Ranges")!=="bytes"||(g.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function Mh(g){const t=g.get("Content-Disposition");if(t){let n=V0(t);if(n.includes("%"))try{n=decodeURIComponent(n)}catch{}if(_h(n))return n}return null}function Po(g,t){return g===404||g===0&&t.startsWith("file:")?new Ss('Missing PDF "'+t+'".'):new Oo(`Unexpected server response (${g}) while retrieving PDF "${t}".`,g)}function Km(g){return g===200||g===206}function $m(g,t,n){return{method:"GET",headers:g,signal:n.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function Qm(g){return g instanceof Uint8Array?g.buffer:g instanceof ArrayBuffer?g:(At(`getArrayBuffer - unexpected data format: ${g}`),new Uint8Array(g).buffer)}class $p{constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=Ch(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return oe(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new X0(this),this._fullRequestReader}getRangeReader(t,n){if(n<=this._progressiveDataLength)return null;const a=new Y0(this,t,n);return this._rangeRequestReaders.push(a),a}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class X0{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const n=t.source;this._withCredentials=n.withCredentials||!1,this._contentLength=n.length,this._headersCapability=Promise.withResolvers(),this._disableRange=n.disableRange||!1,this._rangeChunkSize=n.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!n.disableStream,this._isRangeSupported=!n.disableRange;const a=new Headers(t.headers),r=n.url;fetch(r,$m(a,this._withCredentials,this._abortController)).then(o=>{if(!Km(o.status))throw Po(o.status,r);this._reader=o.body.getReader(),this._headersCapability.resolve();const c=o.headers,{allowRangeRequests:u,suggestedLength:d}=Rh({responseHeaders:c,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=u,this._contentLength=d||this._contentLength,this._filename=Mh(c),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Es("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:t,done:n}=await this._reader.read();return n?{value:t,done:n}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:Qm(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}class Y0{constructor(t,n,a){this._stream=t,this._reader=null,this._loaded=0;const r=t.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;const o=new Headers(t.headers);o.append("Range",`bytes=${n}-${a-1}`);const c=r.url;fetch(c,$m(o,this._withCredentials,this._abortController)).then(u=>{if(!Km(u.status))throw Po(u.status,c);this._readCapability.resolve(),this._reader=u.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:t,done:n}=await this._reader.read();return n?{value:t,done:n}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded}),{value:Qm(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}const eh=200,ih=206;function K0(g){const t=g.response;return typeof t!="string"?t:Lo(t).buffer}class $0{constructor({url:t,httpHeaders:n,withCredentials:a}){this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=Ch(this.isHttp,n),this.withCredentials=a||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(t,n,a){const r={begin:t,end:n};for(const o in a)r[o]=a[o];return this.request(r)}requestFull(t){return this.request(t)}request(t){const n=new XMLHttpRequest,a=this.currXhrId++,r=this.pendingRequests[a]={xhr:n};n.open("GET",this.url),n.withCredentials=this.withCredentials;for(const[o,c]of this.headers)n.setRequestHeader(o,c);return this.isHttp&&"begin"in t&&"end"in t?(n.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),r.expectedStatus=ih):r.expectedStatus=eh,n.responseType="arraybuffer",t.onError&&(n.onerror=function(o){t.onError(n.status)}),n.onreadystatechange=this.onStateChange.bind(this,a),n.onprogress=this.onProgress.bind(this,a),r.onHeadersReceived=t.onHeadersReceived,r.onDone=t.onDone,r.onError=t.onError,r.onProgress=t.onProgress,n.send(null),a}onProgress(t,n){const a=this.pendingRequests[t];a&&a.onProgress?.(n)}onStateChange(t,n){const a=this.pendingRequests[t];if(!a)return;const r=a.xhr;if(r.readyState>=2&&a.onHeadersReceived&&(a.onHeadersReceived(),delete a.onHeadersReceived),r.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],r.status===0&&this.isHttp){a.onError?.(r.status);return}const o=r.status||eh;if(!(o===eh&&a.expectedStatus===ih)&&o!==a.expectedStatus){a.onError?.(r.status);return}const u=K0(r);if(o===ih){const d=r.getResponseHeader("Content-Range"),f=/bytes (\d+)-(\d+)\/(\d+)/.exec(d);a.onDone({begin:parseInt(f[1],10),chunk:u})}else u?a.onDone({begin:0,chunk:u}):a.onError?.(r.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const n=this.pendingRequests[t].xhr;delete this.pendingRequests[t],n.abort()}}class Q0{constructor(t){this._source=t,this._manager=new $0(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const n=this._rangeRequestReaders.indexOf(t);n>=0&&this._rangeRequestReaders.splice(n,1)}getFullReader(){return oe(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new W0(this._manager,this._source),this._fullRequestReader}getRangeReader(t,n){const a=new Z0(this._manager,t,n);return a.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(a),a}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class W0{constructor(t,n){this._manager=t;const a={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=n.url,this._fullRequestId=t.requestFull(a),this._headersCapability=Promise.withResolvers(),this._disableRange=n.disableRange||!1,this._contentLength=n.length,this._rangeChunkSize=n.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,n=this._manager.getRequestXhr(t),a=new Headers(n.getAllResponseHeaders().trim().split(/[\r\n]+/).map(c=>{const[u,...d]=c.split(": ");return[u,d.join(": ")]})),{allowRangeRequests:r,suggestedLength:o}=Rh({responseHeaders:a,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=Mh(a),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=Po(t,this._url),this._headersCapability.reject(this._storedError);for(const n of this._requests)n.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class Z0{constructor(t,n,a){this._manager=t;const r={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._requestId=t.requestRange(n,a,r),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(t){const n=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:n,done:!1}):this._queuedChunk=n,this._done=!0;for(const a of this._requests)a.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError=Po(t,this._url);for(const n of this._requests)n.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){this.isStreamingSupported||this.onProgress?.({loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const n=this._queuedChunk;return this._queuedChunk=null,{value:n,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const J0=/^[a-z][a-z0-9\-+.]+:/i;function t_(g){if(J0.test(g))return new URL(g);const t=Yn.get("url");return new URL(t.pathToFileURL(g))}function Wm(g,t,n){return g.protocol==="http:"?Yn.get("http").request(g,{headers:t},n):Yn.get("https").request(g,{headers:t},n)}class e_{constructor(t){this.source=t,this.url=t_(t.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.headers=Ch(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return oe(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new s_(this):new i_(this),this._fullRequestReader}getRangeReader(t,n){if(n<=this._progressiveDataLength)return null;const a=this.isFsUrl?new a_(this,t,n):new n_(this,t,n);return this._rangeRequestReaders.push(a),a}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class Zm{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const n=t.source;this._contentLength=n.length,this._loaded=0,this._filename=null,this._disableRange=n.disableRange||!1,this._rangeChunkSize=n.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!n.disableStream,this._isRangeSupported=!n.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",n=>{this._error(n)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Es("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class Jm{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const n=t.source;this._isStreamingSupported=!n.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",n=>{this._error(n)}),this._storedError&&this._readableStream.destroy(this._storedError)}}class i_ extends Zm{constructor(t){super(t);const n=Object.fromEntries(t.headers),a=r=>{if(r.statusCode===404){const d=new Ss(`Missing PDF "${this._url}".`);this._storedError=d,this._headersCapability.reject(d);return}this._headersCapability.resolve(),this._setReadableStream(r);const o=new Headers(this._readableStream.headers),{allowRangeRequests:c,suggestedLength:u}=Rh({responseHeaders:o,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=c,this._contentLength=u||this._contentLength,this._filename=Mh(o)};this._request=Wm(this._url,n,a),this._request.on("error",r=>{this._storedError=r,this._headersCapability.reject(r)}),this._request.end()}}class n_ extends Jm{constructor(t,n,a){super(t);const r=Object.fromEntries(t.headers);r.Range=`bytes=${n}-${a-1}`;const o=c=>{if(c.statusCode===404){const u=new Ss(`Missing PDF "${this._url}".`);this._storedError=u;return}this._setReadableStream(c)};this._request=Wm(this._url,r,o),this._request.on("error",c=>{this._storedError=c}),this._request.end()}}class s_ extends Zm{constructor(t){super(t);const n=Yn.get("fs");n.promises.lstat(this._url).then(a=>{this._contentLength=a.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},a=>{a.code==="ENOENT"&&(a=new Ss(`Missing PDF "${this._url}".`)),this._storedError=a,this._headersCapability.reject(a)})}}class a_ extends Jm{constructor(t,n,a){super(t);const r=Yn.get("fs");this._setReadableStream(r.createReadStream(this._url,{start:n,end:a-1}))}}const r_=1e5,Ge=30,l_=.8;let gh=class Ai{#t=Promise.withResolvers();#e=null;#i=!1;#s=!!globalThis.FontInspector?.enabled;#a=null;#n=null;#o=0;#c=0;#u=null;#l=null;#h=0;#r=0;#d=Object.create(null);#g=[];#f=null;#y=[];#m=new WeakMap;#p=null;static#v=new Map;static#_=new Map;static#x=new WeakMap;static#E=null;static#w=new Set;constructor({textContentSource:t,container:n,viewport:a}){if(t instanceof ReadableStream)this.#f=t;else if(typeof t=="object")this.#f=new ReadableStream({start(d){d.enqueue(t),d.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#e=this.#l=n,this.#r=a.scale*(globalThis.devicePixelRatio||1),this.#h=a.rotation,this.#n={div:null,properties:null,ctx:null};const{pageWidth:r,pageHeight:o,pageX:c,pageY:u}=a.rawDims;this.#p=[1,0,0,-1,-c,u+o],this.#c=r,this.#o=o,Ai.#M(),_s(n,a),this.#t.promise.finally(()=>{Ai.#w.delete(this),this.#n=null,this.#d=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:n}=je.platform;return xt(this,"fontFamilyMap",new Map([["sans-serif",`${t&&n?"Calibri, ":""}sans-serif`],["monospace",`${t&&n?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{this.#u.read().then(({value:n,done:a})=>{if(a){this.#t.resolve();return}this.#a??=n.lang,Object.assign(this.#d,n.styles),this.#P(n.items),t()},this.#t.reject)};return this.#u=this.#f.getReader(),Ai.#w.add(this),t(),this.#t.promise}update({viewport:t,onBefore:n=null}){const a=t.scale*(globalThis.devicePixelRatio||1),r=t.rotation;if(r!==this.#h&&(n?.(),this.#h=r,_s(this.#l,{rotation:r})),a!==this.#r){n?.(),this.#r=a;const o={div:null,properties:null,ctx:Ai.#T(this.#a)};for(const c of this.#y)o.properties=this.#m.get(c),o.div=c,this.#A(o)}}cancel(){const t=new Es("TextLayer task cancelled.");this.#u?.cancel(t).catch(()=>{}),this.#u=null,this.#t.reject(t)}get textDivs(){return this.#y}get textContentItemsStr(){return this.#g}#P(t){if(this.#i)return;this.#n.ctx??=Ai.#T(this.#a);const n=this.#y,a=this.#g;for(const r of t){if(n.length>r_){At("Ignoring additional textDivs for performance reasons."),this.#i=!0;return}if(r.str===void 0){if(r.type==="beginMarkedContentProps"||r.type==="beginMarkedContent"){const o=this.#e;this.#e=document.createElement("span"),this.#e.classList.add("markedContent"),r.id!==null&&this.#e.setAttribute("id",`${r.id}`),o.append(this.#e)}else r.type==="endMarkedContent"&&(this.#e=this.#e.parentNode);continue}a.push(r.str),this.#C(r)}}#C(t){const n=document.createElement("span"),a={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};this.#y.push(n);const r=lt.transform(this.#p,t.transform);let o=Math.atan2(r[1],r[0]);const c=this.#d[t.fontName];c.vertical&&(o+=Math.PI/2);let u=this.#s&&c.fontSubstitution||c.fontFamily;u=Ai.fontFamilyMap.get(u)||u;const d=Math.hypot(r[2],r[3]),f=d*Ai.#L(u,this.#a);let m,y;o===0?(m=r[4],y=r[5]-f):(m=r[4]+f*Math.sin(o),y=r[5]-f*Math.cos(o));const v="calc(var(--scale-factor)*",_=n.style;this.#e===this.#l?(_.left=`${(100*m/this.#c).toFixed(2)}%`,_.top=`${(100*y/this.#o).toFixed(2)}%`):(_.left=`${v}${m.toFixed(2)}px)`,_.top=`${v}${y.toFixed(2)}px)`),_.fontSize=`${v}${(Ai.#E*d).toFixed(2)}px)`,_.fontFamily=u,a.fontSize=d,n.setAttribute("role","presentation"),n.textContent=t.str,n.dir=t.dir,this.#s&&(n.dataset.fontName=c.fontSubstitutionLoadedName||t.fontName),o!==0&&(a.angle=o*(180/Math.PI));let S=!1;if(t.str.length>1)S=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const A=Math.abs(t.transform[0]),w=Math.abs(t.transform[3]);A!==w&&Math.max(A,w)/Math.min(A,w)>1.5&&(S=!0)}if(S&&(a.canvasWidth=c.vertical?t.height:t.width),this.#m.set(n,a),this.#n.div=n,this.#n.properties=a,this.#A(this.#n),a.hasText&&this.#e.append(n),a.hasEOL){const A=document.createElement("br");A.setAttribute("role","presentation"),this.#e.append(A)}}#A(t){const{div:n,properties:a,ctx:r}=t,{style:o}=n;let c="";if(Ai.#E>1&&(c=`scale(${1/Ai.#E})`),a.canvasWidth!==0&&a.hasText){const{fontFamily:u}=o,{canvasWidth:d,fontSize:f}=a;Ai.#R(r,f*this.#r,u);const{width:m}=r.measureText(n.textContent);m>0&&(c=`scaleX(${d*this.#r/m}) ${c}`)}a.angle!==0&&(c=`rotate(${a.angle}deg) ${c}`),c.length>0&&(o.transform=c)}static cleanup(){if(!(this.#w.size>0)){this.#v.clear();for(const{canvas:t}of this.#_.values())t.remove();this.#_.clear()}}static#T(t=null){let n=this.#_.get(t||="");if(!n){const a=document.createElement("canvas");a.className="hiddenCanvasElement",a.lang=t,document.body.append(a),n=a.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#_.set(t,n),this.#x.set(n,{size:0,family:""})}return n}static#R(t,n,a){const r=this.#x.get(t);n===r.size&&a===r.family||(t.font=`${n}px ${a}`,r.size=n,r.family=a)}static#M(){if(this.#E!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),this.#E=t.getBoundingClientRect().height,t.remove()}static#L(t,n){const a=this.#v.get(t);if(a)return a;const r=this.#T(n);r.canvas.width=r.canvas.height=Ge,this.#R(r,Ge,t);const o=r.measureText("");let c=o.fontBoundingBoxAscent,u=Math.abs(o.fontBoundingBoxDescent);if(c){const m=c/(c+u);return this.#v.set(t,m),r.canvas.width=r.canvas.height=0,m}r.strokeStyle="red",r.clearRect(0,0,Ge,Ge),r.strokeText("g",0,0);let d=r.getImageData(0,0,Ge,Ge).data;u=0;for(let m=d.length-1-3;m>=0;m-=4)if(d[m]>0){u=Math.ceil(m/4/Ge);break}r.clearRect(0,0,Ge,Ge),r.strokeText("A",0,Ge),d=r.getImageData(0,0,Ge,Ge).data,c=0;for(let m=0,y=d.length;m<y;m+=4)if(d[m]>0){c=Ge-Math.floor(m/4/Ge);break}r.canvas.width=r.canvas.height=0;const f=c?c/(c+u):l_;return this.#v.set(t,f),f}};class Hr{static textContent(t){const n=[],a={items:n,styles:Object.create(null)};function r(o){if(!o)return;let c=null;const u=o.name;if(u==="#text")c=o.value;else if(Hr.shouldBuildText(u))o?.attributes?.textContent?c=o.attributes.textContent:o.value&&(c=o.value);else return;if(c!==null&&n.push({str:c}),!!o.children)for(const d of o.children)r(d)}return r(t),a}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const o_=65536,c_=100,u_=5e3,h_=De?E0:_0,d_=De?w0:qm,f_=De?S0:A0,g_=De?T0:Xm;function p_(g={}){typeof g=="string"||g instanceof URL?g={url:g}:(g instanceof ArrayBuffer||ArrayBuffer.isView(g))&&(g={data:g});const t=new Dh,{docId:n}=t,a=g.url?m_(g.url):null,r=g.data?y_(g.data):null,o=g.httpHeaders||null,c=g.withCredentials===!0,u=g.password??null,d=g.range instanceof ty?g.range:null,f=Number.isInteger(g.rangeChunkSize)&&g.rangeChunkSize>0?g.rangeChunkSize:o_;let m=g.worker instanceof Aa?g.worker:null;const y=g.verbosity,v=typeof g.docBaseUrl=="string"&&!No(g.docBaseUrl)?g.docBaseUrl:null,_=typeof g.cMapUrl=="string"?g.cMapUrl:null,S=g.cMapPacked!==!1,A=g.CMapReaderFactory||d_,w=typeof g.standardFontDataUrl=="string"?g.standardFontDataUrl:null,T=g.StandardFontDataFactory||g_,M=g.stopAtErrors!==!0,C=Number.isInteger(g.maxImageSize)&&g.maxImageSize>-1?g.maxImageSize:-1,O=g.isEvalSupported!==!1,N=typeof g.isOffscreenCanvasSupported=="boolean"?g.isOffscreenCanvasSupported:!De,U=typeof g.isChrome=="boolean"?g.isChrome:!je.platform.isFirefox&&typeof window<"u"&&!!window?.chrome,q=Number.isInteger(g.canvasMaxAreaInBytes)?g.canvasMaxAreaInBytes:-1,Q=typeof g.disableFontFace=="boolean"?g.disableFontFace:De,B=g.fontExtraProperties===!0,Z=g.enableXfa===!0,$=g.ownerDocument||globalThis.document,J=g.disableRange===!0,it=g.disableStream===!0,ht=g.disableAutoFetch===!0,st=g.pdfBug===!0,k=g.CanvasFactory||h_,P=g.FilterFactory||f_,Y=g.enableHWA===!0,nt=d?d.length:g.length??NaN,x=typeof g.useSystemFonts=="boolean"?g.useSystemFonts:!De&&!Q,I=typeof g.useWorkerFetch=="boolean"?g.useWorkerFetch:A===qm&&T===Xm&&_&&w&&Lr(_,document.baseURI)&&Lr(w,document.baseURI);g.canvasFactory&&Fp("`canvasFactory`-instance option, please use `CanvasFactory` instead."),g.filterFactory&&Fp("`filterFactory`-instance option, please use `FilterFactory` instead.");const W=null;Wb(y);const X={canvasFactory:new k({ownerDocument:$,enableHWA:Y}),filterFactory:new P({docId:n,ownerDocument:$}),cMapReaderFactory:I?null:new A({baseUrl:_,isCompressed:S}),standardFontDataFactory:I?null:new T({baseUrl:w})};if(!m){const et={verbosity:y,port:Fr.workerPort};m=et.port?Aa.fromPort(et):new Aa(et),t._worker=m}const tt={docId:n,apiVersion:"4.8.69",data:r,password:u,disableAutoFetch:ht,rangeChunkSize:f,length:nt,docBaseUrl:v,enableXfa:Z,evaluatorOptions:{maxImageSize:C,disableFontFace:Q,ignoreErrors:M,isEvalSupported:O,isOffscreenCanvasSupported:N,isChrome:U,canvasMaxAreaInBytes:q,fontExtraProperties:B,useSystemFonts:x,cMapUrl:I?_:null,standardFontDataUrl:I?w:null}},ot={disableFontFace:Q,fontExtraProperties:B,ownerDocument:$,pdfBug:st,styleElement:W,loadingParams:{disableAutoFetch:ht,enableXfa:Z}};return m.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(m.destroyed)throw new Error("Worker was destroyed");const et=m.messageHandler.sendWithPromise("GetDocRequest",tt,r?[r.buffer]:null);let ct;if(d)ct=new I0(d,{disableRange:J,disableStream:it});else if(!r){if(!a)throw new Error("getDocument - no `url` parameter provided.");let bt;De?bt=typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype&&Lr(a)?$p:e_:bt=Lr(a)?$p:Q0,ct=new bt({url:a,length:nt,httpHeaders:o,withCredentials:c,rangeChunkSize:f,disableRange:J,disableStream:it})}return et.then(bt=>{if(t.destroyed)throw new Error("Loading aborted");if(m.destroyed)throw new Error("Worker was destroyed");const kt=new kr(n,bt,m.port),Xe=new A_(kt,t,ct,ot,X);t._transport=Xe,kt.send("Ready",null)})}).catch(t._capability.reject),t}function m_(g){if(g instanceof URL)return g.href;try{return new URL(g,window.location).href}catch{if(De&&typeof g=="string")return g}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function y_(g){if(De&&typeof Buffer<"u"&&g instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(g instanceof Uint8Array&&g.byteLength===g.buffer.byteLength)return g;if(typeof g=="string")return Lo(g);if(g instanceof ArrayBuffer||ArrayBuffer.isView(g)||typeof g=="object"&&!isNaN(g?.length))return new Uint8Array(g);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Qp(g){return typeof g=="object"&&Number.isInteger(g?.num)&&g.num>=0&&Number.isInteger(g?.gen)&&g.gen>=0}class Dh{static#t=0;constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${Dh.#t++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}}class ty{constructor(t,n,a=!1,r=null){this.length=t,this.initialData=n,this.progressiveDone=a,this.contentDispositionFilename=r,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,n){for(const a of this._rangeListeners)a(t,n)}onDataProgress(t,n){this._readyCapability.promise.then(()=>{for(const a of this._progressListeners)a(t,n)})}onDataProgressiveRead(t){this._readyCapability.promise.then(()=>{for(const n of this._progressiveReadListeners)n(t)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const t of this._progressiveDoneListeners)t()})}transportReady(){this._readyCapability.resolve()}requestDataRange(t,n){zt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class v_{constructor(t,n){this._pdfInfo=t,this._transport=n}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return xt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:n}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(n)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class b_{#t=null;#e=!1;constructor(t,n,a,r=!1){this._pageIndex=t,this._pageInfo=n,this._transport=a,this._stats=r?new jp:null,this._pdfBug=r,this.commonObjs=a.commonObjs,this.objs=new ey,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:n=this.rotate,offsetX:a=0,offsetY:r=0,dontFlip:o=!1}={}){return new zr({viewBox:this.view,scale:t,rotation:n,offsetX:a,offsetY:r,dontFlip:o})}getAnnotations({intent:t="display"}={}){const{renderingIntent:n}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,n)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return xt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,viewport:n,intent:a="display",annotationMode:r=Vn.ENABLE,transform:o=null,background:c=null,optionalContentConfigPromise:u=null,annotationCanvasMap:d=null,pageColors:f=null,printAnnotationStorage:m=null,isEditing:y=!1}){this._stats?.time("Overall");const v=this._transport.getRenderingIntent(a,r,m,y),{renderingIntent:_,cacheKey:S}=v;this.#e=!1,this.#s(),u||=this._transport.getOptionalContentConfig(_);let A=this._intentStates.get(S);A||(A=Object.create(null),this._intentStates.set(S,A)),A.streamReaderCancelTimeout&&(clearTimeout(A.streamReaderCancelTimeout),A.streamReaderCancelTimeout=null);const w=!!(_&ni.PRINT);A.displayReadyCapability||(A.displayReadyCapability=Promise.withResolvers(),A.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(v));const T=O=>{A.renderTasks.delete(M),(this._maybeCleanupAfterRender||w)&&(this.#e=!0),this.#i(!w),O?(M.capability.reject(O),this._abortOperatorList({intentState:A,reason:O instanceof Error?O:new Error(O)})):M.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},M=new ba({callback:T,params:{canvasContext:t,viewport:n,transform:o,background:c},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:d,operatorList:A.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!w,pdfBug:this._pdfBug,pageColors:f});(A.renderTasks||=new Set).add(M);const C=M.task;return Promise.all([A.displayReadyCapability.promise,u]).then(([O,N])=>{if(this.destroyed){T();return}if(this._stats?.time("Rendering"),!(N.renderingIntent&_))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");M.initializeGraphics({transparency:O,optionalContentConfig:N}),M.operatorListChanged()}).catch(T),C}getOperatorList({intent:t="display",annotationMode:n=Vn.ENABLE,printAnnotationStorage:a=null,isEditing:r=!1}={}){function o(){u.operatorList.lastChunk&&(u.opListReadCapability.resolve(u.operatorList),u.renderTasks.delete(d))}const c=this._transport.getRenderingIntent(t,n,a,r,!0);let u=this._intentStates.get(c.cacheKey);u||(u=Object.create(null),this._intentStates.set(c.cacheKey,u));let d;return u.opListReadCapability||(d=Object.create(null),d.operatorListChanged=o,u.opListReadCapability=Promise.withResolvers(),(u.renderTasks||=new Set).add(d),u.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(c)),u.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:n=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:n===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(a=>Hr.textContent(a));const n=this.streamTextContent(t);return new Promise(function(a,r){function o(){c.read().then(function({value:d,done:f}){if(f){a(u);return}u.lang??=d.lang,Object.assign(u.styles,d.styles),u.items.push(...d.items),o()},r)}const c=n.getReader(),u={items:[],styles:Object.create(null),lang:null};o()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const n of this._intentStates.values())if(this._abortOperatorList({intentState:n,reason:new Error("Page was destroyed."),force:!0}),!n.opListReadCapability)for(const a of n.renderTasks)t.push(a.completed),a.cancel();return this.objs.clear(),this.#e=!1,this.#s(),Promise.all(t)}cleanup(t=!1){this.#e=!0;const n=this.#i(!1);return t&&n&&(this._stats&&=new jp),n}#i(t=!1){if(this.#s(),!this.#e||this.destroyed)return!1;if(t)return this.#t=setTimeout(()=>{this.#t=null,this.#i(!1)},u_),!1;for(const{renderTasks:n,operatorList:a}of this._intentStates.values())if(n.size>0||!a.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#e=!1,!0}#s(){this.#t&&(clearTimeout(this.#t),this.#t=null)}_startRenderPage(t,n){const a=this._intentStates.get(n);a&&(this._stats?.timeEnd("Page Request"),a.displayReadyCapability?.resolve(t))}_renderPageChunk(t,n){for(let a=0,r=t.length;a<r;a++)n.operatorList.fnArray.push(t.fnArray[a]),n.operatorList.argsArray.push(t.argsArray[a]);n.operatorList.lastChunk=t.lastChunk,n.operatorList.separateAnnots=t.separateAnnots;for(const a of n.renderTasks)a.operatorListChanged();t.lastChunk&&this.#i(!0)}_pumpOperatorList({renderingIntent:t,cacheKey:n,annotationStorageSerializable:a,modifiedIds:r}){const{map:o,transfer:c}=a,d=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:n,annotationStorage:o,modifiedIds:r},c).getReader(),f=this._intentStates.get(n);f.streamReader=d;const m=()=>{d.read().then(({value:y,done:v})=>{if(v){f.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(y,f),m())},y=>{if(f.streamReader=null,!this._transport.destroyed){if(f.operatorList){f.operatorList.lastChunk=!0;for(const v of f.renderTasks)v.operatorListChanged();this.#i(!0)}if(f.displayReadyCapability)f.displayReadyCapability.reject(y);else if(f.opListReadCapability)f.opListReadCapability.reject(y);else throw y}})};m()}_abortOperatorList({intentState:t,reason:n,force:a=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!a){if(t.renderTasks.size>0)return;if(n instanceof bh){let r=c_;n.extraDelay>0&&n.extraDelay<1e3&&(r+=n.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:n,force:!0})},r);return}}if(t.streamReader.cancel(new Es(n.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[r,o]of this._intentStates)if(o===t){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}class __{#t=new Map;#e=Promise.resolve();postMessage(t,n){const a={data:structuredClone(t,n?{transfer:n}:null)};this.#e.then(()=>{for(const[r]of this.#t)r.call(this,a)})}addEventListener(t,n,a=null){let r=null;if(a?.signal instanceof AbortSignal){const{signal:o}=a;if(o.aborted){At("LoopbackPort - cannot use an `aborted` signal.");return}const c=()=>this.removeEventListener(t,n);r=()=>o.removeEventListener("abort",c),o.addEventListener("abort",c)}this.#t.set(n,r)}removeEventListener(t,n){this.#t.get(n)?.(),this.#t.delete(n)}terminate(){for(const[,t]of this.#t)t?.();this.#t.clear()}}var Co,vs,bs,Sa,wo,Ea,To;const It=class It{constructor({name:t=null,port:n=null,verbosity:a=Zb()}={}){ha(this,Sa);if(this.name=t,this.destroyed=!1,this.verbosity=a,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,n){if(Di(It,bs)?.has(n))throw new Error("Cannot use more than one PDFWorker per port.");(Di(It,bs)||wr(It,bs,new WeakMap)).set(n,this),this._initializeFromPort(n);return}this._initialize()}get promise(){return De?Promise.all([Yn.promise,this._readyCapability.promise]):this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new kr("main","worker",t),this._messageHandler.on("ready",function(){}),io(this,Sa,wo).call(this)}_initialize(){if(Di(It,vs)||Di(It,Ea,To)){this._setupFakeWorker();return}let{workerSrc:t}=It;try{It._isSameOrigin(window.location.href,t)||(t=It._createCDNWrapper(new URL(t,window.location).href));const n=new Worker(t,{type:"module"}),a=new kr("main","worker",n),r=()=>{o.abort(),a.destroy(),n.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},o=new AbortController;n.addEventListener("error",()=>{this._webWorker||r()},{signal:o.signal}),a.on("test",u=>{if(o.abort(),this.destroyed||!u){r();return}this._messageHandler=a,this._port=n,this._webWorker=n,io(this,Sa,wo).call(this)}),a.on("ready",u=>{if(o.abort(),this.destroyed){r();return}try{c()}catch{this._setupFakeWorker()}});const c=()=>{const u=new Uint8Array;a.send("test",u,[u.buffer])};c();return}catch{Do("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){Di(It,vs)||(At("Setting up fake worker."),wr(It,vs,!0)),It._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const n=new __;this._port=n;const a=`fake${Ap(It,Co)._++}`,r=new kr(a+"_worker",a,n);t.setup(r,n),this._messageHandler=new kr(a,a+"_worker",n),io(this,Sa,wo).call(this)}).catch(t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),Di(It,bs)?.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(t){if(!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");const n=Di(this,bs)?.get(t.port);if(n){if(n._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return n}return new It(t)}static get workerSrc(){if(Fr.workerSrc)return Fr.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return xt(this,"_setupFakeWorkerGlobal",(async()=>Di(this,Ea,To)?Di(this,Ea,To):(await import(this.workerSrc)).WorkerMessageHandler)())}};Co=new WeakMap,vs=new WeakMap,bs=new WeakMap,Sa=new WeakSet,wo=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},Ea=new WeakSet,To=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},ha(It,Ea),ha(It,Co,0),ha(It,vs,!1),ha(It,bs),De&&(wr(It,vs,!0),Fr.workerSrc||="./pdf.worker.mjs"),It._isSameOrigin=(t,n)=>{let a;try{if(a=new URL(t),!a.origin||a.origin==="null")return!1}catch{return!1}const r=new URL(n,a);return a.origin===r.origin},It._createCDNWrapper=t=>{const n=`await import("${t}");`;return URL.createObjectURL(new Blob([n],{type:"text/javascript"}))};let Aa=It;class A_{#t=new Map;#e=new Map;#i=new Map;#s=new Map;#a=null;constructor(t,n,a,r,o){this.messageHandler=t,this.loadingTask=n,this.commonObjs=new ey,this.fontLoader=new v0({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=o.canvasFactory,this.filterFactory=o.filterFactory,this.cMapReaderFactory=o.cMapReaderFactory,this.standardFontDataFactory=o.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=a,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}#n(t,n=null){const a=this.#t.get(t);if(a)return a;const r=this.messageHandler.sendWithPromise(t,n);return this.#t.set(t,r),r}get annotationStorage(){return xt(this,"annotationStorage",new wh)}getRenderingIntent(t,n=Vn.ENABLE,a=null,r=!1,o=!1){let c=ni.DISPLAY,u=uh;switch(t){case"any":c=ni.ANY;break;case"display":break;case"print":c=ni.PRINT;break;default:At(`getRenderingIntent - invalid intent: ${t}`)}const d=c&ni.PRINT&&a instanceof Um?a:this.annotationStorage;switch(n){case Vn.DISABLE:c+=ni.ANNOTATIONS_DISABLE;break;case Vn.ENABLE:break;case Vn.ENABLE_FORMS:c+=ni.ANNOTATIONS_FORMS;break;case Vn.ENABLE_STORAGE:c+=ni.ANNOTATIONS_STORAGE,u=d.serializable;break;default:At(`getRenderingIntent - invalid annotationMode: ${n}`)}r&&(c+=ni.IS_EDITING),o&&(c+=ni.OPLIST);const{ids:f,hash:m}=d.modifiedIds,y=[c,u.hash,m];return{renderingIntent:c,cacheKey:y.join("_"),annotationStorageSerializable:u,modifiedIds:f}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#a?.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const a of this.#e.values())t.push(a._destroy());this.#e.clear(),this.#i.clear(),this.#s.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const n=this.messageHandler.sendWithPromise("Terminate",null);return t.push(n),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),gh.cleanup(),this._networkStream?.cancelAllRequests(new Es("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:n}=this;t.on("GetReader",(a,r)=>{oe(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=o=>{this._lastProgress={loaded:o.loaded,total:o.total}},r.onPull=()=>{this._fullReader.read().then(function({value:o,done:c}){if(c){r.close();return}oe(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{r.error(o)})},r.onCancel=o=>{this._fullReader.cancel(o),r.ready.catch(c=>{if(!this.destroyed)throw c})}}),t.on("ReaderHeadersReady",async a=>{await this._fullReader.headersReady;const{isStreamingSupported:r,isRangeSupported:o,contentLength:c}=this._fullReader;return(!r||!o)&&(this._lastProgress&&n.onProgress?.(this._lastProgress),this._fullReader.onProgress=u=>{n.onProgress?.({loaded:u.loaded,total:u.total})}),{isStreamingSupported:r,isRangeSupported:o,contentLength:c}}),t.on("GetRangeReader",(a,r)=>{oe(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const o=this._networkStream.getRangeReader(a.begin,a.end);if(!o){r.close();return}r.onPull=()=>{o.read().then(function({value:c,done:u}){if(u){r.close();return}oe(c instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(c),1,[c])}).catch(c=>{r.error(c)})},r.onCancel=c=>{o.cancel(c),r.ready.catch(u=>{if(!this.destroyed)throw u})}}),t.on("GetDoc",({pdfInfo:a})=>{this._numPages=a.numPages,this._htmlForXfa=a.htmlForXfa,delete a.htmlForXfa,n._capability.resolve(new v_(a,this))}),t.on("DocException",function(a){let r;switch(a.name){case"PasswordException":r=new lh(a.message,a.code);break;case"InvalidPDFException":r=new jm(a.message);break;case"MissingPDFException":r=new Ss(a.message);break;case"UnexpectedResponseException":r=new Oo(a.message,a.status);break;case"UnknownErrorException":r=new oh(a.message,a.details);break;default:zt("DocException - expected a valid Error.")}n._capability.reject(r)}),t.on("PasswordRequest",a=>{if(this.#a=Promise.withResolvers(),n.onPassword){const r=o=>{o instanceof Error?this.#a.reject(o):this.#a.resolve({password:o})};try{n.onPassword(r,a.code)}catch(o){this.#a.reject(o)}}else this.#a.reject(new lh(a.message,a.code));return this.#a.promise}),t.on("DataLoaded",a=>{n.onProgress?.({loaded:a.length,total:a.length}),this.downloadInfoCapability.resolve(a)}),t.on("StartRenderPage",a=>{if(this.destroyed)return;this.#e.get(a.pageIndex)._startRenderPage(a.transparency,a.cacheKey)}),t.on("commonobj",([a,r,o])=>{if(this.destroyed||this.commonObjs.has(a))return null;switch(r){case"Font":const{disableFontFace:c,fontExtraProperties:u,pdfBug:d}=this._params;if("error"in o){const v=o.error;At(`Error during font loading: ${v}`),this.commonObjs.resolve(a,v);break}const f=d&&globalThis.FontInspector?.enabled?(v,_)=>globalThis.FontInspector.fontAdded(v,_):null,m=new b0(o,{disableFontFace:c,inspectFont:f});this.fontLoader.bind(m).catch(()=>t.sendWithPromise("FontFallback",{id:a})).finally(()=>{!u&&m.data&&(m.data=null),this.commonObjs.resolve(a,m)});break;case"CopyLocalImage":const{imageRef:y}=o;oe(y,"The imageRef must be defined.");for(const v of this.#e.values())for(const[,_]of v.objs)if(_?.ref===y)return _.dataLen?(this.commonObjs.resolve(a,structuredClone(_)),_.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(a,o);break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),t.on("obj",([a,r,o,c])=>{if(this.destroyed)return;const u=this.#e.get(r);if(!u.objs.has(a)){if(u._intentStates.size===0){c?.bitmap?.close();return}switch(o){case"Image":u.objs.resolve(a,c),c?.dataLen>Yb&&(u._maybeCleanupAfterRender=!0);break;case"Pattern":u.objs.resolve(a,c);break;default:throw new Error(`Got unknown object type ${o}`)}}}),t.on("DocProgress",a=>{this.destroyed||n.onProgress?.({loaded:a.loaded,total:a.total})}),t.on("FetchBuiltInCMap",async a=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(a)}),t.on("FetchStandardFontData",async a=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(a)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&At("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:n}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this._fullReader?.filename??null},n).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const n=t-1,a=this.#i.get(n);if(a)return a;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:n}).then(o=>{if(this.destroyed)throw new Error("Transport destroyed");o.refStr&&this.#s.set(o.refStr,t);const c=new b_(n,o,this,this._params.pdfBug);return this.#e.set(n,c),c});return this.#i.set(n,r),r}getPageIndex(t){return Qp(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,n){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:n})}getFieldObjects(){return this.#n("GetFieldObjects")}hasJSActions(){return this.#n("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#n("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return this.#n("GetOptionalContentConfig").then(n=>new B0(n,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",n=this.#t.get(t);if(n)return n;const a=this.messageHandler.sendWithPromise(t,null).then(r=>({info:r[0],metadata:r[1]?new z0(r[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#t.set(t,a),a}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const n of this.#e.values())if(!n.cleanup())throw new Error(`startCleanup: Page ${n.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0),gh.cleanup()}}cachedPageNumber(t){if(!Qp(t))return null;const n=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return this.#s.get(n)??null}}const oo=Symbol("INITIAL_DATA");class ey{#t=Object.create(null);#e(t){return this.#t[t]||={...Promise.withResolvers(),data:oo}}get(t,n=null){if(n){const r=this.#e(t);return r.promise.then(()=>n(r.data)),null}const a=this.#t[t];if(!a||a.data===oo)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return a.data}has(t){const n=this.#t[t];return!!n&&n.data!==oo}resolve(t,n=null){const a=this.#e(t);a.data=n,a.resolve()}clear(){for(const t in this.#t){const{data:n}=this.#t[t];n?.bitmap?.close()}this.#t=Object.create(null)}*[Symbol.iterator](){for(const t in this.#t){const{data:n}=this.#t[t];n!==oo&&(yield[t,n])}}}class S_{#t=null;constructor(t){this.#t=t,this.onContinue=null}get promise(){return this.#t.capability.promise}cancel(t=0){this.#t.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this.#t.operatorList;if(!t)return!1;const{annotationCanvasMap:n}=this.#t;return t.form||t.canvas&&n?.size>0}}class ba{#t=null;static#e=new WeakSet;constructor({callback:t,params:n,objs:a,commonObjs:r,annotationCanvasMap:o,operatorList:c,pageIndex:u,canvasFactory:d,filterFactory:f,useRequestAnimationFrame:m=!1,pdfBug:y=!1,pageColors:v=null}){this.callback=t,this.params=n,this.objs=a,this.commonObjs=r,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=c,this._pageIndex=u,this.canvasFactory=d,this.filterFactory=f,this._pdfBug=y,this.pageColors=v,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=m===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new S_(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=n.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:n}){if(this.cancelled)return;if(this._canvas){if(ba.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");ba.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:a,viewport:r,transform:o,background:c}=this.params;this.gfx=new _a(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:n},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:o,viewport:r,transparency:t,background:c}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,n=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#t&&(window.cancelAnimationFrame(this.#t),this.#t=null),ba.#e.delete(this._canvas),this.callback(t||new bh(`Rendering cancelled, page ${this._pageIndex+1}`,n))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#t=window.requestAnimationFrame(()=>{this.#t=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),ba.#e.delete(this._canvas),this.callback())))}}const E_="4.8.69",w_="3634dab10";function Wp(g){return Math.floor(Math.max(0,Math.min(1,g))*255).toString(16).padStart(2,"0")}function Mr(g){return Math.max(0,Math.min(255,255*g))}class Zp{static CMYK_G([t,n,a,r]){return["G",1-Math.min(1,.3*t+.59*a+.11*n+r)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=Mr(t),[t,t,t]}static G_HTML([t]){const n=Wp(t);return`#${n}${n}${n}`}static RGB_G([t,n,a]){return["G",.3*t+.59*n+.11*a]}static RGB_rgb(t){return t.map(Mr)}static RGB_HTML(t){return`#${t.map(Wp).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,n,a,r]){return["RGB",1-Math.min(1,t+r),1-Math.min(1,a+r),1-Math.min(1,n+r)]}static CMYK_rgb([t,n,a,r]){return[Mr(1-Math.min(1,t+r)),Mr(1-Math.min(1,a+r)),Mr(1-Math.min(1,n+r))]}static CMYK_HTML(t){const n=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(n)}static RGB_CMYK([t,n,a]){const r=1-t,o=1-n,c=1-a,u=Math.min(r,o,c);return["CMYK",r,o,c,u]}}class T_{create(t,n,a=!1){if(t<=0||n<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),a||(r.setAttribute("width",`${t}px`),r.setAttribute("height",`${n}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${t} ${n}`),r}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){zt("Abstract method `_createSVG` called.")}}class Oh extends T_{_createSVG(t){return document.createElementNS(pn,t)}}class iy{static setupStorage(t,n,a,r,o){const c=r.getValue(n,{value:null});switch(a.name){case"textarea":if(c.value!==null&&(t.textContent=c.value),o==="print")break;t.addEventListener("input",u=>{r.setValue(n,{value:u.target.value})});break;case"input":if(a.attributes.type==="radio"||a.attributes.type==="checkbox"){if(c.value===a.attributes.xfaOn?t.setAttribute("checked",!0):c.value===a.attributes.xfaOff&&t.removeAttribute("checked"),o==="print")break;t.addEventListener("change",u=>{r.setValue(n,{value:u.target.checked?u.target.getAttribute("xfaOn"):u.target.getAttribute("xfaOff")})})}else{if(c.value!==null&&t.setAttribute("value",c.value),o==="print")break;t.addEventListener("input",u=>{r.setValue(n,{value:u.target.value})})}break;case"select":if(c.value!==null){t.setAttribute("value",c.value);for(const u of a.children)u.attributes.value===c.value?u.attributes.selected=!0:u.attributes.hasOwnProperty("selected")&&delete u.attributes.selected}t.addEventListener("input",u=>{const d=u.target.options,f=d.selectedIndex===-1?"":d[d.selectedIndex].value;r.setValue(n,{value:f})});break}}static setAttributes({html:t,element:n,storage:a=null,intent:r,linkService:o}){const{attributes:c}=n,u=t instanceof HTMLAnchorElement;c.type==="radio"&&(c.name=`${c.name}-${r}`);for(const[d,f]of Object.entries(c))if(f!=null)switch(d){case"class":f.length&&t.setAttribute(d,f.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",f);break;case"style":Object.assign(t.style,f);break;case"textContent":t.textContent=f;break;default:(!u||d!=="href"&&d!=="newWindow")&&t.setAttribute(d,f)}u&&o.addLinkAttributes(t,c.href,c.newWindow),a&&c.dataId&&this.setupStorage(t,c.dataId,n,a)}static render(t){const n=t.annotationStorage,a=t.linkService,r=t.xfaHtml,o=t.intent||"display",c=document.createElement(r.name);r.attributes&&this.setAttributes({html:c,element:r,intent:o,linkService:a});const u=o!=="richText",d=t.div;if(d.append(c),t.viewport){const y=`matrix(${t.viewport.transform.join(",")})`;d.style.transform=y}u&&d.setAttribute("class","xfaLayer xfaFont");const f=[];if(r.children.length===0){if(r.value){const y=document.createTextNode(r.value);c.append(y),u&&Hr.shouldBuildText(r.name)&&f.push(y)}return{textDivs:f}}const m=[[r,-1,c]];for(;m.length>0;){const[y,v,_]=m.at(-1);if(v+1===y.children.length){m.pop();continue}const S=y.children[++m.at(-1)[1]];if(S===null)continue;const{name:A}=S;if(A==="#text"){const T=document.createTextNode(S.value);f.push(T),_.append(T);continue}const w=S?.attributes?.xmlns?document.createElementNS(S.attributes.xmlns,A):document.createElement(A);if(_.append(w),S.attributes&&this.setAttributes({html:w,element:S,storage:n,intent:o,linkService:a}),S.children?.length>0)m.push([S,-1,w]);else if(S.value){const T=document.createTextNode(S.value);u&&Hr.shouldBuildText(A)&&f.push(T),w.append(T)}}for(const y of d.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))y.setAttribute("readOnly",!0);return{textDivs:f}}static update(t){const n=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=n,t.div.hidden=!1}}const Br=1e3,x_=9,As=new WeakSet;function yn(g){return{width:g[2]-g[0],height:g[3]-g[1]}}class C_{static create(t){switch(t.data.annotationType){case re.LINK:return new ny(t);case re.TEXT:return new R_(t);case re.WIDGET:switch(t.data.fieldType){case"Tx":return new M_(t);case"Btn":return t.data.radioButton?new sy(t):t.data.checkBox?new O_(t):new L_(t);case"Ch":return new k_(t);case"Sig":return new D_(t)}return new ws(t);case re.POPUP:return new ph(t);case re.FREETEXT:return new ay(t);case re.LINE:return new P_(t);case re.SQUARE:return new j_(t);case re.CIRCLE:return new F_(t);case re.POLYLINE:return new ry(t);case re.CARET:return new z_(t);case re.INK:return new Lh(t);case re.POLYGON:return new H_(t);case re.HIGHLIGHT:return new ly(t);case re.UNDERLINE:return new U_(t);case re.SQUIGGLY:return new B_(t);case re.STRIKEOUT:return new I_(t);case re.STAMP:return new oy(t);case re.FILEATTACHMENT:return new q_(t);default:return new Zt(t)}}}class Zt{#t=null;#e=!1;#i=null;constructor(t,{isRenderable:n=!1,ignoreBorder:a=!1,createQuadrilaterals:r=!1}={}){this.isRenderable=n,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,n&&(this.container=this._createContainer(a)),r&&this._createQuadrilaterals()}static _hasPopupData({titleObj:t,contentsObj:n,richText:a}){return!!(t?.str||n?.str||a?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Zt._hasPopupData(this.data)}updateEdited(t){if(!this.container)return;this.#t||={rect:this.data.rect.slice(0)};const{rect:n}=t;n&&this.#s(n),this.#i?.popup.updateEdited(t)}resetEdited(){this.#t&&(this.#s(this.#t.rect),this.#i?.popup.resetEdited(),this.#t=null)}#s(t){const{container:{style:n},data:{rect:a,rotation:r},parent:{viewport:{rawDims:{pageWidth:o,pageHeight:c,pageX:u,pageY:d}}}}=this;a?.splice(0,4,...t);const{width:f,height:m}=yn(t);n.left=`${100*(t[0]-u)/o}%`,n.top=`${100*(c-t[3]+d)/c}%`,r===0?(n.width=`${100*f/o}%`,n.height=`${100*m/c}%`):this.setRotation(r)}_createContainer(t){const{data:n,parent:{page:a,viewport:r}}=this,o=document.createElement("section");o.setAttribute("data-annotation-id",n.id),this instanceof ws||(o.tabIndex=Br);const{style:c}=o;if(c.zIndex=this.parent.zIndex++,n.alternativeText&&(o.title=n.alternativeText),n.noRotate&&o.classList.add("norotate"),!n.rect||this instanceof ph){const{rotation:A}=n;return!n.hasOwnCanvas&&A!==0&&this.setRotation(A,o),o}const{width:u,height:d}=yn(n.rect);if(!t&&n.borderStyle.width>0){c.borderWidth=`${n.borderStyle.width}px`;const A=n.borderStyle.horizontalCornerRadius,w=n.borderStyle.verticalCornerRadius;if(A>0||w>0){const M=`calc(${A}px * var(--scale-factor)) / calc(${w}px * var(--scale-factor))`;c.borderRadius=M}else if(this instanceof sy){const M=`calc(${u}px * var(--scale-factor)) / calc(${d}px * var(--scale-factor))`;c.borderRadius=M}switch(n.borderStyle.style){case Cr.SOLID:c.borderStyle="solid";break;case Cr.DASHED:c.borderStyle="dashed";break;case Cr.BEVELED:At("Unimplemented border style: beveled");break;case Cr.INSET:At("Unimplemented border style: inset");break;case Cr.UNDERLINE:c.borderBottomStyle="solid";break}const T=n.borderColor||null;T?(this.#e=!0,c.borderColor=lt.makeHexColor(T[0]|0,T[1]|0,T[2]|0)):c.borderWidth=0}const f=lt.normalizeRect([n.rect[0],a.view[3]-n.rect[1]+a.view[1],n.rect[2],a.view[3]-n.rect[3]+a.view[1]]),{pageWidth:m,pageHeight:y,pageX:v,pageY:_}=r.rawDims;c.left=`${100*(f[0]-v)/m}%`,c.top=`${100*(f[1]-_)/y}%`;const{rotation:S}=n;return n.hasOwnCanvas||S===0?(c.width=`${100*u/m}%`,c.height=`${100*d/y}%`):this.setRotation(S,o),o}setRotation(t,n=this.container){if(!this.data.rect)return;const{pageWidth:a,pageHeight:r}=this.parent.viewport.rawDims,{width:o,height:c}=yn(this.data.rect);let u,d;t%180===0?(u=100*o/a,d=100*c/r):(u=100*c/a,d=100*o/r),n.style.width=`${u}%`,n.style.height=`${d}%`,n.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(n,a,r)=>{const o=r.detail[n],c=o[0],u=o.slice(1);r.target.style[a]=Zp[`${c}_HTML`](u),this.annotationStorage.setValue(this.data.id,{[a]:Zp[`${c}_rgb`](u)})};return xt(this,"_commonActions",{display:n=>{const{display:a}=n.detail,r=a%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:a===1||a===2})},print:n=>{this.annotationStorage.setValue(this.data.id,{noPrint:!n.detail.print})},hidden:n=>{const{hidden:a}=n.detail;this.container.style.visibility=a?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:a,noView:a})},focus:n=>{setTimeout(()=>n.target.focus({preventScroll:!1}),0)},userName:n=>{n.target.title=n.detail.userName},readonly:n=>{n.target.disabled=n.detail.readonly},required:n=>{this._setRequired(n.target,n.detail.required)},bgColor:n=>{t("bgColor","backgroundColor",n)},fillColor:n=>{t("fillColor","backgroundColor",n)},fgColor:n=>{t("fgColor","color",n)},textColor:n=>{t("textColor","color",n)},borderColor:n=>{t("borderColor","borderColor",n)},strokeColor:n=>{t("strokeColor","borderColor",n)},rotation:n=>{const a=n.detail.rotation;this.setRotation(a),this.annotationStorage.setValue(this.data.id,{rotation:a})}})}_dispatchEventFromSandbox(t,n){const a=this._commonActions;for(const r of Object.keys(n.detail))(t[r]||a[r])?.(n)}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const n=this.annotationStorage.getRawValue(this.data.id);if(!n)return;const a=this._commonActions;for(const[r,o]of Object.entries(n)){const c=a[r];if(c){const u={detail:{[r]:o},target:t};c(u),delete n[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[n,a,r,o]=this.data.rect.map(A=>Math.fround(A));if(t.length===8){const[A,w,T,M]=t.subarray(2,6);if(r===A&&o===w&&n===T&&a===M)return}const{style:c}=this.container;let u;if(this.#e){const{borderColor:A,borderWidth:w}=c;c.borderWidth=0,u=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${A}" stroke-width="${w}">`],this.container.classList.add("hasBorder")}const d=r-n,f=o-a,{svgFactory:m}=this,y=m.createElement("svg");y.classList.add("quadrilateralsContainer"),y.setAttribute("width",0),y.setAttribute("height",0);const v=m.createElement("defs");y.append(v);const _=m.createElement("clipPath"),S=`clippath_${this.data.id}`;_.setAttribute("id",S),_.setAttribute("clipPathUnits","objectBoundingBox"),v.append(_);for(let A=2,w=t.length;A<w;A+=8){const T=t[A],M=t[A+1],C=t[A+2],O=t[A+3],N=m.createElement("rect"),U=(C-n)/d,q=(o-M)/f,Q=(T-C)/d,B=(M-O)/f;N.setAttribute("x",U),N.setAttribute("y",q),N.setAttribute("width",Q),N.setAttribute("height",B),_.append(N),u?.push(`<rect vector-effect="non-scaling-stroke" x="${U}" y="${q}" width="${Q}" height="${B}"/>`)}this.#e&&(u.push("</g></svg>')"),c.backgroundImage=u.join("")),this.container.append(y),this.container.style.clipPath=`url(#${S})`}_createPopup(){const{data:t}=this,n=this.#i=new ph({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation},parent:this.parent,elements:[this]});this.parent.div.append(n.render())}render(){zt("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,n=null){const a=[];if(this._fieldObjects){const r=this._fieldObjects[t];if(r)for(const{page:o,id:c,exportValues:u}of r){if(o===-1||c===n)continue;const d=typeof u=="string"?u:null,f=document.querySelector(`[data-element-id="${c}"]`);if(f&&!As.has(f)){At(`_getElementsByName - element not allowed: ${c}`);continue}a.push({id:c,exportValue:d,domElement:f})}return a}for(const r of document.getElementsByName(t)){const{exportValue:o}=r,c=r.getAttribute("data-element-id");c!==n&&As.has(r)&&a.push({id:c,exportValue:o,domElement:r})}return a}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const n of t)n.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:n}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:n})})}}class ny extends Zt{constructor(t,n=null){super(t,{isRenderable:!0,ignoreBorder:!!n?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:n}=this,a=document.createElement("a");a.setAttribute("data-element-id",t.id);let r=!1;return t.url?(n.addLinkAttributes(a,t.url,t.newWindow),r=!0):t.action?(this._bindNamedAction(a,t.action),r=!0):t.attachment?(this.#e(a,t.attachment,t.attachmentDest),r=!0):t.setOCGState?(this.#i(a,t.setOCGState),r=!0):t.dest?(this._bindLink(a,t.dest),r=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(a,t),r=!0),t.resetForm?(this._bindResetFormAction(a,t.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(a,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(a),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(t,n){t.href=this.linkService.getDestinationHash(n),t.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&this.#t()}_bindNamedAction(t,n){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(n),!1),this.#t()}#e(t,n,a=null){t.href=this.linkService.getAnchorUrl(""),n.description&&(t.title=n.description),t.onclick=()=>(this.downloadManager?.openOrDownloadData(n.content,n.filename,a),!1),this.#t()}#i(t,n){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(n),!1),this.#t()}_bindJSAction(t,n){t.href=this.linkService.getAnchorUrl("");const a=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(n.actions)){const o=a.get(r);o&&(t[o]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:r}}),!1))}t.onclick||(t.onclick=()=>!1),this.#t()}_bindResetFormAction(t,n){const a=t.onclick;if(a||(t.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){At('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),a||(t.onclick=()=>!1);return}t.onclick=()=>{a?.();const{fields:r,refs:o,include:c}=n,u=[];if(r.length!==0||o.length!==0){const m=new Set(o);for(const y of r){const v=this._fieldObjects[y]||[];for(const{id:_}of v)m.add(_)}for(const y of Object.values(this._fieldObjects))for(const v of y)m.has(v.id)===c&&u.push(v)}else for(const m of Object.values(this._fieldObjects))u.push(...m);const d=this.annotationStorage,f=[];for(const m of u){const{id:y}=m;switch(f.push(y),m.type){case"text":{const _=m.defaultValue||"";d.setValue(y,{value:_});break}case"checkbox":case"radiobutton":{const _=m.defaultValue===m.exportValues;d.setValue(y,{value:_});break}case"combobox":case"listbox":{const _=m.defaultValue||"";d.setValue(y,{value:_});break}default:continue}const v=document.querySelector(`[data-element-id="${y}"]`);if(v){if(!As.has(v)){At(`_bindResetFormAction - element not allowed: ${y}`);continue}}else continue;v.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:f,name:"ResetForm"}}),!1}}}class R_ extends Zt{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class ws extends Zt{render(){return this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&(t.previousSibling?.nodeName==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return je.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,n,a,r,o){a.includes("mouse")?t.addEventListener(a,c=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:o(c),shift:c.shiftKey,modifier:this._getKeyModifier(c)}})}):t.addEventListener(a,c=>{if(a==="blur"){if(!n.focused||!c.relatedTarget)return;n.focused=!1}else if(a==="focus"){if(n.focused)return;n.focused=!0}o&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:o(c)}})})}_setEventListeners(t,n,a,r){for(const[o,c]of a)(c==="Action"||this.data.actions?.[c])&&((c==="Focus"||c==="Blur")&&(n||={focused:!1}),this._setEventListener(t,n,o,c,r),c==="Focus"&&!this.data.actions?.Blur?this._setEventListener(t,n,"blur","Blur",null):c==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(t,n,"focus","Focus",null))}_setBackgroundColor(t){const n=this.data.backgroundColor||null;t.style.backgroundColor=n===null?"transparent":lt.makeHexColor(n[0],n[1],n[2])}_setTextStyle(t){const n=["left","center","right"],{fontColor:a}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||x_,o=t.style;let c;const u=2,d=f=>Math.round(10*f)/10;if(this.data.multiLine){const f=Math.abs(this.data.rect[3]-this.data.rect[1]-u),m=Math.round(f/(Wu*r))||1,y=f/m;c=Math.min(r,d(y/Wu))}else{const f=Math.abs(this.data.rect[3]-this.data.rect[1]-u);c=Math.min(r,d(f/Wu))}o.fontSize=`calc(${c}px * var(--scale-factor))`,o.color=lt.makeHexColor(a[0],a[1],a[2]),this.data.textAlignment!==null&&(o.textAlign=n[this.data.textAlignment])}_setRequired(t,n){n?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",n)}}class M_ extends ws{constructor(t){const n=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:n})}setPropertyOnSiblings(t,n,a,r){const o=this.annotationStorage;for(const c of this._getElementsByName(t.name,t.id))c.domElement&&(c.domElement[n]=a),o.setValue(c.id,{[r]:a})}render(){const t=this.annotationStorage,n=this.data.id;this.container.classList.add("textWidgetAnnotation");let a=null;if(this.renderForms){const r=t.getValue(n,{value:this.data.fieldValue});let o=r.value||"";const c=t.getValue(n,{charLimit:this.data.maxLen}).charLimit;c&&o.length>c&&(o=o.slice(0,c));let u=r.formattedValue||this.data.textContent?.join(`
`)||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const d={userValue:o,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(a=document.createElement("textarea"),a.textContent=u??o,this.data.doNotScroll&&(a.style.overflowY="hidden")):(a=document.createElement("input"),a.type="text",a.setAttribute("value",u??o),this.data.doNotScroll&&(a.style.overflowX="hidden")),this.data.hasOwnCanvas&&(a.hidden=!0),As.add(a),a.setAttribute("data-element-id",n),a.disabled=this.data.readOnly,a.name=this.data.fieldName,a.tabIndex=Br,this._setRequired(a,this.data.required),c&&(a.maxLength=c),a.addEventListener("input",m=>{t.setValue(n,{value:m.target.value}),this.setPropertyOnSiblings(a,"value",m.target.value,"value"),d.formattedValue=null}),a.addEventListener("resetform",m=>{const y=this.data.defaultFieldValue??"";a.value=d.userValue=y,d.formattedValue=null});let f=m=>{const{formattedValue:y}=d;y!=null&&(m.target.value=y),m.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){a.addEventListener("focus",y=>{if(d.focused)return;const{target:v}=y;d.userValue&&(v.value=d.userValue),d.lastCommittedValue=v.value,d.commitKey=1,this.data.actions?.Focus||(d.focused=!0)}),a.addEventListener("updatefromsandbox",y=>{this.showElementAndHideCanvas(y.target);const v={value(_){d.userValue=_.detail.value??"",t.setValue(n,{value:d.userValue.toString()}),_.target.value=d.userValue},formattedValue(_){const{formattedValue:S}=_.detail;d.formattedValue=S,S!=null&&_.target!==document.activeElement&&(_.target.value=S),t.setValue(n,{formattedValue:S})},selRange(_){_.target.setSelectionRange(..._.detail.selRange)},charLimit:_=>{const{charLimit:S}=_.detail,{target:A}=_;if(S===0){A.removeAttribute("maxLength");return}A.setAttribute("maxLength",S);let w=d.userValue;!w||w.length<=S||(w=w.slice(0,S),A.value=d.userValue=w,t.setValue(n,{value:w}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:w,willCommit:!0,commitKey:1,selStart:A.selectionStart,selEnd:A.selectionEnd}}))}};this._dispatchEventFromSandbox(v,y)}),a.addEventListener("keydown",y=>{d.commitKey=1;let v=-1;if(y.key==="Escape"?v=0:y.key==="Enter"&&!this.data.multiLine?v=2:y.key==="Tab"&&(d.commitKey=3),v===-1)return;const{value:_}=y.target;d.lastCommittedValue!==_&&(d.lastCommittedValue=_,d.userValue=_,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:_,willCommit:!0,commitKey:v,selStart:y.target.selectionStart,selEnd:y.target.selectionEnd}}))});const m=f;f=null,a.addEventListener("blur",y=>{if(!d.focused||!y.relatedTarget)return;this.data.actions?.Blur||(d.focused=!1);const{value:v}=y.target;d.userValue=v,d.lastCommittedValue!==v&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:v,willCommit:!0,commitKey:d.commitKey,selStart:y.target.selectionStart,selEnd:y.target.selectionEnd}}),m(y)}),this.data.actions?.Keystroke&&a.addEventListener("beforeinput",y=>{d.lastCommittedValue=null;const{data:v,target:_}=y,{value:S,selectionStart:A,selectionEnd:w}=_;let T=A,M=w;switch(y.inputType){case"deleteWordBackward":{const C=S.substring(0,A).match(/\w*[^\w]*$/);C&&(T-=C[0].length);break}case"deleteWordForward":{const C=S.substring(A).match(/^[^\w]*\w*/);C&&(M+=C[0].length);break}case"deleteContentBackward":A===w&&(T-=1);break;case"deleteContentForward":A===w&&(M+=1);break}y.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:S,change:v||"",willCommit:!1,selStart:T,selEnd:M}})}),this._setEventListeners(a,d,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],y=>y.target.value)}if(f&&a.addEventListener("blur",f),this.data.comb){const y=(this.data.rect[2]-this.data.rect[0])/c;a.classList.add("comb"),a.style.letterSpacing=`calc(${y}px * var(--scale-factor) - 1ch)`}}else a=document.createElement("div"),a.textContent=this.data.fieldValue,a.style.verticalAlign="middle",a.style.display="table-cell",this.data.hasOwnCanvas&&(a.hidden=!0);return this._setTextStyle(a),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class D_ extends ws{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class O_ extends ws{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,n=this.data,a=n.id;let r=t.getValue(a,{value:n.exportValue===n.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",t.setValue(a,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const o=document.createElement("input");return As.add(o),o.setAttribute("data-element-id",a),o.disabled=n.readOnly,this._setRequired(o,this.data.required),o.type="checkbox",o.name=n.fieldName,r&&o.setAttribute("checked",!0),o.setAttribute("exportValue",n.exportValue),o.tabIndex=Br,o.addEventListener("change",c=>{const{name:u,checked:d}=c.target;for(const f of this._getElementsByName(u,a)){const m=d&&f.exportValue===n.exportValue;f.domElement&&(f.domElement.checked=m),t.setValue(f.id,{value:m})}t.setValue(a,{value:d})}),o.addEventListener("resetform",c=>{const u=n.defaultFieldValue||"Off";c.target.checked=u===n.exportValue}),this.enableScripting&&this.hasJSActions&&(o.addEventListener("updatefromsandbox",c=>{const u={value(d){d.target.checked=d.detail.value!=="Off",t.setValue(a,{value:d.target.checked})}};this._dispatchEventFromSandbox(u,c)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class sy extends ws{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,n=this.data,a=n.id;let r=t.getValue(a,{value:n.fieldValue===n.buttonValue}).value;if(typeof r=="string"&&(r=r!==n.buttonValue,t.setValue(a,{value:r})),r)for(const c of this._getElementsByName(n.fieldName,a))t.setValue(c.id,{value:!1});const o=document.createElement("input");if(As.add(o),o.setAttribute("data-element-id",a),o.disabled=n.readOnly,this._setRequired(o,this.data.required),o.type="radio",o.name=n.fieldName,r&&o.setAttribute("checked",!0),o.tabIndex=Br,o.addEventListener("change",c=>{const{name:u,checked:d}=c.target;for(const f of this._getElementsByName(u,a))t.setValue(f.id,{value:!1});t.setValue(a,{value:d})}),o.addEventListener("resetform",c=>{const u=n.defaultFieldValue;c.target.checked=u!=null&&u===n.buttonValue}),this.enableScripting&&this.hasJSActions){const c=n.buttonValue;o.addEventListener("updatefromsandbox",u=>{const d={value:f=>{const m=c===f.detail.value;for(const y of this._getElementsByName(f.target.name)){const v=m&&y.id===a;y.domElement&&(y.domElement.checked=v),t.setValue(y.id,{value:v})}}};this._dispatchEventFromSandbox(d,u)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)}return this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class L_ extends ny{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const n=t.lastChild;return this.enableScripting&&this.hasJSActions&&n&&(this._setDefaultPropertiesFromJS(n),n.addEventListener("updatefromsandbox",a=>{this._dispatchEventFromSandbox({},a)})),t}}class k_ extends ws{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,n=this.data.id,a=t.getValue(n,{value:this.data.fieldValue}),r=document.createElement("select");As.add(r),r.setAttribute("data-element-id",n),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=Br;let o=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",m=>{const y=this.data.defaultFieldValue;for(const v of r.options)v.selected=v.value===y});for(const m of this.data.options){const y=document.createElement("option");y.textContent=m.displayValue,y.value=m.exportValue,a.value.includes(m.exportValue)&&(y.setAttribute("selected",!0),o=!1),r.append(y)}let c=null;if(o){const m=document.createElement("option");m.value=" ",m.setAttribute("hidden",!0),m.setAttribute("selected",!0),r.prepend(m),c=()=>{m.remove(),r.removeEventListener("input",c),c=null},r.addEventListener("input",c)}const u=m=>{const y=m?"value":"textContent",{options:v,multiple:_}=r;return _?Array.prototype.filter.call(v,S=>S.selected).map(S=>S[y]):v.selectedIndex===-1?null:v[v.selectedIndex][y]};let d=u(!1);const f=m=>{const y=m.target.options;return Array.prototype.map.call(y,v=>({displayValue:v.textContent,exportValue:v.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",m=>{const y={value(v){c?.();const _=v.detail.value,S=new Set(Array.isArray(_)?_:[_]);for(const A of r.options)A.selected=S.has(A.value);t.setValue(n,{value:u(!0)}),d=u(!1)},multipleSelection(v){r.multiple=!0},remove(v){const _=r.options,S=v.detail.remove;_[S].selected=!1,r.remove(S),_.length>0&&Array.prototype.findIndex.call(_,w=>w.selected)===-1&&(_[0].selected=!0),t.setValue(n,{value:u(!0),items:f(v)}),d=u(!1)},clear(v){for(;r.length!==0;)r.remove(0);t.setValue(n,{value:null,items:[]}),d=u(!1)},insert(v){const{index:_,displayValue:S,exportValue:A}=v.detail.insert,w=r.children[_],T=document.createElement("option");T.textContent=S,T.value=A,w?w.before(T):r.append(T),t.setValue(n,{value:u(!0),items:f(v)}),d=u(!1)},items(v){const{items:_}=v.detail;for(;r.length!==0;)r.remove(0);for(const S of _){const{displayValue:A,exportValue:w}=S,T=document.createElement("option");T.textContent=A,T.value=w,r.append(T)}r.options.length>0&&(r.options[0].selected=!0),t.setValue(n,{value:u(!0),items:f(v)}),d=u(!1)},indices(v){const _=new Set(v.detail.indices);for(const S of v.target.options)S.selected=_.has(S.index);t.setValue(n,{value:u(!0)}),d=u(!1)},editable(v){v.target.disabled=!v.detail.editable}};this._dispatchEventFromSandbox(y,m)}),r.addEventListener("input",m=>{const y=u(!0),v=u(!1);t.setValue(n,{value:y}),m.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:d,change:v,changeEx:y,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],m=>m.target.value)):r.addEventListener("input",function(m){t.setValue(n,{value:u(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class ph extends Zt{constructor(t){const{data:n,elements:a}=t;super(t,{isRenderable:Zt._hasPopupData(n)}),this.elements=a,this.popup=null}render(){this.container.classList.add("popupAnnotation");const t=this.popup=new N_({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),n=[];for(const a of this.elements)a.popup=t,a.container.ariaHasPopup="dialog",n.push(a.data.id),a.addHighlightArea();return this.container.setAttribute("aria-controls",n.map(a=>`${vh}${a}`).join(",")),this.container}}class N_{#t=this.#P.bind(this);#e=this.#R.bind(this);#i=this.#T.bind(this);#s=this.#A.bind(this);#a=null;#n=null;#o=null;#c=null;#u=null;#l=null;#h=null;#r=!1;#d=null;#g=null;#f=null;#y=null;#m=null;#p=null;#v=!1;constructor({container:t,color:n,elements:a,titleObj:r,modificationDate:o,contentsObj:c,richText:u,parent:d,rect:f,parentRect:m,open:y}){this.#n=t,this.#m=r,this.#o=c,this.#y=u,this.#l=d,this.#a=n,this.#f=f,this.#h=m,this.#u=a,this.#c=Hm.toDateObject(o),this.trigger=a.flatMap(v=>v.getElementsToTriggerPopup());for(const v of this.trigger)v.addEventListener("click",this.#s),v.addEventListener("mouseenter",this.#i),v.addEventListener("mouseleave",this.#e),v.classList.add("popupTriggerArea");for(const v of a)v.container?.addEventListener("keydown",this.#t);this.#n.hidden=!0,y&&this.#A()}render(){if(this.#d)return;const t=this.#d=document.createElement("div");if(t.className="popup",this.#a){const o=t.style.outlineColor=lt.makeHexColor(...this.#a);CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?t.style.backgroundColor=`color-mix(in srgb, ${o} 30%, white)`:t.style.backgroundColor=lt.makeHexColor(...this.#a.map(u=>Math.floor(.7*(255-u)+u)))}const n=document.createElement("span");n.className="header";const a=document.createElement("h1");if(n.append(a),{dir:a.dir,str:a.textContent}=this.#m,t.append(n),this.#c){const o=document.createElement("span");o.classList.add("popupDate"),o.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),o.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#c.valueOf()})),n.append(o)}const r=this.#_;if(r)iy.render({xfaHtml:r,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const o=this._formatContents(this.#o);t.append(o)}this.#n.append(t)}get#_(){const t=this.#y,n=this.#o;return t?.str&&(!n?.str||n.str===t.str)&&this.#y.html||null}get#x(){return this.#_?.attributes?.style?.fontSize||0}get#E(){return this.#_?.attributes?.style?.color||null}#w(t){const n=[],a={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:n}]}},r={style:{color:this.#E,fontSize:this.#x?`calc(${this.#x}px * var(--scale-factor))`:""}};for(const o of t.split(`
`))n.push({name:"span",value:o,attributes:r});return a}_formatContents({str:t,dir:n}){const a=document.createElement("p");a.classList.add("popupContent"),a.dir=n;const r=t.split(/(?:\r\n?|\n)/);for(let o=0,c=r.length;o<c;++o){const u=r[o];a.append(document.createTextNode(u)),o<c-1&&a.append(document.createElement("br"))}return a}#P(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&this.#r)&&this.#A()}updateEdited({rect:t,popupContent:n}){this.#p||={contentsObj:this.#o,richText:this.#y},t&&(this.#g=null),n&&(this.#y=this.#w(n),this.#o=null),this.#d?.remove(),this.#d=null}resetEdited(){this.#p&&({contentsObj:this.#o,richText:this.#y}=this.#p,this.#p=null,this.#d?.remove(),this.#d=null,this.#g=null)}#C(){if(this.#g!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:n,pageHeight:a,pageX:r,pageY:o}}}=this.#l;let c=!!this.#h,u=c?this.#h:this.#f;for(const S of this.#u)if(!u||lt.intersect(S.data.rect,u)!==null){u=S.data.rect,c=!0;break}const d=lt.normalizeRect([u[0],t[3]-u[1]+t[1],u[2],t[3]-u[3]+t[1]]),m=c?u[2]-u[0]+5:0,y=d[0]+m,v=d[1];this.#g=[100*(y-r)/n,100*(v-o)/a];const{style:_}=this.#n;_.left=`${this.#g[0]}%`,_.top=`${this.#g[1]}%`}#A(){this.#r=!this.#r,this.#r?(this.#T(),this.#n.addEventListener("click",this.#s),this.#n.addEventListener("keydown",this.#t)):(this.#R(),this.#n.removeEventListener("click",this.#s),this.#n.removeEventListener("keydown",this.#t))}#T(){this.#d||this.render(),this.isVisible?this.#r&&this.#n.classList.add("focused"):(this.#C(),this.#n.hidden=!1,this.#n.style.zIndex=parseInt(this.#n.style.zIndex)+1e3)}#R(){this.#n.classList.remove("focused"),!(this.#r||!this.isVisible)&&(this.#n.hidden=!0,this.#n.style.zIndex=parseInt(this.#n.style.zIndex)-1e3)}forceHide(){this.#v=this.isVisible,this.#v&&(this.#n.hidden=!0)}maybeShow(){this.#v&&(this.#d||this.#T(),this.#v=!1,this.#n.hidden=!1)}get isVisible(){return this.#n.hidden===!1}}class ay extends Zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=vt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const n of this.textContent){const a=document.createElement("span");a.textContent=n,t.append(a)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class P_ extends Zt{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const t=this.data,{width:n,height:a}=yn(t.rect),r=this.svgFactory.create(n,a,!0),o=this.#t=this.svgFactory.createElement("svg:line");return o.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),o.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),o.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),o.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class j_ extends Zt{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const t=this.data,{width:n,height:a}=yn(t.rect),r=this.svgFactory.create(n,a,!0),o=t.borderStyle.width,c=this.#t=this.svgFactory.createElement("svg:rect");return c.setAttribute("x",o/2),c.setAttribute("y",o/2),c.setAttribute("width",n-o),c.setAttribute("height",a-o),c.setAttribute("stroke-width",o||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),r.append(c),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class F_ extends Zt{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const t=this.data,{width:n,height:a}=yn(t.rect),r=this.svgFactory.create(n,a,!0),o=t.borderStyle.width,c=this.#t=this.svgFactory.createElement("svg:ellipse");return c.setAttribute("cx",n/2),c.setAttribute("cy",a/2),c.setAttribute("rx",n/2-o/2),c.setAttribute("ry",a/2-o/2),c.setAttribute("stroke-width",o||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),r.append(c),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class ry extends Zt{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:n,borderStyle:a,popupRef:r}}=this;if(!n)return this.container;const{width:o,height:c}=yn(t),u=this.svgFactory.create(o,c,!0);let d=[];for(let m=0,y=n.length;m<y;m+=2){const v=n[m]-t[0],_=t[3]-n[m+1];d.push(`${v},${_}`)}d=d.join(" ");const f=this.#t=this.svgFactory.createElement(this.svgElementName);return f.setAttribute("points",d),f.setAttribute("stroke-width",a.width||1),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),u.append(f),this.container.append(u),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class H_ extends ry{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class z_ extends Zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class Lh extends Zt{#t=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?vt.HIGHLIGHT:vt.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,inkLists:n,borderStyle:a,popupRef:r}}=this,{width:o,height:c}=yn(t),u=this.svgFactory.create(o,c,!0);for(const d of n){let f=[];for(let y=0,v=d.length;y<v;y+=2){const _=d[y]-t[0],S=t[3]-d[y+1];f.push(`${_},${S}`)}f=f.join(" ");const m=this.svgFactory.createElement(this.svgElementName);this.#t.push(m),m.setAttribute("points",f),m.setAttribute("stroke-width",a.width||1),m.setAttribute("stroke","transparent"),m.setAttribute("fill","transparent"),u.append(m)}return!r&&this.hasPopupData&&this._createPopup(),this.container.append(u),this._editOnDoubleClick(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class ly extends Zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=vt.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class U_ extends Zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class B_ extends Zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class I_ extends Zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class oy extends Zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=vt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class q_ extends Zt{#t=null;constructor(t){super(t,{isRenderable:!0});const{file:n}=this.data;this.filename=n.filename,this.content=n.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:n}=this;let a;n.hasAppearance||n.fillAlpha===0?a=document.createElement("div"):(a=document.createElement("img"),a.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(a.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),a.addEventListener("dblclick",this.#e.bind(this)),this.#t=a;const{isMac:r}=je.platform;return t.addEventListener("keydown",o=>{o.key==="Enter"&&(r?o.metaKey:o.ctrlKey)&&this.#e()}),!n.popupRef&&this.hasPopupData?this._createPopup():a.classList.add("popupTriggerArea"),t.append(a),t}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}let G_=class{#t=null;#e=null;#i=new Map;#s=null;constructor({div:t,accessibilityManager:n,annotationCanvasMap:a,annotationEditorUIManager:r,page:o,viewport:c,structTreeLayer:u}){this.div=t,this.#t=n,this.#e=a,this.#s=u||null,this.page=o,this.viewport=c,this.zIndex=0,this._annotationEditorUIManager=r}hasEditableAnnotations(){return this.#i.size>0}async#a(t,n){const a=t.firstChild||t,r=a.id=`${vh}${n}`,o=await this.#s?.getAriaAttributes(r);if(o)for(const[c,u]of o)a.setAttribute(c,u);this.div.append(t),this.#t?.moveElementInDOM(this.div,t,a,!1)}async render(t){const{annotations:n}=t,a=this.div;_s(a,this.viewport);const r=new Map,o={data:null,layer:a,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new Oh,annotationStorage:t.annotationStorage||new wh,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const c of n){if(c.noHTML)continue;const u=c.annotationType===re.POPUP;if(u){const m=r.get(c.id);if(!m)continue;o.elements=m}else{const{width:m,height:y}=yn(c.rect);if(m<=0||y<=0)continue}o.data=c;const d=C_.create(o);if(!d.isRenderable)continue;if(!u&&c.popupRef){const m=r.get(c.popupRef);m?m.push(d):r.set(c.popupRef,[d])}const f=d.render();c.hidden&&(f.style.visibility="hidden"),await this.#a(f,c.id),d._isEditable&&(this.#i.set(d.data.id,d),this._annotationEditorUIManager?.renderAnnotationElement(d))}this.#n()}update({viewport:t}){const n=this.div;this.viewport=t,_s(n,{rotation:t.rotation}),this.#n(),n.hidden=!1}#n(){if(!this.#e)return;const t=this.div;for(const[n,a]of this.#e){const r=t.querySelector(`[data-annotation-id="${n}"]`);if(!r)continue;a.className="annotationContent";const{firstChild:o}=r;o?o.nodeName==="CANVAS"?o.replaceWith(a):o.classList.contains("annotationContent")?o.after(a):o.before(a):r.append(a)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#i.values())}getEditableAnnotation(t){return this.#i.get(t)}};const co=/\r\n?|\n/g;class le extends gt{#t;#e="";#i=`${this.id}-editor`;#s=null;#a;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const t=le.prototype,n=o=>o.isEmpty(),a=Xn.TRANSLATE_SMALL,r=Xn.TRANSLATE_BIG;return xt(this,"_keyboardManager",new Ur([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-a,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:n}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[a,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[r,0],checker:n}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-a],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:n}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,a],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,r],checker:n}]]))}static _type="freetext";static _editorType=vt.FREETEXT;constructor(t){super({...t,name:"freeTextEditor"}),this.#t=t.color||le._defaultColor||gt._defaultLineColor,this.#a=t.fontSize||le._defaultFontSize}static initialize(t,n){gt.initialize(t,n);const a=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(a.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,n){switch(t){case pt.FREETEXT_SIZE:le._defaultFontSize=n;break;case pt.FREETEXT_COLOR:le._defaultColor=n;break}}updateParams(t,n){switch(t){case pt.FREETEXT_SIZE:this.#n(n);break;case pt.FREETEXT_COLOR:this.#o(n);break}}static get defaultPropertiesToUpdate(){return[[pt.FREETEXT_SIZE,le._defaultFontSize],[pt.FREETEXT_COLOR,le._defaultColor||gt._defaultLineColor]]}get propertiesToUpdate(){return[[pt.FREETEXT_SIZE,this.#a],[pt.FREETEXT_COLOR,this.#t]]}#n(t){const n=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--scale-factor))`,this.translate(0,-(r-this.#a)*this.parentScale),this.#a=r,this.#u()},a=this.#a;this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:pt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#o(t){const n=r=>{this.#t=this.editorDiv.style.color=r},a=this.#t;this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:pt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,n){this._uiManager.translateSelectedEditors(t,n,!0)}getInitialTranslation(){const t=this.parentScale;return[-le._internalPadding*t,-(le._internalPadding+this.#a)*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(vt.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#s=new AbortController;const t=this._uiManager.combinedSignal(this.#s);this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t})}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#i),this._isDraggable=!0,this.#s?.abort(),this.#s=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#c(){const t=[];this.editorDiv.normalize();let n=null;for(const a of this.editorDiv.childNodes)n?.nodeType===Node.TEXT_NODE&&a.nodeName==="BR"||(t.push(le.#l(a)),n=a);return t.join(`
`)}#u(){const[t,n]=this.parentDimensions;let a;if(this.isAttachedToDOM)a=this.div.getBoundingClientRect();else{const{currentLayer:r,div:o}=this,c=o.style.display,u=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",r.div.append(this.div),a=o.getBoundingClientRect(),o.remove(),o.style.display=c,o.classList.toggle("hidden",u)}this.rotation%180===this.parentRotation%180?(this.width=a.width/t,this.height=a.height/n):(this.width=a.height/t,this.height=a.width/n),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=this.#e,n=this.#e=this.#c().trimEnd();if(t===n)return;const a=r=>{if(this.#e=r,!r){this.remove();return}this.#h(),this._uiManager.rebuild(this),this.#u()};this.addCommands({cmd:()=>{a(n)},undo:()=>{a(t)},mustExec:!1}),this.#u()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(t){this.enterInEditMode()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){le._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let t,n;this.width&&(t=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#i),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:a}=this.editorDiv;if(a.fontSize=`calc(${this.#a}px * var(--scale-factor))`,a.color=this.#t,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),xo(this,this.div,["dblclick","keydown"]),this.width){const[r,o]=this.parentDimensions;if(this.annotationElementId){const{position:c}=this._initialData;let[u,d]=this.getInitialTranslation();[u,d]=this.pageTranslationToScreen(u,d);const[f,m]=this.pageDimensions,[y,v]=this.pageTranslation;let _,S;switch(this.rotation){case 0:_=t+(c[0]-y)/f,S=n+this.height-(c[1]-v)/m;break;case 90:_=t+(c[0]-y)/f,S=n-(c[1]-v)/m,[u,d]=[d,-u];break;case 180:_=t-this.width+(c[0]-y)/f,S=n-(c[1]-v)/m,[u,d]=[-u,-d];break;case 270:_=t+(c[0]-y-this.height*m)/f,S=n+(c[1]-v-this.width*f)/m,[u,d]=[-d,u];break}this.setAt(_*r,S*o,u,d)}else this.setAt(t*r,n*o,this.width*r,this.height*o);this.#h(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#l(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(co,"")}editorDivPaste(t){const n=t.clipboardData||window.clipboardData,{types:a}=n;if(a.length===1&&a[0]==="text/plain")return;t.preventDefault();const r=le.#d(n.getData("text")||"").replaceAll(co,`
`);if(!r)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const c=o.getRangeAt(0);if(!r.includes(`
`)){c.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:u,startOffset:d}=c,f=[],m=[];if(u.nodeType===Node.TEXT_NODE){const _=u.parentElement;if(m.push(u.nodeValue.slice(d).replaceAll(co,"")),_!==this.editorDiv){let S=f;for(const A of this.editorDiv.childNodes){if(A===_){S=m;continue}S.push(le.#l(A))}}f.push(u.nodeValue.slice(0,d).replaceAll(co,""))}else if(u===this.editorDiv){let _=f,S=0;for(const A of this.editorDiv.childNodes)S++===d&&(_=m),_.push(le.#l(A))}this.#e=`${f.join(`
`)}${r}${m.join(`
`)}`,this.#h();const y=new Range;let v=f.reduce((_,S)=>_+S.length,0);for(const{firstChild:_}of this.editorDiv.childNodes)if(_.nodeType===Node.TEXT_NODE){const S=_.nodeValue.length;if(v<=S){y.setStart(_,v),y.setEnd(_,v);break}v-=S}o.removeAllRanges(),o.addRange(y)}#h(){if(this.editorDiv.replaceChildren(),!!this.#e)for(const t of this.#e.split(`
`)){const n=document.createElement("div");n.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(n)}}#r(){return this.#e.replaceAll(""," ")}static#d(t){return t.replaceAll(" ","")}get contentDiv(){return this.editorDiv}static async deserialize(t,n,a){let r=null;if(t instanceof ay){const{data:{defaultAppearanceData:{fontSize:c,fontColor:u},rect:d,rotation:f,id:m,popupRef:y},textContent:v,textPosition:_,parent:{page:{pageNumber:S}}}=t;if(!v||v.length===0)return null;r=t={annotationType:vt.FREETEXT,color:Array.from(u),fontSize:c,value:v.join(`
`),position:_,pageIndex:S-1,rect:d.slice(0),rotation:f,id:m,deleted:!1,popupRef:y}}const o=await super.deserialize(t,n,a);return o.#a=t.fontSize,o.#t=lt.makeHexColor(...t.color),o.#e=le.#d(t.value),o.annotationElementId=t.id||null,o._initialData=r,o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=le._internalPadding*this.parentScale,a=this.getRect(n,n),r=gt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#t),o={annotationType:vt.FREETEXT,color:r,fontSize:this.#a,value:this.#r(),pageIndex:this.pageIndex,rect:a,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?o:this.annotationElementId&&!this.#g(o)?null:(o.id=this.annotationElementId,o)}#g(t){const{value:n,fontSize:a,color:r,pageIndex:o}=this._initialData;return this._hasBeenMoved||t.value!==n||t.fontSize!==a||t.color.some((c,u)=>c!==r[u])||t.pageIndex!==o}renderAnnotationElement(t){const n=super.renderAnnotationElement(t);if(this.deleted)return n;const{style:a}=n;a.fontSize=`calc(${this.#a}px * var(--scale-factor))`,a.color=this.#t,n.replaceChildren();for(const o of this.#e.split(`
`)){const c=document.createElement("div");c.append(o?document.createTextNode(o):document.createElement("br")),n.append(c)}const r=le._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(r,r),popupContent:this.#e}),n}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}}let cy=class{toSVGPath(){zt("Abstract method `toSVGPath` must be implemented.")}get box(){zt("Abstract getter `box` must be implemented.")}serialize(t,n){zt("Abstract method `serialize` must be implemented.")}get classNamesForDrawing(){zt("Abstract getter `classNamesForDrawing` must be implemented.")}get classNamesForOutlining(){zt("Abstract getter `classNamesForOutlining` must be implemented.")}get mustRemoveSelfIntersections(){return!1}};class ys{#t;#e=[];#i;#s;#a=[];#n=new Float64Array(18);#o;#c;#u;#l;#h;#r;#d=[];static#g=8;static#f=2;static#y=ys.#g+ys.#f;constructor({x:t,y:n},a,r,o,c,u=0){this.#t=a,this.#r=o*r,this.#s=c,this.#n.set([NaN,NaN,NaN,NaN,t,n],6),this.#i=u,this.#l=ys.#g*r,this.#u=ys.#y*r,this.#h=r,this.#d.push(t,n)}isEmpty(){return isNaN(this.#n[8])}#m(){const t=this.#n.subarray(4,6),n=this.#n.subarray(16,18),[a,r,o,c]=this.#t;return[(this.#o+(t[0]-n[0])/2-a)/o,(this.#c+(t[1]-n[1])/2-r)/c,(this.#o+(n[0]-t[0])/2-a)/o,(this.#c+(n[1]-t[1])/2-r)/c]}add({x:t,y:n}){this.#o=t,this.#c=n;const[a,r,o,c]=this.#t;let[u,d,f,m]=this.#n.subarray(8,12);const y=t-f,v=n-m,_=Math.hypot(y,v);if(_<this.#u)return!1;const S=_-this.#l,A=S/_,w=A*y,T=A*v;let M=u,C=d;u=f,d=m,f+=w,m+=T,this.#d?.push(t,n);const O=-T/S,N=w/S,U=O*this.#r,q=N*this.#r;return this.#n.set(this.#n.subarray(2,8),0),this.#n.set([f+U,m+q],4),this.#n.set(this.#n.subarray(14,18),12),this.#n.set([f-U,m-q],16),isNaN(this.#n[6])?(this.#a.length===0&&(this.#n.set([u+U,d+q],2),this.#a.push(NaN,NaN,NaN,NaN,(u+U-a)/o,(d+q-r)/c),this.#n.set([u-U,d-q],14),this.#e.push(NaN,NaN,NaN,NaN,(u-U-a)/o,(d-q-r)/c)),this.#n.set([M,C,u,d,f,m],6),!this.isEmpty()):(this.#n.set([M,C,u,d,f,m],6),Math.abs(Math.atan2(C-d,M-u)-Math.atan2(T,w))<Math.PI/2?([u,d,f,m]=this.#n.subarray(2,6),this.#a.push(NaN,NaN,NaN,NaN,((u+f)/2-a)/o,((d+m)/2-r)/c),[u,d,M,C]=this.#n.subarray(14,18),this.#e.push(NaN,NaN,NaN,NaN,((M+u)/2-a)/o,((C+d)/2-r)/c),!0):([M,C,u,d,f,m]=this.#n.subarray(0,6),this.#a.push(((M+5*u)/6-a)/o,((C+5*d)/6-r)/c,((5*u+f)/6-a)/o,((5*d+m)/6-r)/c,((u+f)/2-a)/o,((d+m)/2-r)/c),[f,m,u,d,M,C]=this.#n.subarray(12,18),this.#e.push(((M+5*u)/6-a)/o,((C+5*d)/6-r)/c,((5*u+f)/6-a)/o,((5*d+m)/6-r)/c,((u+f)/2-a)/o,((d+m)/2-r)/c),!0))}toSVGPath(){if(this.isEmpty())return"";const t=this.#a,n=this.#e;if(isNaN(this.#n[6])&&!this.isEmpty())return this.#p();const a=[];a.push(`M${t[4]} ${t[5]}`);for(let r=6;r<t.length;r+=6)isNaN(t[r])?a.push(`L${t[r+4]} ${t[r+5]}`):a.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);this.#_(a);for(let r=n.length-6;r>=6;r-=6)isNaN(n[r])?a.push(`L${n[r+4]} ${n[r+5]}`):a.push(`C${n[r]} ${n[r+1]} ${n[r+2]} ${n[r+3]} ${n[r+4]} ${n[r+5]}`);return this.#v(a),a.join(" ")}#p(){const[t,n,a,r]=this.#t,[o,c,u,d]=this.#m();return`M${(this.#n[2]-t)/a} ${(this.#n[3]-n)/r} L${(this.#n[4]-t)/a} ${(this.#n[5]-n)/r} L${o} ${c} L${u} ${d} L${(this.#n[16]-t)/a} ${(this.#n[17]-n)/r} L${(this.#n[14]-t)/a} ${(this.#n[15]-n)/r} Z`}#v(t){const n=this.#e;t.push(`L${n[4]} ${n[5]} Z`)}#_(t){const[n,a,r,o]=this.#t,c=this.#n.subarray(4,6),u=this.#n.subarray(16,18),[d,f,m,y]=this.#m();t.push(`L${(c[0]-n)/r} ${(c[1]-a)/o} L${d} ${f} L${m} ${y} L${(u[0]-n)/r} ${(u[1]-a)/o}`)}newFreeDrawOutline(t,n,a,r,o,c){return new uy(t,n,a,r,o,c)}getOutlines(){const t=this.#a,n=this.#e,a=this.#n,[r,o,c,u]=this.#t,d=new Float64Array((this.#d?.length??0)+2);for(let y=0,v=d.length-2;y<v;y+=2)d[y]=(this.#d[y]-r)/c,d[y+1]=(this.#d[y+1]-o)/u;if(d[d.length-2]=(this.#o-r)/c,d[d.length-1]=(this.#c-o)/u,isNaN(a[6])&&!this.isEmpty())return this.#x(d);const f=new Float64Array(this.#a.length+24+this.#e.length);let m=t.length;for(let y=0;y<m;y+=2){if(isNaN(t[y])){f[y]=f[y+1]=NaN;continue}f[y]=t[y],f[y+1]=t[y+1]}m=this.#w(f,m);for(let y=n.length-6;y>=6;y-=6)for(let v=0;v<6;v+=2){if(isNaN(n[y+v])){f[m]=f[m+1]=NaN,m+=2;continue}f[m]=n[y+v],f[m+1]=n[y+v+1],m+=2}return this.#E(f,m),this.newFreeDrawOutline(f,d,this.#t,this.#h,this.#i,this.#s)}#x(t){const n=this.#n,[a,r,o,c]=this.#t,[u,d,f,m]=this.#m(),y=new Float64Array(36);return y.set([NaN,NaN,NaN,NaN,(n[2]-a)/o,(n[3]-r)/c,NaN,NaN,NaN,NaN,(n[4]-a)/o,(n[5]-r)/c,NaN,NaN,NaN,NaN,u,d,NaN,NaN,NaN,NaN,f,m,NaN,NaN,NaN,NaN,(n[16]-a)/o,(n[17]-r)/c,NaN,NaN,NaN,NaN,(n[14]-a)/o,(n[15]-r)/c],0),this.newFreeDrawOutline(y,t,this.#t,this.#h,this.#i,this.#s)}#E(t,n){const a=this.#e;return t.set([NaN,NaN,NaN,NaN,a[4],a[5]],n),n+=6}#w(t,n){const a=this.#n.subarray(4,6),r=this.#n.subarray(16,18),[o,c,u,d]=this.#t,[f,m,y,v]=this.#m();return t.set([NaN,NaN,NaN,NaN,(a[0]-o)/u,(a[1]-c)/d,NaN,NaN,NaN,NaN,f,m,NaN,NaN,NaN,NaN,y,v,NaN,NaN,NaN,NaN,(r[0]-o)/u,(r[1]-c)/d],n),n+=24}}class uy extends cy{#t;#e=null;#i;#s;#a;#n;#o;constructor(t,n,a,r,o,c){super(),this.#o=t,this.#a=n,this.#t=a,this.#n=r,this.#i=o,this.#s=c,this.#l(c);const{x:u,y:d,width:f,height:m}=this.#e;for(let y=0,v=t.length;y<v;y+=2)t[y]=(t[y]-u)/f,t[y+1]=(t[y+1]-d)/m;for(let y=0,v=n.length;y<v;y+=2)n[y]=(n[y]-u)/f,n[y+1]=(n[y+1]-d)/m}toSVGPath(){const t=[`M${this.#o[4]} ${this.#o[5]}`];for(let n=6,a=this.#o.length;n<a;n+=6){if(isNaN(this.#o[n])){t.push(`L${this.#o[n+4]} ${this.#o[n+5]}`);continue}t.push(`C${this.#o[n]} ${this.#o[n+1]} ${this.#o[n+2]} ${this.#o[n+3]} ${this.#o[n+4]} ${this.#o[n+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,n,a,r],o){const c=a-t,u=r-n;let d,f;switch(o){case 0:d=this.#c(this.#o,t,r,c,-u),f=this.#c(this.#a,t,r,c,-u);break;case 90:d=this.#u(this.#o,t,n,c,u),f=this.#u(this.#a,t,n,c,u);break;case 180:d=this.#c(this.#o,a,n,-c,u),f=this.#c(this.#a,a,n,-c,u);break;case 270:d=this.#u(this.#o,a,r,-c,-u),f=this.#u(this.#a,a,r,-c,-u);break}return{outline:Array.from(d),points:[Array.from(f)]}}#c(t,n,a,r,o){const c=new Float64Array(t.length);for(let u=0,d=t.length;u<d;u+=2)c[u]=n+t[u]*r,c[u+1]=a+t[u+1]*o;return c}#u(t,n,a,r,o){const c=new Float64Array(t.length);for(let u=0,d=t.length;u<d;u+=2)c[u]=n+t[u+1]*r,c[u+1]=a+t[u]*o;return c}#l(t){const n=this.#o;let a=n[4],r=n[5],o=a,c=r,u=a,d=r,f=a,m=r;const y=t?Math.max:Math.min;for(let w=6,T=n.length;w<T;w+=6){if(isNaN(n[w]))o=Math.min(o,n[w+4]),c=Math.min(c,n[w+5]),u=Math.max(u,n[w+4]),d=Math.max(d,n[w+5]),m<n[w+5]?(f=n[w+4],m=n[w+5]):m===n[w+5]&&(f=y(f,n[w+4]));else{const M=lt.bezierBoundingBox(a,r,...n.slice(w,w+6));o=Math.min(o,M[0]),c=Math.min(c,M[1]),u=Math.max(u,M[2]),d=Math.max(d,M[3]),m<M[3]?(f=M[2],m=M[3]):m===M[3]&&(f=y(f,M[2]))}a=n[w+4],r=n[w+5]}const v=o-this.#i,_=c-this.#i,S=u-o+2*this.#i,A=d-c+2*this.#i;this.#e={x:v,y:_,width:S,height:A,lastPoint:[f,m]}}get box(){return this.#e}newOutliner(t,n,a,r,o,c=0){return new ys(t,n,a,r,o,c)}getNewOutline(t,n){const{x:a,y:r,width:o,height:c}=this.#e,[u,d,f,m]=this.#t,y=o*f,v=c*m,_=a*f+u,S=r*m+d,A=this.newOutliner({x:this.#a[0]*y+_,y:this.#a[1]*v+S},this.#t,this.#n,t,this.#s,n??this.#i);for(let w=2;w<this.#a.length;w+=2)A.add({x:this.#a[w]*y+_,y:this.#a[w+1]*v+S});return A.getOutlines()}get mustRemoveSelfIntersections(){return!0}}class Jp{#t;#e=[];#i=[];constructor(t,n=0,a=0,r=!0){let o=1/0,c=-1/0,u=1/0,d=-1/0;const f=10**-4;for(const{x:w,y:T,width:M,height:C}of t){const O=Math.floor((w-n)/f)*f,N=Math.ceil((w+M+n)/f)*f,U=Math.floor((T-n)/f)*f,q=Math.ceil((T+C+n)/f)*f,Q=[O,U,q,!0],B=[N,U,q,!1];this.#e.push(Q,B),o=Math.min(o,O),c=Math.max(c,N),u=Math.min(u,U),d=Math.max(d,q)}const m=c-o+2*a,y=d-u+2*a,v=o-a,_=u-a,S=this.#e.at(r?-1:-2),A=[S[0],S[2]];for(const w of this.#e){const[T,M,C]=w;w[0]=(T-v)/m,w[1]=(M-_)/y,w[2]=(C-_)/y}this.#t={x:v,y:_,width:m,height:y,lastPoint:A}}getOutlines(){this.#e.sort((n,a)=>n[0]-a[0]||n[1]-a[1]||n[2]-a[2]);const t=[];for(const n of this.#e)n[3]?(t.push(...this.#c(n)),this.#n(n)):(this.#o(n),t.push(...this.#c(n)));return this.#s(t)}#s(t){const n=[],a=new Set;for(const c of t){const[u,d,f]=c;n.push([u,d,c],[u,f,c])}n.sort((c,u)=>c[1]-u[1]||c[0]-u[0]);for(let c=0,u=n.length;c<u;c+=2){const d=n[c][2],f=n[c+1][2];d.push(f),f.push(d),a.add(d),a.add(f)}const r=[];let o;for(;a.size>0;){const c=a.values().next().value;let[u,d,f,m,y]=c;a.delete(c);let v=u,_=d;for(o=[u,f],r.push(o);;){let S;if(a.has(m))S=m;else if(a.has(y))S=y;else break;a.delete(S),[u,d,f,m,y]=S,v!==u&&(o.push(v,_,u,_===d?d:f),v=u),_=_===d?f:d}o.push(v,_)}return new V_(r,this.#t)}#a(t){const n=this.#i;let a=0,r=n.length-1;for(;a<=r;){const o=a+r>>1,c=n[o][0];if(c===t)return o;c<t?a=o+1:r=o-1}return r+1}#n([,t,n]){const a=this.#a(t);this.#i.splice(a,0,[t,n])}#o([,t,n]){const a=this.#a(t);for(let r=a;r<this.#i.length;r++){const[o,c]=this.#i[r];if(o!==t)break;if(o===t&&c===n){this.#i.splice(r,1);return}}for(let r=a-1;r>=0;r--){const[o,c]=this.#i[r];if(o!==t)break;if(o===t&&c===n){this.#i.splice(r,1);return}}}#c(t){const[n,a,r]=t,o=[[n,a,r]],c=this.#a(r);for(let u=0;u<c;u++){const[d,f]=this.#i[u];for(let m=0,y=o.length;m<y;m++){const[,v,_]=o[m];if(!(f<=v||_<=d)){if(v>=d){if(_>f)o[m][1]=f;else{if(y===1)return[];o.splice(m,1),m--,y--}continue}o[m][2]=d,_>f&&o.push([n,f,_])}}}return o}}class V_ extends cy{#t;#e;constructor(t,n){super(),this.#e=t,this.#t=n}toSVGPath(){const t=[];for(const n of this.#e){let[a,r]=n;t.push(`M${a} ${r}`);for(let o=2;o<n.length;o+=2){const c=n[o],u=n[o+1];c===a?(t.push(`V${u}`),r=u):u===r&&(t.push(`H${c}`),a=c)}t.push("Z")}return t.join(" ")}serialize([t,n,a,r],o){const c=[],u=a-t,d=r-n;for(const f of this.#e){const m=new Array(f.length);for(let y=0;y<f.length;y+=2)m[y]=t+f[y]*u,m[y+1]=r-f[y+1]*d;c.push(m)}return c}get box(){return this.#t}get classNamesForDrawing(){return["highlight"]}get classNamesForOutlining(){return["highlightOutline"]}}class mh extends ys{newFreeDrawOutline(t,n,a,r,o,c){return new X_(t,n,a,r,o,c)}get classNamesForDrawing(){return["highlight","free"]}}class X_ extends uy{get classNamesForDrawing(){return["highlight","free"]}get classNamesForOutlining(){return["highlightOutline","free"]}newOutliner(t,n,a,r,o,c=0){return new mh(t,n,a,r,o,c)}}class Si{#t=null;#e=null;#i;#s=null;#a=!1;#n=!1;#o=null;#c;#u=null;#l=null;#h;static#r=null;static get _keyboardManager(){return xt(this,"_keyboardManager",new Ur([[["Escape","mac+Escape"],Si.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Si.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Si.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Si.prototype._moveToPrevious],[["Home","mac+Home"],Si.prototype._moveToBeginning],[["End","mac+End"],Si.prototype._moveToEnd]]))}constructor({editor:t=null,uiManager:n=null}){t?(this.#n=!1,this.#h=pt.HIGHLIGHT_COLOR,this.#o=t):(this.#n=!0,this.#h=pt.HIGHLIGHT_DEFAULT_COLOR),this.#l=t?._uiManager||n,this.#c=this.#l._eventBus,this.#i=t?.color||this.#l?.highlightColors.values().next().value||"#FFFF98",Si.#r||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const t=this.#t=document.createElement("button");t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.setAttribute("aria-haspopup",!0);const n=this.#l._signal;t.addEventListener("click",this.#y.bind(this),{signal:n}),t.addEventListener("keydown",this.#f.bind(this),{signal:n});const a=this.#e=document.createElement("span");return a.className="swatch",a.setAttribute("aria-hidden",!0),a.style.backgroundColor=this.#i,t.append(a),t}renderMainDropdown(){const t=this.#s=this.#d();return t.setAttribute("aria-orientation","horizontal"),t.setAttribute("aria-labelledby","highlightColorPickerLabel"),t}#d(){const t=document.createElement("div"),n=this.#l._signal;t.addEventListener("contextmenu",Ei,{signal:n}),t.className="dropdown",t.role="listbox",t.setAttribute("aria-multiselectable",!1),t.setAttribute("aria-orientation","vertical"),t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[a,r]of this.#l.highlightColors){const o=document.createElement("button");o.tabIndex="0",o.role="option",o.setAttribute("data-color",r),o.title=a,o.setAttribute("data-l10n-id",Si.#r[a]);const c=document.createElement("span");o.append(c),c.className="swatch",c.style.backgroundColor=r,o.setAttribute("aria-selected",r===this.#i),o.addEventListener("click",this.#g.bind(this,r),{signal:n}),t.append(o)}return t.addEventListener("keydown",this.#f.bind(this),{signal:n}),t}#g(t,n){n.stopPropagation(),this.#c.dispatch("switchannotationeditorparams",{source:this,type:this.#h,value:t})}_colorSelectFromKeyboard(t){if(t.target===this.#t){this.#y(t);return}const n=t.target.getAttribute("data-color");n&&this.#g(n,t)}_moveToNext(t){if(!this.#p){this.#y(t);return}if(t.target===this.#t){this.#s.firstChild?.focus();return}t.target.nextSibling?.focus()}_moveToPrevious(t){if(t.target===this.#s?.firstChild||t.target===this.#t){this.#p&&this._hideDropdownFromKeyboard();return}this.#p||this.#y(t),t.target.previousSibling?.focus()}_moveToBeginning(t){if(!this.#p){this.#y(t);return}this.#s.firstChild?.focus()}_moveToEnd(t){if(!this.#p){this.#y(t);return}this.#s.lastChild?.focus()}#f(t){Si._keyboardManager.exec(this,t)}#y(t){if(this.#p){this.hideDropdown();return}if(this.#a=t.detail===0,this.#u||(this.#u=new AbortController,window.addEventListener("pointerdown",this.#m.bind(this),{signal:this.#l.combinedSignal(this.#u)})),this.#s){this.#s.classList.remove("hidden");return}const n=this.#s=this.#d();this.#t.append(n)}#m(t){this.#s?.contains(t.target)||this.hideDropdown()}hideDropdown(){this.#s?.classList.add("hidden"),this.#u?.abort(),this.#u=null}get#p(){return this.#s&&!this.#s.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#n){if(!this.#p){this.#o?.unselect();return}this.hideDropdown(),this.#t.focus({preventScroll:!0,focusVisible:this.#a})}}updateColor(t){if(this.#e&&(this.#e.style.backgroundColor=t),!this.#s)return;const n=this.#l.highlightColors.values();for(const a of this.#s.children)a.setAttribute("aria-selected",n.next().value===t)}destroy(){this.#t?.remove(),this.#t=null,this.#e=null,this.#s?.remove(),this.#s=null}}class Wt extends gt{#t=null;#e=0;#i;#s=null;#a=null;#n=null;#o=null;#c=0;#u=null;#l=null;#h=null;#r=!1;#d=null;#g;#f=null;#y="";#m;#p="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=vt.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const t=Wt.prototype;return xt(this,"_keyboardManager",new Ur([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super({...t,name:"highlightEditor"}),this.color=t.color||Wt._defaultColor,this.#m=t.thickness||Wt._defaultThickness,this.#g=t.opacity||Wt._defaultOpacity,this.#i=t.boxes||null,this.#p=t.methodOfCreation||"",this.#y=t.text||"",this._isDraggable=!1,t.highlightId>-1?(this.#r=!0,this.#_(t),this.#C()):this.#i&&(this.#t=t.anchorNode,this.#e=t.anchorOffset,this.#o=t.focusNode,this.#c=t.focusOffset,this.#v(),this.#C(),this.rotate(this.rotation))}get telemetryInitialData(){return{action:"added",type:this.#r?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:this.#m,methodOfCreation:this.#p}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}#v(){const t=new Jp(this.#i,.001);this.#l=t.getOutlines(),{x:this.x,y:this.y,width:this.width,height:this.height}=this.#l.box;const n=new Jp(this.#i,.0025,.001,this._uiManager.direction==="ltr");this.#n=n.getOutlines();const{lastPoint:a}=this.#n.box;this.#d=[(a[0]-this.x)/this.width,(a[1]-this.y)/this.height]}#_({highlightOutlines:t,highlightId:n,clipPathId:a}){this.#l=t;const r=1.5;if(this.#n=t.getNewOutline(this.#m/2+r,.0025),n>=0)this.#h=n,this.#s=a,this.parent.drawLayer.finalizeLine(n,t),this.#f=this.parent.drawLayer.drawOutline(this.#n);else if(this.parent){const m=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(this.#h,t),this.parent.drawLayer.updateBox(this.#h,Wt.#A(this.#l.box,(m-this.rotation+360)%360)),this.parent.drawLayer.updateLine(this.#f,this.#n),this.parent.drawLayer.updateBox(this.#f,Wt.#A(this.#n.box,m))}const{x:o,y:c,width:u,height:d}=t.box;switch(this.rotation){case 0:this.x=o,this.y=c,this.width=u,this.height=d;break;case 90:{const[m,y]=this.parentDimensions;this.x=c,this.y=1-o,this.width=u*y/m,this.height=d*m/y;break}case 180:this.x=1-o,this.y=1-c,this.width=u,this.height=d;break;case 270:{const[m,y]=this.parentDimensions;this.x=1-c,this.y=o,this.width=u*y/m,this.height=d*m/y;break}}const{lastPoint:f}=this.#n.box;this.#d=[(f[0]-o)/u,(f[1]-c)/d]}static initialize(t,n){gt.initialize(t,n),Wt._defaultColor||=n.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(t,n){switch(t){case pt.HIGHLIGHT_DEFAULT_COLOR:Wt._defaultColor=n;break;case pt.HIGHLIGHT_THICKNESS:Wt._defaultThickness=n;break}}translateInPage(t,n){}get toolbarPosition(){return this.#d}updateParams(t,n){switch(t){case pt.HIGHLIGHT_COLOR:this.#x(n);break;case pt.HIGHLIGHT_THICKNESS:this.#E(n);break}}static get defaultPropertiesToUpdate(){return[[pt.HIGHLIGHT_DEFAULT_COLOR,Wt._defaultColor],[pt.HIGHLIGHT_THICKNESS,Wt._defaultThickness]]}get propertiesToUpdate(){return[[pt.HIGHLIGHT_COLOR,this.color||Wt._defaultColor],[pt.HIGHLIGHT_THICKNESS,this.#m||Wt._defaultThickness],[pt.HIGHLIGHT_FREE,this.#r]]}#x(t){const n=(o,c)=>{this.color=o,this.parent?.drawLayer.changeColor(this.#h,o),this.#a?.updateColor(o),this.#g=c,this.parent?.drawLayer.changeOpacity(this.#h,c)},a=this.color,r=this.#g;this.addCommands({cmd:n.bind(this,t,Wt._defaultOpacity),undo:n.bind(this,a,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:pt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)}#E(t){const n=this.#m,a=r=>{this.#m=r,this.#w(r)};this.addCommands({cmd:a.bind(this,t),undo:a.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:pt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}async addEditToolbar(){const t=await super.addEditToolbar();return t?(this._uiManager.highlightColors&&(this.#a=new Si({editor:this}),t.addColorPicker(this.#a)),t):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#M())}getBaseTranslation(){return[0,0]}getRect(t,n){return super.getRect(t,n,this.#M())}onceAdded(){this.annotationElementId||this.parent.addUndoableEditor(this),this.div.focus()}remove(){this.#P(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#C(),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let n=!1;this.parent&&!t?this.#P():t&&(this.#C(t),n=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),n&&this.select()}#w(t){if(!this.#r)return;this.#_({highlightOutlines:this.#l.getNewOutline(t/2)}),this.fixAndSetPosition();const[n,a]=this.parentDimensions;this.setDims(this.width*n,this.height*a)}#P(){this.#h===null||!this.parent||(this.parent.drawLayer.remove(this.#h),this.#h=null,this.parent.drawLayer.remove(this.#f),this.#f=null)}#C(t=this.parent){this.#h===null&&({id:this.#h,clipPathId:this.#s}=t.drawLayer.draw(this.#l,this.color,this.#g),this.#f=t.drawLayer.drawOutline(this.#n),this.#u&&(this.#u.style.clipPath=this.#s))}static#A({x:t,y:n,width:a,height:r},o){switch(o){case 90:return{x:1-n-r,y:t,width:r,height:a};case 180:return{x:1-t-a,y:1-n-r,width:a,height:r};case 270:return{x:n,y:1-t-a,width:r,height:a}}return{x:t,y:n,width:a,height:r}}rotate(t){const{drawLayer:n}=this.parent;let a;this.#r?(t=(t-this.rotation+360)%360,a=Wt.#A(this.#l.box,t)):a=Wt.#A(this,t),n.rotate(this.#h,t),n.rotate(this.#f,t),n.updateBox(this.#h,a),n.updateBox(this.#f,Wt.#A(this.#n.box,t))}render(){if(this.div)return this.div;const t=super.render();this.#y&&(t.setAttribute("aria-label",this.#y),t.setAttribute("role","mark")),this.#r?t.classList.add("free"):this.div.addEventListener("keydown",this.#T.bind(this),{signal:this._uiManager._signal});const n=this.#u=document.createElement("div");t.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=this.#s;const[a,r]=this.parentDimensions;return this.setDims(this.width*a,this.height*r),xo(this,this.#u,["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent.drawLayer.addClass(this.#f,"hovered")}pointerleave(){this.isSelected||this.parent.drawLayer.removeClass(this.#f,"hovered")}#T(t){Wt._keyboardManager.exec(this,t)}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:this.#R(!0);break;case 1:case 3:this.#R(!1);break}}#R(t){if(!this.#t)return;const n=window.getSelection();t?n.setPosition(this.#t,this.#e):n.setPosition(this.#o,this.#c)}select(){super.select(),this.#f&&(this.parent?.drawLayer.removeClass(this.#f,"hovered"),this.parent?.drawLayer.addClass(this.#f,"selected"))}unselect(){super.unselect(),this.#f&&(this.parent?.drawLayer.removeClass(this.#f,"selected"),this.#r||this.#R(!1))}get _mustFixPosition(){return!this.#r}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.show(this.#h,t),this.parent.drawLayer.show(this.#f,t))}#M(){return this.#r?this.rotation:0}#L(){if(this.#r)return null;const[t,n]=this.pageDimensions,[a,r]=this.pageTranslation,o=this.#i,c=new Float32Array(o.length*8);let u=0;for(const{x:d,y:f,width:m,height:y}of o){const v=d*t+a,_=(1-f-y)*n+r;c[u]=c[u+4]=v,c[u+1]=c[u+3]=_,c[u+2]=c[u+6]=v+m*t,c[u+5]=c[u+7]=_+y*n,u+=8}return c}#S(t){return this.#l.serialize(t,this.#M())}static startHighlighting(t,n,{target:a,x:r,y:o}){const{x:c,y:u,width:d,height:f}=a.getBoundingClientRect(),m=new AbortController,y=t.combinedSignal(m),v=S=>{S.preventDefault(),S.stopPropagation()},_=S=>{m.abort(),this.#k(t,S)};window.addEventListener("blur",_,{signal:y}),window.addEventListener("pointerup",_,{signal:y}),window.addEventListener("pointerdown",v,{capture:!0,passive:!1,signal:y}),window.addEventListener("contextmenu",Ei,{signal:y}),a.addEventListener("pointermove",this.#b.bind(this,t),{signal:y}),this._freeHighlight=new mh({x:r,y:o},[c,u,d,f],t.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0)}static#b(t,n){this._freeHighlight.add(n)&&t.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)}static#k(t,n){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(t,n,a){let r=null;if(t instanceof ly){const{data:{quadPoints:S,rect:A,rotation:w,id:T,color:M,opacity:C,popupRef:O},parent:{page:{pageNumber:N}}}=t;r=t={annotationType:vt.HIGHLIGHT,color:Array.from(M),opacity:C,quadPoints:S,boxes:null,pageIndex:N-1,rect:A.slice(0),rotation:w,id:T,deleted:!1,popupRef:O}}else if(t instanceof Lh){const{data:{inkLists:S,rect:A,rotation:w,id:T,color:M,borderStyle:{rawWidth:C},popupRef:O},parent:{page:{pageNumber:N}}}=t;r=t={annotationType:vt.HIGHLIGHT,color:Array.from(M),thickness:C,inkLists:S,boxes:null,pageIndex:N-1,rect:A.slice(0),rotation:w,id:T,deleted:!1,popupRef:O}}const{color:o,quadPoints:c,inkLists:u,opacity:d}=t,f=await super.deserialize(t,n,a);f.color=lt.makeHexColor(...o),f.#g=d||1,u&&(f.#m=t.thickness),f.annotationElementId=t.id||null,f._initialData=r;const[m,y]=f.pageDimensions,[v,_]=f.pageTranslation;if(c){const S=f.#i=[];for(let A=0;A<c.length;A+=8)S.push({x:(c[A]-v)/m,y:1-(c[A+1]-_)/y,width:(c[A+2]-c[A])/m,height:(c[A+1]-c[A+5])/y});f.#v(),f.#C(),f.rotate(f.rotation)}else if(u){f.#r=!0;const S=u[0],A={x:S[0]-v,y:y-(S[1]-_)},w=new mh(A,[0,0,m,y],1,f.#m/2,!0,.001);for(let C=0,O=S.length;C<O;C+=2)A.x=S[C]-v,A.y=y-(S[C+1]-_),w.add(A);const{id:T,clipPathId:M}=n.drawLayer.draw(w,f.color,f._defaultOpacity,!0);f.#_({highlightOutlines:w.getOutlines(),highlightId:T,clipPathId:M}),f.#C()}return f}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const n=this.getRect(0,0),a=gt._colorManager.convert(this.color),r={annotationType:vt.HIGHLIGHT,color:a,opacity:this.#g,thickness:this.#m,quadPoints:this.#L(),outlines:this.#S(n),pageIndex:this.pageIndex,rect:n,rotation:this.#M(),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!this.#N(r)?null:(r.id=this.annotationElementId,r)}#N(t){const{color:n}=this._initialData;return t.color.some((a,r)=>a!==n[r])}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}class Ae extends gt{#t=0;#e=0;#i=null;#s=new Path2D;#a=!1;#n=null;#o=!1;#c=!1;#u=null;#l=null;#h=0;#r=0;#d=null;static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=1;static _type="ink";static _editorType=vt.INK;constructor(t){super({...t,name:"inkEditor"}),this.color=t.color||null,this.thickness=t.thickness||null,this.opacity=t.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(t,n){gt.initialize(t,n)}static updateDefaultParams(t,n){switch(t){case pt.INK_THICKNESS:Ae._defaultThickness=n;break;case pt.INK_COLOR:Ae._defaultColor=n;break;case pt.INK_OPACITY:Ae._defaultOpacity=n/100;break}}updateParams(t,n){switch(t){case pt.INK_THICKNESS:this.#g(n);break;case pt.INK_COLOR:this.#f(n);break;case pt.INK_OPACITY:this.#y(n);break}}static get defaultPropertiesToUpdate(){return[[pt.INK_THICKNESS,Ae._defaultThickness],[pt.INK_COLOR,Ae._defaultColor||gt._defaultLineColor],[pt.INK_OPACITY,Math.round(Ae._defaultOpacity*100)]]}get propertiesToUpdate(){return[[pt.INK_THICKNESS,this.thickness||Ae._defaultThickness],[pt.INK_COLOR,this.color||Ae._defaultColor||gt._defaultLineColor],[pt.INK_OPACITY,Math.round(100*(this.opacity??Ae._defaultOpacity))]]}#g(t){const n=r=>{this.thickness=r,this.#D()},a=this.thickness;this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:pt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}#f(t){const n=r=>{this.color=r,this.#A()},a=this.color;this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:pt.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}#y(t){const n=r=>{this.opacity=r,this.#A()};t/=100;const a=this.opacity;this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:pt.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(this.#L(),this.#S()),this.isAttachedToDOM||(this.parent.add(this),this.#b()),this.#D()))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,this.#i&&(clearTimeout(this.#i),this.#i=null),this.#u?.disconnect(),this.#u=null,super.remove())}setParent(t){!this.parent&&t?this._uiManager.removeShouldRescale(this):this.parent&&t===null&&this._uiManager.addShouldRescale(this),super.setParent(t)}onScaleChanging(){const[t,n]=this.parentDimensions,a=this.width*t,r=this.height*n;this.setDimensions(a,r)}enableEditMode(){this.#a||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.#T())}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.#R())}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}#m(){const{parentRotation:t,parentDimensions:[n,a]}=this;switch(t){case 90:return[0,a,a,n];case 180:return[n,a,n,a];case 270:return[n,0,a,n];default:return[0,0,n,a]}}#p(){const{ctx:t,color:n,opacity:a,thickness:r,parentScale:o,scaleFactor:c}=this;t.lineWidth=r*o/c,t.lineCap="round",t.lineJoin="round",t.miterLimit=10,t.strokeStyle=`${n}${g0(a)}`}#v(t,n){this.canvas.addEventListener("contextmenu",Ei,{signal:this._uiManager._signal}),this.#R(),this.#n=new AbortController;const a=this._uiManager.combinedSignal(this.#n);this.canvas.addEventListener("pointerleave",this.canvasPointerleave.bind(this),{signal:a}),this.canvas.addEventListener("pointermove",this.canvasPointermove.bind(this),{signal:a}),this.canvas.addEventListener("pointerup",this.canvasPointerup.bind(this),{signal:a}),this.isEditing=!0,this.#c||(this.#c=!0,this.#b(),this.thickness||=Ae._defaultThickness,this.color||=Ae._defaultColor||gt._defaultLineColor,this.opacity??=Ae._defaultOpacity),this.currentPath.push([t,n]),this.#o=!1,this.#p(),this.#d=()=>{this.#w(),this.#d&&window.requestAnimationFrame(this.#d)},window.requestAnimationFrame(this.#d)}#_(t,n){const[a,r]=this.currentPath.at(-1);if(this.currentPath.length>1&&t===a&&n===r)return;const o=this.currentPath;let c=this.#s;if(o.push([t,n]),this.#o=!0,o.length<=2){c.moveTo(...o[0]),c.lineTo(t,n);return}o.length===3&&(this.#s=c=new Path2D,c.moveTo(...o[0])),this.#P(c,...o.at(-3),...o.at(-2),t,n)}#x(){if(this.currentPath.length===0)return;const t=this.currentPath.at(-1);this.#s.lineTo(...t)}#E(t,n){this.#d=null,t=Math.min(Math.max(t,0),this.canvas.width),n=Math.min(Math.max(n,0),this.canvas.height),this.#_(t,n),this.#x();let a;if(this.currentPath.length!==1)a=this.#C();else{const d=[t,n];a=[[d,d.slice(),d.slice(),d]]}const r=this.#s,o=this.currentPath;this.currentPath=[],this.#s=new Path2D;const c=()=>{this.allRawPaths.push(o),this.paths.push(a),this.bezierPath2D.push(r),this._uiManager.rebuild(this)},u=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(this.#L(),this.#S()),this.#D())};this.addCommands({cmd:c,undo:u,mustExec:!0})}#w(){if(!this.#o)return;this.#o=!1;const t=Math.ceil(this.thickness*this.parentScale),n=this.currentPath.slice(-3),a=n.map(c=>c[0]),r=n.map(c=>c[1]);Math.min(...a)-t,Math.max(...a)+t,Math.min(...r)-t,Math.max(...r)+t;const{ctx:o}=this;o.save(),o.clearRect(0,0,this.canvas.width,this.canvas.height);for(const c of this.bezierPath2D)o.stroke(c);o.stroke(this.#s),o.restore()}#P(t,n,a,r,o,c,u){const d=(n+r)/2,f=(a+o)/2,m=(r+c)/2,y=(o+u)/2;t.bezierCurveTo(d+2*(r-d)/3,f+2*(o-f)/3,m+2*(r-m)/3,y+2*(o-y)/3,m,y)}#C(){const t=this.currentPath;if(t.length<=2)return[[t[0],t[0],t.at(-1),t.at(-1)]];const n=[];let a,[r,o]=t[0];for(a=1;a<t.length-2;a++){const[v,_]=t[a],[S,A]=t[a+1],w=(v+S)/2,T=(_+A)/2,M=[r+2*(v-r)/3,o+2*(_-o)/3],C=[w+2*(v-w)/3,T+2*(_-T)/3];n.push([[r,o],M,C,[w,T]]),[r,o]=[w,T]}const[c,u]=t[a],[d,f]=t[a+1],m=[r+2*(c-r)/3,o+2*(u-o)/3],y=[d+2*(c-d)/3,f+2*(u-f)/3];return n.push([[r,o],m,y,[d,f]]),n}#A(){if(this.isEmpty()){this.#N();return}this.#p();const{canvas:t,ctx:n}=this;n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,t.width,t.height),this.#N();for(const a of this.bezierPath2D)n.stroke(a)}commit(){this.#a||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),this.#a=!0,this.div.classList.add("disabled"),this.#D(!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),this.enableEditMode())}#T(){if(this.#l)return;this.#l=new AbortController;const t=this._uiManager.combinedSignal(this.#l);this.canvas.addEventListener("pointerdown",this.canvasPointerdown.bind(this),{signal:t})}#R(){this.pointerdownAC?.abort(),this.pointerdownAC=null}canvasPointerdown(t){t.button!==0||!this.isInEditMode()||this.#a||(this.setInForeground(),t.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),this.#v(t.offsetX,t.offsetY))}canvasPointermove(t){t.preventDefault(),this.#_(t.offsetX,t.offsetY)}canvasPointerup(t){t.preventDefault(),this.#M(t)}canvasPointerleave(t){this.#M(t)}#M(t){this.#n?.abort(),this.#n=null,this.#T(),this.#i&&clearTimeout(this.#i),this.#i=setTimeout(()=>{this.#i=null,this.canvas.removeEventListener("contextmenu",Ei)},10),this.#E(t.offsetX,t.offsetY),this.addToAnnotationStorage(),this.setInBackground()}#L(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}#S(){this.#u=new ResizeObserver(t=>{const n=t[0].contentRect;n.width&&n.height&&this.setDimensions(n.width,n.height)}),this.#u.observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{this.#u?.disconnect(),this.#u=null},{once:!0})}get isResizable(){return!this.isEmpty()&&this.#a}render(){if(this.div)return this.div;let t,n;this.width&&(t=this.x,n=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[a,r,o,c]=this.#m();if(this.setAt(a,r,0,0),this.setDims(o,c),this.#L(),this.width){const[u,d]=this.parentDimensions;this.setAspectRatio(this.width*u,this.height*d),this.setAt(t*u,n*d,this.width*u,this.height*d),this.#c=!0,this.#b(),this.setDims(this.width*u,this.height*d),this.#A(),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return this.#S(),this.div}#b(){if(!this.#c)return;const[t,n]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*t),this.canvas.height=Math.ceil(this.height*n),this.#N()}setDimensions(t,n){const a=Math.round(t),r=Math.round(n);if(this.#h===a&&this.#r===r)return;this.#h=a,this.#r=r,this.canvas.style.visibility="hidden";const[o,c]=this.parentDimensions;this.width=t/o,this.height=n/c,this.fixAndSetPosition(),this.#a&&this.#k(t,n),this.#b(),this.#A(),this.canvas.style.visibility="visible",this.fixDims()}#k(t,n){const a=this.#B(),r=(t-a)/this.#e,o=(n-a)/this.#t;this.scaleFactor=Math.min(r,o)}#N(){const t=this.#B()/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+t,this.translationY*this.scaleFactor+t)}static#j(t){const n=new Path2D;for(let a=0,r=t.length;a<r;a++){const[o,c,u,d]=t[a];a===0&&n.moveTo(...o),n.bezierCurveTo(c[0],c[1],u[0],u[1],d[0],d[1])}return n}static#I(t,n,a){const[r,o,c,u]=n;switch(a){case 0:for(let d=0,f=t.length;d<f;d+=2)t[d]+=r,t[d+1]=u-t[d+1];break;case 90:for(let d=0,f=t.length;d<f;d+=2){const m=t[d];t[d]=t[d+1]+r,t[d+1]=m+o}break;case 180:for(let d=0,f=t.length;d<f;d+=2)t[d]=c-t[d],t[d+1]+=o;break;case 270:for(let d=0,f=t.length;d<f;d+=2){const m=t[d];t[d]=c-t[d+1],t[d+1]=u-m}break;default:throw new Error("Invalid rotation")}return t}static#z(t,n,a){const[r,o,c,u]=n;switch(a){case 0:for(let d=0,f=t.length;d<f;d+=2)t[d]-=r,t[d+1]=u-t[d+1];break;case 90:for(let d=0,f=t.length;d<f;d+=2){const m=t[d];t[d]=t[d+1]-o,t[d+1]=m-r}break;case 180:for(let d=0,f=t.length;d<f;d+=2)t[d]=c-t[d],t[d+1]-=o;break;case 270:for(let d=0,f=t.length;d<f;d+=2){const m=t[d];t[d]=u-t[d+1],t[d+1]=c-m}break;default:throw new Error("Invalid rotation")}return t}#F(t,n,a,r){const o=[],c=this.thickness/2,u=t*n+c,d=t*a+c;for(const f of this.paths){const m=[],y=[];for(let v=0,_=f.length;v<_;v++){const[S,A,w,T]=f[v];if(S[0]===T[0]&&S[1]===T[1]&&_===1){const Z=t*S[0]+u,$=t*S[1]+d;m.push(Z,$),y.push(Z,$);break}const M=t*S[0]+u,C=t*S[1]+d,O=t*A[0]+u,N=t*A[1]+d,U=t*w[0]+u,q=t*w[1]+d,Q=t*T[0]+u,B=t*T[1]+d;v===0&&(m.push(M,C),y.push(M,C)),m.push(O,N,U,q,Q,B),y.push(O,N),v===_-1&&y.push(Q,B)}o.push({bezier:Ae.#I(m,r,this.rotation),points:Ae.#I(y,r,this.rotation)})}return o}#H(){let t=1/0,n=-1/0,a=1/0,r=-1/0;for(const o of this.paths)for(const[c,u,d,f]of o){const m=lt.bezierBoundingBox(...c,...u,...d,...f);t=Math.min(t,m[0]),a=Math.min(a,m[1]),n=Math.max(n,m[2]),r=Math.max(r,m[3])}return[t,a,n,r]}#B(){return this.#a?Math.ceil(this.thickness*this.parentScale):0}#D(t=!1){if(this.isEmpty())return;if(!this.#a){this.#A();return}const n=this.#H(),a=this.#B();this.#e=Math.max(gt.MIN_SIZE,n[2]-n[0]),this.#t=Math.max(gt.MIN_SIZE,n[3]-n[1]);const r=Math.ceil(a+this.#e*this.scaleFactor),o=Math.ceil(a+this.#t*this.scaleFactor),[c,u]=this.parentDimensions;this.width=r/c,this.height=o/u,this.setAspectRatio(r,o);const d=this.translationX,f=this.translationY;this.translationX=-n[0],this.translationY=-n[1],this.#b(),this.#A(),this.#h=r,this.#r=o,this.setDims(r,o);const m=t?a/this.scaleFactor/2:0;this.translate(d-this.translationX-m,f-this.translationY-m)}static async deserialize(t,n,a){if(t instanceof Lh)return null;const r=await super.deserialize(t,n,a);r.thickness=t.thickness,r.color=lt.makeHexColor(...t.color),r.opacity=t.opacity;const[o,c]=r.pageDimensions,u=r.width*o,d=r.height*c,f=r.parentScale,m=t.thickness/2;r.#a=!0,r.#h=Math.round(u),r.#r=Math.round(d);const{paths:y,rect:v,rotation:_}=t;for(let{bezier:A}of y){A=Ae.#z(A,v,_);const w=[];r.paths.push(w);let T=f*(A[0]-m),M=f*(A[1]-m);for(let O=2,N=A.length;O<N;O+=6){const U=f*(A[O]-m),q=f*(A[O+1]-m),Q=f*(A[O+2]-m),B=f*(A[O+3]-m),Z=f*(A[O+4]-m),$=f*(A[O+5]-m);w.push([[T,M],[U,q],[Q,B],[Z,$]]),T=Z,M=$}const C=this.#j(w);r.bezierPath2D.push(C)}const S=r.#H();return r.#e=Math.max(gt.MIN_SIZE,S[2]-S[0]),r.#t=Math.max(gt.MIN_SIZE,S[3]-S[1]),r.#k(u,d),r}serialize(){if(this.isEmpty())return null;const t=this.getRect(0,0),n=gt._colorManager.convert(this.ctx.strokeStyle);return{annotationType:vt.INK,color:n,thickness:this.thickness,opacity:this.opacity,paths:this.#F(this.scaleFactor/this.parentScale,this.translationX,this.translationY,t),pageIndex:this.pageIndex,rect:t,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}}class kh extends gt{#t=null;#e=null;#i=null;#s=null;#a=null;#n="";#o=null;#c=null;#u=null;#l=!1;#h=!1;static _type="stamp";static _editorType=vt.STAMP;constructor(t){super({...t,name:"stampEditor"}),this.#s=t.bitmapUrl,this.#a=t.bitmapFile}static initialize(t,n){gt.initialize(t,n)}static get supportedTypes(){return xt(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(n=>`image/${n}`))}static get supportedTypesStr(){return xt(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(t){return this.supportedTypes.includes(t)}static paste(t,n){n.pasteEditor(vt.STAMP,{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(t){const n=t.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}#r(t,n=!1){if(!t){this.remove();return}this.#t=t.bitmap,n||(this.#e=t.id,this.#l=t.isSvg),t.file&&(this.#n=t.file.name),this.#f()}#d(){if(this.#i=null,this._uiManager.enableWaiting(!1),!!this.#o){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(t=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:a}=this._uiManager;if(!a)throw new Error("No ML.");if(!await a.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:o,height:c}=t||this.copyCanvas(null,null,!0).imageData,u=await a.guess({name:"altText",request:{data:r,width:o,height:c,channels:r.length/(o*c)}});if(!u)throw new Error("No response from the AI service.");if(u.error)throw new Error("Error from the AI service.");if(u.cancel)return null;if(!u.output)throw new Error("No valid response from the AI service.");const d=u.output;return await this.setGuessedAltText(d),n&&!this.hasAltTextData()&&(this.altTextData={alt:d,decorative:!1}),d}#g(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(a=>this.#r(a,!0)).finally(()=>this.#d());return}if(this.#s){const a=this.#s;this.#s=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromUrl(a).then(r=>this.#r(r)).finally(()=>this.#d());return}if(this.#a){const a=this.#a;this.#a=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromFile(a).then(r=>this.#r(r)).finally(()=>this.#d());return}const t=document.createElement("input");t.type="file",t.accept=kh.supportedTypesStr;const n=this._uiManager._signal;this.#i=new Promise(a=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#r(r)}a()},{signal:n}),t.addEventListener("cancel",()=>{this.remove(),a()},{signal:n})}).finally(()=>this.#d()),t.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#o?.remove(),this.#o=null,this.#c?.disconnect(),this.#c=null,this.#u&&(clearTimeout(this.#u),this.#u=null)),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#g();return}super.rebuild(),this.div!==null&&(this.#e&&this.#o===null&&this.#g(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(this.#i||this.#t||this.#s||this.#a||this.#e)}get isResizable(){return!0}render(){if(this.div)return this.div;let t,n;if(this.width&&(t=this.x,n=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),this.#t?this.#f():this.#g(),this.width&&!this.annotationElementId){const[a,r]=this.parentDimensions;this.setAt(t*a,n*r,this.width*a,this.height*r)}return this.div}#f(){const{div:t}=this;let{width:n,height:a}=this.#t;const[r,o]=this.pageDimensions,c=.75;if(this.width)n=this.width*r,a=this.height*o;else if(n>c*r||a>c*o){const m=Math.min(c*r/n,c*o/a);n*=m,a*=m}const[u,d]=this.parentDimensions;this.setDims(n*u/r,a*d/o),this._uiManager.enableWaiting(!1);const f=this.#o=document.createElement("canvas");f.setAttribute("role","img"),this.addContainer(f),(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),this.#p(n,a),this.#_(),this.#h||(this.parent.addUndoableEditor(this),this.#h=!0),this._reportTelemetry({action:"inserted_image"}),this.#n&&f.setAttribute("aria-label",this.#n)}copyCanvas(t,n,a=!1){t||(t=224);const{width:r,height:o}=this.#t,c=new ch;let u=this.#t,d=r,f=o,m=null;if(n){if(r>n||o>n){const U=Math.min(n/r,n/o);d=Math.floor(r*U),f=Math.floor(o*U)}m=document.createElement("canvas");const v=m.width=Math.ceil(d*c.sx),_=m.height=Math.ceil(f*c.sy);this.#l||(u=this.#m(v,_));const S=m.getContext("2d");S.filter=this._uiManager.hcmFilter;let A="white",w="#cfcfd8";this._uiManager.hcmFilter!=="none"?w="black":window.matchMedia?.("(prefers-color-scheme: dark)").matches&&(A="#8f8f9d",w="#42414d");const T=15,M=T*c.sx,C=T*c.sy,O=new OffscreenCanvas(M*2,C*2),N=O.getContext("2d");N.fillStyle=A,N.fillRect(0,0,M*2,C*2),N.fillStyle=w,N.fillRect(0,0,M,C),N.fillRect(M,C,M,C),S.fillStyle=S.createPattern(O,"repeat"),S.fillRect(0,0,v,_),S.drawImage(u,0,0,u.width,u.height,0,0,v,_)}let y=null;if(a){let v,_;if(c.symmetric&&u.width<t&&u.height<t)v=u.width,_=u.height;else if(u=this.#t,r>t||o>t){const w=Math.min(t/r,t/o);v=Math.floor(r*w),_=Math.floor(o*w),this.#l||(u=this.#m(v,_))}const A=new OffscreenCanvas(v,_).getContext("2d",{willReadFrequently:!0});A.drawImage(u,0,0,u.width,u.height,0,0,v,_),y={width:v,height:_,data:A.getImageData(0,0,v,_).data}}return{canvas:m,width:d,height:f,imageData:y}}#y(t,n){const[a,r]=this.parentDimensions;this.width=t/a,this.height=n/r,this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,this.#u!==null&&clearTimeout(this.#u);const o=200;this.#u=setTimeout(()=>{this.#u=null,this.#p(t,n)},o)}#m(t,n){const{width:a,height:r}=this.#t;let o=a,c=r,u=this.#t;for(;o>2*t||c>2*n;){const d=o,f=c;o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),c>2*n&&(c=c>=16384?Math.floor(c/2)-1:Math.ceil(c/2));const m=new OffscreenCanvas(o,c);m.getContext("2d").drawImage(u,0,0,d,f,0,0,o,c),u=m.transferToImageBitmap()}return u}#p(t,n){const a=new ch,r=Math.ceil(t*a.sx),o=Math.ceil(n*a.sy),c=this.#o;if(!c||c.width===r&&c.height===o)return;c.width=r,c.height=o;const u=this.#l?this.#t:this.#m(r,o),d=c.getContext("2d");d.filter=this._uiManager.hcmFilter,d.drawImage(u,0,0,u.width,u.height,0,0,r,o)}getImageForAltText(){return this.#o}#v(t){if(t){if(this.#l){const r=this._uiManager.imageManager.getSvgUrl(this.#e);if(r)return r}const n=document.createElement("canvas");return{width:n.width,height:n.height}=this.#t,n.getContext("2d").drawImage(this.#t,0,0),n.toDataURL()}if(this.#l){const[n,a]=this.pageDimensions,r=Math.round(this.width*n*wa.PDF_TO_CSS_UNITS),o=Math.round(this.height*a*wa.PDF_TO_CSS_UNITS),c=new OffscreenCanvas(r,o);return c.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,r,o),c.transferToImageBitmap()}return structuredClone(this.#t)}#_(){this._uiManager._signal&&(this.#c=new ResizeObserver(t=>{const n=t[0].contentRect;n.width&&n.height&&this.#y(n.width,n.height)}),this.#c.observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{this.#c?.disconnect(),this.#c=null},{once:!0}))}static async deserialize(t,n,a){let r=null;if(t instanceof oy){const{data:{rect:S,rotation:A,id:w,structParent:T,popupRef:M},container:C,parent:{page:{pageNumber:O}}}=t,N=C.querySelector("canvas"),U=a.imageManager.getFromCanvas(C.id,N);N.remove();const q=(await n._structTree.getAriaAttributes(`${vh}${w}`))?.get("aria-label")||"";r=t={annotationType:vt.STAMP,bitmapId:U.id,bitmap:U.bitmap,pageIndex:O-1,rect:S.slice(0),rotation:A,id:w,deleted:!1,accessibilityData:{decorative:!1,altText:q},isSvg:!1,structParent:T,popupRef:M}}const o=await super.deserialize(t,n,a),{rect:c,bitmap:u,bitmapUrl:d,bitmapId:f,isSvg:m,accessibilityData:y}=t;f&&a.imageManager.isValidId(f)?(o.#e=f,u&&(o.#t=u)):o.#s=d,o.#l=m;const[v,_]=o.pageDimensions;return o.width=(c[2]-c[0])/v,o.height=(c[3]-c[1])/_,o.annotationElementId=t.id||null,y&&(o.altTextData=y),o._initialData=r,o.#h=!!r,o}serialize(t=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const a={annotationType:vt.STAMP,bitmapId:this.#e,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#l,structTreeParentId:this._structTreeParentId};if(t)return a.bitmapUrl=this.#v(!0),a.accessibilityData=this.serializeAltText(!0),a;const{decorative:r,altText:o}=this.serializeAltText(!1);if(!r&&o&&(a.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const u=this.#x(a);if(u.isSame)return null;u.isSameAltText?delete a.accessibilityData:a.accessibilityData.structParent=this._initialData.structParent??-1}if(a.id=this.annotationElementId,n===null)return a;n.stamps||=new Map;const c=this.#l?(a.rect[2]-a.rect[0])*(a.rect[3]-a.rect[1]):null;if(!n.stamps.has(this.#e))n.stamps.set(this.#e,{area:c,serialized:a}),a.bitmap=this.#v(!1);else if(this.#l){const u=n.stamps.get(this.#e);c>u.area&&(u.area=c,u.serialized.bitmap.close(),u.serialized.bitmap=this.#v(!1))}return a}#x(t){const{rect:n,pageIndex:a,accessibilityData:{altText:r}}=this._initialData,o=t.rect.every((d,f)=>Math.abs(d-n[f])<1),c=t.pageIndex===a,u=(t.accessibilityData?.alt||"")===r;return{isSame:o&&c&&u,isSameAltText:u}}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}}class mn{#t;#e=!1;#i=null;#s=null;#a=null;#n=new Map;#o=!1;#c=!1;#u=!1;#l=null;#h=null;#r;static _initialized=!1;static#d=new Map([le,Ae,kh,Wt].map(t=>[t._editorType,t]));constructor({uiManager:t,pageIndex:n,div:a,structTreeLayer:r,accessibilityManager:o,annotationLayer:c,drawLayer:u,textLayer:d,viewport:f,l10n:m}){const y=[...mn.#d.values()];if(!mn._initialized){mn._initialized=!0;for(const v of y)v.initialize(m,t)}t.registerEditorTypes(y),this.#r=t,this.pageIndex=n,this.div=a,this.#t=o,this.#i=c,this.viewport=f,this.#l=d,this.drawLayer=u,this._structTree=r,this.#r.addLayer(this)}get isEmpty(){return this.#n.size===0}get isInvisible(){return this.isEmpty&&this.#r.getMode()===vt.NONE}updateToolbar(t){this.#r.updateToolbar(t)}updateMode(t=this.#r.getMode()){switch(this.#p(),t){case vt.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case vt.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case vt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:n}=this.div;for(const a of mn.#d.values())n.toggle(`${a._type}Editing`,t===a._editorType);this.div.hidden=!1}hasTextLayer(t){return t===this.#l?.div}addInkEditorIfNeeded(t){if(this.#r.getMode()!==vt.INK)return;if(!t){for(const a of this.#n.values())if(a.isEmpty()){a.setInBackground();return}}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(t){this.#r.setEditingState(t)}addCommands(t){this.#r.addCommands(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#i?.div.classList.toggle("disabled",!t)}async enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const t=new Set;for(const a of this.#n.values())a.enableEditing(),a.show(!0),a.annotationElementId&&(this.#r.removeChangedExistingAnnotation(a),t.add(a.annotationElementId));if(!this.#i)return;const n=this.#i.getEditableAnnotations();for(const a of n){if(a.hide(),this.#r.isDeletedAnnotationElement(a.data.id)||t.has(a.data.id))continue;const r=await this.deserialize(a);r&&(this.addOrRebuild(r),r.enableEditing())}}disable(){this.#u=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1);const t=new Map,n=new Map;for(const r of this.#n.values())if(r.disableEditing(),!!r.annotationElementId){if(r.serialize()!==null){t.set(r.annotationElementId,r);continue}else n.set(r.annotationElementId,r);this.getEditableAnnotation(r.annotationElementId)?.show(),r.remove()}if(this.#i){const r=this.#i.getEditableAnnotations();for(const o of r){const{id:c}=o.data;if(this.#r.isDeletedAnnotationElement(c))continue;let u=n.get(c);if(u){u.resetAnnotationElement(o),u.show(!1),o.show();continue}u=t.get(c),u&&(this.#r.addChangedExistingAnnotation(u),u.renderAnnotationElement(o)&&u.show(!1)),o.show()}}this.#p(),this.isEmpty&&(this.div.hidden=!0);const{classList:a}=this.div;for(const r of mn.#d.values())a.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#u=!1}getEditableAnnotation(t){return this.#i?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#r.getActive()!==t&&this.#r.setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,this.#l?.div&&!this.#h){this.#h=new AbortController;const t=this.#r.combinedSignal(this.#h);this.#l.div.addEventListener("pointerdown",this.#g.bind(this),{signal:t}),this.#l.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#l?.div&&this.#h&&(this.#h.abort(),this.#h=null,this.#l.div.classList.remove("highlighting"))}#g(t){this.#r.unselectAll();const{target:n}=t;if(n===this.#l.div||(n.getAttribute("role")==="img"||n.classList.contains("endOfContent"))&&this.#l.div.contains(n)){const{isMac:a}=je.platform;if(t.button!==0||t.ctrlKey&&a)return;this.#r.showAllEditors("highlight",!0,!0),this.#l.div.classList.add("free"),this.toggleDrawing(),Wt.startHighlighting(this,this.#r.direction==="ltr",{target:this.#l.div,x:t.x,y:t.y}),this.#l.div.addEventListener("pointerup",()=>{this.#l.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#r._signal}),t.preventDefault()}}enableClick(){if(this.#s)return;this.#s=new AbortController;const t=this.#r.combinedSignal(this.#s);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t}),this.div.addEventListener("pointerup",this.pointerup.bind(this),{signal:t})}disableClick(){this.#s?.abort(),this.#s=null}attach(t){this.#n.set(t.id,t);const{annotationElementId:n}=t;n&&this.#r.isDeletedAnnotationElement(n)&&this.#r.removeDeletedAnnotationElement(t)}detach(t){this.#n.delete(t.id),this.#t?.removePointerInTextLayer(t.contentDiv),!this.#u&&t.annotationElementId&&this.#r.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#r.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1,this.#c||this.addInkEditorIfNeeded(!1)}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#r.addDeletedAnnotationElement(t.annotationElementId),gt.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),this.#r.addEditor(t),this.attach(t),!t.isAttachedToDOM){const n=t.render();this.div.append(n),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(),this.#r.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;const{activeElement:n}=document;t.div.contains(n)&&!this.#a&&(t._focusEventsAllowed=!1,this.#a=setTimeout(()=>{this.#a=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this.#r._signal}),n.focus())},0)),t._structTreeParentId=this.#t?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const n=()=>t._uiManager.rebuild(t),a=()=>{t.remove()};this.addCommands({cmd:n,undo:a,mustExec:!1})}getNextId(){return this.#r.getId()}get#f(){return mn.#d.get(this.#r.getMode())}combinedSignal(t){return this.#r.combinedSignal(t)}#y(t){const n=this.#f;return n?new n.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#f?.canCreateNewEmptyEditor()}pasteEditor(t,n){this.#r.updateToolbar(t),this.#r.updateMode(t);const{offsetX:a,offsetY:r}=this.#m(),o=this.getNextId(),c=this.#y({parent:this,id:o,x:a,y:r,uiManager:this.#r,isCentered:!0,...n});c&&this.add(c)}async deserialize(t){return await mn.#d.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#r)||null}createAndAddNewEditor(t,n,a={}){const r=this.getNextId(),o=this.#y({parent:this,id:r,x:t.offsetX,y:t.offsetY,uiManager:this.#r,isCentered:n,...a});return o&&this.add(o),o}#m(){const{x:t,y:n,width:a,height:r}=this.div.getBoundingClientRect(),o=Math.max(0,t),c=Math.max(0,n),u=Math.min(window.innerWidth,t+a),d=Math.min(window.innerHeight,n+r),f=(o+u)/2-t,m=(c+d)/2-n,[y,v]=this.viewport.rotation%180===0?[f,m]:[m,f];return{offsetX:y,offsetY:v}}addNewEditor(){this.createAndAddNewEditor(this.#m(),!0)}setSelected(t){this.#r.setSelected(t)}toggleSelected(t){this.#r.toggleSelected(t)}unselect(t){this.#r.unselect(t)}pointerup(t){const{isMac:n}=je.platform;if(!(t.button!==0||t.ctrlKey&&n)&&t.target===this.div&&this.#o){if(this.#o=!1,!this.#e){this.#e=!0;return}if(this.#r.getMode()===vt.STAMP){this.#r.unselectAll();return}this.createAndAddNewEditor(t,!1)}}pointerdown(t){if(this.#r.getMode()===vt.HIGHLIGHT&&this.enableTextSelection(),this.#o){this.#o=!1;return}const{isMac:n}=je.platform;if(t.button!==0||t.ctrlKey&&n||t.target!==this.div)return;this.#o=!0;const a=this.#r.getActive();this.#e=!a||a.isEmpty()}findNewParent(t,n,a){const r=this.#r.findParent(n,a);return r===null||r===this?!1:(r.changeParent(t),!0)}destroy(){this.#r.getActive()?.parent===this&&(this.#r.commitOrRemove(),this.#r.setActiveEditor(null)),this.#a&&(clearTimeout(this.#a),this.#a=null);for(const t of this.#n.values())this.#t?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#n.clear(),this.#r.removeLayer(this)}#p(){this.#c=!0;for(const t of this.#n.values())t.isEmpty()&&t.remove();this.#c=!1}render({viewport:t}){this.viewport=t,_s(this.div,t);for(const n of this.#r.getEditors(this.pageIndex))this.add(n),n.rebuild();this.updateMode()}update({viewport:t}){this.#r.commitOrRemove(),this.#p();const n=this.viewport.rotation,a=t.rotation;if(this.viewport=t,_s(this.div,{rotation:a}),n!==a)for(const r of this.#n.values())r.rotate(a);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:t,pageHeight:n}=this.viewport.rawDims;return[t,n]}get scale(){return this.#r.viewParameters.realScale}}class Me{#t=null;#e=0;#i=new Map;#s=new Map;constructor({pageIndex:t}){this.pageIndex=t}setParent(t){if(!this.#t){this.#t=t;return}if(this.#t!==t){if(this.#i.size>0)for(const n of this.#i.values())n.remove(),t.append(n);this.#t=t}}static get _svgFactory(){return xt(this,"_svgFactory",new Oh)}static#a(t,{x:n=0,y:a=0,width:r=1,height:o=1}={}){const{style:c}=t;c.top=`${100*a}%`,c.left=`${100*n}%`,c.width=`${100*r}%`,c.height=`${100*o}%`}#n(t){const n=Me._svgFactory.create(1,1,!0);return this.#t.append(n),n.setAttribute("aria-hidden",!0),Me.#a(n,t),n}#o(t,n){const a=Me._svgFactory.createElement("clipPath");t.append(a);const r=`clip_${n}`;a.setAttribute("id",r),a.setAttribute("clipPathUnits","objectBoundingBox");const o=Me._svgFactory.createElement("use");return a.append(o),o.setAttribute("href",`#${n}`),o.classList.add("clip"),r}draw(t,n,a,r=!1){const o=this.#e++,c=this.#n(t.box);c.classList.add(...t.classNamesForDrawing);const u=Me._svgFactory.createElement("defs");c.append(u);const d=Me._svgFactory.createElement("path");u.append(d);const f=`path_p${this.pageIndex}_${o}`;d.setAttribute("id",f),d.setAttribute("d",t.toSVGPath()),r&&this.#s.set(o,d);const m=this.#o(u,f),y=Me._svgFactory.createElement("use");return c.append(y),c.setAttribute("fill",n),c.setAttribute("fill-opacity",a),y.setAttribute("href",`#${f}`),this.#i.set(o,c),{id:o,clipPathId:`url(#${m})`}}drawOutline(t){const n=this.#e++,a=this.#n(t.box);a.classList.add(...t.classNamesForOutlining);const r=Me._svgFactory.createElement("defs");a.append(r);const o=Me._svgFactory.createElement("path");r.append(o);const c=`path_p${this.pageIndex}_${n}`;o.setAttribute("id",c),o.setAttribute("d",t.toSVGPath()),o.setAttribute("vector-effect","non-scaling-stroke");let u;if(t.mustRemoveSelfIntersections){const m=Me._svgFactory.createElement("mask");r.append(m),u=`mask_p${this.pageIndex}_${n}`,m.setAttribute("id",u),m.setAttribute("maskUnits","objectBoundingBox");const y=Me._svgFactory.createElement("rect");m.append(y),y.setAttribute("width","1"),y.setAttribute("height","1"),y.setAttribute("fill","white");const v=Me._svgFactory.createElement("use");m.append(v),v.setAttribute("href",`#${c}`),v.setAttribute("stroke","none"),v.setAttribute("fill","black"),v.setAttribute("fill-rule","nonzero"),v.classList.add("mask")}const d=Me._svgFactory.createElement("use");a.append(d),d.setAttribute("href",`#${c}`),u&&d.setAttribute("mask",`url(#${u})`);const f=d.cloneNode();return a.append(f),d.classList.add("mainOutline"),f.classList.add("secondaryOutline"),this.#i.set(n,a),n}finalizeLine(t,n){const a=this.#s.get(t);this.#s.delete(t),this.updateBox(t,n.box),a.setAttribute("d",n.toSVGPath())}updateLine(t,n){this.#i.get(t).firstChild.firstChild.setAttribute("d",n.toSVGPath())}updatePath(t,n){this.#s.get(t).setAttribute("d",n.toSVGPath())}updateBox(t,n){Me.#a(this.#i.get(t),n)}show(t,n){this.#i.get(t).classList.toggle("hidden",!n)}rotate(t,n){this.#i.get(t).setAttribute("data-main-rotation",n)}changeColor(t,n){this.#i.get(t).setAttribute("fill",n)}changeOpacity(t,n){this.#i.get(t).setAttribute("fill-opacity",n)}addClass(t,n){this.#i.get(t).classList.add(n)}removeClass(t,n){this.#i.get(t).classList.remove(n)}getSVGRoot(t){return this.#i.get(t)}remove(t){this.#s.delete(t),this.#t!==null&&(this.#i.get(t).remove(),this.#i.delete(t))}destroy(){this.#t=null;for(const t of this.#i.values())t.remove();this.#i.clear(),this.#s.clear()}}var Y_=mt.AbortException,K_=mt.AnnotationEditorLayer,$_=mt.AnnotationEditorParamsType,Q_=mt.AnnotationEditorType,W_=mt.AnnotationEditorUIManager,Z_=mt.AnnotationLayer,J_=mt.AnnotationMode,tA=mt.ColorPicker,eA=mt.DOMSVGFactory,iA=mt.DrawLayer,nA=mt.FeatureTest,sA=mt.GlobalWorkerOptions,aA=mt.ImageKind,rA=mt.InvalidPDFException,lA=mt.MissingPDFException,oA=mt.OPS,cA=mt.OutputScale,uA=mt.PDFDataRangeTransport,hA=mt.PDFDateString,dA=mt.PDFWorker,fA=mt.PasswordResponses,gA=mt.PermissionFlag,pA=mt.PixelsPerInch,mA=mt.RenderingCancelledException,yA=mt.TextLayer,vA=mt.UnexpectedResponseException,bA=mt.Util,_A=mt.VerbosityLevel,AA=mt.XfaLayer,SA=mt.build,EA=mt.createValidAbsoluteUrl,wA=mt.fetchData,TA=mt.getDocument,xA=mt.getFilenameFromUrl,CA=mt.getPdfFilenameFromUrl,RA=mt.getXfaPageViewport,MA=mt.isDataScheme,DA=mt.isPdfFile,OA=mt.noContextMenu,LA=mt.normalizeUnicode,kA=mt.setLayerDimensions,NA=mt.shadow,PA=mt.version;const jA=Object.freeze(Object.defineProperty({__proto__:null,AbortException:Y_,AnnotationEditorLayer:K_,AnnotationEditorParamsType:$_,AnnotationEditorType:Q_,AnnotationEditorUIManager:W_,AnnotationLayer:Z_,AnnotationMode:J_,ColorPicker:tA,DOMSVGFactory:eA,DrawLayer:iA,FeatureTest:nA,GlobalWorkerOptions:sA,ImageKind:aA,InvalidPDFException:rA,MissingPDFException:lA,OPS:oA,OutputScale:cA,PDFDataRangeTransport:uA,PDFDateString:hA,PDFWorker:dA,PasswordResponses:fA,PermissionFlag:gA,PixelsPerInch:pA,RenderingCancelledException:mA,TextLayer:yA,UnexpectedResponseException:vA,Util:bA,VerbosityLevel:_A,XfaLayer:AA,build:SA,createValidAbsoluteUrl:EA,fetchData:wA,getDocument:TA,getFilenameFromUrl:xA,getPdfFilenameFromUrl:CA,getXfaPageViewport:RA,isDataScheme:MA,isPdfFile:DA,noContextMenu:OA,normalizeUnicode:LA,setLayerDimensions:kA,shadow:NA,version:PA},Symbol.toStringTag,{value:"Module"})),Ir=Mb(jA);var Ce={},Dr={},tm;function Nh(){return tm||(tm=1,function(g){var t=Dr&&Dr.__spreadArray||function(a,r,o){if(o||arguments.length===2)for(var c=0,u=r.length,d;c<u;c++)(d||!(c in r))&&(d||(d=Array.prototype.slice.call(r,0,c)),d[c]=r[c]);return a.concat(d||Array.prototype.slice.call(r))};Object.defineProperty(g,"__esModule",{value:!0}),g.allEvents=g.changeEvents=g.otherEvents=g.transitionEvents=g.animationEvents=g.wheelEvents=g.uiEvents=g.pointerEvents=g.touchEvents=g.selectionEvents=g.dragEvents=g.mouseEvents=g.mediaEvents=g.keyboardEvents=g.imageEvents=g.formEvents=g.focusEvents=g.compositionEvents=g.clipboardEvents=void 0,g.clipboardEvents=["onCopy","onCut","onPaste"],g.compositionEvents=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],g.focusEvents=["onFocus","onBlur"],g.formEvents=["onInput","onInvalid","onReset","onSubmit"],g.imageEvents=["onLoad","onError"],g.keyboardEvents=["onKeyDown","onKeyPress","onKeyUp"],g.mediaEvents=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],g.mouseEvents=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],g.dragEvents=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],g.selectionEvents=["onSelect"],g.touchEvents=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],g.pointerEvents=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],g.uiEvents=["onScroll"],g.wheelEvents=["onWheel"],g.animationEvents=["onAnimationStart","onAnimationEnd","onAnimationIteration"],g.transitionEvents=["onTransitionEnd"],g.otherEvents=["onToggle"],g.changeEvents=["onChange"],g.allEvents=t(t(t(t(t(t(t(t(t(t(t(t(t(t(t(t(t(t([],g.clipboardEvents,!0),g.compositionEvents,!0),g.focusEvents,!0),g.formEvents,!0),g.imageEvents,!0),g.keyboardEvents,!0),g.mediaEvents,!0),g.mouseEvents,!0),g.dragEvents,!0),g.selectionEvents,!0),g.touchEvents,!0),g.pointerEvents,!0),g.uiEvents,!0),g.wheelEvents,!0),g.animationEvents,!0),g.transitionEvents,!0),g.changeEvents,!0),g.otherEvents,!0);function n(a,r){var o={};return g.allEvents.forEach(function(c){var u=a[c];u&&(r?o[c]=function(d){return u(d,r(c))}:o[c]=u)}),o}g.default=n}(Dr)),Dr}var uo={},em;function Ta(){if(em)return uo;em=1,Object.defineProperty(uo,"__esModule",{value:!0});function g(t){var n=!1,a=new Promise(function(r,o){t.then(function(c){return!n&&r(c)}).catch(function(c){return!n&&o(c)})});return{promise:a,cancel:function(){n=!0}}}return uo.default=g,uo}var ho={exports:{}},im;function xa(){if(im)return ho.exports;im=1;function g(n){var a,r,o="";if(typeof n=="string"||typeof n=="number")o+=n;else if(typeof n=="object")if(Array.isArray(n)){var c=n.length;for(a=0;a<c;a++)n[a]&&(r=g(n[a]))&&(o&&(o+=" "),o+=r)}else for(r in n)n[r]&&(o&&(o+=" "),o+=r);return o}function t(){for(var n,a,r=0,o="",c=arguments.length;r<c;r++)(n=arguments[r])&&(a=g(n))&&(o&&(o+=" "),o+=a);return o}return ho.exports=t,ho.exports.clsx=t,ho.exports}var nh,nm;function Li(){if(nm)return nh;nm=1;var g="Invariant failed";function t(n,a){if(!n)throw new Error(g)}return nh=t,nh}var sh,sm;function $n(){if(sm)return sh;sm=1;var g=function(){};return sh=g,sh}var ah={},am;function FA(){if(am)return ah;am=1;var g=Object.prototype.hasOwnProperty;function t(a,r,o){for(o of a.keys())if(n(o,r))return o}function n(a,r){var o,c,u;if(a===r)return!0;if(a&&r&&(o=a.constructor)===r.constructor){if(o===Date)return a.getTime()===r.getTime();if(o===RegExp)return a.toString()===r.toString();if(o===Array){if((c=a.length)===r.length)for(;c--&&n(a[c],r[c]););return c===-1}if(o===Set){if(a.size!==r.size)return!1;for(c of a)if(u=c,u&&typeof u=="object"&&(u=t(r,u),!u)||!r.has(u))return!1;return!0}if(o===Map){if(a.size!==r.size)return!1;for(c of a)if(u=c[0],u&&typeof u=="object"&&(u=t(r,u),!u)||!n(c[1],r.get(u)))return!1;return!0}if(o===ArrayBuffer)a=new Uint8Array(a),r=new Uint8Array(r);else if(o===DataView){if((c=a.byteLength)===r.byteLength)for(;c--&&a.getInt8(c)===r.getInt8(c););return c===-1}if(ArrayBuffer.isView(a)){if((c=a.byteLength)===r.byteLength)for(;c--&&a[c]===r[c];);return c===-1}if(!o||typeof a=="object"){c=0;for(o in a)if(g.call(a,o)&&++c&&!g.call(r,o)||!(o in r)||!n(a[o],r[o]))return!1;return Object.keys(r).length===c}}return a!==a&&r!==r}return ah.dequal=n,ah}var fo={},rm;function hy(){if(rm)return fo;rm=1,Object.defineProperty(fo,"__esModule",{value:!0});const t=(0,ce().createContext)(null);return fo.default=t,fo}var go={},lm;function dy(){if(lm)return go;lm=1,Object.defineProperty(go,"__esModule",{value:!0}),go.default=t;const g=wi();function t({children:n,type:a}){return(0,g.jsx)("div",{className:`react-pdf__message react-pdf__message--${a}`,children:n})}return go}var fa={},om;function HA(){if(om)return fa;om=1;var g=fa&&fa.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(fa,"__esModule",{value:!0});const t=g(Li()),n="noopener noreferrer nofollow";let a=class{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(o){this.pdfDocument=o}setViewer(o){this.pdfViewer=o}setExternalLinkRel(o){this.externalLinkRel=o}setExternalLinkTarget(o){this.externalLinkTarget=o}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return(0,t.default)(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber||0}set page(o){(0,t.default)(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber=o}get rotation(){return 0}set rotation(o){}goToDestination(o){return new Promise(c=>{(0,t.default)(this.pdfDocument,"PDF document not loaded."),(0,t.default)(o,"Destination is not specified."),typeof o=="string"?this.pdfDocument.getDestination(o).then(c):Array.isArray(o)?c(o):o.then(c)}).then(c=>{(0,t.default)(Array.isArray(c),`"${c}" is not a valid destination array.`);const u=c[0];new Promise(d=>{(0,t.default)(this.pdfDocument,"PDF document not loaded."),u instanceof Object?this.pdfDocument.getPageIndex(u).then(f=>{d(f)}).catch(()=>{(0,t.default)(!1,`"${u}" is not a valid page reference.`)}):typeof u=="number"?d(u):(0,t.default)(!1,`"${u}" is not a valid destination reference.`)}).then(d=>{const f=d+1;(0,t.default)(this.pdfViewer,"PDF viewer is not initialized."),(0,t.default)(f>=1&&f<=this.pagesCount,`"${f}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({dest:c,pageIndex:d,pageNumber:f})})})}navigateTo(o){this.goToDestination(o)}goToPage(o){const c=o-1;(0,t.default)(this.pdfViewer,"PDF viewer is not initialized."),(0,t.default)(o>=1&&o<=this.pagesCount,`"${o}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({pageIndex:c,pageNumber:o})}addLinkAttributes(o,c,u){o.href=c,o.rel=this.externalLinkRel||n,o.target=u?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}};return fa.default=a,fa}var po={},cm;function fy(){if(cm)return po;cm=1,Object.defineProperty(po,"__esModule",{value:!0});const g={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};return po.default=g,po}var Or={},um;function Xi(){return um||(um=1,function(g){var t=Or&&Or.__importDefault||function(C){return C&&C.__esModule?C:{default:C}};Object.defineProperty(g,"__esModule",{value:!0}),g.isLocalFileSystem=g.isBrowser=void 0,g.isDefined=r,g.isProvided=o,g.isString=c,g.isArrayBuffer=u,g.isBlob=d,g.isDataURI=f,g.dataURItoByteString=m,g.getDevicePixelRatio=y,g.displayCORSWarning=_,g.displayWorkerWarning=S,g.cancelRunningTask=A,g.makePageCallback=w,g.isCancelException=T,g.loadFromFile=M;const n=t(Li()),a=t($n());g.isBrowser=typeof window<"u",g.isLocalFileSystem=g.isBrowser&&window.location.protocol==="file:";function r(C){return typeof C<"u"}function o(C){return r(C)&&C!==null}function c(C){return typeof C=="string"}function u(C){return C instanceof ArrayBuffer}function d(C){return(0,n.default)(g.isBrowser,"isBlob can only be used in a browser environment"),C instanceof Blob}function f(C){return c(C)&&/^data:/.test(C)}function m(C){(0,n.default)(f(C),"Invalid data URI.");const[O="",N=""]=C.split(",");return O.split(";").indexOf("base64")!==-1?atob(N):unescape(N)}function y(){return g.isBrowser&&window.devicePixelRatio||1}const v="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function _(){(0,a.default)(!g.isLocalFileSystem,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${v}`)}function S(){(0,a.default)(!g.isLocalFileSystem,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${v}`)}function A(C){C?.cancel&&C.cancel()}function w(C,O){return Object.defineProperty(C,"width",{get(){return this.view[2]*O},configurable:!0}),Object.defineProperty(C,"height",{get(){return this.view[3]*O},configurable:!0}),Object.defineProperty(C,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(C,"originalHeight",{get(){return this.view[3]},configurable:!0}),C}function T(C){return C.name==="RenderingCancelledException"}function M(C){return new Promise((O,N)=>{const U=new FileReader;U.onload=()=>{if(!U.result)return N(new Error("Error while reading a file."));O(U.result)},U.onerror=q=>{if(!q.target)return N(new Error("Error while reading a file."));const{error:Q}=q.target;if(!Q)return N(new Error("Error while reading a file."));switch(Q.code){case Q.NOT_FOUND_ERR:return N(new Error("Error while reading a file: File not found."));case Q.SECURITY_ERR:return N(new Error("Error while reading a file: Security error."));case Q.ABORT_ERR:return N(new Error("Error while reading a file: Aborted."));default:return N(new Error("Error while reading a file."))}},U.readAsArrayBuffer(C)})}}(Or)),Or}var mo={},hm;function Ca(){if(hm)return mo;hm=1,Object.defineProperty(mo,"__esModule",{value:!0}),mo.default=n;const g=ce();function t(a,r){switch(r.type){case"RESOLVE":return{value:r.value,error:void 0};case"REJECT":return{value:!1,error:r.error};case"RESET":return{value:void 0,error:void 0};default:return a}}function n(){return(0,g.useReducer)(t,{value:void 0,error:void 0})}return mo}var dm;function zA(){if(dm)return Ce;dm=1;var g=Ce&&Ce.__createBinding||(Object.create?function(B,Z,$,J){J===void 0&&(J=$);var it=Object.getOwnPropertyDescriptor(Z,$);(!it||("get"in it?!Z.__esModule:it.writable||it.configurable))&&(it={enumerable:!0,get:function(){return Z[$]}}),Object.defineProperty(B,J,it)}:function(B,Z,$,J){J===void 0&&(J=$),B[J]=Z[$]}),t=Ce&&Ce.__setModuleDefault||(Object.create?function(B,Z){Object.defineProperty(B,"default",{enumerable:!0,value:Z})}:function(B,Z){B.default=Z}),n=Ce&&Ce.__importStar||function(B){if(B&&B.__esModule)return B;var Z={};if(B!=null)for(var $ in B)$!=="default"&&Object.prototype.hasOwnProperty.call(B,$)&&g(Z,B,$);return t(Z,B),Z},a=Ce&&Ce.__awaiter||function(B,Z,$,J){function it(ht){return ht instanceof $?ht:new $(function(st){st(ht)})}return new($||($=Promise))(function(ht,st){function k(nt){try{Y(J.next(nt))}catch(x){st(x)}}function P(nt){try{Y(J.throw(nt))}catch(x){st(x)}}function Y(nt){nt.done?ht(nt.value):it(nt.value).then(k,P)}Y((J=J.apply(B,Z||[])).next())})},r=Ce&&Ce.__rest||function(B,Z){var $={};for(var J in B)Object.prototype.hasOwnProperty.call(B,J)&&Z.indexOf(J)<0&&($[J]=B[J]);if(B!=null&&typeof Object.getOwnPropertySymbols=="function")for(var it=0,J=Object.getOwnPropertySymbols(B);it<J.length;it++)Z.indexOf(J[it])<0&&Object.prototype.propertyIsEnumerable.call(B,J[it])&&($[J[it]]=B[J[it]]);return $},o=Ce&&Ce.__importDefault||function(B){return B&&B.__esModule?B:{default:B}};Object.defineProperty(Ce,"__esModule",{value:!0});const c=wi(),u=ce(),d=o(Nh()),f=o(Ta()),m=o(xa()),y=o(Li()),v=o($n()),_=FA(),S=n(Ir),A=o(hy()),w=o(dy()),T=o(HA()),M=o(fy()),C=Xi(),O=o(Ca()),{PDFDataRangeTransport:N}=S,U=(B,Z)=>{switch(Z){case M.default.NEED_PASSWORD:{const $=prompt("Enter the password to open this PDF file.");B($);break}case M.default.INCORRECT_PASSWORD:{const $=prompt("Invalid password. Please try again.");B($);break}}};function q(B){return typeof B=="object"&&B!==null&&("data"in B||"range"in B||"url"in B)}const Q=(0,u.forwardRef)(function(Z,$){var{children:J,className:it,error:ht="Failed to load PDF file.",externalLinkRel:st,externalLinkTarget:k,file:P,inputRef:Y,imageResourcesPath:nt,loading:x="Loading PDF",noData:I="No PDF file specified.",onItemClick:W,onLoadError:X,onLoadProgress:tt,onLoadSuccess:ot,onPassword:et=U,onSourceError:ct,onSourceSuccess:bt,options:kt,renderMode:Xe,rotate:Ye}=Z,Fe=r(Z,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);const[ki,Oe]=(0,O.default)(),{value:ue,error:Ti}=ki,[Kt,Ni]=(0,O.default)(),{value:ie,error:Yi}=Kt,Ke=(0,u.useRef)(new T.default),xi=(0,u.useRef)([]),Pi=(0,u.useRef)(void 0),ji=(0,u.useRef)(void 0);P&&P!==Pi.current&&q(P)&&((0,v.default)(!(0,_.dequal)(P,Pi.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),Pi.current=P),kt&&kt!==ji.current&&((0,v.default)(!(0,_.dequal)(kt,ji.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),ji.current=kt);const vn=(0,u.useRef)({scrollPageIntoView:ne=>{const{dest:Ee,pageNumber:He,pageIndex:ke=He-1}=ne;if(W){W({dest:Ee,pageIndex:ke,pageNumber:He});return}const ri=xi.current[ke];if(ri){ri.scrollIntoView();return}(0,v.default)(!1,`An internal link leading to page ${He} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});(0,u.useImperativeHandle)($,()=>({linkService:Ke,pages:xi,viewer:vn}),[]);function si(){bt&&bt()}function he(){Ti&&((0,v.default)(!1,Ti.toString()),ct&&ct(Ti))}function ai(){Oe({type:"RESET"})}(0,u.useEffect)(ai,[P,Oe]);const Vt=(0,u.useCallback)(()=>a(this,void 0,void 0,function*(){if(!P)return null;if(typeof P=="string")return(0,C.isDataURI)(P)?{data:(0,C.dataURItoByteString)(P)}:((0,C.displayCORSWarning)(),{url:P});if(P instanceof N)return{range:P};if((0,C.isArrayBuffer)(P))return{data:P};if(C.isBrowser&&(0,C.isBlob)(P))return{data:yield(0,C.loadFromFile)(P)};if((0,y.default)(typeof P=="object","Invalid parameter in file, need either Uint8Array, string or a parameter object"),(0,y.default)(q(P),"Invalid parameter object: need either .data, .range or .url"),"url"in P&&typeof P.url=="string"){if((0,C.isDataURI)(P.url)){const{url:ne}=P,Ee=r(P,["url"]),He=(0,C.dataURItoByteString)(ne);return Object.assign({data:He},Ee)}(0,C.displayCORSWarning)()}return P}),[P]);(0,u.useEffect)(()=>{const ne=(0,f.default)(Vt());return ne.promise.then(Ee=>{Oe({type:"RESOLVE",value:Ee})}).catch(Ee=>{Oe({type:"REJECT",error:Ee})}),()=>{(0,C.cancelRunningTask)(ne)}},[Vt,Oe]),(0,u.useEffect)(()=>{if(!(typeof ue>"u")){if(ue===!1){he();return}si()}},[ue]);function Ut(){ie&&(ot&&ot(ie),xi.current=new Array(ie.numPages),Ke.current.setDocument(ie))}function Qn(){Yi&&((0,v.default)(!1,Yi.toString()),X&&X(Yi))}(0,u.useEffect)(function(){Ni({type:"RESET"})},[Ni,ue]),(0,u.useEffect)(function(){if(!ue)return;const Ee=kt?Object.assign(Object.assign({},ue),kt):ue,He=S.getDocument(Ee);tt&&(He.onProgress=tt),et&&(He.onPassword=et);const ke=He,ri=ke.promise.then(Wn=>{Ni({type:"RESOLVE",value:Wn})}).catch(Wn=>{ke.destroyed||Ni({type:"REJECT",error:Wn})});return()=>{ri.finally(()=>ke.destroy())}},[kt,Ni,ue]),(0,u.useEffect)(()=>{if(!(typeof ie>"u")){if(ie===!1){Qn();return}Ut()}},[ie]),(0,u.useEffect)(function(){Ke.current.setViewer(vn.current),Ke.current.setExternalLinkRel(st),Ke.current.setExternalLinkTarget(k)},[st,k]);const bn=(0,u.useCallback)((ne,Ee)=>{xi.current[ne]=Ee},[]),de=(0,u.useCallback)(ne=>{delete xi.current[ne]},[]),Le=(0,u.useMemo)(()=>({imageResourcesPath:nt,linkService:Ke.current,onItemClick:W,pdf:ie,registerPage:bn,renderMode:Xe,rotate:Ye,unregisterPage:de}),[nt,W,ie,bn,Xe,Ye,de]),Se=(0,u.useMemo)(()=>(0,d.default)(Fe,()=>ie),[Fe,ie]);function fe(){return(0,c.jsx)(A.default.Provider,{value:Le,children:J})}function Ki(){return P?ie==null?(0,c.jsx)(w.default,{type:"loading",children:typeof x=="function"?x():x}):ie===!1?(0,c.jsx)(w.default,{type:"error",children:typeof ht=="function"?ht():ht}):fe():(0,c.jsx)(w.default,{type:"no-data",children:typeof I=="function"?I():I})}return(0,c.jsx)("div",Object.assign({className:(0,m.default)("react-pdf__Document",it),ref:Y,style:{"--scale-factor":"1"}},Se,{children:Ki()}))});return Ce.default=Q,Ce}var In={},yo={},fm;function gy(){if(fm)return yo;fm=1,Object.defineProperty(yo,"__esModule",{value:!0});const t=(0,ce().createContext)(null);return yo.default=t,yo}var Gi={},vo={},gm;function UA(){if(gm)return vo;gm=1,Object.defineProperty(vo,"__esModule",{value:!0});let g=class{constructor({num:n,gen:a}){this.num=n,this.gen=a}toString(){let n=`${this.num}R`;return this.gen!==0&&(n+=this.gen),n}};return vo.default=g,vo}var bo={},pm;function BA(){if(pm)return bo;pm=1,Object.defineProperty(bo,"__esModule",{value:!0}),bo.default=n;const g=ce(),t=Xi();function n(a){const r=(0,g.useRef)(void 0),o=r.current;return(0,t.isDefined)(o)?()=>o:()=>{const c=a();return r.current=c,c}}return bo}var ga={},mm;function Ra(){if(mm)return ga;mm=1;var g=ga&&ga.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ga,"__esModule",{value:!0}),ga.default=a;const t=ce(),n=g(hy());function a(){return(0,t.useContext)(n.default)}return ga}var pa={},ym;function py(){if(ym)return pa;ym=1;var g=pa&&pa.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(pa,"__esModule",{value:!0}),pa.default=a;const t=ce(),n=g(gy());function a(){return(0,t.useContext)(n.default)}return pa}var vm;function IA(){if(vm)return Gi;vm=1;var g=Gi&&Gi.__awaiter||function(m,y,v,_){function S(A){return A instanceof v?A:new v(function(w){w(A)})}return new(v||(v=Promise))(function(A,w){function T(O){try{C(_.next(O))}catch(N){w(N)}}function M(O){try{C(_.throw(O))}catch(N){w(N)}}function C(O){O.done?A(O.value):S(O.value).then(T,M)}C((_=_.apply(m,y||[])).next())})},t=Gi&&Gi.__rest||function(m,y){var v={};for(var _ in m)Object.prototype.hasOwnProperty.call(m,_)&&y.indexOf(_)<0&&(v[_]=m[_]);if(m!=null&&typeof Object.getOwnPropertySymbols=="function")for(var S=0,_=Object.getOwnPropertySymbols(m);S<_.length;S++)y.indexOf(_[S])<0&&Object.prototype.propertyIsEnumerable.call(m,_[S])&&(v[_[S]]=m[_[S]]);return v},n=Gi&&Gi.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(Gi,"__esModule",{value:!0}),Gi.default=f;const a=wi(),r=n(Li()),o=n(UA()),c=n(BA()),u=n(Ra()),d=n(py());function f(m){const y=(0,u.default)(),v=(0,d.default)();(0,r.default)(v,"Unable to find Outline context.");const _=Object.assign(Object.assign(Object.assign({},y),v),m),{item:S,linkService:A,onItemClick:w,pdf:T}=_,M=t(_,["item","linkService","onItemClick","pdf"]);(0,r.default)(T,"Attempted to load an outline, but no document was specified. Wrap <Outline /> in a <Document /> or pass explicit `pdf` prop.");const C=(0,c.default)(()=>typeof S.dest=="string"?T.getDestination(S.dest):S.dest),O=(0,c.default)(()=>g(this,void 0,void 0,function*(){const Q=yield C();if(!Q)throw new Error("Destination not found.");const[B]=Q;return T.getPageIndex(new o.default(B))})),N=(0,c.default)(()=>g(this,void 0,void 0,function*(){return(yield O())+1}));function U(Q){Q.preventDefault(),(0,r.default)(w||A,"Either onItemClick callback or linkService must be defined in order to navigate to an outline item."),w?Promise.all([C(),O(),N()]).then(([B,Z,$])=>{w({dest:B,pageIndex:Z,pageNumber:$})}):A&&A.goToDestination(S.dest)}function q(){if(!S.items||!S.items.length)return null;const{items:Q}=S;return(0,a.jsx)("ul",{children:Q.map((B,Z)=>(0,a.jsx)(f,Object.assign({item:B,pdf:T},M),typeof B.dest=="string"?B.dest:Z))})}return(0,a.jsxs)("li",{children:[(0,a.jsx)("a",{href:"#",onClick:U,children:S.title}),q()]})}return Gi}var bm;function qA(){if(bm)return In;bm=1;var g=In&&In.__rest||function(A,w){var T={};for(var M in A)Object.prototype.hasOwnProperty.call(A,M)&&w.indexOf(M)<0&&(T[M]=A[M]);if(A!=null&&typeof Object.getOwnPropertySymbols=="function")for(var C=0,M=Object.getOwnPropertySymbols(A);C<M.length;C++)w.indexOf(M[C])<0&&Object.prototype.propertyIsEnumerable.call(A,M[C])&&(T[M[C]]=A[M[C]]);return T},t=In&&In.__importDefault||function(A){return A&&A.__esModule?A:{default:A}};Object.defineProperty(In,"__esModule",{value:!0}),In.default=S;const n=wi(),a=ce(),r=t(Ta()),o=t(Nh()),c=t(xa()),u=t(Li()),d=t($n()),f=t(gy()),m=t(IA()),y=Xi(),v=t(Ra()),_=t(Ca());function S(A){const w=(0,v.default)(),T=Object.assign(Object.assign({},w),A),{className:M,inputRef:C,onItemClick:O,onLoadError:N,onLoadSuccess:U,pdf:q}=T,Q=g(T,["className","inputRef","onItemClick","onLoadError","onLoadSuccess","pdf"]);(0,u.default)(q,"Attempted to load an outline, but no document was specified. Wrap <Outline /> in a <Document /> or pass explicit `pdf` prop.");const[B,Z]=(0,_.default)(),{value:$,error:J}=B;function it(){typeof $>"u"||$===!1||U&&U($)}function ht(){J&&((0,d.default)(!1,J.toString()),N&&N(J))}(0,a.useEffect)(function(){Z({type:"RESET"})},[Z,q]),(0,a.useEffect)(function(){if(!q)return;const nt=(0,r.default)(q.getOutline()),x=nt;return nt.promise.then(I=>{Z({type:"RESOLVE",value:I})}).catch(I=>{Z({type:"REJECT",error:I})}),()=>(0,y.cancelRunningTask)(x)},[Z,q]),(0,a.useEffect)(()=>{if($!==void 0){if($===!1){ht();return}it()}},[$]);const st=(0,a.useMemo)(()=>({onItemClick:O}),[O]),k=(0,a.useMemo)(()=>(0,o.default)(Q,()=>$),[Q,$]);if(!$)return null;function P(){return $?(0,n.jsx)("ul",{children:$.map((Y,nt)=>(0,n.jsx)(m.default,{item:Y,pdf:q},typeof Y.dest=="string"?Y.dest:nt))}):null}return(0,n.jsx)("div",Object.assign({className:(0,c.default)("react-pdf__Outline",M),ref:C},k,{children:(0,n.jsx)(f.default.Provider,{value:st,children:P()})}))}return In}var qn={},_o={},_m;function my(){if(_m)return _o;_m=1,Object.defineProperty(_o,"__esModule",{value:!0});function g(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var a=t.filter(Boolean);if(a.length<=1){var r=a[0];return r||null}return function(c){a.forEach(function(u){typeof u=="function"?u(c):u&&(u.current=c)})}}return _o.default=g,_o}var Ao={},Am;function yy(){if(Am)return Ao;Am=1,Object.defineProperty(Ao,"__esModule",{value:!0});const t=(0,ce().createContext)(null);return Ao.default=t,Ao}var vi={},ma={},So={},fn={},ms={},Sm;function GA(){return Sm||(Sm=1,Object.defineProperty(ms,"__esModule",{value:!0}),ms.HEADING_PATTERN=ms.PDF_ROLE_TO_HTML_ROLE=void 0,ms.PDF_ROLE_TO_HTML_ROLE={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},ms.HEADING_PATTERN=/^H(\d+)$/),ms}var Em;function VA(){if(Em)return fn;Em=1,Object.defineProperty(fn,"__esModule",{value:!0}),fn.isPdfRole=t,fn.isStructTreeNode=n,fn.isStructTreeNodeWithOnlyContentChild=a,fn.getRoleAttributes=r,fn.getBaseAttributes=o,fn.getAttributes=c;const g=GA();function t(u){return u in g.PDF_ROLE_TO_HTML_ROLE}function n(u){return"children"in u}function a(u){return n(u)?u.children.length===1&&0 in u.children&&"id"in u.children[0]:!1}function r(u){const d={};if(n(u)){const{role:f}=u,m=f.match(g.HEADING_PATTERN);if(m)d.role="heading",d["aria-level"]=Number(m[1]);else if(t(f)){const y=g.PDF_ROLE_TO_HTML_ROLE[f];y&&(d.role=y)}}return d}function o(u){const d={};if(n(u)){if(u.alt!==void 0&&(d["aria-label"]=u.alt),u.lang!==void 0&&(d.lang=u.lang),a(u)){const[f]=u.children;if(f){const m=o(f);return Object.assign(Object.assign({},d),m)}}}else"id"in u&&(d["aria-owns"]=u.id);return d}function c(u){return u?Object.assign(Object.assign({},r(u)),o(u)):null}return fn}var wm;function XA(){if(wm)return So;wm=1,Object.defineProperty(So,"__esModule",{value:!0}),So.default=a;const g=wi(),t=ce(),n=VA();function a({className:r,node:o}){const c=(0,t.useMemo)(()=>(0,n.getAttributes)(o),[o]),u=(0,t.useMemo)(()=>!(0,n.isStructTreeNode)(o)||(0,n.isStructTreeNodeWithOnlyContentChild)(o)?null:o.children.map((d,f)=>(0,g.jsx)(a,{node:d},f)),[o]);return(0,g.jsx)("span",Object.assign({className:r},c,{children:u}))}return So}var ya={},Tm;function qr(){if(Tm)return ya;Tm=1;var g=ya&&ya.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ya,"__esModule",{value:!0}),ya.default=a;const t=ce(),n=g(yy());function a(){return(0,t.useContext)(n.default)}return ya}var xm;function YA(){if(xm)return ma;xm=1;var g=ma&&ma.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(ma,"__esModule",{value:!0}),ma.default=m;const t=wi(),n=ce(),a=g(Ta()),r=g(Li()),o=g($n()),c=g(XA()),u=g(qr()),d=g(Ca()),f=Xi();function m(){const y=(0,u.default)();(0,r.default)(y,"Unable to find Page context.");const{onGetStructTreeError:v,onGetStructTreeSuccess:_}=y,[S,A]=(0,d.default)(),{value:w,error:T}=S,{customTextRenderer:M,page:C}=y;function O(){w&&_&&_(w)}function N(){T&&((0,o.default)(!1,T.toString()),v&&v(T))}return(0,n.useEffect)(function(){A({type:"RESET"})},[A,C]),(0,n.useEffect)(function(){if(M||!C)return;const q=(0,a.default)(C.getStructTree()),Q=q;return q.promise.then(B=>{A({type:"RESOLVE",value:B})}).catch(B=>{A({type:"REJECT",error:B})}),()=>(0,f.cancelRunningTask)(Q)},[M,C,A]),(0,n.useEffect)(()=>{if(w!==void 0){if(w===!1){N();return}O()}},[w]),w?(0,t.jsx)(c.default,{className:"react-pdf__Page__structTree structTree",node:w}):null}return ma}var Cm;function KA(){if(Cm)return vi;Cm=1;var g=vi&&vi.__createBinding||(Object.create?function(A,w,T,M){M===void 0&&(M=T);var C=Object.getOwnPropertyDescriptor(w,T);(!C||("get"in C?!w.__esModule:C.writable||C.configurable))&&(C={enumerable:!0,get:function(){return w[T]}}),Object.defineProperty(A,M,C)}:function(A,w,T,M){M===void 0&&(M=T),A[M]=w[T]}),t=vi&&vi.__setModuleDefault||(Object.create?function(A,w){Object.defineProperty(A,"default",{enumerable:!0,value:w})}:function(A,w){A.default=w}),n=vi&&vi.__importStar||function(A){if(A&&A.__esModule)return A;var w={};if(A!=null)for(var T in A)T!=="default"&&Object.prototype.hasOwnProperty.call(A,T)&&g(w,A,T);return t(w,A),w},a=vi&&vi.__importDefault||function(A){return A&&A.__esModule?A:{default:A}};Object.defineProperty(vi,"__esModule",{value:!0}),vi.default=S;const r=wi(),o=ce(),c=a(my()),u=a(Li()),d=a($n()),f=n(Ir),m=a(YA()),y=a(qr()),v=Xi(),_=f.AnnotationMode;function S(A){const w=(0,y.default)();(0,u.default)(w,"Unable to find Page context.");const T=Object.assign(Object.assign({},w),A),{_className:M,canvasBackground:C,devicePixelRatio:O=(0,v.getDevicePixelRatio)(),onRenderError:N,onRenderSuccess:U,page:q,renderForms:Q,renderTextLayer:B,rotate:Z,scale:$}=T,{canvasRef:J}=A;(0,u.default)(q,"Attempted to render page canvas, but no page was specified.");const it=(0,o.useRef)(null);function ht(){q&&U&&U((0,v.makePageCallback)(q,$))}function st(nt){(0,v.isCancelException)(nt)||((0,d.default)(!1,nt.toString()),N&&N(nt))}const k=(0,o.useMemo)(()=>q.getViewport({scale:$*O,rotation:Z}),[O,q,Z,$]),P=(0,o.useMemo)(()=>q.getViewport({scale:$,rotation:Z}),[q,Z,$]);(0,o.useEffect)(function(){if(!q)return;q.cleanup();const{current:x}=it;if(!x)return;x.width=k.width,x.height=k.height,x.style.width=`${Math.floor(P.width)}px`,x.style.height=`${Math.floor(P.height)}px`,x.style.visibility="hidden";const I={annotationMode:Q?_.ENABLE_FORMS:_.ENABLE,canvasContext:x.getContext("2d",{alpha:!1}),viewport:k};C&&(I.background=C);const W=q.render(I),X=W;return W.promise.then(()=>{x.style.visibility="",ht()}).catch(st),()=>(0,v.cancelRunningTask)(X)},[C,q,Q,k,P]);const Y=(0,o.useCallback)(()=>{const{current:nt}=it;nt&&(nt.width=0,nt.height=0)},[]);return(0,o.useEffect)(()=>Y,[Y]),(0,r.jsx)("canvas",{className:`${M}__canvas`,dir:"ltr",ref:(0,c.default)(J,it),style:{display:"block",userSelect:"none"},children:B?(0,r.jsx)(m.default,{}):null})}return vi}var bi={},Rm;function $A(){if(Rm)return bi;Rm=1;var g=bi&&bi.__createBinding||(Object.create?function(w,T,M,C){C===void 0&&(C=M);var O=Object.getOwnPropertyDescriptor(T,M);(!O||("get"in O?!T.__esModule:O.writable||O.configurable))&&(O={enumerable:!0,get:function(){return T[M]}}),Object.defineProperty(w,C,O)}:function(w,T,M,C){C===void 0&&(C=M),w[C]=T[M]}),t=bi&&bi.__setModuleDefault||(Object.create?function(w,T){Object.defineProperty(w,"default",{enumerable:!0,value:T})}:function(w,T){w.default=T}),n=bi&&bi.__importStar||function(w){if(w&&w.__esModule)return w;var T={};if(w!=null)for(var M in w)M!=="default"&&Object.prototype.hasOwnProperty.call(w,M)&&g(T,w,M);return t(T,w),T},a=bi&&bi.__importDefault||function(w){return w&&w.__esModule?w:{default:w}};Object.defineProperty(bi,"__esModule",{value:!0}),bi.default=A;const r=wi(),o=ce(),c=a(Ta()),u=a(xa()),d=a(Li()),f=a($n()),m=n(Ir),y=a(qr()),v=a(Ca()),_=Xi();function S(w){return"str"in w}function A(){const w=(0,y.default)();(0,d.default)(w,"Unable to find Page context.");const{customTextRenderer:T,onGetTextError:M,onGetTextSuccess:C,onRenderTextLayerError:O,onRenderTextLayerSuccess:N,page:U,pageIndex:q,pageNumber:Q,rotate:B,scale:Z}=w;(0,d.default)(U,"Attempted to load page text content, but no page was specified.");const[$,J]=(0,v.default)(),{value:it,error:ht}=$,st=(0,o.useRef)(null);(0,f.default)(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function k(){it&&C&&C(it)}function P(){ht&&((0,f.default)(!1,ht.toString()),M&&M(ht))}(0,o.useEffect)(function(){J({type:"RESET"})},[U,J]),(0,o.useEffect)(function(){if(!U)return;const tt=(0,c.default)(U.getTextContent()),ot=tt;return tt.promise.then(et=>{J({type:"RESOLVE",value:et})}).catch(et=>{J({type:"REJECT",error:et})}),()=>(0,_.cancelRunningTask)(ot)},[U,J]),(0,o.useEffect)(()=>{if(it!==void 0){if(it===!1){P();return}k()}},[it]);const Y=(0,o.useCallback)(()=>{N&&N()},[N]),nt=(0,o.useCallback)(X=>{(0,f.default)(!1,X.toString()),O&&O(X)},[O]);function x(){const X=st.current;X&&X.classList.add("selecting")}function I(){const X=st.current;X&&X.classList.remove("selecting")}const W=(0,o.useMemo)(()=>U.getViewport({scale:Z,rotation:B}),[U,B,Z]);return(0,o.useLayoutEffect)(function(){if(!U||!it)return;const{current:tt}=st;if(!tt)return;tt.innerHTML="";const ot=U.streamTextContent({includeMarkedContent:!0}),et={container:tt,textContentSource:ot,viewport:W},ct=new m.TextLayer(et),bt=ct;return ct.render().then(()=>{const kt=document.createElement("div");kt.className="endOfContent",tt.append(kt);const Xe=tt.querySelectorAll('[role="presentation"]');if(T){let Ye=0;it.items.forEach((Fe,ki)=>{if(!S(Fe))return;const Oe=Xe[Ye];if(!Oe)return;const ue=T(Object.assign({pageIndex:q,pageNumber:Q,itemIndex:ki},Fe));Oe.innerHTML=ue,Ye+=Fe.str&&Fe.hasEOL?2:1})}Y()}).catch(nt),()=>(0,_.cancelRunningTask)(bt)},[T,nt,Y,U,q,Q,it,W]),(0,r.jsx)("div",{className:(0,u.default)("react-pdf__Page__textContent","textLayer"),onMouseUp:I,onMouseDown:x,ref:st})}return bi}var _i={},Mm;function QA(){if(Mm)return _i;Mm=1;var g=_i&&_i.__createBinding||(Object.create?function(w,T,M,C){C===void 0&&(C=M);var O=Object.getOwnPropertyDescriptor(T,M);(!O||("get"in O?!T.__esModule:O.writable||O.configurable))&&(O={enumerable:!0,get:function(){return T[M]}}),Object.defineProperty(w,C,O)}:function(w,T,M,C){C===void 0&&(C=M),w[C]=T[M]}),t=_i&&_i.__setModuleDefault||(Object.create?function(w,T){Object.defineProperty(w,"default",{enumerable:!0,value:T})}:function(w,T){w.default=T}),n=_i&&_i.__importStar||function(w){if(w&&w.__esModule)return w;var T={};if(w!=null)for(var M in w)M!=="default"&&Object.prototype.hasOwnProperty.call(w,M)&&g(T,w,M);return t(T,w),T},a=_i&&_i.__importDefault||function(w){return w&&w.__esModule?w:{default:w}};Object.defineProperty(_i,"__esModule",{value:!0}),_i.default=A;const r=wi(),o=ce(),c=a(Ta()),u=a(xa()),d=a(Li()),f=a($n()),m=n(Ir),y=a(Ra()),v=a(qr()),_=a(Ca()),S=Xi();function A(){const w=(0,y.default)(),T=(0,v.default)();(0,d.default)(T,"Unable to find Page context.");const M=Object.assign(Object.assign({},w),T),{imageResourcesPath:C,linkService:O,onGetAnnotationsError:N,onGetAnnotationsSuccess:U,onRenderAnnotationLayerError:q,onRenderAnnotationLayerSuccess:Q,page:B,pdf:Z,renderForms:$,rotate:J,scale:it=1}=M;(0,d.default)(Z,"Attempted to load page annotations, but no document was specified. Wrap <Page /> in a <Document /> or pass explicit `pdf` prop."),(0,d.default)(B,"Attempted to load page annotations, but no page was specified."),(0,d.default)(O,"Attempted to load page annotations, but no linkService was specified.");const[ht,st]=(0,_.default)(),{value:k,error:P}=ht,Y=(0,o.useRef)(null);(0,f.default)(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function nt(){k&&U&&U(k)}function x(){P&&((0,f.default)(!1,P.toString()),N&&N(P))}(0,o.useEffect)(function(){st({type:"RESET"})},[st,B]),(0,o.useEffect)(function(){if(!B)return;const ot=(0,c.default)(B.getAnnotations()),et=ot;return ot.promise.then(ct=>{st({type:"RESOLVE",value:ct})}).catch(ct=>{st({type:"REJECT",error:ct})}),()=>{(0,S.cancelRunningTask)(et)}},[st,B]),(0,o.useEffect)(()=>{if(k!==void 0){if(k===!1){x();return}nt()}},[k]);function I(){Q&&Q()}function W(tt){(0,f.default)(!1,`${tt}`),q&&q(tt)}const X=(0,o.useMemo)(()=>B.getViewport({scale:it,rotation:J}),[B,J,it]);return(0,o.useEffect)(function(){if(!Z||!B||!O||!k)return;const{current:ot}=Y;if(!ot)return;const et=X.clone({dontFlip:!0}),ct={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,div:ot,l10n:null,page:B,structTreeLayer:null,viewport:et},bt={annotations:k,annotationStorage:Z.annotationStorage,div:ot,imageResourcesPath:C,linkService:O,page:B,renderForms:$,viewport:et};ot.innerHTML="";try{new m.AnnotationLayer(ct).render(bt),I()}catch(kt){W(kt)}return()=>{}},[k,C,O,B,Z,$,X]),(0,r.jsx)("div",{className:(0,u.default)("react-pdf__Page__annotations","annotationLayer"),ref:Y})}return _i}var Dm;function vy(){if(Dm)return qn;Dm=1;var g=qn&&qn.__rest||function(O,N){var U={};for(var q in O)Object.prototype.hasOwnProperty.call(O,q)&&N.indexOf(q)<0&&(U[q]=O[q]);if(O!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Q=0,q=Object.getOwnPropertySymbols(O);Q<q.length;Q++)N.indexOf(q[Q])<0&&Object.prototype.propertyIsEnumerable.call(O,q[Q])&&(U[q[Q]]=O[q[Q]]);return U},t=qn&&qn.__importDefault||function(O){return O&&O.__esModule?O:{default:O}};Object.defineProperty(qn,"__esModule",{value:!0}),qn.default=C;const n=wi(),a=ce(),r=t(Ta()),o=t(Nh()),c=t(xa()),u=t(my()),d=t(Li()),f=t($n()),m=t(yy()),y=t(dy()),v=t(KA()),_=t($A()),S=t(QA()),A=Xi(),w=t(Ra()),T=t(Ca()),M=1;function C(O){const N=(0,w.default)(),U=Object.assign(Object.assign({},N),O),{_className:q="react-pdf__Page",_enableRegisterUnregisterPage:Q=!0,canvasBackground:B,canvasRef:Z,children:$,className:J,customRenderer:it,customTextRenderer:ht,devicePixelRatio:st,error:k="Failed to load the page.",height:P,inputRef:Y,loading:nt="Loading page",noData:x="No page specified.",onGetAnnotationsError:I,onGetAnnotationsSuccess:W,onGetStructTreeError:X,onGetStructTreeSuccess:tt,onGetTextError:ot,onGetTextSuccess:et,onLoadError:ct,onLoadSuccess:bt,onRenderAnnotationLayerError:kt,onRenderAnnotationLayerSuccess:Xe,onRenderError:Ye,onRenderSuccess:Fe,onRenderTextLayerError:ki,onRenderTextLayerSuccess:Oe,pageIndex:ue,pageNumber:Ti,pdf:Kt,registerPage:Ni,renderAnnotationLayer:ie=!0,renderForms:Yi=!1,renderMode:Ke="canvas",renderTextLayer:xi=!0,rotate:Pi,scale:ji=M,unregisterPage:vn,width:si}=U,he=g(U,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[ai,Vt]=(0,T.default)(),{value:Ut,error:Qn}=ai,bn=(0,a.useRef)(null);(0,d.default)(Kt,"Attempted to load a page, but no document was specified. Wrap <Page /> in a <Document /> or pass explicit `pdf` prop.");const de=(0,A.isProvided)(Ti)?Ti-1:ue??null,Le=Ti??((0,A.isProvided)(ue)?ue+1:null),Se=Pi??(Ut?Ut.rotate:null),fe=(0,a.useMemo)(()=>{if(!Ut)return null;let Fi=1;const Zn=ji??M;if(si||P){const Ts=Ut.getViewport({scale:1,rotation:Se});si?Fi=si/Ts.width:P&&(Fi=P/Ts.height)}return Zn*Fi},[P,Ut,Se,ji,si]);(0,a.useEffect)(function(){return()=>{(0,A.isProvided)(de)&&Q&&vn&&vn(de)}},[Q,Kt,de,vn]);function Ki(){if(bt){if(!Ut||!fe)return;bt((0,A.makePageCallback)(Ut,fe))}if(Q&&Ni){if(!(0,A.isProvided)(de)||!bn.current)return;Ni(de,bn.current)}}function ne(){Qn&&((0,f.default)(!1,Qn.toString()),ct&&ct(Qn))}(0,a.useEffect)(function(){Vt({type:"RESET"})},[Vt,Kt,de]),(0,a.useEffect)(function(){if(!Kt||!Le)return;const Zn=(0,r.default)(Kt.getPage(Le)),Ts=Zn;return Zn.promise.then(li=>{Vt({type:"RESOLVE",value:li})}).catch(li=>{Vt({type:"REJECT",error:li})}),()=>(0,A.cancelRunningTask)(Ts)},[Vt,Kt,Le]),(0,a.useEffect)(()=>{if(Ut!==void 0){if(Ut===!1){ne();return}Ki()}},[Ut,fe]);const Ee=(0,a.useMemo)(()=>Ut&&(0,A.isProvided)(de)&&Le&&(0,A.isProvided)(Se)&&(0,A.isProvided)(fe)?{_className:q,canvasBackground:B,customTextRenderer:ht,devicePixelRatio:st,onGetAnnotationsError:I,onGetAnnotationsSuccess:W,onGetStructTreeError:X,onGetStructTreeSuccess:tt,onGetTextError:ot,onGetTextSuccess:et,onRenderAnnotationLayerError:kt,onRenderAnnotationLayerSuccess:Xe,onRenderError:Ye,onRenderSuccess:Fe,onRenderTextLayerError:ki,onRenderTextLayerSuccess:Oe,page:Ut,pageIndex:de,pageNumber:Le,renderForms:Yi,renderTextLayer:xi,rotate:Se,scale:fe}:null,[q,B,ht,st,I,W,X,tt,ot,et,kt,Xe,Ye,Fe,ki,Oe,Ut,de,Le,Yi,xi,Se,fe]),He=(0,a.useMemo)(()=>(0,o.default)(he,()=>Ut&&(fe?(0,A.makePageCallback)(Ut,fe):void 0)),[he,Ut,fe]),ke=`${de}@${fe}/${Se}`;function ri(){switch(Ke){case"custom":return(0,d.default)(it,'renderMode was set to "custom", but no customRenderer was passed.'),(0,n.jsx)(it,{},`${ke}_custom`);case"none":return null;case"canvas":default:return(0,n.jsx)(v.default,{canvasRef:Z},`${ke}_canvas`)}}function Wn(){return xi?(0,n.jsx)(_.default,{},`${ke}_text`):null}function Gr(){return ie?(0,n.jsx)(S.default,{},`${ke}_annotations`):null}function Vr(){return(0,n.jsxs)(m.default.Provider,{value:Ee,children:[ri(),Wn(),Gr(),$]})}function Ma(){return Le?Kt===null||Ut===void 0||Ut===null?(0,n.jsx)(y.default,{type:"loading",children:typeof nt=="function"?nt():nt}):Kt===!1||Ut===!1?(0,n.jsx)(y.default,{type:"error",children:typeof k=="function"?k():k}):Vr():(0,n.jsx)(y.default,{type:"no-data",children:typeof x=="function"?x():x})}return(0,n.jsx)("div",Object.assign({className:(0,c.default)(q,J),"data-page-number":Le,ref:(0,u.default)(Y,bn),style:{"--scale-factor":`${fe}`,backgroundColor:B||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},He,{children:Ma()}))}return qn}var Gn={},Om;function WA(){if(Om)return Gn;Om=1;var g=Gn&&Gn.__rest||function(f,m){var y={};for(var v in f)Object.prototype.hasOwnProperty.call(f,v)&&m.indexOf(v)<0&&(y[v]=f[v]);if(f!=null&&typeof Object.getOwnPropertySymbols=="function")for(var _=0,v=Object.getOwnPropertySymbols(f);_<v.length;_++)m.indexOf(v[_])<0&&Object.prototype.propertyIsEnumerable.call(f,v[_])&&(y[v[_]]=f[v[_]]);return y},t=Gn&&Gn.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(Gn,"__esModule",{value:!0}),Gn.default=d;const n=wi(),a=t(xa()),r=t(Li()),o=t(vy()),c=Xi(),u=t(Ra());function d(f){const m=(0,u.default)(),y=Object.assign(Object.assign({},m),f),{className:v,linkService:_,onItemClick:S,pageIndex:A,pageNumber:w,pdf:T}=y;(0,r.default)(T,"Attempted to load a thumbnail, but no document was specified. Wrap <Thumbnail /> in a <Document /> or pass explicit `pdf` prop.");const M=(0,c.isProvided)(w)?w-1:A??null,C=w??((0,c.isProvided)(A)?A+1:null);function O(Q){Q.preventDefault(),!(!(0,c.isProvided)(M)||!C)&&((0,r.default)(S||_,"Either onItemClick callback or linkService must be defined in order to navigate to an outline item."),S?S({pageIndex:M,pageNumber:C}):_&&_.goToPage(C))}const{className:N,onItemClick:U}=f,q=g(f,["className","onItemClick"]);return(0,n.jsx)("a",{className:(0,a.default)("react-pdf__Thumbnail",v),href:C?"#":void 0,onClick:O,children:(0,n.jsx)(o.default,Object.assign({},q,{_className:"react-pdf__Thumbnail__page",_enableRegisterUnregisterPage:!1,renderAnnotationLayer:!1,renderTextLayer:!1}))})}return Gn}var Lm;function ZA(){if(Lm)return Lt;Lm=1;var g=Lt&&Lt.__createBinding||(Object.create?function(S,A,w,T){T===void 0&&(T=w);var M=Object.getOwnPropertyDescriptor(A,w);(!M||("get"in M?!A.__esModule:M.writable||M.configurable))&&(M={enumerable:!0,get:function(){return A[w]}}),Object.defineProperty(S,T,M)}:function(S,A,w,T){T===void 0&&(T=w),S[T]=A[w]}),t=Lt&&Lt.__setModuleDefault||(Object.create?function(S,A){Object.defineProperty(S,"default",{enumerable:!0,value:A})}:function(S,A){S.default=A}),n=Lt&&Lt.__importStar||function(S){if(S&&S.__esModule)return S;var A={};if(S!=null)for(var w in S)w!=="default"&&Object.prototype.hasOwnProperty.call(S,w)&&g(A,S,w);return t(A,S),A},a=Lt&&Lt.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(Lt,"__esModule",{value:!0}),Lt.PasswordResponses=Lt.usePageContext=Lt.useOutlineContext=Lt.useDocumentContext=Lt.Thumbnail=Lt.Page=Lt.Outline=Lt.Document=Lt.pdfjs=void 0;const r=n(Ir);Lt.pdfjs=r;const o=a(zA());Lt.Document=o.default;const c=a(qA());Lt.Outline=c.default;const u=a(vy());Lt.Page=u.default;const d=a(WA());Lt.Thumbnail=d.default;const f=a(Ra());Lt.useDocumentContext=f.default;const m=a(py());Lt.useOutlineContext=m.default;const y=a(qr());Lt.usePageContext=y.default;const v=a(fy());return Lt.PasswordResponses=v.default,(0,Xi().displayWorkerWarning)(),r.GlobalWorkerOptions.workerSrc="pdf.worker.mjs",Lt}var km;function JA(){if(km)return da;km=1;var g=da&&da.__awaiter||function(a,r,o,c){function u(d){return d instanceof o?d:new o(function(f){f(d)})}return new(o||(o=Promise))(function(d,f){function m(_){try{v(c.next(_))}catch(S){f(S)}}function y(_){try{v(c.throw(_))}catch(S){f(S)}}function v(_){_.done?d(_.value):u(_.value).then(m,y)}v((c=c.apply(a,r||[])).next())})};Object.defineProperty(da,"__esModule",{value:!0});const t=ZA();t.pdfjs.GlobalWorkerOptions.workerSrc=`//cdnjs.cloudflare.com/ajax/libs/pdf.js/${t.pdfjs.version}/pdf.worker.mjs`;const n=a=>g(void 0,void 0,void 0,function*(){const r=URL.createObjectURL(a),o=t.pdfjs.getDocument(r);let c="";try{const u=yield o.promise,d=u.numPages;for(let f=1;f<=d;f++){const v=(yield(yield u.getPage(f)).getTextContent()).items.map(_=>"str"in _?_.str:"").join(" ");c+=v}}catch(u){throw new Error(`Failed to extract text from PDF: ${u}`)}finally{URL.revokeObjectURL(r),o.destroy()}return c});return da.default=n,da}var tS=JA();const eS=Nm(tS),gn=Gb((g,t)=>({dictionary:new Set,setDictionary:n=>g({dictionary:new Set(n)}),loading:!1,setLoading:n=>g({loading:n}),lookupLoading:new Set,addLookupLoading:n=>g(a=>{const r=new Set(a.lookupLoading);return r.add(n),{lookupLoading:r}}),removeLookupLoading:n=>g(a=>{const r=new Set(a.lookupLoading);return r.delete(n),{lookupLoading:r}}),expandedWords:new Set,openLookup:async n=>{const{expandedWords:a,lookupData:r,setLookupData:o,addLookupLoading:c,removeLookupLoading:u}=t();if(a.has(n))return;const d=new Set(a);if(d.add(n),g({expandedWords:d}),!r[n]){c(n);try{const y=(await(await fetch(`https://api.allorigins.win/raw?url=${encodeURIComponent(`https://api.excelapi.org/dictionary/enja?word=${n}`)}`,{headers:{Accept:"text/plain","User-Agent":"Mozilla/5.0"}})).text()).split("/").map(v=>v.trim()).filter(Boolean);o(n,y)}catch(f){console.error("Lookup failed:",f),o(n,[])}finally{u(n)}}},closeLookup:n=>{const{expandedWords:a}=t(),r=new Set(a);r.delete(n),g({expandedWords:r})},lookupData:{},setLookupData:(n,a)=>g(r=>({lookupData:{...r.lookupData,[n]:a}})),extractText:async(n,a)=>{const{dictionary:r,setLoading:o}=t();o(!0);try{let c=await eS(n);c=c.toLocaleLowerCase().replace(/[^a-z0-9\s]/g," ");let u=c.split(/\s+/).filter(Boolean);u=u.filter(f=>!a.includes(f)&&r.has(f)&&!/^\d+$/.test(f)&&f.length>3);const d=new Map;return u.forEach(f=>{d.set(f,(d.get(f)||0)+1)}),Object.fromEntries(d)}catch(c){return console.error("Text extraction failed",c),{}}finally{o(!1)}}})),iS=Ub.stopwords;function nS(){const[g,t]=Nr.useState(null),[n,a]=Nr.useState({}),r=gn(A=>A.dictionary),o=gn(A=>A.setDictionary),c=Object.keys(n).length,u=gn(A=>A.loading),d=gn(A=>A.lookupLoading),f=gn(A=>A.expandedWords),m=gn(A=>A.lookupData),y=gn(A=>A.openLookup),v=gn(A=>A.closeLookup),_=gn(A=>A.extractText);Nr.useEffect(()=>{async function A(){try{const w=await fetch("/pdf-analyzer/dictionary.json");if(!w.ok)throw new Error("Failed to load dictionary");const T=await w.json();o(T.dictionary)}catch(w){console.error("Failed to load dictionary:",w)}}A()},[o]);const S=async()=>{if(!g)return;const A=await _(g,iS);a(A)};return Tt.jsxs("div",{className:"upload-container",children:[Tt.jsx("h2",{children:"Personal Dictionary"}),Tt.jsx("p",{children:"Upload a PDF file and get all the words"}),Tt.jsxs("div",{className:"drop-zone",onDrop:A=>{A.preventDefault(),A.dataTransfer.files?.length&&t(A.dataTransfer.files[0])},onDragOver:A=>A.preventDefault(),onClick:()=>document.getElementById("fileInput")?.click(),children:[Tt.jsx("input",{id:"fileInput",type:"file",accept:"application/pdf",onChange:A=>{A.target.files?.length&&t(A.target.files[0])},style:{display:"none"}}),Tt.jsx("button",{className:"upload-btn",children:g?"Change PDF File":"Select PDF File"}),Tt.jsx("p",{className:"small-text",children:"or drag and drop here"})]}),Tt.jsx("button",{className:"process-btn",onClick:S,disabled:!g||u||r.size===0,children:u?"Processing...":g?Tt.jsxs(Tt.Fragment,{children:["Process ",Tt.jsx("strong",{children:g.name})]}):"Process PDF"}),Tt.jsxs("div",{className:"results",children:[c>0&&Tt.jsxs("p",{children:[Tt.jsx("strong",{children:"Unique words:"})," ",c]}),c===0&&!u?"No data yet.":Tt.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",marginTop:"1rem"},children:[Tt.jsx("thead",{children:Tt.jsxs("tr",{children:[Tt.jsx("th",{style:{textAlign:"left",borderBottom:"2px solid #ccc",padding:"8px"},children:"Word"}),Tt.jsx("th",{style:{textAlign:"right",borderBottom:"2px solid #ccc",padding:"8px"},children:"Count"})]})}),Tt.jsx("tbody",{children:Object.entries(n).map(([A,w],T)=>Tt.jsxs(Tt.Fragment,{children:[Tt.jsxs("tr",{style:{backgroundColor:T%2===0?"#f9f9f9":"#ffffff"},children:[Tt.jsxs("td",{style:{padding:"8px",display:"flex",alignItems:"center",gap:"6px"},children:[Tt.jsx("button",{style:{padding:"2px 6px",fontSize:"0.8rem",cursor:"pointer",background:"#007bff",color:"white",border:"none",borderRadius:"3px",width:"70px",textAlign:"center"},onClick:()=>f.has(A)?v(A):y(A),children:f.has(A)?"Close":"Lookup"}),Tt.jsx("span",{children:A}),d.has(A)&&Tt.jsx("span",{style:{marginLeft:"8px",fontSize:"0.8rem",color:"#666"},children:"Loading..."})]}),Tt.jsx("td",{style:{padding:"8px",textAlign:"right"},children:w})]},`${A}-row`),f.has(A)&&Tt.jsx("tr",{children:Tt.jsxs("td",{colSpan:2,style:{padding:"8px",background:"#eef"},children:[m[A]&&m[A].length>0&&Tt.jsxs("div",{children:[Tt.jsx("strong",{children:A}),Tt.jsx("ul",{children:m[A].map((M,C)=>Tt.jsx("li",{children:M},C))})]}),m[A]&&m[A].length===0&&"No results found."]})},`${A}-expanded`)]}))})]})]})]})}function sS(){return Tt.jsx(nS,{})}Hb.createRoot(document.getElementById("root")).render(Tt.jsx(Nr.StrictMode,{children:Tt.jsx(sS,{})}));
